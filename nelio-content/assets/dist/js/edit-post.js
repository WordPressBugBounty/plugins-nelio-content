(()=>{var e,t={4396:(e,t)=>{"use strict";function n(e){return e}t.L8=void 0,t.L8=function(e){return e?function(t){return e(t),t}:n}},6790:(e,t,n)=>{"use strict";n.r(t),n.d(t,{editPost:()=>s});var r={};n.r(r),n.d(r,{getAuthorId:()=>X,getAutoShareEndMode:()=>se,getAutoShareEndModeDuration:()=>Oe,getAutoShareEndModes:()=>De,getAutomationSources:()=>ce,getContent:()=>z,getDate:()=>W,getDeletingMessageIds:()=>Ge,getEditingReference:()=>xe,getEditorialCommentInputValue:()=>D,getExcerpt:()=>H,getExternalFeaturedImageAlt:()=>G,getExternalFeaturedImageAltField:()=>j,getExternalFeaturedImageUrl:()=>U,getExternalFeaturedImageUrlField:()=>B,getExternalFeaturedImageView:()=>F,getFeaturedImageId:()=>ee,getFeaturedImageSrc:()=>te,getFollowers:()=>Z,getImages:()=>re,getNetworkImageId:()=>ue,getNetworkImageIds:()=>le,getOverallPostQualityStatus:()=>ge,getPanelStatuses:()=>Ce,getPermalink:()=>$,getPermalinkTemplate:()=>J,getPost:()=>K,getPostId:()=>V,getPostQualitySettings:()=>fe,getPostType:()=>q,getQualityCheckRationale:()=>he,getQualityCheckStatus:()=>Ee,getQualityCheckType:()=>_e,getQualityCheckTypes:()=>ye,getQueryArgs:()=>ie,getReferenceByUrl:()=>Te,getSeries:()=>de,getStatus:()=>ne,getSuggestedReferenceUrl:()=>Ie,getSuggestedReferences:()=>be,getTaskPresetLoaderState:()=>qe,getTaskPresetSelection:()=>Ve,getTerms:()=>oe,getTitle:()=>Y,isAutoShareEnabled:()=>ae,isClassicEditor:()=>we,isClearingTimeline:()=>Fe,isDeletingEditorialComment:()=>O,isEditorialTaskBeingDeleted:()=>je,isEditorialTaskBeingSynched:()=>Qe,isElementorEditor:()=>Re,isGeneratingTimeline:()=>Le,isPanelOpen:()=>Pe,isPostReady:()=>Q,isPremiumItemBeingDeleted:()=>ve,isQualityAnalysisFullyIntegrated:()=>pe,isReferenceEditorVisible:()=>Ae,isReferenceLoading:()=>Se,isReferenceSaving:()=>ke,isRetrievingEditorialComments:()=>L,isRetrievingEditorialTasks:()=>Ke,isRetrievingSocialMessages:()=>Be,isSocialMessageBeingDeleted:()=>Ue,isSynchingEditorialComment:()=>M,isTimelineBusy:()=>Me,shouldAuthorBeFollower:()=>Ne});var o={};n.r(o),n.d(o,{addQualityCheckType:()=>It,cancelEditionOfExternalFeaturedImage:()=>Xe,closeReferenceEditor:()=>Lt,discardReference:()=>Ot,doOpenReferenceEditor:()=>Gt,editExternalFeaturedImage:()=>We,enableAutoShare:()=>Et,includeAuthorInFollowers:()=>Vt,markAsLoadingPostItems:()=>bt,markEditorialCommentAsDeleting:()=>ze,markEditorialCommentAsSynching:()=>He,markEditorialTaskAsDeleting:()=>Xt,markEditorialTaskAsSynching:()=>Wt,markPremiumItemAsDeleting:()=>xt,markQualityAnalysisAsFullyIntegrated:()=>St,markReferenceAsLoading:()=>Ft,markReferenceAsSaving:()=>Ut,markSocialMessageAsDeleting:()=>Yt,markTimelineAsClearing:()=>zt,markTimelineAsGenerating:()=>Ht,openTaskPresetLoader:()=>$t,receiveReferences:()=>Ct,removeCustomField:()=>nt,removeExternalFeaturedImage:()=>Je,removeFeaturedImage:()=>ft,removeQualityCheckType:()=>wt,selectTaskPresets:()=>Jt,setAuthor:()=>lt,setAutoShareEndMode:()=>ht,setAutoShareEndModes:()=>qt,setAutomationSources:()=>vt,setContent:()=>st,setCustomField:()=>tt,setDate:()=>ct,setEditorToClassic:()=>Qt,setEditorToElementor:()=>Kt,setEditorialCommentInputValue:()=>Ye,setExcerpt:()=>at,setExternalFeaturedImage:()=>$e,setExternalFeaturedImageAltField:()=>et,setExternalFeaturedImageUrlField:()=>Ze,setFeaturedImage:()=>mt,setFollowers:()=>dt,setNetworkImage:()=>_t,setPanelSettings:()=>Bt,setPermalink:()=>ut,setPost:()=>rt,setPostId:()=>ot,setPostQualitySettings:()=>kt,setQueryArgs:()=>yt,setSeries:()=>Tt,setStatus:()=>pt,setSuggestedReferenceUrl:()=>Pt,setTaskPresetsState:()=>Zt,setTerms:()=>gt,setTitle:()=>it,suggestReference:()=>Nt,suggestReferences:()=>Dt,togglePanel:()=>jt,updateEditingReference:()=>Mt,updateQualityCheckItem:()=>At,updateQualityCheckSettings:()=>Rt});var i={};n.r(i),n.d(i,{clearTimeline:()=>Vn,createEditorialComment:()=>an,deleteEditorialComment:()=>sn,deleteEditorialTask:()=>rr,deletePremiumItem:()=>En,deleteSocialMessage:()=>qn,generateTimeline:()=>Kn,instantiatePresets:()=>nr,isElementor:()=>$n,loadPostItems:()=>dn,markTaskAsCompleted:()=>tr,openReferenceEditor:()=>yn,saveAndCloseEditingReference:()=>Tn,savePostAndGenerateTimeline:()=>Qn,saveReference:()=>bn,updateDatesInPostRelatedItems:()=>mn});var a={};n.r(a),n.d(a,{getReferenceByUrl:()=>ur});var s={};n.r(s),n.d(s,{EditorialComments:()=>Lr,EditorialTasks:()=>to,ExternalFeaturedImage:()=>co,Notifications:()=>mo,QualityAnalysis:()=>Fo,QualityAnalysisSummary:()=>Mo,ReferenceEditor:()=>Eo,References:()=>Oo,SocialMediaMetabox:()=>_i,SocialMediaSidebar:()=>wi,SocialMediaSummary:()=>Ti,SocialMediaTools:()=>Ri,deregisterQualityCheck:()=>Di,getDisabledProfiles:()=>Rn,onDeletePremiumItem:()=>Bi,processHtml:()=>Cn,registerQualityCheck:()=>Ni,store:()=>pr,updatePostQualitySettings:()=>Pi,updateQualityCheckSettings:()=>Oi,useDisabledProfiles:()=>Gi,usePanelToggling:()=>Ui,withLoadingCheck:()=>Mr,withPostReadyCheck:()=>Or});const c=window.wp.data;function l(e,t){return(0,c.subscribe)(e,t)}function u(e,t){return(0,c.useSelect)(e,t)}function d(e){return(0,c.resolveSelect)(e)}const m=window.NelioContent.utils,f=window.lodash;var p=n(4396),g={comments:{synching:[],deleting:[],input:"",isRetrievingComments:!1},externalFeaturedImage:{view:"no-image",fields:{url:"",alt:""},imageUrl:void 0,imageAlt:""},post:{id:(0,p.L8)()(0),author:(0,p.L8)()(0),authorName:"",content:"",customFields:{},customPlaceholders:{},date:"",editLink:(0,p.L8)()(""),excerpt:"",followers:[],imageId:0,imageSrc:!1,isRewrite:!1,canBeRewritten:!1,images:[],networkImages:{},networkImageIds:{},isAutoShareEnabled:!1,permalink:(0,p.L8)()(""),permalinks:{},permalinkQueryArgs:[],permalinkTemplate:"",references:[],series:[],statistics:{engagement:{},pageviews:void 0},status:m.AUTO_DRAFT,statusName:"",taxonomies:{},thumbnailSrc:!1,title:"",type:m.POST,typeName:"",viewLink:(0,p.L8)()(""),autoShareEndMode:"never",automationSources:{useCustomSentences:!1,customSentences:[]}},postQuality:{checks:{},isFullyIntegrated:!1,settings:{allowedBads:1,allowedImprovables:2,unacceptableImprovables:4}},qualityCheckTypes:{},references:{byUrl:{},byType:{suggested:[]},status:{loading:[],saving:[]},editor:{isActive:!1},suggestedUrl:""},settings:{isClassicEditor:!1,isElementorEditor:!1,panels:{},shouldAuthorBeFollower:!1,autoShareEndModes:[]},social:{deleting:[],timelineStatus:"ready",isRetrievingSocialMessages:!1},tasks:{preset:void 0,synching:[],deleting:[],isRetrievingTasks:!1},premiumByType:{}},E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},E.apply(this,arguments)},h=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},v=function(){return v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v.apply(this,arguments)},y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},y.apply(this,arguments)};function _(e){void 0===e&&(e="");var t=e.match(/img[^>]*src="[^"]+"|img[^>]*src='[^']+'/gi)||[];return(0,f.uniq)(t.map((function(e){return e.replace(/.*src=.(.*)./,"$1")})).filter(m.isUrl))}var T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},T.apply(this,arguments)},b=function(){return b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},b.apply(this,arguments)},S=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},k=function(){return k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},k.apply(this,arguments)},A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A.apply(this,arguments)},x=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},I.apply(this,arguments)},w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},w.apply(this,arguments)},R=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C.apply(this,arguments)},P=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const N=(0,c.combineReducers)({comments:function(e,t){var n;return void 0===e&&(e=g.comments),null!==(n=function(e,t){switch(t.type){case"SET_EDITORIAL_COMMENT_INPUT_VALUE":return E(E({},e),{input:t.value});case"MARK_EDITORIAL_COMMENT_AS_SYNCHING":return E(E({},e),{synching:t.isSynching?h(h([],e.synching,!0),[t.commentId],!1):(0,f.without)(e.synching,t.commentId)});case"MARK_EDITORIAL_COMMENT_AS_DELETING":return E(E({},e),{deleting:t.isDeleting?h(h([],e.deleting,!0),[t.commentId],!1):(0,f.without)(e.deleting,t.commentId)});case"MARK_AS_LOADING_POST_ITEMS":return E(E({},e),{isRetrievingComments:t.isLoading})}}(e,t))&&void 0!==n?n:e},externalFeaturedImage:function(e,t){var n;return void 0===e&&(e=g.externalFeaturedImage),null!==(n=function(e,t){var n;switch(t.type){case"SET_EXTERNAL_FEATURED_IMAGE":return{view:"image",fields:{url:t.url,alt:t.altText},imageUrl:t.url,imageAlt:t.altText};case"REMOVE_EXTERNAL_FEATURED_IMAGE":return{view:"no-image",fields:{url:"",alt:""},imageUrl:void 0,imageAlt:""};case"SET_EXTERNAL_FEATURED_IMAGE_URL_FIELD":return v(v({},e),{fields:v(v({},e.fields),{url:t.url})});case"SET_EXTERNAL_FEATURED_IMAGE_ALT_FIELD":return v(v({},e),{fields:v(v({},e.fields),{alt:t.altText})});case"EDIT_EXTERNAL_FEATURED_IMAGE":return v(v({},e),{view:"edit-image"});case"CANCEL_EDITION_OF_EXTERNAL_FEATURED_IMAGE":return v(v({},e),{view:e.imageUrl?"image":"no-image",fields:{url:null!==(n=e.imageUrl)&&void 0!==n?n:"",alt:e.imageAlt}})}}(e,t))&&void 0!==n?n:e},post:function(e,t){var n;return void 0===e&&(e=g.post),null!==(n=function(e,t){var n,r,o,i,a,s;switch(t.type){case"SET_POST_ID":return e.id?e:y(y({},e),{id:e.id});case"SET_POST":var c=t.post,l=c.imageSrc,u=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(c,["imageSrc"]);return y(y(y({},g.post),u),{imageSrc:l||!1,images:_(null==u?void 0:u.content),automationSources:y(y({},g.post.automationSources),null==u?void 0:u.automationSources)});case"SET_QUERY_ARGS":return y(y({},e),{permalinkQueryArgs:t.args});case"SET_CUSTOM_FIELD":return y(y({},e),{customFields:(0,f.has)(e.customFields,t.key)?y(y({},e.customFields),(n={},n[t.key]=y(y({},e.customFields[t.key]),{value:t.value}),n)):e.customFields});case"REMOVE_CUSTOM_FIELD":return y(y({},e),{customFields:(0,f.has)(e.customFields,t.key)?y(y({},e.customFields),(r={},r[t.key]=y(y({},e.customFields[t.key]),{value:""}),r)):e.customFields});case"SET_TITLE":return y(y({},e),{title:t.title});case"SET_EXCERPT":return y(y({},e),{excerpt:t.excerpt});case"SET_CONTENT":return y(y({},e),{content:t.content,images:_(t.content)});case"SET_DATE":return y(y({},e),{date:null!==(s=t.date)&&void 0!==s&&s});case"SET_AUTHOR":return y(y({},e),{author:t.authorId,authorName:t.authorName});case"SET_PERMALINK":return y(y({},e),{permalink:t.permalink});case"SET_FEATURED_IMAGE":return y(y({},e),{imageId:t.imageId,imageSrc:t.imageSrc,thumbnailSrc:t.thumbnailSrc});case"REMOVE_FEATURED_IMAGE":return y(y({},e),{imageId:0,imageSrc:!1,thumbnailSrc:!1});case"SET_FOLLOWERS":return y(y({},e),{followers:t.followers});case"SET_STATUS":return y(y({},e),{status:t.status});case"SET_TERMS":return y(y({},e),{taxonomies:y(y({},e.taxonomies),(o={},o[t.taxonomy]=t.terms,o))});case"ENABLE_AUTO_SHARE":return y(y({},e),{isAutoShareEnabled:t.isAutoShareEnabled});case"SET_AUTO_SHARE_END_MODE":return y(y({},e),{autoShareEndMode:t.autoShareEndMode});case"SET_AUTOMATION_SOURCES":return y(y({},e),{automationSources:y(y({},e.automationSources),t.sources)});case"SET_NETWORK_IMAGE":return y(y({},e),{networkImages:y(y({},e.networkImages),(i={},i[t.network]=t.imageUrl,i)),networkImageIds:y(y({},e.networkImageIds),(a={},a[t.network]=t.imageId,a))});case"SET_SERIES":return y(y({},e),{series:t.series});case"MARK_AS_LOADING_POST_ITEMS":return e}}(e,t))&&void 0!==n?n:e},postQuality:function(e,t){var n;return void 0===e&&(e=g.postQuality),null!==(n=function(e,t){var n;switch(t.type){case"ADD_QUALITY_CHECK_TYPE":case"UPDATE_QUALITY_CHECK_SETTINGS":return e;case"REMOVE_QUALITY_CHECK_TYPE":return T(T({},e),{checks:(0,f.omit)(e.checks,t.name)});case"MARK_QUALITY_ANALYSIS_AS_FULLY_INTEGRATED":return T(T({},e),{isFullyIntegrated:t.isFullyIntegrated});case"UPDATE_QUALITY_CHECK_ITEM":return T(T({},e),{checks:T(T({},e.checks),(n={},n[t.name]={status:t.status,text:t.text},n))});case"SET_POST_QUALITY_SETTINGS":var r=T({allowedBads:e.settings.allowedBads,allowedImprovables:e.settings.allowedImprovables,unacceptableImprovables:e.settings.unacceptableImprovables},t.settings);return T(T({},e),{settings:{allowedBads:r.allowedBads,allowedImprovables:r.allowedImprovables,unacceptableImprovables:r.unacceptableImprovables}})}}(e,t))&&void 0!==n?n:e},premiumByType:function(e,t){var n;return void 0===e&&(e=g.premiumByType),null!==(n=function(e,t){var n,r,o;if("MARK_PREMIUM_ITEM_AS_DELETING"===t.type){var i=null!==(o=null===(r=e[t.typeName])||void 0===r?void 0:r.deleting)&&void 0!==o?o:[];return b(b({},e),((n={})[t.typeName]=b(b({},e[t.typeName]),{deleting:t.isDeleting?S(S([],i,!0),[t.itemId],!1):(0,f.without)(i,t.itemId)}),n))}}(e,t))&&void 0!==n?n:e},qualityCheckTypes:function(e,t){var n;return void 0===e&&(e=g.qualityCheckTypes),null!==(n=function(e,t){var n,r;switch(t.type){case"ADD_QUALITY_CHECK_TYPE":return k(k({},e),((n={})[t.definition.name]=t.definition,n));case"REMOVE_QUALITY_CHECK_TYPE":return e[t.name]?(0,f.omit)(e,t.name):e;case"UPDATE_QUALITY_CHECK_SETTINGS":var o=e[t.name];return o?k(k({},e),((r={})[t.name]=k(k({},o),{settings:k(k({},o.settings),t.settings)}),r)):e}}(e,t))&&void 0!==n?n:e},references:function(e,t){var n;return void 0===e&&(e=g.references),null!==(n=function(e,t){switch(t.type){case"RECEIVE_REFERENCES":return A(A({},e),{byUrl:t.references.reduce((function(e,t){var n;return A(A({},e),((n={})[t.url]=A(A({},e[t.url]),t),n))}),e.byUrl)});case"SET_SUGGESTED_REFERENCE_URL":return A(A({},e),{suggestedUrl:t.url});case"SUGGEST_REFERENCE":var n=e.byType.suggested;return A(A({},e),{byType:A(A({},e.byType),{suggested:n.includes(t.url)?n:x(x([],n,!0),[t.url],!1)})});case"SUGGEST_REFERENCES":return A(A({},e),{byType:A(A({},e.byType),{suggested:(0,f.uniq)(x(x([],e.byType.suggested,!0),t.urls,!0))})});case"DISCARD_REFERENCE":return A(A({},e),{byType:A(A({},e.byType),{suggested:(0,f.without)(e.byType.suggested,t.url)})});case"OPEN_REFERENCE_EDITOR":return A(A({},e),{editor:{isActive:!0,reference:t.reference}});case"UPDATE_EDITING_REFERENCE":return e.editor.isActive?A(A({},e),{editor:A(A({},e.editor),{reference:A(A({},e.editor.reference),t.attributes)})}):e;case"CLOSE_REFERENCE_EDITOR":return A(A({},e),{editor:{isActive:!1}});case"MARK_REFERENCE_AS_LOADING":return A(A({},e),{status:A(A({},e.status),{loading:t.isLoading?x(x([],e.status.loading,!0),[t.referenceUrl],!1):(0,f.without)(e.status.loading,t.referenceUrl)})});case"MARK_REFERENCE_AS_SAVING":return A(A({},e),{status:A(A({},e.status),{saving:t.isSaving?x(x([],e.status.saving,!0),[t.referenceUrl],!1):(0,f.without)(e.status.saving,t.referenceUrl)})})}}(e,t))&&void 0!==n?n:e},settings:function(e,t){var n;return void 0===e&&(e=g.settings),null!==(n=function(e,t){var n;switch(t.type){case"SET_EDITOR_TO_CLASSIC":return I(I({},e),{isClassicEditor:t.isClassicEditor});case"SET_EDITOR_TO_ELEMENTOR":return I(I({},e),{isElementorEditor:t.isElementorEditor});case"PANEL_SETTINGS":return I(I({},e),{panels:t.settings});case"TOGGLE_PANEL":return e.panels[t.panelName]===t.isOpen?e:I(I({},e),{panels:I(I({},e.panels),(n={},n[t.panelName]=t.isOpen,n))});case"INCLUDE_AUTHOR_IN_FOLLOWERS":return I(I({},e),{shouldAuthorBeFollower:t.shouldAuthorBeFollower});case"SET_AUTO_SHARE_END_MODES":return I(I({},e),{autoShareEndModes:t.autoShareEndModes})}}(e,t))&&void 0!==n?n:e},social:function(e,t){var n;return void 0===e&&(e=g.social),null!==(n=function(e,t){switch(t.type){case"MARK_SOCIAL_MESSAGE_AS_DELETING":return w(w({},e),{deleting:t.isDeleting?R(R([],e.deleting,!0),[t.messageId],!1):(0,f.without)(e.deleting,t.messageId)});case"MARK_TIMELINE_AS_GENERATING":return w(w({},e),{timelineStatus:t.isGenerating?"generating":"ready"});case"MARK_TIMELINE_AS_CLEARING":return w(w({},e),{timelineStatus:t.isClearing?"clearing":"ready"});case"MARK_AS_LOADING_POST_ITEMS":return w(w({},e),{isRetrievingSocialMessages:t.isLoading})}}(e,t))&&void 0!==n?n:e},tasks:function(e,t){var n;return void 0===e&&(e=g.tasks),null!==(n=function(e,t){switch(t.type){case"MARK_EDITORIAL_TASK_AS_SYNCHING":return C(C({},e),{synching:t.isSynching?P(P([],e.synching,!0),[t.taskId],!1):(0,f.without)(e.synching,t.taskId)});case"MARK_EDITORIAL_TASK_AS_DELETING":return C(C({},e),{deleting:t.isDeleting?P(P([],e.deleting,!0),[t.taskId],!1):(0,f.without)(e.deleting,t.taskId)});case"MARK_AS_LOADING_POST_ITEMS":return C(C({},e),{isRetrievingTasks:t.isLoading});case"OPEN_TASK_PRESET_LOADER":return C(C({},e),{preset:t.isOpen?{selection:[],state:"selection"}:void 0});case"SELECT_TASK_PRESETS":return C(C({},e),{preset:e.preset?C(C({},e.preset),{selection:t.selection}):void 0});case"SET_TASK_PRESETS_STATE":return C(C({},e),{preset:e.preset?C(C({},e.preset),{state:t.state}):void 0})}}(e,t))&&void 0!==n?n:e}});function D(e){return e.comments.input}function O(e,t){return e.comments.deleting.includes(t)}function M(e,t){return e.comments.synching.includes(t)}function L(e){return e.comments.isRetrievingComments}function F(e){return e.externalFeaturedImage.view}function U(e){return e.externalFeaturedImage.imageUrl}function G(e){return e.externalFeaturedImage.imageAlt}function B(e){return e.externalFeaturedImage.fields.url}function j(e){return e.externalFeaturedImage.fields.alt}function Q(e){return"auto-draft"!==e.post.status&&!!e.post.id}function K(e){return e.post}function V(e){return e.post.id||void 0}function q(e){return e.post.type||void 0}function Y(e){return e.post.title||""}function H(e){return e.post.excerpt||""}function z(e){return e.post.content||""}function W(e){return e.post.date||void 0}function X(e){return e.post.author||void 0}function $(e){return e.post.permalink||void 0}function J(e){return e.post.permalinkTemplate}function Z(e){return e.post.followers||[]}function ee(e){return e.post.imageId||void 0}function te(e){return e.post.imageSrc||void 0}function ne(e){return e.post.status}function re(e){return e.post.images||[]}function oe(e,t){var n;return null!==(n=e.post.taxonomies[t])&&void 0!==n?n:[]}function ie(e){return e.post.permalinkQueryArgs}function ae(e){return!!e.post.isAutoShareEnabled}function se(e){return e.post.autoShareEndMode}function ce(e){return e.post.automationSources}function le(e){return e.post.networkImageIds}function ue(e,t){return e.post.networkImageIds[t]}function de(e){return e.post.series}const me=window.wp.i18n;function fe(e){return e.postQuality.settings}function pe(e){return!!e.postQuality.isFullyIntegrated}function ge(e){var t=e.postQuality.checks,n=(0,f.size)((0,f.filter)(t,{status:"good"})),r=(0,f.size)((0,f.filter)(t,{status:"improvable"})),o=(0,f.size)((0,f.filter)(t,{status:"bad"}));if(!n&&!r&&!o)return"unknown";if(e.postQuality.settings.allowedBads<o)return"bad";var i=o+r;if(e.postQuality.settings.unacceptableImprovables<i)return"bad";var a=e.postQuality.settings.allowedImprovables;return o||a<i?"improvable":i?"good":"perfect"}function Ee(e,t){var n=e.postQuality.checks[t];return(null==n?void 0:n.status)||"unknown"}function he(e,t){var n=e.postQuality.checks[t];return(null==n?void 0:n.text)||(0,me._x)("Unknown status","text","nelio-content")}function ve(e,t,n){var r;return!!(null===(r=e.premiumByType[t])||void 0===r?void 0:r.deleting.includes(n))}function ye(e){return(0,f.values)(e.qualityCheckTypes)}function _e(e,t){return e.qualityCheckTypes[t]}function Te(e,t){return e.references.byUrl[t]}function be(e){return e.references.byType.suggested}function Se(e,t){return!e.references.byUrl[t]||e.references.status.loading.includes(t)}function ke(e,t){return e.references.status.saving.includes(t)}function Ae(e){return e.references.editor.isActive}function xe(e){var t=e.references.editor;return t.isActive?t.reference:void 0}function Ie(e){return e.references.suggestedUrl}function we(e){return e.settings.isClassicEditor}function Re(e){return e.settings.isElementorEditor}function Ce(e){return e.settings.panels}function Pe(e,t){var n=e.settings.panels[t];return void 0===n||n}function Ne(e){return e.settings.shouldAuthorBeFollower}function De(e){return e.settings.autoShareEndModes}function Oe(e,t){var n=(0,f.find)(e.settings.autoShareEndModes,{value:t});return(null==n?void 0:n.months)||0}function Me(e){return"ready"!==e.social.timelineStatus}function Le(e){return"generating"===e.social.timelineStatus}function Fe(e){return"clearing"===e.social.timelineStatus}function Ue(e,t){return e.social.deleting.includes(t)}function Ge(e){return e.social.deleting}function Be(e){return!!e.social.isRetrievingSocialMessages}function je(e,t){return e.tasks.deleting.includes(t)}function Qe(e,t){return e.tasks.synching.includes(t)}function Ke(e){return!!e.tasks.isRetrievingTasks}function Ve(e){var t,n;return null!==(n=null===(t=e.tasks.preset)||void 0===t?void 0:t.selection)&&void 0!==n?n:[]}function qe(e){var t;return null===(t=e.tasks.preset)||void 0===t?void 0:t.state}function Ye(e){return{type:"SET_EDITORIAL_COMMENT_INPUT_VALUE",value:e}}function He(e,t){return{type:"MARK_EDITORIAL_COMMENT_AS_SYNCHING",commentId:e,isSynching:t}}function ze(e,t){return{type:"MARK_EDITORIAL_COMMENT_AS_DELETING",commentId:e,isDeleting:t}}function We(){return{type:"EDIT_EXTERNAL_FEATURED_IMAGE"}}function Xe(){return{type:"CANCEL_EDITION_OF_EXTERNAL_FEATURED_IMAGE"}}function $e(e,t){return{type:"SET_EXTERNAL_FEATURED_IMAGE",url:e,altText:t}}function Je(){return{type:"REMOVE_EXTERNAL_FEATURED_IMAGE"}}function Ze(e){return{type:"SET_EXTERNAL_FEATURED_IMAGE_URL_FIELD",url:e}}function et(e){return{type:"SET_EXTERNAL_FEATURED_IMAGE_ALT_FIELD",altText:e}}function tt(e,t){return{type:"SET_CUSTOM_FIELD",key:e,value:t}}function nt(e){return{type:"REMOVE_CUSTOM_FIELD",key:e}}function rt(e){return{type:"SET_POST",post:e}}function ot(e){return{type:"SET_POST_ID",id:e}}function it(e){return{type:"SET_TITLE",title:e}}function at(e){return{type:"SET_EXCERPT",excerpt:e}}function st(e){return{type:"SET_CONTENT",content:e}}function ct(e){return{type:"SET_DATE",date:e}}function lt(e,t){return{type:"SET_AUTHOR",authorId:e,authorName:t}}function ut(e){return{type:"SET_PERMALINK",permalink:e}}function dt(e){return{type:"SET_FOLLOWERS",followers:e}}function mt(e,t){return{type:"SET_FEATURED_IMAGE",imageId:e,imageSrc:t||!1,thumbnailSrc:t||!1}}function ft(){return{type:"REMOVE_FEATURED_IMAGE"}}function pt(e){return{type:"SET_STATUS",status:e}}function gt(e,t){return{type:"SET_TERMS",taxonomy:e,terms:t}}function Et(e){return{type:"ENABLE_AUTO_SHARE",isAutoShareEnabled:e}}function ht(e){return{type:"SET_AUTO_SHARE_END_MODE",autoShareEndMode:e}}function vt(e){return{type:"SET_AUTOMATION_SOURCES",sources:e}}function yt(e){return{type:"SET_QUERY_ARGS",args:e}}function _t(e,t,n){return{type:"SET_NETWORK_IMAGE",network:e,imageId:t,imageUrl:n}}function Tt(e){return{type:"SET_SERIES",series:e}}function bt(e){return{type:"MARK_AS_LOADING_POST_ITEMS",isLoading:e}}function St(e){return{type:"MARK_QUALITY_ANALYSIS_AS_FULLY_INTEGRATED",isFullyIntegrated:e}}function kt(e){return{type:"SET_POST_QUALITY_SETTINGS",settings:e}}function At(e,t,n){return{type:"UPDATE_QUALITY_CHECK_ITEM",name:e,status:t,text:n}}function xt(e,t,n){return{type:"MARK_PREMIUM_ITEM_AS_DELETING",typeName:e,itemId:t,isDeleting:n}}function It(e){return{type:"ADD_QUALITY_CHECK_TYPE",definition:e}}function wt(e){return{type:"REMOVE_QUALITY_CHECK_TYPE",name:e}}function Rt(e,t){return{type:"UPDATE_QUALITY_CHECK_SETTINGS",name:e,settings:t}}function Ct(e){return{type:"RECEIVE_REFERENCES",references:(0,f.castArray)(e)}}function Pt(e){return{type:"SET_SUGGESTED_REFERENCE_URL",url:e}}function Nt(e){return{type:"SUGGEST_REFERENCE",url:e}}function Dt(e){return{type:"SUGGEST_REFERENCES",urls:(0,f.castArray)(e)}}function Ot(e){return{type:"DISCARD_REFERENCE",url:e}}function Mt(e){return{type:"UPDATE_EDITING_REFERENCE",attributes:e}}function Lt(){return{type:"CLOSE_REFERENCE_EDITOR"}}function Ft(e,t){return{type:"MARK_REFERENCE_AS_LOADING",referenceUrl:e,isLoading:t}}function Ut(e,t){return{type:"MARK_REFERENCE_AS_SAVING",referenceUrl:e,isSaving:t}}function Gt(e){return{type:"OPEN_REFERENCE_EDITOR",reference:e}}function Bt(e){return{type:"PANEL_SETTINGS",settings:e}}function jt(e,t){return{type:"TOGGLE_PANEL",panelName:e,isOpen:t}}function Qt(e){return{type:"SET_EDITOR_TO_CLASSIC",isClassicEditor:e}}function Kt(e){return{type:"SET_EDITOR_TO_ELEMENTOR",isElementorEditor:e}}function Vt(e){return{type:"INCLUDE_AUTHOR_IN_FOLLOWERS",shouldAuthorBeFollower:e}}function qt(e){return{type:"SET_AUTO_SHARE_END_MODES",autoShareEndModes:e}}function Yt(e,t){return{type:"MARK_SOCIAL_MESSAGE_AS_DELETING",messageId:e,isDeleting:t}}function Ht(e){return{type:"MARK_TIMELINE_AS_GENERATING",isGenerating:e}}function zt(e){return{type:"MARK_TIMELINE_AS_CLEARING",isClearing:e}}function Wt(e,t){return{type:"MARK_EDITORIAL_TASK_AS_SYNCHING",taskId:e,isSynching:t}}function Xt(e,t){return{type:"MARK_EDITORIAL_TASK_AS_DELETING",taskId:e,isDeleting:t}}function $t(e){return{type:"OPEN_TASK_PRESET_LOADER",isOpen:e}}function Jt(e){return{type:"SELECT_TASK_PRESETS",selection:e}}function Zt(e){return{type:"SET_TASK_PRESETS_STATE",state:e}}const en=window.wp.apiFetch,tn=n.n(en)(),nn=window.NelioContent.data;var rn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},on=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function an(e){return rn(this,void 0,Promise,(function(){var t,n,r,o,i;return on(this,(function(a){switch(a.label){case 0:return[4,(0,c.dispatch)(nn.store).receiveComments(e)];case 1:return a.sent(),[4,(0,c.dispatch)(pr).markEditorialCommentAsSynching(e.id,!0)];case 2:a.sent(),a.label=3;case 3:return a.trys.push([3,10,,13]),t=(0,c.select)(nn.store).getApiRoot(),n=(0,c.select)(nn.store).getSiteId(),r=(0,c.select)(nn.store).getAuthenticationToken(),[4,tn({url:"".concat(t,"/site/").concat(n,"/comment"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)},data:e})];case 4:return o=a.sent(),[4,(0,c.dispatch)(nn.store).receiveComments(o)];case 5:a.sent(),a.label=6;case 6:return a.trys.push([6,8,,9]),[4,tn({path:"/nelio-content/v1/notifications/comment",method:"POST",data:o})];case 7:case 8:return a.sent(),[3,9];case 9:return[3,13];case 10:return i=a.sent(),[4,(0,m.showErrorNotice)(i)];case 11:return a.sent(),[4,(0,c.dispatch)(nn.store).removeComment(e.id)];case 12:return a.sent(),[3,13];case 13:return[4,(0,c.dispatch)(pr).markEditorialCommentAsSynching(e.id,!1)];case 14:return a.sent(),[2]}}))}))}function sn(e){return rn(this,void 0,Promise,(function(){var t,n,r,o;return on(this,(function(i){switch(i.label){case 0:return(0,c.select)(nn.store).getComment(e)?[4,(0,c.dispatch)(pr).markEditorialCommentAsDeleting(e,!0)]:[2];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,5,,7]),t=(0,c.select)(nn.store).getSiteId(),n=(0,c.select)(nn.store).getApiRoot(),r=(0,c.select)(nn.store).getAuthenticationToken(),[4,tn({url:"".concat(n,"/site/").concat(t,"/comment/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 3:return i.sent(),[4,(0,c.dispatch)(nn.store).removeComment(e)];case 4:return i.sent(),[3,7];case 5:return o=i.sent(),[4,(0,m.showErrorNotice)(o)];case 6:return i.sent(),[3,7];case 7:return[4,(0,c.dispatch)(pr).markEditorialCommentAsDeleting(e,!1)];case 8:return i.sent(),[2]}}))}))}var cn=function(){return cn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},cn.apply(this,arguments)},ln=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},un=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function dn(){return ln(this,void 0,Promise,(function(){var e;return un(this,(function(t){switch(t.label){case 0:return(0,c.select)(pr).isPostReady()&&(e=(0,c.select)(pr).getPostId())?[4,(0,c.dispatch)(pr).markAsLoadingPostItems(!0)]:[2];case 1:return t.sent(),[4,d(nn.store).getPostRelatedItems(e)];case 2:return t.sent(),[4,(0,c.dispatch)(pr).updateDatesInPostRelatedItems()];case 3:return t.sent(),[4,(0,c.dispatch)(pr).markAsLoadingPostItems(!1)];case 4:return t.sent(),[2]}}))}))}function mn(){return ln(this,void 0,Promise,(function(){var e,t,n,r,o,i,a,s;return un(this,(function(l){switch(l.label){case 0:return e=(0,c.select)(pr).getPost(),t=e.status,n=e.date,r=e.id,"publish"!==t&&n?[4,d(nn.store).getSocialMessagesRelatedToPost(r)]:[2];case 1:return o=l.sent(),i=(0,f.map)(o,(function(e){return cn(cn({},e),{schedule:(0,m.getSocialMessageSchedule)({baseDatetime:n,dateValue:e.dateValue,timeType:e.timeType,timeValue:e.timeValue})})})),[4,d(nn.store).getTasksRelatedToPost(r)];case 2:return a=l.sent(),s=(0,f.map)(a,(function(e){return cn(cn({},e),{dateDue:(0,m.getTaskDateDue)({baseDatetime:n,dateType:e.dateType,dateValue:e.dateValue})})})),(0,m.isEmpty)(i)?[3,4]:[4,(0,c.dispatch)(nn.store).receiveSocialMessages(i)];case 3:l.sent(),l.label=4;case 4:return(0,m.isEmpty)(s)?[3,6]:[4,(0,c.dispatch)(nn.store).receiveTasks(s)];case 5:l.sent(),l.label=6;case 6:return[2]}}))}))}const fn=window.wp.hooks;var pn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},gn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function En(e,t){return pn(this,void 0,Promise,(function(){var n;return gn(this,(function(r){switch(r.label){case 0:return(n=(0,c.select)(nn.store).getPremiumItem(e,t))?[4,(0,c.dispatch)(pr).markPremiumItemAsDeleting(e,t,!0)]:[2];case 1:return r.sent(),[4,(0,fn.applyFilters)("nelio-content_edit-post_onDeletePremiumItem",new Promise((function(e){return e()})),e,n)];case 2:return r.sent(),[4,(0,c.dispatch)(pr).markPremiumItemAsDeleting(e,t,!1)];case 3:return r.sent(),[2]}}))}))}var hn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},vn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function yn(e){return hn(this,void 0,Promise,(function(){var t;return vn(this,(function(n){switch(n.label){case 0:return[4,d(pr).getReferenceByUrl(e)];case 1:return(t=n.sent())?[4,(0,c.dispatch)(pr).doOpenReferenceEditor(t)]:[2];case 2:return n.sent(),[2]}}))}))}function Tn(){return hn(this,void 0,Promise,(function(){var e;return vn(this,(function(t){switch(t.label){case 0:return(e=(0,c.select)(pr).getEditingReference())?[4,(0,c.dispatch)(pr).saveReference(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,(0,c.dispatch)(pr).closeReferenceEditor()];case 3:return t.sent(),[2]}}))}))}function bn(e){return hn(this,void 0,Promise,(function(){var t,n;return vn(this,(function(r){switch(r.label){case 0:return[4,(0,c.dispatch)(pr).markReferenceAsSaving(e.url,!0)];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,5,,7]),[4,tn({path:"/nelio-content/v1/reference/".concat(e.id),method:"PUT",data:(0,f.omitBy)(e,m.isEmpty)})];case 3:return t=r.sent(),[4,(0,c.dispatch)(pr).receiveReferences(t)];case 4:return r.sent(),[3,7];case 5:return n=r.sent(),[4,(0,m.showErrorNotice)(n)];case 6:return r.sent(),[3,7];case 7:return[4,(0,c.dispatch)(pr).markReferenceAsSaving(e.url,!1)];case 8:return r.sent(),[2]}}))}))}const Sn=window.wp.notices,kn=window.wp.richText;var An=function(){return An=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},An.apply(this,arguments)},xn=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},In=["p","h1","h2","h3","h4","li"],wn=In.reduce((function(e,t){return xn(xn([],e,!0),In.map((function(e){return"".concat(t," ").concat(e)})),!0)}),[]).join(", ");function Rn(){var e=(0,c.select)(nn.store),t=e.isSubscribed,n=e.getProfilesWithMessagesRelatedToPost;return t()?[]:n((0,(0,c.select)(pr).getPost)().id)}function Cn(e){void 0===e&&(e="");var t,n,r=function(e){var t=document.createElement("div");t.innerHTML=e;var n,r="".concat(wn,", ncshare ncshare");do{Pn(n=t.querySelector(r))}while(n);return t}(e),o=Array.from(r.querySelectorAll(In.join(",")));return{clean:(0,f.map)(o,Nn).join("\n\n"),highlights:(t=o,n=f.union.apply(void 0,(0,f.map)(t,(function(e){var t,n,r,o=(0,kn.create)({element:e});return(t=o,n=function(e,t){return Mn(e)&&Mn(t)||!Mn(e)&&!Mn(t)},r=(0,f.uniq)(Dn(t.formats.reduce((function(e,t,r,o){return n(o[r-1],t)||(e=Dn(e,r)),n(t,o[r+1])||(e=Dn(e,r+1)),e}),[0]),t.formats.length)),(0,f.zip)((0,f.dropRight)(r,1),(0,f.drop)(r,1)).map((function(e){var n=e[0],r=e[1];return(0,kn.slice)(t,n,r)})).filter((function(e){return e.formats.some(Mn)}))).map(On)}))),(0,f.map)(n,(function(e){return{html:e,text:e.replace(/<[^>]*>/g,"")}}))),top:(0,f.union)((0,f.map)(r.getElementsByTagName("h1"),Nn),(0,f.map)(r.getElementsByTagName("h2"),Nn),(0,f.map)(r.getElementsByTagName("h3"),Nn),(0,f.map)(r.getElementsByTagName("strong"),Nn))}}function Pn(e){var t,n;if(e){for(;e.firstChild;)null===(t=e.parentElement)||void 0===t||t.insertBefore(e.firstChild,e);null===(n=e.parentElement)||void 0===n||n.removeChild(e)}}function Nn(e){var t;return(null===(t=null==e?void 0:e.textContent)||void 0===t?void 0:t.replace(/\s+/g," "))||""}function Dn(e,t){return e.push(t),e}function On(e){var t=e.formats.reduce((function(e,t){var n=Fn(t);return n&&(e[n]=[{type:"a",attributes:{href:n}}]),e}),{"":[]});return e=An(An({},e),{formats:e.formats.map((function(e){return t[Fn(e)]||[]}))}),(0,kn.toHTMLString)({value:e})}var Mn=function(e){return!!(null==e?void 0:e.some((function(e){var t=e.type;return"ncshare"===t||"nelio-content/highlight"===t})))},Ln=function(e){var t,n;return"a"===e.type&&!!(null===(t=e.attributes)||void 0===t?void 0:t.href)||"core/link"===e.type&&!!(null===(n=e.attributes)||void 0===n?void 0:n.url)},Fn=function(e){var t,n,r,o=null===(t=null==e?void 0:e.find(Ln))||void 0===t?void 0:t.attributes;return null!==(r=null!==(n=null==o?void 0:o.href)&&void 0!==n?n:null==o?void 0:o.url)&&void 0!==r?r:""},Un=function(){return Un=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Un.apply(this,arguments)},Gn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Bn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},jn="core/editor";function Qn(){return Gn(this,void 0,Promise,(function(){var e;return Bn(this,(function(t){switch(t.label){case 0:return(0,c.select)(pr).isClassicEditor()?[4,Hn()]:[3,2];case 1:return t.sent(),[2];case 2:return(0,c.select)(pr).isElementorEditor()?[4,zn()]:[3,4];case 3:return t.sent(),[2];case 4:return(0,c.select)(pr).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(pr).markTimelineAsGenerating(!0)];case 5:t.sent(),t.label=6;case 6:return t.trys.push([6,9,,11]),[4,(0,c.dispatch)(jn).savePost()];case 7:return t.sent(),[4,Wn()];case 8:return t.sent(),[3,11];case 9:return e=t.sent(),[4,(0,m.showErrorNotice)(e)];case 10:return t.sent(),[3,11];case 11:return[4,(0,c.dispatch)(pr).markTimelineAsGenerating(!1)];case 12:return t.sent(),[2]}}))}))}function Kn(){return Gn(this,void 0,Promise,(function(){return Bn(this,(function(e){switch(e.label){case 0:return(0,c.select)(pr).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(pr).markTimelineAsGenerating(!0)];case 1:return e.sent(),[4,Wn()];case 2:return e.sent(),[4,(0,c.dispatch)(pr).markTimelineAsGenerating(!1)];case 3:return e.sent(),[2]}}))}))}function Vn(){return Gn(this,void 0,Promise,(function(){var e,t,n;return Bn(this,(function(r){switch(r.label){case 0:return(e=(0,c.select)(pr).getPostId())?(0,c.select)(pr).isClearingTimeline()?[2]:[4,(0,c.dispatch)(pr).markTimelineAsClearing(!0)]:[2];case 1:return r.sent(),[4,d(nn.store).getSocialMessagesRelatedToPost(e)];case 2:return t=r.sent(),n=t.filter((function(e){return"publish"!==e.status})).map((function(e){return e.id})),[4,Promise.all(n.map(Yn))];case 3:return r.sent(),n.forEach((function(e){return(0,c.dispatch)(nn.store).removeSocialMessage(e)})),[4,(0,c.dispatch)(pr).markTimelineAsClearing(!1)];case 4:return r.sent(),[2]}}))}))}function qn(e){return Gn(this,void 0,Promise,(function(){var t;return Bn(this,(function(n){switch(n.label){case 0:return(0,c.select)(pr).isSocialMessageBeingDeleted(e)?[2]:[4,(0,c.dispatch)(pr).markSocialMessageAsDeleting(e,!0)];case 1:return n.sent(),[4,Yn(e)];case 2:return n.sent(),t=(0,c.select)(nn.store).getSocialMessage(e),[4,(0,c.dispatch)(nn.store).removeRecurringMessages(null==t?void 0:t.recurrenceGroup)];case 3:return n.sent(),[4,(0,c.dispatch)(nn.store).removeSocialMessage(e)];case 4:return n.sent(),[4,(0,c.dispatch)(pr).markSocialMessageAsDeleting(e,!1)];case 5:return n.sent(),[2]}}))}))}function Yn(e){return Gn(this,void 0,Promise,(function(){var t,n,r;return Bn(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=(0,c.select)(nn.store).getSiteId(),n=(0,c.select)(nn.store).getApiRoot(),r=(0,c.select)(nn.store).getAuthenticationToken(),[4,tn({url:"".concat(n,"/site/").concat(t,"/social/").concat(e,"/following"),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 1:case 2:return o.sent(),[3,3];case 3:return[2]}}))}))}function Hn(){return Gn(this,void 0,void 0,(function(){var e,t;return Bn(this,(function(n){switch(n.label){case 0:return(0,c.select)(pr).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(pr).markTimelineAsGenerating(!0)];case 1:return n.sent(),(e=document.getElementById("post"))?((t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("name","_nc_auto_messages"),t.setAttribute("value","true"),e.appendChild(t),e.submit(),[2]):[2]}}))}))}function zn(){return Gn(this,void 0,void 0,(function(){var e,t,n=this;return Bn(this,(function(r){switch(r.label){case 0:return(0,c.select)(pr).isGeneratingTimeline()?[2]:(e=window.elementor,$n(e)?[4,(0,c.dispatch)(pr).markTimelineAsGenerating(!0)]:[2]);case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,3,,5]),e.saver.saveEditor({onSuccess:function(){return Gn(n,void 0,void 0,(function(){return Bn(this,(function(e){switch(e.label){case 0:return[4,Wn()];case 1:return e.sent(),[4,(0,c.dispatch)(pr).markTimelineAsGenerating(!1)];case 2:return e.sent(),[2]}}))}))}}),[3,5];case 3:return t=r.sent(),(0,m.logError)(t),[4,(0,c.dispatch)(pr).markTimelineAsGenerating(!1)];case 4:return r.sent(),[3,5];case 5:return[2]}}))}))}function Wn(){return Gn(this,void 0,Promise,(function(){var e,t,n,r,o,i,a,s,l;return Bn(this,(function(u){switch(u.label){case 0:if(e=[],!(t=(0,c.select)(pr).getPostId()))return[2];u.label=1;case 1:return u.trys.push([1,7,,9]),[4,tn({path:"/nelio-content/v1/post/".concat(t,"?aws")})];case 2:return n=u.sent(),r=(0,c.select)(nn.store).getSiteId(),o=(0,c.select)(nn.store).getApiRoot(),i=(0,c.select)(nn.store).getAuthenticationToken(),[4,tn({url:"".concat(o,"/site/").concat(r,"/post/").concat(t,"/social/auto"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(i)},data:Un(Un({},n),Cn(n.content))})];case 3:return a=u.sent(),[4,d(nn.store).getSocialMessageIdsRelatedToPost(t)];case 4:return(s=u.sent()).forEach((function(e){return(0,c.dispatch)(nn.store).removeSocialMessage(e)})),e=a.filter((function(e){return!s.includes(e.id)})),[4,(0,c.dispatch)(nn.store).receiveSocialMessages(a)];case 5:return u.sent(),[4,Xn(e)];case 6:return u.sent(),[3,9];case 7:return l=u.sent(),(0,m.logError)(l),[4,(0,m.showErrorNotice)(l,(0,me._x)("Unknown error creating automatic messages.","text","nelio-content"),{type:"snackbar"})];case 8:return u.sent(),[3,9];case 9:return[4,(0,c.dispatch)(pr).updateDatesInPostRelatedItems()];case 10:return u.sent(),[2]}}))}))}function Xn(e){return Gn(this,void 0,void 0,(function(){var t,n,r,o;return Bn(this,(function(i){switch(i.label){case 0:return t=e.length?(0,me.sprintf)(/* translators: %d: amount of messages created. */ /* translators: %d: amount of messages created. */
(0,me._nx)("%d message created","%d messages created",e.length,"text","nelio-content"),e.length):(0,me._x)("No messages were created. Check your content and your settings.","user","nelio-content"),(0,c.select)(pr).isClassicEditor()?(null==(n=document.getElementById("message"))||n.insertAdjacentHTML("afterend",'<div id="nc-message" class="notice notice-success is-dismissible"><p>'.concat(t,'</p><button type="button" class="notice-dismiss" onclick="document.getElementById(\'nc-message\').remove()"><span class="screen-reader-text">').concat((0,me._x)("Dismiss this notice.","command","nelio-content"),"</span></button></div>")),[2]):(r=(0,c.select)(pr).isElementorEditor(),o=window.elementor,r&&$n(o)?(o.notifications.showToast({message:t}),[2]):e.length?[4,(0,c.dispatch)(Sn.store).createSuccessNotice(t,{type:"snackbar"})]:[3,2]);case 1:return i.sent(),[3,4];case 2:return[4,(0,c.dispatch)(Sn.store).createErrorNotice(t,{type:"snackbar"})];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))}var $n=function(e){return!!e&&"object"==typeof e&&"saver"in e},Jn=function(){return Jn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Jn.apply(this,arguments)},Zn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},er=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function tr(e,t){return Zn(this,void 0,Promise,(function(){var n,r,o,i,a,s,l;return er(this,(function(u){switch(u.label){case 0:return(n=(0,c.select)(nn.store).getTask(e))?[4,(0,c.dispatch)(pr).markEditorialTaskAsSynching(e,!0)]:[2];case 1:u.sent(),u.label=2;case 2:return u.trys.push([2,10,,13]),r=Jn(Jn({},n),{completed:t}),[4,(0,c.dispatch)(nn.store).receiveTasks(r)];case 3:return u.sent(),o=(0,c.select)(nn.store).getSiteId(),i=(0,c.select)(nn.store).getApiRoot(),a=(0,c.select)(nn.store).getAuthenticationToken(),[4,tn({url:"".concat(i,"/site/").concat(o,"/task/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(a)},data:r})];case 4:return s=u.sent(),[4,(0,c.dispatch)(nn.store).receiveTasks(s)];case 5:if(u.sent(),!s.completed)return[3,9];u.label=6;case 6:return u.trys.push([6,8,,9]),[4,tn({path:"/nelio-content/v1/notifications/task",method:"POST",data:Jn({isNewTask:!1},s)})];case 7:case 8:return u.sent(),[3,9];case 9:return[3,13];case 10:return l=u.sent(),[4,(0,m.showErrorNotice)(l)];case 11:return u.sent(),[4,(0,c.dispatch)(nn.store).receiveTasks(n)];case 12:return u.sent(),[3,13];case 13:return[4,(0,c.dispatch)(pr).markEditorialTaskAsSynching(e,!1)];case 14:return u.sent(),[2]}}))}))}function nr(e,t){return Zn(this,void 0,Promise,(function(){var n,r,o,i,a,s,l,u,p,g,E,h,v;return er(this,(function(y){switch(y.label){case 0:return(n=(0,c.select)(pr).getPost())?(r="replace"===e?"replacing":"merging",[4,(0,c.dispatch)(pr).setTaskPresetsState(r)]):[2];case 1:return y.sent(),o=d(nn.store).getTaskIdsRelatedToPost,i=(0,c.select)(nn.store).getTask,[4,o(n.id)];case 2:if(a=y.sent(),s=a.map(i).filter(m.isDefined),l="replace"===e?[]:s,!(u=(0,f.orderBy)(t.map(ir),"_sort").map(or(n,l)).filter(m.isDefined)).length)return[3,9];y.label=3;case 3:return y.trys.push([3,7,,9]),p=(0,c.select)(nn.store).getSiteId(),g=(0,c.select)(nn.store).getApiRoot(),E=(0,c.select)(nn.store).getAuthenticationToken(),[4,new Promise((function(e){return setTimeout(e,1e3)}))];case 4:return y.sent(),[4,tn({url:"".concat(g,"/site/").concat(p,"/task"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(E)},data:{mode:e,postId:n.id,tasks:u}})];case 5:return h=y.sent(),"replace"===e&&a.forEach((0,c.dispatch)(nn.store).removeTask),[4,(0,c.dispatch)(nn.store).receiveTasks(h)];case 6:return y.sent(),[3,9];case 7:return v=y.sent(),[4,(0,m.showErrorNotice)(v)];case 8:return y.sent(),[3,9];case 9:return[4,(0,c.dispatch)(pr).openTaskPresetLoader(!1)];case 10:return y.sent(),[2]}}))}))}function rr(e){return Zn(this,void 0,Promise,(function(){var t,n,r,o;return er(this,(function(i){switch(i.label){case 0:return(0,c.select)(nn.store).getTask(e)?[4,(0,c.dispatch)(pr).markEditorialTaskAsDeleting(e,!0)]:[2];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,5,,7]),t=(0,c.select)(nn.store).getSiteId(),n=(0,c.select)(nn.store).getApiRoot(),r=(0,c.select)(nn.store).getAuthenticationToken(),[4,tn({url:"".concat(n,"/site/").concat(t,"/task/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 3:return i.sent(),[4,(0,c.dispatch)(nn.store).removeTask(e)];case 4:return i.sent(),[3,7];case 5:return o=i.sent(),[4,(0,m.showErrorNotice)(o)];case 6:return i.sent(),[3,7];case 7:return[4,(0,c.dispatch)(pr).markEditorialTaskAsDeleting(e,!1)];case 8:return i.sent(),[2]}}))}))}var or=function(e,t){return function(n){var r;if(n.assigneeId||e.author){var o=Jn(Jn({},(0,m.createTask)()),{assigneeId:null!==(r=n.assigneeId)&&void 0!==r?r:e.author,task:n.task,color:n.color,dateType:n.dateType,dateValue:n.dateValue,postId:e.id,postType:e.type,dateDue:(0,m.getTaskDateDue)({baseDatetime:e.date||"now",dateType:n.dateType,dateValue:n.dateValue}),postAuthor:e.author,baseDatetime:(0,m.getBaseDatetime)(e,n.dateType)}),i=(0,f.pick)(o,["assigneeId","task","dateType","dateValue"]);return(0,f.some)(t,(function(e){return(0,f.isEqual)(i,(0,f.pick)(e,(0,f.keys)(i)))}))?void 0:o}}},ir=function(e){var t=Math.abs(Number.parseInt(e.dateValue)||0),n="";return n+="positive-days"===e.dateType||0===t?"1:"+(0,f.padStart)("".concat(t),5,"0"):"0:"+(0,f.padStart)("".concat(Math.abs(9999-t)),5,"0"),n+=":",n+=e.task,Jn(Jn({},e),{_sort:n})};const ar=window.wp.url;var sr=function(){return sr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},sr.apply(this,arguments)},cr=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},lr=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function ur(e){return cr(this,void 0,Promise,(function(){var t,n,r,o;return lr(this,(function(i){switch(i.label){case 0:return e?[4,(0,c.dispatch)(pr).markReferenceAsLoading(e,!0)]:[2];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,7,,8]),[4,tn({path:(0,ar.addQueryArgs)("/nelio-content/v1/reference/search",{url:e})})];case 3:return t=i.sent(),[4,(0,c.dispatch)(pr).receiveReferences(t)];case 4:return i.sent(),n=t.status,r=t.isExternal,"pending"===n&&r?[4,dr(t)]:[3,6];case 5:i.sent(),i.label=6;case 6:return[3,8];case 7:return o=i.sent(),(0,m.logError)(o),[3,8];case 8:return[4,(0,c.dispatch)(pr).markReferenceAsLoading(e,!1)];case 9:return i.sent(),[2]}}))}))}function dr(e){return cr(this,void 0,Promise,(function(){var t,n,r,o,i,a;return lr(this,(function(s){switch(s.label){case 0:return[4,(0,c.dispatch)(nn.store).loadLink(e.url)];case 1:return s.sent(),(t=(0,c.select)(nn.store).getSharedLinkData(e.url))?(n=t.author,r=t.date,o=t.title,i=t.twitter,a=sr(sr({},e),{author:n,date:r,title:o,twitter:i}),[4,(0,c.dispatch)(pr).saveReference(a)]):[2];case 2:return s.sent(),[2]}}))}))}var mr=function(){return mr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mr.apply(this,arguments)},fr=mr(mr({},o),i),pr=(0,c.createReduxStore)("nelio-content/edit-post",{reducer:N,controls:c.controls,actions:fr,selectors:r,resolvers:a});!function(e){(0,c.register)(e)}(pr),function(){(0,(0,c.dispatch)(pr).setPanelSettings)((0,m.getValue)("panelSettings",{})||{});var e=(0,c.select)(pr).getPanelStatuses();l((function(){var t=(0,c.select)(pr).getPanelStatuses();e!==t&&(e=t,(0,m.setValue)("panelSettings",t))}),pr)}();const gr=window.wp.element,Er=window.wp.compose,hr=window.wp.components;var vr=function(){return vr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vr.apply(this,arguments)},yr=function(){var e=_r(),t=e[0],n=e[1],r=Tr();return gr.createElement("div",{className:"nelio-content-editorial-comments-input"},gr.createElement(hr.TextareaControl,{placeholder:(0,me._x)("Write a comment and press enter to send…","user","nelio-content"),className:"nelio-content-editorial-comments-input__textarea",value:t,onChange:n,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),r())}}))},_r=function(){return[u((function(e){return e(pr).getEditorialCommentInputValue()})),(0,c.useDispatch)(pr).setEditorialCommentInputValue]},Tr=function(){var e=_r(),t=e[0],n=e[1],r=(0,c.useDispatch)(pr).createEditorialComment,o=u((function(e){return e(pr).getPostId()})),i=u((function(e){return e(pr).getPostType()}));return o&&i?function(){var e=(0,f.trim)(t);(0,m.isEmpty)(e)||(n(""),r(vr(vr({},(0,m.createComment)(o,i)),{comment:e})))}:function(){}};function br(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=br(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const Sr=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=br(e))&&(r&&(r+=" "),r+=t);return r},kr=window.moment;var Ar=n.n(kr);const xr=window.NelioContent.components,Ir=window.NelioContent.date;var wr=function(e){var t=e.commentId,n=Rr(t),r=(0,nn.useAuthorName)(null==n?void 0:n.authorId),o=u((function(e){return e(pr).isDeletingEditorialComment(t)})),i=u((function(e){return e(pr).isSynchingEditorialComment(t)})),a=Cr(t),s=Pr(t),l=(0,c.useDispatch)(pr).deleteEditorialComment;return gr.createElement("div",{className:Sr({"nelio-content-editorial-comments-comment":!0,"nelio-content-editorial-comments-comment--is-mine":a,"nelio-content-editorial-comments-comment--is-being-deleted":o})},!a&&gr.createElement("div",{className:"nelio-content-editorial-comments-comment__author-icon"},gr.createElement(xr.AuthorIcon,{authorId:null==n?void 0:n.authorId})),gr.createElement("div",null,gr.createElement("div",{className:Sr({"nelio-content-editorial-comments-comment__bubble":!0,"nelio-content-editorial-comments-comment__bubble--is-mine":a})},(null==n?void 0:n.comment)||""),gr.createElement("div",{className:Sr({"nelio-content-editorial-comments-comment__extra":!0,"nelio-content-editorial-comments-comment__extra--is-mine":a})},i&&(0,me._x)("Sending…","text","nelio-content"),!i&&!a&&gr.createElement("div",{className:"nelio-content-editorial-comments-comment__author"},r),!i&&gr.createElement("div",{className:"nelio-content-editorial-comments-comment__date"},(0,Ir.dateI18n)((0,Ir.getSettings)().formats.datetime,null==n?void 0:n.date))),(o||s)&&!i&&gr.createElement("div",{className:"nelio-content-editorial-comments-comment__actions"},gr.createElement(xr.DeleteButton,{isDeleting:o,onClick:function(){l(t)}}))))},Rr=function(e){return u((function(t){return t(nn.store).getComment(e)}))},Cr=function(e){var t=Rr(e);return u((function(e){return e(nn.store).getCurrentUserId()===(null==t?void 0:t.authorId)}))},Pr=function(e){var t,n=null===(t=Rr(e))||void 0===t?void 0:t.date,r=Cr(e),o=n?Ar()().diff(n,"minutes"):0,i=Math.abs(o)<5,a=(0,gr.useState)(0),s=a[0],c=a[1];return(0,gr.useEffect)((function(){i&&setTimeout((function(){return c(s+1)}),3e4)}),[s,i]),r&&i},Nr=function(){var e=(0,gr.useRef)(null),t=(0,gr.useState)(-1),n=t[0],r=t[1],o=u((function(e){return e(nn.store).getCommentIdsRelatedToPost(e(pr).getPostId())})),i=o.length;return(0,gr.useEffect)((function(){var t;n!==i&&(n<i&&(null===(t=e.current)||void 0===t||t.scrollTo({top:999999,behavior:-1===n?void 0:"smooth"})),r(i))}),[n,i,r]),gr.createElement("div",{ref:e,className:"nelio-content-editorial-comment-list"},o.map((function(e){return gr.createElement(wr,{key:e,commentId:e})})))},Dr=function(){return Dr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Dr.apply(this,arguments)},Or=(0,Er.createHigherOrderComponent)((function(e){return function(t){return u((function(e){return e(pr).isPostReady()}))?gr.createElement(e,Dr({},t)):gr.createElement(gr.Fragment,null,(0,me._x)("Please save post first to access this feature.","user","nelio-content"))}}),"withPostReadyCheck"),Mr=function(e){return function(t){return(0,Er.createHigherOrderComponent)((function(t){return function(n){return u((function(t){return!!t(pr)[e]()}))?gr.createElement(xr.LoadingAnimation,{text:(0,me._x)("Loading…","text","nelio-content"),isSmall:!0}):gr.createElement(t,Dr({},n))}}),"withLoadingCheck")(t)}},Lr=(0,Er.compose)((function(e){return(0,nn.withSubscriptionCheck)("raw/editorial-comments",e)}),Or,Mr("isRetrievingEditorialComments"))((function(){return gr.createElement(gr.Fragment,null,gr.createElement(Nr,null),gr.createElement(yr,null))})),Fr=function(){var e=Ur(),t=e.completed,n=e.total;return n?gr.createElement("div",{className:"nelio-content-tasks-progress"},gr.createElement("div",{className:"nelio-content-tasks-progress__bar-background"},gr.createElement("div",{className:Sr({"nelio-content-tasks-progress__bar":!0,"nelio-content-tasks-progress__bar--is-completed":t===n}),style:{width:"".concat(Math.round(100*t/n),"%")}})),gr.createElement("div",{className:"nelio-content-tasks-progress__percentage"},Math.round(100*t/n),"%")):null},Ur=function(){return u((function(e){var t=e(pr).getPostId,n=(0,e(nn.store).getTasksRelatedToPost)(t());return{completed:(0,f.filter)(n,{completed:!0}).length,total:n.length}}))};const Gr=window.NelioContent.taskEditor;var Br=function(e){var t,n=e.taskId,r=jr(n),o=Qr(n),i=o.canCompleteTask,a=o.canDeleteTask,s=o.canEditTask,c=Kr(n),l=c.isDeleting,d=c.isSynching,f=c.isPastDateDue,p=r||{},g=p.completed,E=p.color,h=void 0===E?"":E,v=p.task,y=Vr(r),_=qr(n),T=Yr(n),b=(0,nn.useAuthorName)(null==r?void 0:r.assigneeId,(0,me._x)("Unknown Assignee","text","nelio-content")),S=u((function(e){return e(pr).getPost()})),k=r?(0,m.getHumanDateDue)(S,r.dateType,r.dateValue):"";return gr.createElement("div",{className:Sr((t={"nelio-content-editorial-task":!0},t["nelio-content-editorial-task--is-".concat(h)]=!!h,t["nelio-content-editorial-task--is-task-".concat(n)]=!0,t["nelio-content-editorial-task--is-due"]=f,t))},gr.createElement(hr.CheckboxControl,{className:Sr({"nelio-content-editorial-task__control":!0,"nelio-content-editorial-task__control--is-completed":g}),label:v,onChange:T,checked:g,disabled:!i||l||d}),gr.createElement("div",{className:Sr({"nelio-content-editorial-task__extra":!0,"nelio-content-editorial-task__extra--is-completed":g,"nelio-content-editorial-task__extra--is-deleting":l,"nelio-content-editorial-task__extra--is-due":f,"nelio-content-editorial-task__extra--is-synching":d})},d&&(0,me._x)("Saving…","text","nelio-content"),!d&&"".concat(b," • ").concat(k),f&&gr.createElement(hr.Dashicon,{icon:"warning"})),gr.createElement("div",{className:Sr({"nelio-content-editorial-task__actions":!0,"nelio-content-editorial-task__actions--is-deleting":l,"nelio-content-editorial-task__actions--is-synching":d})},gr.createElement(hr.Button,{variant:"link",disabled:!s||l||d,onClick:y},(0,me._x)("Edit","command","nelio-content")),gr.createElement(xr.DeleteButton,{disabled:!a||d,isDeleting:l,onClick:_})))},jr=function(e){return u((function(t){return t(nn.store).getTask(e)}))},Qr=function(e){var t=jr(e);return u((function(e){var n=e(nn.store).canCurrentUserEditTask(t),r=e(nn.store).canCurrentUserDeleteTask(t);return{canCompleteTask:!!t&&n,canDeleteTask:!!t&&r,canEditTask:!!t&&n}}))},Kr=function(e){var t=jr(e);return u((function(n){if(!t)return{isDeleting:!1,isSynching:!1,isPastDateDue:!1};var r=n(pr),o=r.isEditorialTaskBeingDeleted,i=r.isEditorialTaskBeingSynched,a=n(pr).getPost(),s=n(nn.store).getToday(),c=o(e),l=i(e);return{isDeleting:c,isSynching:l,isPastDateDue:!t.completed&&!l&&(0,m.getTaskDateDue)({baseDatetime:(null==a?void 0:a.date)||void 0,dateType:t.dateType,dateValue:t.dateValue})<s}}))},Vr=function(e){var t=u((function(e){return e(pr).getPost()})),n=(0,c.useDispatch)(Gr.store).openExistingTaskEditor;return function(){return!!t&&!!e&&n(e,{context:"post",post:t})}},qr=function(e){var t=(0,c.useDispatch)(pr).deleteEditorialTask;return function(){return t(e)}},Yr=function(e){var t=jr(e),n=(0,c.useDispatch)(pr).markTaskAsCompleted;return function(){return n(e,!(null==t?void 0:t.completed))}},Hr=function(){var e=zr();return(0,m.isEmpty)(e)?gr.createElement("div",{className:"nelio-content-task-list nelio-content-task-list--is-empty"},(0,me._x)("Keep track of the things that need to get done with tasks.","user","nelio-content")):gr.createElement("div",{className:"nelio-content-task-list"},e.map((function(e){return gr.createElement(Br,{key:e,taskId:e})})))},zr=function(){return u((function(e){var t=e(pr).getPostId;return(0,e(nn.store).getTaskIdsRelatedToPost)(t())}))},Wr=function(){var e=Jr(),t=$r(),n=(0,c.useDispatch)(pr).openTaskPresetLoader,r=Zr();return gr.createElement("div",{className:"nelio-content-task-actions"},e&&gr.createElement(hr.Button,{variant:"secondary",disabled:!t,onClick:function(){return n(!0)}},(0,me._x)("Load Tasks","command","nelio-content")),gr.createElement(hr.Button,{variant:"secondary",disabled:!t,onClick:r},(0,me._x)("Add Task","command","nelio-content")))},Xr=function(){return u((function(e){return e(pr).getPost()}))},$r=function(){var e=Xr();return u((function(t){return t(nn.store).canCurrentUserCreateTasksRelatedToPost(e)}))},Jr=function(){return u((function(e){return!!e(nn.store).getTaskPresets().length}))},Zr=function(){var e=Xr(),t=(0,c.useDispatch)(Gr.store).openNewTaskEditor;return function(){return t({dateType:"publish"!==e.status?"predefined-offset":void 0,dateValue:"publish"!==e.status?"0":void 0},{post:e,context:"post"})}},eo=function(){var e=u((function(e){return e(pr).getPostId()})),t=u((function(t){return!!t(nn.store).getTaskIdsRelatedToPost(e).length})),n=u((function(e){return e(pr).getTaskPresetLoaderState()})),r=u((function(e){return e(pr).getTaskPresetSelection()})),o=(0,c.useDispatch)(pr),i=o.instantiatePresets,a=o.openTaskPresetLoader,s=o.selectTaskPresets;return gr.createElement(xr.TaskPresetLoader,{state:n,actions:t?"replace-or-merge":"add",selection:r,onUpdate:s,onCancel:function(){return a(!1)},onMerge:function(e){return i("merge",e)},onReplace:function(e){return i("replace",e)}})},to=(0,Er.compose)((function(e){return(0,nn.withSubscriptionCheck)("raw/editorial-tasks",e)}),Or,Mr("isRetrievingEditorialTasks"))((function(){return gr.createElement(gr.Fragment,null,gr.createElement(Fr,null),gr.createElement(Hr,null),gr.createElement(Wr,null),gr.createElement(eo,null))})),no=function(){var e=(0,c.useDispatch)(pr).editExternalFeaturedImage;return gr.createElement("div",{className:"nelio-content-efi-no-image"},gr.createElement(hr.Button,{variant:"link",onClick:e},(0,me._x)("Set external featured image","command","nelio-content")))},ro=function(){var e=io(),t=e[0],n=e[1],r=oo(),o=r[0],i=r[1],a=ao(),s=a.save,c=a.cancel,l=function(e){e&&"Enter"===e.key&&(e.preventDefault(),s())};return gr.createElement("div",{className:"nelio-content-efi-edit-image"},gr.createElement(hr.TextControl,{label:(0,me._x)("Image URL","text","nelio-content"),placeholder:"https://…",value:t,onChange:function(e){n(e)},onKeyDown:l}),gr.createElement(hr.TextControl,{label:(0,me._x)("Alt Text","text","nelio-content"),value:o,onChange:i,onKeyDown:l}),gr.createElement("div",{className:"nelio-content-efi-edit-image__action"},gr.createElement(hr.Button,{variant:"secondary",onClick:c},(0,me._x)("Cancel","command","nelio-content"))," ",gr.createElement(hr.Button,{variant:"secondary",onClick:s,disabled:!(0,m.isUrl)(t)},(0,me._x)("Set Image","command","nelio-content"))))},oo=function(){return[u((function(e){return e(pr).getExternalFeaturedImageAltField()})),(0,c.useDispatch)(pr).setExternalFeaturedImageAltField]},io=function(){return[u((function(e){return e(pr).getExternalFeaturedImageUrlField()})),(0,c.useDispatch)(pr).setExternalFeaturedImageUrlField]},ao=function(){var e=oo()[0],t=io()[0],n=(0,c.useDispatch)(pr),r=n.cancelEditionOfExternalFeaturedImage,o=n.setExternalFeaturedImage;return{save:function(){return(0,m.isUrl)(t)?o(t,e):void 0},cancel:function(){return r()}}},so=function(){var e=u((function(e){return e(pr).getExternalFeaturedImageAlt()})),t=u((function(e){return e(pr).getExternalFeaturedImageUrl()})),n=(0,c.useDispatch)(pr).editExternalFeaturedImage,r=(0,c.useDispatch)(pr).removeExternalFeaturedImage;return gr.createElement("div",{className:"nelio-content-efi-image"},gr.createElement(hr.Button,{className:"nelio-content-efi-image__image-button",onClick:n},gr.createElement("img",{className:"nelio-content-efi-image__actual-image",src:t,alt:e})),gr.createElement("div",{className:"nelio-content-efi-image__replace-button"},gr.createElement(hr.Button,{variant:"secondary",onClick:n},(0,me._x)("Replace Image","command","nelio-content"))),gr.createElement("div",null,gr.createElement(hr.Button,{variant:"link",isDestructive:!0,onClick:r},(0,me._x)("Remove external featured image","command","nelio-content"))))},co=function(){switch(u((function(e){return e(pr).getExternalFeaturedImageView()}))){case"no-image":return gr.createElement(no,null);case"edit-image":return gr.createElement(ro,null);case"image":return gr.createElement(so,null);default:return null}},lo=function(e){var t=e.isAuthor,n=e.remove,r=e.userId,o=(0,nn.useAuthorName)(r);return gr.createElement("div",{className:"nelio-content-notification-user"},gr.createElement("div",{className:"nelio-content-notification-user__icon"},gr.createElement(xr.AuthorIcon,{authorId:r})),gr.createElement("div",{className:"nelio-content-notification-user__info"},gr.createElement("div",{className:"nelio-content-notification-user__name"},o||(0,me._x)("Unknown User","text","nelio-content")),gr.createElement("div",{className:"nelio-content-notification-user__extra"},t&&gr.createElement("span",{className:n?"nelio-content-notification-user__author nelio-content-notification-user__author--has-pipe":"nelio-content-notification-user__author"},(0,me._x)("Author","text","nelio-content")),!!n&&gr.createElement(hr.Button,{className:"nelio-content-notification-user__remove-action",isDestructive:!0,variant:"link",onClick:n},(0,me._x)("Remove","command","nelio-content")))))},uo=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},mo=function(){var e=go(),t=e[0],n=e[1],r=fo(),o=po();return gr.createElement("div",{className:"nelio-content-notifications"},gr.createElement("div",{className:"nelio-content-notifications__user-searcher"},gr.createElement(xr.AuthorSearcher,{placeholder:(0,me._x)("Select a user…","user","nelio-content"),onChange:function(e){var r;e&&(r=e,n((0,f.uniq)(uo(uo([],t,!0),[r],!1))))}})),gr.createElement("div",{className:"nelio-content-notifications__followers"},t.map((function(e){return gr.createElement(lo,{key:e,userId:e,isAuthor:e===r,remove:e===r&&o?void 0:function(){return r=e,n((0,f.without)(t,r));var r}})}))))},fo=function(){return u((function(e){return e(pr).getAuthorId()}))},po=function(){return u((function(e){return e(pr).getAuthorId()}))},go=function(){var e=fo(),t=u((function(e){return e(pr).getFollowers()})),n=(0,c.useDispatch)(pr).setFollowers;return[po()&&e?(0,f.uniq)(uo([e],t,!0)):t,n]},Eo=function(){var e=ho(),t=e[0],n=e[1],r=u((function(e){return e(pr).isReferenceEditorVisible()})),o=u((function(e){var n=e(pr).isReferenceSaving;return!(null==t?void 0:t.url)||n(t.url)})),i=vo(),a=i.close,s=i.saveAndClose;if(!r||!t)return null;var c=t.title,l=t.author,d=t.email,m=t.twitter,f=t.url,p=yo(t);return gr.createElement(hr.Modal,{className:"nelio-content-reference-editor",title:(0,me._x)("Edit Reference","text","nelio-content"),isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:function(){}},gr.createElement(hr.TextControl,{value:c,onChange:function(e){return n({title:e})},placeholder:(0,me._x)("Enter the title…","user","nelio-content")}),gr.createElement("div",{className:"nelio-content-reference-editor__url"},gr.createElement("strong",null,"URL:")," ",gr.createElement(hr.ExternalLink,{href:f},f)),gr.createElement("h3",{className:"nelio-content-reference-editor__section-title"},(0,me._x)("Author Information","text","nelio-content")),gr.createElement(hr.TextControl,{label:(0,me._x)("Name","text","nelio-content"),value:l,onChange:function(e){return n({author:e})},placeholder:(0,me._x)("First and Last Names","text","nelio-content")}),gr.createElement(hr.TextControl,{label:(0,me._x)("Email","text","nelio-content"),value:d,onChange:function(e){return n({email:e})},placeholder:(0,me._x)("author@example.com","text","nelio-content")}),gr.createElement(hr.TextControl,{label:(0,me._x)("X","text","nelio-content"),value:m,onChange:function(e){return n({twitter:e})},placeholder:(0,me._x)("@username","text","nelio-content")}),gr.createElement("div",{className:"nelio-content-reference-editor__actions"},gr.createElement(hr.Button,{variant:"secondary",disabled:o,onClick:a},(0,me._x)("Cancel","command","nelio-content")),gr.createElement(xr.SaveButton,{variant:"primary",error:p,isSaving:o,onClick:function(){s()}})))},ho=function(){return[u((function(e){return e(pr).getEditingReference()})),(0,c.useDispatch)(pr).updateEditingReference]},vo=function(){var e=(0,c.useDispatch)(pr);return{close:e.closeReferenceEditor,saveAndClose:e.saveAndCloseEditingReference}},yo=function(e){var t=e.email,n=e.twitter;return(0,m.isEmpty)(t)||(0,ar.isEmail)(t)?(0,m.isValidTwitterHandler)(n)?"":(0,me._x)("Please write a valid twitter handle","user","nelio-content"):(0,me._x)("Please write a valid email address","user","nelio-content")},_o=function(e){var t=e.onClick;return gr.createElement(xr.DeleteButton,{labels:{delete:(0,me._x)("Discard","command","nelio-content"),deleting:(0,me._x)("Discarding…","text","nelio-content")},confirmationLabels:{title:(0,me._x)("Discard Reference","text","nelio-content"),text:(0,me._x)("Are you sure you want to discard this reference? This operation can’t be undone.","user","nelio-content")},onClick:t})},To=function(){return To=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},To.apply(this,arguments)},bo=function(e){var t=e.link;return gr.createElement("div",{className:"nelio-content-link-reference"},gr.createElement(So,{link:t}),gr.createElement(ko,{link:t}),gr.createElement(Ao,{link:t}),gr.createElement(xo,{link:t}))},So=function(e){var t=e.link,n=Io(t),r=n.title,o=n.url;return r?gr.createElement(gr.Fragment,null,gr.createElement("div",{className:"nelio-content-link-reference__title"},r),gr.createElement("div",{className:"nelio-content-link-reference__link"},gr.createElement(hr.ExternalLink,{href:o},o))):gr.createElement("div",{className:"nelio-content-link-reference__title"},gr.createElement(hr.ExternalLink,{href:o},o))},ko=function(e){var t=e.link,n=wo(t),r=Io(t),o=r.author,i=r.email,a=r.twitter;return n?gr.createElement("div",{className:"nelio-content-link-reference__extra"},(0,me._x)("Loading…","text","nelio-content")):a||i?gr.createElement("div",{className:"nelio-content-link-reference__extra"},gr.createElement("div",{className:"nelio-content-link-reference__author"},o||(0,me._x)("Unknown Author","text","nelio-content")),gr.createElement("div",{className:"nelio-content-link-reference__contact"},!!a&&gr.createElement(hr.ExternalLink,{href:"https://twitter.com/".concat(a)},gr.createElement(hr.Dashicon,{className:"nelio-content-link-reference__contact-icon",icon:"twitter"}))," ",!!i&&gr.createElement(hr.ExternalLink,{href:"mailto:".concat(i)},gr.createElement(hr.Dashicon,{className:"nelio-content-link-reference__contact-icon",icon:"email"})))):gr.createElement("div",{className:"nelio-content-link-reference__extra"},gr.createElement("div",{className:"nelio-content-link-reference__author"},o||(0,me._x)("Unknown Author","text","nelio-content")))},Ao=function(e){var t=e.link,n=Io(t),r=(0,nn.useIsUserYou)(null==n?void 0:n.suggestionAdvisorId),o=(0,nn.useAuthorName)(null==n?void 0:n.suggestionAdvisorId);return n?!n.suggestionAdvisorId||r?gr.createElement("div",{className:"nelio-content-link-reference__advisor"},(0,me._x)("Suggested by you","text","nelio-content")):gr.createElement("div",{className:"nelio-content-link-reference__advisor"},o?(0,me.sprintf)(/* translators: author name */ /* translators: author name */
(0,me._x)("Suggested by %s","text","nelio-content"),o):(0,me._x)("Suggested by someone","text","nelio-content")):gr.createElement("div",{className:"nelio-content-link-reference__advisor"},(0,me._x)("Suggested by someone","text","nelio-content"))},xo=function(e){var t=e.link,n=wo(t),r=(0,c.useDispatch)(pr).openReferenceEditor,o=(0,c.useDispatch)(pr).discardReference;return n?gr.createElement("div",{className:"nelio-content-link-reference__actions"},(0,me.sprintf)("%1$s | %2$s",(0,me._x)("Discard","command","nelio-content"),(0,me._x)("Edit","command","nelio-content"))):gr.createElement("div",{className:"nelio-content-link-reference__actions"},gr.createElement(_o,{onClick:function(){return o(t)}})," | ",gr.createElement(hr.Button,{variant:"link",onClick:function(){return r(t)}},(0,me._x)("Edit","command","nelio-content")))},Io=function(e){return u((function(t){var n=To(To({author:"",date:"",email:"",isExternal:!0,isSuggestion:!0,status:"pending",title:"",twitter:""},t(pr).getReferenceByUrl(e)),{url:e}),r=n.twitter,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["twitter"]);return To(To({},o),{twitter:/^@/.test(r)?r.substring(1):r})}))},wo=function(e){return u((function(t){return t(pr).isReferenceLoading(e)}))},Ro=function(){var e=u((function(e){return e(pr).getSuggestedReferences()}));return(0,m.isEmpty)(e)?gr.createElement("div",null,(0,me._x)("Do you have an interesting or helpful link for the author? Save it here!","user","nelio-content")):gr.createElement("div",null,e.map((function(e){return gr.createElement(bo,{key:e,link:e})})))},Co=function(){var e=Po(),t=e[0],n=e[1],r=No(),o=Do(),i=!(0,m.isEmpty)(t)&&(0,ar.isURL)(t);return gr.createElement("div",{className:"nelio-content-reference-creator"},gr.createElement(hr.TextControl,{autoComplete:"off",placeholder:(0,me._x)("Enter a URL…","user","nelio-content"),value:t,onChange:n,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),i&&r())}}),gr.createElement(hr.Button,{variant:"secondary",disabled:!i,onClick:r},o?(0,me._x)("Add","command","nelio-content"):(0,me._x)("Suggest","command","nelio-content")))},Po=function(){return[u((function(e){return e(pr).getSuggestedReferenceUrl()})),(0,c.useDispatch)(pr).setSuggestedReferenceUrl]},No=function(){var e=Po(),t=e[0],n=e[1],r=(0,c.useDispatch)(pr).suggestReference;return function(){(0,m.isUrl)(t)&&r(t),n("")}},Do=function(){return u((function(e){return e(nn.store).getCurrentUserId()===e(pr).getAuthorId()}))},Oo=function(){return gr.createElement(gr.Fragment,null,gr.createElement(Ro,null),gr.createElement(Co,null))},Mo=function(e){var t=e.onClick,n=e.label,r=u((function(e){return e(pr).getOverallPostQualityStatus()})),o=n||function(e){switch(e){case"perfect":return(0,gr.createInterpolateElement)((0,me._x)("The post looks <strong>awesome</strong>!","text","nelio-content"),{strong:gr.createElement("strong",null)});case"good":return(0,gr.createInterpolateElement)((0,me._x)("The post looks <strong>good</strong>!","text","nelio-content"),{strong:gr.createElement("strong",null)});case"improvable":return(0,gr.createInterpolateElement)((0,me._x)("The post is <strong>improvable</strong>","text","nelio-content"),{strong:gr.createElement("strong",null)});case"bad":return(0,gr.createInterpolateElement)((0,me._x)("The post is <strong>poor</strong>","text","nelio-content"),{strong:gr.createElement("strong",null)});default:return(0,me._x)("Post can’t be evaluated","text","nelio-content")}}(r);return gr.createElement("div",{className:"nelio-content-quality-analysis-summary"},gr.createElement("div",{className:"nelio-content-quality-analysis-summary__icon-wrapper"},gr.createElement("div",{className:"nelio-content-quality-analysis-summary__icon nelio-content-quality-analysis-summary__icon--is-".concat(r)},"perfect"===r&&gr.createElement(hr.Dashicon,{icon:"awards"}),"good"===r&&gr.createElement(hr.Dashicon,{icon:"thumbs-up"}),"improvable"===r&&gr.createElement(hr.Dashicon,{icon:"admin-tools"}),"bad"===r&&gr.createElement(hr.Dashicon,{icon:"thumbs-down"}))),gr.createElement("div",{className:"nelio-content-quality-analysis-summary__explanation"},t?gr.createElement(hr.Button,{variant:"link",onClick:t},gr.createElement("span",null,o)):gr.createElement("span",null,o)))},Lo=function(e){var t=e.icon,n=e.name,r=u((function(e){return e(pr).getQualityCheckStatus(n)})),o=u((function(e){return e(pr).getQualityCheckRationale(n)}));return"invisible"===r?null:gr.createElement("div",{className:"nelio-content-quality-analysis__quality-check"},gr.createElement("div",{className:"nelio-content-quality-analysis__quality-check-icon-wrapper"},gr.createElement("div",{className:"nelio-content-quality-analysis__quality-check-icon nelio-content-quality-analysis__quality-check-icon--is-".concat(r)},gr.createElement(hr.Dashicon,{icon:t}))),gr.createElement("div",{className:"nelio-content-quality-analysis__quality-check-rationale nelio-content-quality-analysis__quality-check-rationale--is-".concat(r)},o))},Fo=function(e){var t=e.isMetabox,n=jo()[0],r=Bo();return gr.createElement("div",{className:"nelio-content-quality-analysis"},gr.createElement(Uo,{enabled:!!t}),n&&gr.createElement("div",{className:"nelio-content-quality-analysis__details"},r.map((function(e){var t=e.name,n=e.icon;return gr.createElement(Lo,{key:t,name:t,icon:n})}))))},Uo=function(e){var t=e.enabled,n=Go(),r=jo(),o=r[0],i=r[1];return t?gr.createElement("div",{className:"nelio-content-quality-analysis__summary"},gr.createElement("div",{className:"nelio-content-quality-analysis__actual-summary"},gr.createElement(Mo,null)),n&&gr.createElement(hr.Button,{className:"nelio-content-quality-analysis__details-toggler",size:"small",onClick:function(){return i(!o)}},gr.createElement(hr.Dashicon,{icon:o?"arrow-up":"arrow-down"}))):null},Go=function(){return u((function(e){return e(pr).isQualityAnalysisFullyIntegrated()}))},Bo=function(){return u((function(e){return e(pr).getQualityCheckTypes()}))},jo=function(){var e="post-quality-analysis",t=Go(),n=u((function(t){return t(pr).isPanelOpen(e)})),r=!t||n,o=(0,c.useDispatch)(pr).togglePanel;return[r,function(t){return o(e,t)}]},Qo=function(e){var t=e.children,n=e.icon,r=e.title,o=e.titleActions,i=e.type;return gr.createElement("div",{className:"nelio-content-social-media-metabox__section"},gr.createElement("div",{className:"nelio-content-social-media-metabox__section-title"},gr.createElement(hr.Dashicon,{icon:n}),r,!!o&&o),gr.createElement("div",{className:"nelio-content-social-media-metabox__section-content nelio-content-social-media-metabox__section-content--is-".concat(i)},t))},Ko=function(){var e=u((function(e){return e(pr).getPost()})),t="publish"===(null==e?void 0:e.status),n=u((function(t){return t(nn.store).getPostTypes("analytics").some((function(t){return t.name===e.type}))}));return e&&n&&t?gr.createElement(Qo,{icon:"chart-bar",title:(0,me._x)("Analytics","text","nelio-content"),type:"analytics"},gr.createElement(xr.PostPageviewsAnalytics,{postId:e.id}),gr.createElement(xr.PostEngagementAnalytics,{postId:e.id})):null},Vo=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},qo=function(){var e=Ho(),t=e.items,n=e.add,r=e.replace,o=e.set;return(0,gr.useEffect)((function(){o(t.filter((function(e){var t=e[0];return!!(0,f.trim)(t)})))}),[]),gr.createElement("div",{className:"nelio-content-permalink-settings"},gr.createElement("div",{className:"nelio-content-permalink-settings__query-args"},t.length?gr.createElement("p",null,(0,me._x)("URL Parameters:","text","nelio-content")):gr.createElement("p",null,(0,me._x)("Add custom URL parameters when sharing this post on social media:","user","nelio-content")),t.map((function(e,t){return gr.createElement(Yo,{key:t,name:e[0],value:e[1],showLabel:!t,onNameChange:function(t){return r(e,[t,e[1]])},onValueChange:function(t){return r(e,[e[0],t])}})})),gr.createElement("div",{className:"nelio-content-permalink-settings__query-args-actions"},gr.createElement(hr.Button,{variant:"secondary",onClick:n},(0,me._x)("Add New","command (URL parameter)","nelio-content")))))},Yo=function(e){var t=e.name,n=e.value,r=e.showLabel,o=e.onNameChange,i=e.onValueChange;return gr.createElement("div",{className:"nelio-content-permalink-settings__query-arg"},gr.createElement(hr.TextControl,{label:r?(0,me._x)("Name","text","nelio-content"):void 0,placeholder:(0,me._x)("Name","text","nelio-content"),value:t,onChange:o}),gr.createElement(hr.TextControl,{label:r?(0,me._x)("Value (optional)","text","nelio-content"):void 0,placeholder:(0,me._x)("Value (optional)","text","nelio-content"),value:n,onChange:i}))},Ho=function(){var e=u((function(e){return e(pr).getQueryArgs()})),t=(0,c.useDispatch)(pr).setQueryArgs;return{items:e,add:function(){return t(Vo(Vo([],e,!0),[["",""]],!1))},replace:function(n,r){return t(e.map((function(e){return e===n?r:e})))},set:t}},zo=function(){return gr.createElement(Qo,{icon:"admin-links",title:(0,me._x)("Permalink Settings","text","nelio-content"),type:"permalink-settings"},gr.createElement(qo,null))},Wo=function(){return u((function(e){var t=e(pr).getPost();return e(nn.store).getPostAutomationGroups(t).some((function(e){return!!e.priority&&(0,f.values)(e.profileSettings).some((function(e){return e.enabled&&(e.publication.enabled||e.reshare.enabled)}))}))}))},Xo=function(){return u((function(e){var t=e(pr),n=t.getPost,r=t.isTimelineBusy,o=e(nn.store).canCurrentUserUseAutomationsInPost;return!r()&&o(n())}))},$o=function(){return u((function(e){return e(pr).getDeletingMessageIds()}))},Jo=function(){return u((function(e){return e(pr).getPost()}))},Zo=function(){return u((function(e){return e(pr).isTimelineBusy()}))},ei=function(){var e=Xo(),t=ri(),n=t[0],r=t[1],o=si(),i=o[0],a=o[1],s=li();return gr.createElement("div",{className:"nelio-content-automation-settings"},gr.createElement(hr.CheckboxControl,{label:(0,me._x)("Auto share on social media","command","nelio-content"),disabled:!e,checked:n,onChange:r}),n&&gr.createElement(gr.Fragment,null,gr.createElement(hr.SelectControl,{disabled:!e,value:i,onChange:a,options:s}),gr.createElement(ni,null),gr.createElement(ti,null)))},ti=function(){var e=Xo(),t=oi(),n=t[0],r=t[1],o=ii(),i=o[0],a=o[1];return gr.createElement("div",{className:"nelio-content-automation-settings__automation-sources"},gr.createElement(hr.CheckboxControl,{label:(0,me._x)("Custom highlights","text","nelio-content"),disabled:!e,checked:n,onChange:function(e){return r(e)}}),n&&gr.createElement(hr.TextareaControl,{help:(0,me._x)("Please write one highlight per line.","user","nelio-content"),disabled:!e,value:i.join("\n"),onChange:a}))},ni=function(){var e=Wo(),t=ci(),n=(0,nn.useAdminUrl)("admin.php",{page:"nelio-content-settings",subpage:"social--automations"});return t?gr.createElement("div",{className:"nelio-content-automation-settings__warning"},(0,me.sprintf)(/* translators: date */ /* translators: date */
(0,me._x)("Warning! Nelio Content will not share any more social messages automatically, because auto sharing was set to end on %s.","text","nelio-content"),t)):e?null:gr.createElement("div",{className:"nelio-content-automation-settings__warning"},(0,gr.createInterpolateElement)((0,me._x)("Warning! None of your automation groups can share this content. Nelio Content will not be able to automatically create any social messages until you <a>update your settings</a> and refresh.","user","nelio-content"),{a:gr.createElement(hr.ExternalLink,{href:n})}))},ri=function(){return[u((function(e){return e(pr).isAutoShareEnabled()})),(0,c.useDispatch)(pr).enableAutoShare]},oi=function(){return ai("useCustomSentences")},ii=function(){var e=u((function(e){return e(pr).getAutomationSources().customSentences})),t=(0,c.useDispatch)(pr).setAutomationSources;return[e,function(e){return t({customSentences:e.split("\n")})}]},ai=function(e){var t=u((function(t){return t(pr).getAutomationSources()[e]})),n=(0,c.useDispatch)(pr).setAutomationSources;return[t,function(t){var r;return n(((r={})[e]=t,r))}]},si=function(){return[u((function(e){return e(pr).getAutoShareEndMode()})),(0,c.useDispatch)(pr).setAutoShareEndMode]},ci=function(){var e,t=ri()[0],n=si()[0],r=u((function(e){return e(nn.store).getToday()})),o=u((function(e){return e(pr).getAutoShareEndModeDuration(n)})),i=u((function(e){return e(pr).getPost()}));if(!t)return!1;if(!o)return!1;if("publish"!==i.status)return!1;var a=Ar()((null==i?void 0:i.date)||void 0).add(o,"months");return(0,Ir.dateI18n)("Y-m-d",a)<r&&(0,Ir.dateI18n)((null===(e=(0,Ir.getSettings)().formats)||void 0===e?void 0:e.date)||"Y-m-d",a)},li=function(){return u((function(e){return e(pr).getAutoShareEndModes()}))},ui=function(){return gr.createElement(Qo,{icon:"admin-settings",title:(0,me._x)("Automation Settings","text","nelio-content"),type:"settings"},gr.createElement(ei,null))};const di=window.NelioContent.socialTimeline;var mi=function(e){var t=e.isSmall,n=Zo(),r=Xo(),o=(0,c.useDispatch)(pr).clearTimeline;return gr.createElement(xr.DeleteButton,{size:t?"small":void 0,disabled:!r,onClick:o,isDeleting:n,labels:{delete:(0,me._x)("Clear Timeline","command","nelio-content"),deleting:(0,me._x)("Clearing Timeline…","text","nelio-content")},confirmationLabels:{title:(0,me._x)("Clear Timeline","text","nelio-content"),text:(0,me._x)("Are you sure you want to clear your timeline? This operation can’t be undone and you’ll lose any manual messages you might have created.","user","nelio-content")}})},fi=function(e){var t=e.enabled,n=Wo(),r=Xo(),o=u((function(e){return e(pr).isGeneratingTimeline()})),i=(0,c.useDispatch)(pr).savePostAndGenerateTimeline;return t?gr.createElement(gr.Fragment,null,n&&gr.createElement(hr.Button,{size:"small",variant:"secondary",isBusy:o,disabled:!r,onClick:i},o?(0,me._x)("Generating Timeline…","text","nelio-content"):(0,me._x)("Regenerate Timeline","command","nelio-content")),gr.createElement(mi,{isSmall:!0})):null};const pi=window.NelioContent.socialMessageEditor;var gi=(0,nn.withProfileCheck)((function(){var e=Ei(),t=hi(),n=Wo(),r=Xo(),o=(0,c.useDispatch)(pr).savePostAndGenerateTimeline,i=u((function(e){return e(pr).getPost()})),a=(0,c.useDispatch)(pi.store).openNewSocialMessageEditor,s=u((function(e){var t=e(pr).getPost(),n=e(pr).isTimelineBusy,r=e(nn.store).canCurrentUserCreateMessagesRelatedToPost;return!n()&&r(t)})),l=u((function(e){var t=e(pr).getPost(),n=e(pr).isTimelineBusy,r=e(nn.store).couldSubscriberCreateMessagesRelatedToPost;return!n()&&r(t)})),d=(0,nn.useFeatureGuard)("edit-post/create-more-messages",l&&!s)((function(){return a({},{context:"post",post:i,disabledProfileIds:Rn()})}));return gr.createElement("div",{className:"nelio-content-generate-timeline-button"},gr.createElement(xr.SubscribeAction,{className:"nelio-content-generate-timeline-button__promo-button"}),n&&gr.createElement("div",{className:"nelio-content-generate-timeline-button__timeline-button"},gr.createElement(hr.Button,{variant:"primary",isBusy:e,disabled:!r,onClick:o},t)),gr.createElement("div",{className:"nelio-content-generate-timeline-button__single-button"},gr.createElement(hr.Button,{variant:n?"tertiary":"primary",disabled:!l,onClick:d,icon:!s&&l?"lock":void 0},(0,me._x)("Add Social Message","command","nelio-content"))))})),Ei=function(){return u((function(e){return e(pr).isGeneratingTimeline()}))},hi=function(){return u((function(e){e(nn.store);var t=e(pr).getPost();if(!t)return"";var n=t.status,r=t.id,o=e(nn.store).getSocialMessagesRelatedToPost(r).filter((function(e){return"publish"!==e.status})),i=e(pr).isGeneratingTimeline;return(0,m.isEmpty)(o)?"publish"===n?i()?(0,me._x)("Filling Timeline…","text","nelio-content"):(0,me._x)("Fill Timeline","command","nelio-content"):(0,e(pr).isAutoShareEnabled)()?i()?(0,me._x)("Loading Timeline…","text","nelio-content"):(0,me._x)("Customize Timeline","command","nelio-content"):i()?(0,me._x)("Generating Timeline…","text","nelio-content"):(0,me._x)("Generate Timeline","command","nelio-content"):i()?(0,me._x)("Generating Timeline…","text","nelio-content"):(0,me._x)("Regenerate Timeline","command","nelio-content")}))},vi=function(){var e=u((function(e){return!!e(nn.store).getSocialProfileCount()})),t=yi(),n=(0,c.useDispatch)(pr).deleteSocialMessage,r=$o(),o=Zo(),i=Jo();return gr.createElement(Qo,{icon:"share",title:(0,me._x)("Timeline","text","nelio-content"),titleActions:gr.createElement(fi,{enabled:e&&t}),type:"timeline"},t?gr.createElement(di.SocialTimeline,{deleteMessage:n,deletingMessageIds:r,isTimelineBusy:o,post:i}):gr.createElement(gi,null))},yi=function(){return u((function(e){var t=e(pr).getPostId,n=(0,e(nn.store).getSocialMessagesRelatedToPost)(t());return!!(0,f.find)(n,(function(e){return"publish"!==e.status}))}))},_i=(0,Er.compose)(Or,Mr("isRetrievingSocialMessages"))((function(){return gr.createElement(hr.SlotFillProvider,null,gr.createElement("div",{className:"nelio-content-social-media-metabox"},gr.createElement(Ko,null),gr.createElement(vi,null),gr.createElement(ui,null),gr.createElement(zo,null)),gr.createElement(hr.Popover.Slot,null))})),Ti=function(){var e=bi(),t=(0,c.useDispatch)("core/edit-post").openGeneralSidebar;return gr.createElement("div",{className:"nelio-content-social-media-publish-summary"},gr.createElement("div",{className:"nelio-content-social-media-publish-summary__icon"},gr.createElement(hr.Dashicon,{icon:"share"})),gr.createElement("div",{className:"nelio-content-social-media-publish-summary__button"},gr.createElement(hr.Button,{variant:"link",onClick:function(){t("nelio-content/nelio-content-social-sidebar")}},e)))},bi=function(){return u((function(e){var t=e(pr).getPost,n=e(nn.store).getSocialMessagesRelatedToPost,r=t()||{},o=r.status,i=n(r.id);if("publish"===o&&(0,m.isEmpty)(i))return(0,me._x)("Share on social media","command","nelio-content");if((0,m.isEmpty)(i))return(0,e(pr).isAutoShareEnabled)()?(0,me._x)("Customize social messages","command","nelio-content"):(0,me._x)("Share on social media","command","nelio-content");var a=i.filter((function(e){return"publish"!==e.status})),s=a.length;return(0,me.sprintf)(/* translators: number of social messages */ /* translators: number of social messages */
(0,me._nx)("%d social message ready","%d social messages ready",s,"text","nelio-content"),s)}))},Si=function(){return gr.createElement(hr.PanelBody,{className:"nelio-content-social-media-sidebar-main-panel"},gr.createElement(hr.PanelRow,{className:"nelio-content-social-media-sidebar-main-panel__buttons"},gr.createElement(gi,null)))},ki=function(){var e=(0,c.useDispatch)(pr).deleteSocialMessage,t=$o(),n=Zo(),r=Jo();return Ai()?gr.createElement(hr.PanelBody,{className:"nelio-content-sidebar-timeline",title:(0,me._x)("Social Timeline","text","nelio-content")},gr.createElement(di.SocialTimeline,{deleteMessage:e,deletingMessageIds:t,isTimelineBusy:n,post:r}),gr.createElement("div",{className:"nelio-content-sidebar-timeline__clear-button"},gr.createElement(mi,null))):null},Ai=function(){return u((function(e){var t=e(pr).getPostId,n=(0,e(nn.store).getSocialMessagesRelatedToPost)(t());return!!(0,f.find)(n,(function(e){return"publish"!==e.status}))}))},xi=function(){return gr.createElement(hr.PanelBody,{title:(0,me._x)("Automation Settings","text","nelio-content")},gr.createElement(ei,null))},Ii=function(){return gr.createElement(hr.PanelBody,{title:(0,me._x)("Permalink Settings","text","nelio-content")},gr.createElement(qo,null))},wi=function(){var e,t=u((function(e){return e(pr).isPostReady()})),n=u((function(e){return e(pr).isRetrievingSocialMessages()})),r=null!==(e=(0,xr.getPremiumComponent)("gutenberg-editor/network-images-panel"))&&void 0!==e?e:(0,xr.getPremiumComponent)("elementor-editor/network-images-panel",(function(){return gr.createElement(xr.PremiumPlaceholderPanel,{title:(0,me._x)("Custom Social Images","text","nelio-content"),feature:"raw/network-images"})}));return t?n?gr.createElement(hr.PanelBody,null,(0,me._x)("Loading…","text","nelio-content")):gr.createElement(gr.Fragment,null,gr.createElement(Si,null),gr.createElement(ki,null),gr.createElement(xi,null),gr.createElement(r,null),gr.createElement(Ii,null)):gr.createElement(hr.PanelBody,null,(0,me._x)("Please save post first to access this feature.","user","nelio-content"))},Ri=(0,Er.compose)(nn.withProfileCheck,Or)((function(){var e=(0,c.useDispatch)("core/edit-post").openGeneralSidebar;return gr.createElement("div",{className:"nelio-content-social-media-tools"},gr.createElement("p",null,(0,me._x)("Nelio Content helps you share WordPress content on social media, so that you can reach a broader audience and engage with more people.","text","nelio-content")),gr.createElement(hr.Button,{variant:"secondary",onClick:function(){e("nelio-content/nelio-content-social-sidebar")}},(0,me._x)("View Social Timeline","command","nelio-content")))})),Ci={};function Pi(e){var t,n,r;void 0===e&&(e={});var o=(0,c.select)(pr).getPostQualitySettings(),i={allowedBads:null!==(t=e.allowedBads)&&void 0!==t?t:o.allowedBads,allowedImprovables:null!==(n=e.allowedImprovables)&&void 0!==n?n:o.allowedImprovables,unacceptableImprovables:null!==(r=e.unacceptableImprovables)&&void 0!==r?r:o.unacceptableImprovables};(0,c.dispatch)(pr).setPostQualitySettings(i)}function Ni(e,t){var n=t.icon,r=t.interval,o=void 0===r?500:r,i=t.settings,a=void 0===i?{}:i,s=t.attributes,u=t.validate;if("string"==typeof e)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(e))if((0,c.select)(pr).getQualityCheckType(e))console.error("Quality check “".concat(e,"” is already registered."));else if(n)if((0,f.isFunction)(s))if((0,f.isFunction)(u)){if(void 0!==o&&a){var d={name:e,icon:n,interval:o,settings:a,attributes:s,validate:u};return(0,c.dispatch)(pr).addQualityCheckType(d),function(e,t){t=Math.max(t,500);var n=(0,f.throttle)((function(){var t=(0,(0,c.select)(pr).getQualityCheckType)(e);if(t){var n=Ci[e];if(n){var r,o=n.prevAttributes,i=n.prevSettings,a=t.settings;try{r=t.attributes(c.select)}catch(e){return void console.error(e)}if(n.prevAttributes=r,n.prevSettings=a,!(0,f.isEqual)(o,r)||i!==a)try{var s=t.validate(r,a)||{},l=s.status,u=void 0===l?"unknown":l,d=s.text,m=void 0===d?(0,me._x)("Unknown status","text","nelio-content"):d;(0,(0,c.dispatch)(pr).updateQualityCheckItem)(e,u,m)}catch(e){console.error(e)}}}}),t);Ci[e]={unsubscribe:l(n),prevAttributes:{},prevSettings:{}},n()}(e,d.interval),d}}else console.error("The “validate” property must be a valid function.");else console.error("The “attributes” property must be a valid function.");else console.error("Quality check “".concat(e,"” must have an icon."));else console.error("Quality check names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-quality-check");else console.error("Quality check names must be strings.")}function Di(e){!function(e){var t;null===(t=Ci[e])||void 0===t||t.unsubscribe(),delete Ci[e]}(e),(0,c.dispatch)(pr).removeQualityCheckType(e)}function Oi(e,t){(0,c.select)(pr).getQualityCheckType(e)&&(0,c.dispatch)(pr).updateQualityCheckSettings(e,t)}Ni("nelio-content/yoast-seo",{icon:"book",attributes:function(e){var t;if(!e("yoast-seo/editor"))return{status:"invisible",text:""};try{var n=e("yoast-seo/editor").getFocusKeyphrase;if(!(null==n?void 0:n()))return{status:"unknown",text:(0,me._x)("Yoast SEO score is not available","text","nelio-content")};var r=e("yoast-seo/editor").getResultsForFocusKeyword,o=null==r?void 0:r(),i=null!==(t=null==o?void 0:o.overallScore)&&void 0!==t?t:0;return i<40?{status:"bad",text:(0,me._x)("Address your Yoast SEO score","user","nelio-content")}:i<70?{status:"improvable",text:(0,me._x)("Improve Yoast SEO score","user","nelio-content")}:{status:"good",text:(0,me._x)("Yoast SEO looks good","user","nelio-content")}}catch(e){return{status:"unknown",text:(0,me._x)("Unable to retrieve Yoast SEO score","text","nelio-content")}}},validate:function(e){return e}}),Ni("nelio-content/yoast-content",{icon:"chart-bar",attributes:function(e){var t;if(!e("yoast-seo/editor"))return{status:"invisible",text:""};try{var n=e("yoast-seo/editor").getReadabilityResults,r=null==n?void 0:n(),o=null!==(t=null==r?void 0:r.overallScore)&&void 0!==t?t:0;return o<40?{status:"bad",text:(0,me._x)("According to Yoast, content needs improvement","text","nelio-content")}:o<70?{status:"improvable",text:(0,me._x)("According to Yoast, content is OK","text","nelio-content")}:{status:"good",text:(0,me._x)("According to Yoast, content is good","text","nelio-content")}}catch(e){return{status:"unknown",text:(0,me._x)("Unable to retrieve Yoast Content Analysis","text","nelio-content")}}},validate:function(e){return e}});const Mi=window.NelioContent.networks;function Li(e){return"tiktok"!==e.network}Ni("nelio-content/social-messages",{icon:"share",settings:{isNoProfilesBad:!0,isAllProfilesEmptyBad:!0,isSomeProfilesEmptyBad:!1},attributes:function(e){var t=e(pr),n=e(nn.store),r=t.getAutomationSources(),o=t.isAutoShareEnabled(),i=t.getContent().includes("<ncshare>")||r.useCustomSentences;return{isEnabled:n.getPostTypes("social").map((function(e){return e.name})).includes(t.getPostType()),isPostAutoShareable:o&&i,isPublished:"publish"===t.getStatus(),hasImages:!!t.getImages().length||!!t.getFeaturedImageSrc(),messages:n.getSocialMessagesRelatedToPost(t.getPostId()),profiles:n.getSocialProfiles()}},validate:function(e,t){var n=e.isEnabled,r=e.isPostAutoShareable,o=e.isPublished,i=e.hasImages,a=e.messages,s=e.profiles,c=t.isNoProfilesBad,l=t.isAllProfilesEmptyBad,u=t.isSomeProfilesEmptyBad;return n?o?{status:"good",text:(0,me._x)("Social messages look good","text","nelio-content")}:(0,m.isEmpty)(s)?{status:c?"bad":"improvable",text:(0,me._x)("Connect some profiles to share this on social media","user","nelio-content")}:(s=s.filter(Li),(0,m.isEmpty)(s)?{status:"improvable",text:(0,me._x)("Connect non-TikTok profiles to promote this on social media","user","nelio-content")}:(0,m.isEmpty)(a)?r&&s.every((function(e){return!!e.publicationFrequency}))?!i&&s.every((function(e){return(0,Mi.doesNetworkRequire)("image",e.network)}))?{status:l?"bad":"improvable",text:(0,me._x)("Social messages can’t be auto-generated because all profiles require an image","text","nelio-content")}:!i&&s.some((function(e){return(0,Mi.doesNetworkRequire)("image",e.network)}))?{status:u?"bad":"improvable",text:(0,me._x)("Some profiles require an image and their social messages can’t be auto-generated","text","nelio-content")}:{status:"good",text:(0,me._x)("Automatic social messages look good","text","nelio-content")}:{status:l?"bad":"improvable",text:(0,me._x)("Schedule social messages on all profiles","user","nelio-content")}:s.every((function(e){return a.some((function(t){return t.profileId===e.id}))}))?{status:"good",text:(0,me._x)("Social messages look good","text","nelio-content")}:{status:u?"bad":"improvable",text:(0,me._x)("Schedule social messages on all profiles","user","nelio-content")}):{status:"invisible",text:""}}}),Ni("nelio-content/editorial-tasks",{icon:"flag",settings:{useBadStatus:!0},attributes:function(e){var t=e(pr),n=t.getPostId,r=t.getPostType,o=e(nn.store),i=o.getPostTypes,a=o.getTasksRelatedToPost;return{isEnabled:i("tasks").map((function(e){return e.name})).includes(r()),tasks:a(n())}},validate:function(e,t){var n=e.isEnabled,r=e.tasks,o=t.useBadStatus;if(!n)return{status:"invisible",text:""};var i=r.filter((function(e){return!e.completed}));return(0,m.isEmpty)(i)?{status:"good",text:(0,me._x)("There are no pending tasks","text","nelio-content")}:{status:o?"bad":"improvable",text:(0,me._x)("Complete all tasks","user","nelio-content")}}});const Fi=window.wp.coreData;Ni("nelio-content/featured-image",{icon:"format-image",settings:{useBadStatus:!0,canImageBeAutoSet:!1},attributes:function(e){var t=e(pr),n=t.getFeaturedImageSrc,r=(0,t.getPostType)(),o=r?e(Fi.store).getEntityRecord("root","postType",r):void 0;return{isEnabled:!!(null==o?void 0:o.supports.excerpt),imageSrc:n()}},validate:function(e,t){var n=e.isEnabled,r=e.imageSrc,o=t.canImageBeAutoSet,i=t.useBadStatus;if(!n)return{status:"invisible",text:""};var a=!(0,m.isEmpty)(r);return o||a?{status:"good",text:a?(0,me._x)("There’s a featured image","text","nelio-content"):(0,me._x)("Automatic featured image","text","nelio-content")}:{status:i?"bad":"improvable",text:(0,me._x)("Set a featured image","user","nelio-content")}}}),Ni("nelio-content/content-length",{icon:"edit",interval:2e3,settings:{improvableThreshold:700,goodThreshold:1e3},attributes:function(e){return{content:(0,e(pr).getContent)()}},validate:function(e,t){var n=e.content,r=t.improvableThreshold,o=t.goodThreshold,i=function(e){return void 0===e&&(e=""),(e=(e=e.replace(/<[^>]*>/g,"")).replace(/\s+/g," ")).split(" ").length}(n);return i<r?{status:"bad",text:(0,me._x)("Write a longer copy","user","nelio-content")}:i<o?{status:"improvable",text:(0,me._x)("Write a longer copy","user","nelio-content")}:{status:"good",text:(0,me._x)("Copy length looks good","text","nelio-content")}}}),Ni("nelio-content/internal-links",{icon:"admin-links",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{content:(0,e(pr).getContent)()}},validate:function(e,t){var n=e.content,r=(0,m.getLinks)(n).filter(m.isInternalUrl),o=t.improvableThreshold,i=t.goodThreshold,a=i-r.length;return(0,m.isEmpty)(r)?{status:r.length<o?"bad":"improvable",text:(0,me.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,me._nx)("Add %d link to your own site","Add %d links to your own site",a,"user","nelio-content"),a)}:r.length<i?{status:r.length<o?"bad":"improvable",text:(0,me.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,me._nx)("Add %d more link to your own site","Add %d more links to your own site",a,"user","nelio-content"),a)}:{status:"good",text:(0,me._x)("Links to your own site look good","text","nelio-content")}}}),Ni("nelio-content/external-links",{icon:"external",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{content:(0,e(pr).getContent)()}},validate:function(e,t){var n=e.content,r=(0,m.getLinks)(n).filter(m.isExternalUrl),o=t.improvableThreshold,i=t.goodThreshold,a=i-r.length;return(0,m.isEmpty)(r)?{status:r.length<o?"bad":"improvable",text:(0,me.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,me._nx)("Add %d link to an external source","Add %d links to external sources",a,"user","nelio-content"),a)}:r.length<i?{status:r.length<o?"bad":"improvable",text:(0,me.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,me._nx)("Add %d more link to an external source","Add %d more links to external sources",a,"user","nelio-content"),a)}:{status:"good",text:(0,me._x)("Links to external sources look good","text","nelio-content")}}}),Ni("nelio-content/content-images",{icon:"images-alt",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{images:(0,e(pr).getImages)()}},validate:function(e,t){var n=e.images,r=t.improvableThreshold,o=t.goodThreshold,i=o-n.length;return(0,m.isEmpty)(n)?{status:n.length<r?"bad":"improvable",text:(0,me.sprintf)(/* translators: number of images */ /* translators: number of images */
(0,me._nx)("Add %d image in your copy","Add %d images in your copy",i,"user","nelio-content"),i)}:n.length<o?{status:n.length<r?"bad":"improvable",text:(0,me.sprintf)(/* translators: number of images */ /* translators: number of images */
(0,me._nx)("Add %d more image in your copy","Add %d more images in your copy",i,"user","nelio-content"),i)}:{status:"good",text:(0,me._x)("Image count looks good","text","nelio-content")}}}),Ni("nelio-content/author",{icon:"admin-users",settings:{useBadStatus:!1},attributes:function(e){var t=e(pr),n=t.getAuthorId,r=t.getPostType,o=(0,e(nn.store).getAuthor)(n()),i=r(),a=i?e(Fi.store).getEntityRecord("root","postType",i):void 0;return{isEnabled:!!(null==a?void 0:a.supports.author),isAdmin:!!(null==o?void 0:o.isAdmin)}},validate:function(e,t){var n=e.isEnabled,r=e.isAdmin,o=t.useBadStatus;return n?r?{status:o?"bad":"improvable",text:(0,me._x)("Select a non-admin author","user","nelio-content")}:{status:"good",text:(0,me._x)("Valid author","text","nelio-content")}:{status:"invisible",text:""}}}),Ni("nelio-content/excerpt",{icon:"text",settings:{useBadStatus:!1},attributes:function(e){var t=e(pr),n=t.getExcerpt,r=(0,t.getPostType)(),o=r?e(Fi.store).getEntityRecord("root","postType",r):void 0;return{isEnabled:!!(null==o?void 0:o.supports.excerpt),excerpt:n()}},validate:function(e,t){var n=e.isEnabled,r=e.excerpt,o=t.useBadStatus;return n?(0,m.isEmpty)((0,f.trim)(r))?{status:o?"bad":"improvable",text:(0,me._x)("Write an excerpt","user","nelio-content")}:{status:"good",text:(0,me._x)("Excerpt looks good","text","nelio-content")}:{status:"invisible",text:""}}}),Ni("nelio-content/tags",{icon:"tag",settings:{useBadStatus:!0},attributes:function(e){var t,n=e(pr),r=n.getPostType,o=n.getTerms,i=e(Fi.store).getEntityRecords,a=r(),s=i("root","taxonomy",{per_page:-1})||[],c=(0,f.filter)(s,(function(e){return e.visibility.public&&e.types.includes(null!=a?a:"")})).map((function(e){return e.slug}));return{tags:null!==(t=o(m.TAG))&&void 0!==t?t:o(m.PROD_TAG),isActive:c.includes(m.TAG)||c.includes(m.PROD_TAG)}},validate:function(e,t){var n=e.tags,r=t.useBadStatus;return(0,m.isEmpty)(n)?{status:r?"bad":"improvable",text:(0,me._x)("Add one or more tags","user","nelio-content")}:{status:"good",text:(0,me._x)("Content is properly tagged","text","nelio-content")}}});var Ui=function(e){var t=u((function(t){return t(pr).isPanelOpen(e)})),n=(0,c.useDispatch)(pr).togglePanel;return[t,function(){return n(e,!t)}]},Gi=function(){return u((function(e){var t=e(pr).getPost,n=e(nn.store),r=n.isSubscribed,o=n.getProfilesWithMessagesRelatedToPost,i=t();return r()||!(null==i?void 0:i.id)?[]:o(i.id)}))};function Bi(e,t){(0,fn.addFilter)("nelio-content_edit-post_onDeletePremiumItem","deletePremium".concat((0,m.pascalCase)(e)),(function(n,r,o){return r===e?t(o):n}))}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){for(var[n,o,i]=e[u],s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={3178:0,805:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,s,c]=n,l=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var u=c(r)}for(t&&t(n);l<a.length;l++)i=a[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},n=globalThis.webpackChunkNelioContent=globalThis.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[805],(()=>r(6790)));o=r.O(o);var i=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var a in o)i[a]=o[a];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();