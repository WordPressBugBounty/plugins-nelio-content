(()=>{var e,t={5999:(e,t,n)=>{"use strict";n.r(t),n.d(t,{editPost:()=>s});var r={};n.r(r),n.d(r,{getAuthorId:()=>X,getAutoShareEndMode:()=>ae,getAutoShareEndModeDuration:()=>Ce,getAutoShareEndModes:()=>we,getAutomationSources:()=>se,getContent:()=>H,getDate:()=>z,getDeletingMessageIds:()=>Oe,getEditingReference:()=>be,getEditorialCommentInputValue:()=>N,getExcerpt:()=>Y,getExternalFeaturedImageAlt:()=>U,getExternalFeaturedImageAltField:()=>B,getExternalFeaturedImageUrl:()=>F,getExternalFeaturedImageUrlField:()=>G,getExternalFeaturedImageView:()=>M,getFeaturedImageId:()=>Z,getFeaturedImageSrc:()=>ee,getFollowers:()=>J,getImages:()=>ne,getOverallPostQualityStatus:()=>de,getPanelStatuses:()=>xe,getPermalink:()=>W,getPermalinkTemplate:()=>$,getPost:()=>Q,getPostId:()=>K,getPostQualitySettings:()=>le,getPostType:()=>V,getQualityCheckRationale:()=>fe,getQualityCheckStatus:()=>me,getQualityCheckType:()=>Ee,getQualityCheckTypes:()=>ge,getQueryArgs:()=>oe,getReferenceByUrl:()=>he,getStatus:()=>te,getSuggestedReferenceUrl:()=>Se,getSuggestedReferences:()=>ve,getTaskPresetLoaderState:()=>Be,getTaskPresetSelection:()=>Ge,getTerms:()=>re,getTitle:()=>q,isAutoShareEnabled:()=>ie,isClassicEditor:()=>Ae,isClearingTimeline:()=>Ne,isDeletingEditorialComment:()=>D,isEditorialTaskBeingDeleted:()=>Me,isEditorialTaskBeingSynched:()=>Fe,isGeneratingTimeline:()=>Pe,isPanelOpen:()=>ke,isPostReady:()=>j,isPremiumItemBeingDeleted:()=>pe,isQualityAnalysisFullyIntegrated:()=>ue,isReferenceEditorVisible:()=>Te,isReferenceLoading:()=>ye,isReferenceSaving:()=>_e,isRetrievingEditorialComments:()=>L,isRetrievingEditorialTasks:()=>Ue,isRetrievingSocialMessages:()=>Le,isSocialMessageBeingDeleted:()=>De,isSynchingEditorialComment:()=>O,isTimelineBusy:()=>Re,shouldAuthorBeFollower:()=>Ie});var o={};n.r(o),n.d(o,{addQualityCheckType:()=>_t,cancelEditionOfExternalFeaturedImage:()=>qe,closeReferenceEditor:()=>Ct,discardReference:()=>It,doOpenReferenceEditor:()=>Nt,editExternalFeaturedImage:()=>Ve,enableAutoShare:()=>dt,includeAuthorInFollowers:()=>Mt,markAsLoadingPostItems:()=>gt,markEditorialCommentAsDeleting:()=>Ke,markEditorialCommentAsSynching:()=>Qe,markEditorialTaskAsDeleting:()=>Qt,markEditorialTaskAsSynching:()=>jt,markPremiumItemAsDeleting:()=>yt,markQualityAnalysisAsFullyIntegrated:()=>Et,markReferenceAsLoading:()=>Rt,markReferenceAsSaving:()=>Pt,markSocialMessageAsDeleting:()=>Ut,markTimelineAsClearing:()=>Bt,markTimelineAsGenerating:()=>Gt,openTaskPresetLoader:()=>Kt,receiveReferences:()=>St,removeCustomField:()=>$e,removeExternalFeaturedImage:()=>He,removeFeaturedImage:()=>ct,removeQualityCheckType:()=>Tt,selectTaskPresets:()=>Vt,setAuthor:()=>ot,setAutoShareEndMode:()=>mt,setAutoShareEndModes:()=>Ft,setAutomationSources:()=>ft,setContent:()=>nt,setCustomField:()=>We,setDate:()=>rt,setEditorToClassic:()=>Lt,setEditorialCommentInputValue:()=>je,setExcerpt:()=>tt,setExternalFeaturedImage:()=>Ye,setExternalFeaturedImageAltField:()=>Xe,setExternalFeaturedImageUrlField:()=>ze,setFeaturedImage:()=>st,setFollowers:()=>at,setPanelSettings:()=>Dt,setPermalink:()=>it,setPost:()=>Je,setPostId:()=>Ze,setPostQualitySettings:()=>ht,setQueryArgs:()=>pt,setStatus:()=>lt,setSuggestedReferenceUrl:()=>At,setTaskPresetsState:()=>qt,setTerms:()=>ut,setTitle:()=>et,suggestReference:()=>xt,suggestReferences:()=>kt,togglePanel:()=>Ot,updateEditingReference:()=>wt,updateQualityCheckItem:()=>vt,updateQualityCheckSettings:()=>bt});var i={};n.r(i),n.d(i,{clearTimeline:()=>Ln,createEditorialComment:()=>$t,deleteEditorialComment:()=>Jt,deleteEditorialTask:()=>qn,deletePremiumItem:()=>cn,deleteSocialMessage:()=>Mn,generateTimeline:()=>On,instantiatePresets:()=>Vn,loadPostItems:()=>nn,markTaskAsCompleted:()=>Kn,openReferenceEditor:()=>dn,saveAndCloseEditingReference:()=>mn,savePostAndGenerateTimeline:()=>Dn,saveReference:()=>fn,updateDatesInPostRelatedItems:()=>rn});var a={};n.r(a),n.d(a,{getReferenceByUrl:()=>Jn});var s={};n.r(s),n.d(s,{EditorialComments:()=>Ar,EditorialTasks:()=>Kr,ExternalFeaturedImage:()=>Wr,Notifications:()=>Zr,QualityAnalysis:()=>xo,QualityAnalysisSummary:()=>So,ReferenceEditor:()=>ro,References:()=>bo,SocialMediaMetabox:()=>ci,SocialMediaSidebar:()=>Ei,SocialMediaSummary:()=>li,SocialMediaTools:()=>hi,deregisterQualityCheck:()=>Ti,getDisabledProfiles:()=>yn,onDeletePremiumItem:()=>wi,processHtml:()=>Tn,registerQualityCheck:()=>_i,store:()=>nr,updatePostQualitySettings:()=>yi,updateQualityCheckSettings:()=>bi,useDisabledProfiles:()=>Ii,usePanelToggling:()=>ki,withLoadingCheck:()=>Sr,withPostReadyCheck:()=>br});const c=window.wp.data;function l(e,t){return(0,c.useSelect)(e,t)}function u(e){return(0,c.resolveSelect)(e)}const d=window.NelioContent.utils,m=window.lodash;var f=n(4396),p={comments:{synching:[],deleting:[],input:"",isRetrievingComments:!1},externalFeaturedImage:{view:"no-image",fields:{url:"",alt:""},imageUrl:void 0,imageAlt:""},post:{id:(0,f.L8)()(0),author:(0,f.L8)()(0),authorName:"",content:"",customFields:{},customPlaceholders:{},date:"",editLink:(0,f.L8)()(""),excerpt:"",followers:[],imageId:0,imageSrc:!1,images:[],isAutoShareEnabled:!1,permalink:(0,f.L8)()(""),permalinks:{},permalinkQueryArgs:[],permalinkTemplate:"",statistics:{engagement:{},pageviews:void 0},status:d.AUTO_DRAFT,taxonomies:{},thumbnailSrc:!1,title:"",type:d.POST,typeName:"",viewLink:(0,f.L8)()(""),autoShareEndMode:"never",automationSources:{useCustomSentences:!1,customSentences:[]}},postQuality:{checks:{},isFullyIntegrated:!1,settings:{allowedBads:1,allowedImprovables:2,unacceptableImprovables:4}},qualityCheckTypes:{},references:{byUrl:{},byType:{suggested:[]},status:{loading:[],saving:[]},editor:{isActive:!1},suggestedUrl:""},settings:{isClassicEditor:!1,panels:{},shouldAuthorBeFollower:!1,autoShareEndModes:[]},social:{deleting:[],timelineStatus:"ready",isRetrievingSocialMessages:!1},tasks:{preset:void 0,synching:[],deleting:[],isRetrievingTasks:!1},premiumByType:{}},g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},g.apply(this,arguments)},E=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)},v=function(){return v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v.apply(this,arguments)};function y(e){void 0===e&&(e="");var t=e.match(/img[^>]*src="[^"]+"|img[^>]*src='[^']+'/gi)||[];return(0,m.uniq)(t.map((function(e){return e.replace(/.*src=.(.*)./,"$1")})).filter(d.isUrl))}var _=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)},T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},T.apply(this,arguments)},b=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S.apply(this,arguments)},A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A.apply(this,arguments)},x=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},k=function(){return k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},k.apply(this,arguments)},I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},I.apply(this,arguments)},w=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},C=function(){return C=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C.apply(this,arguments)},R=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const P=(0,c.combineReducers)({comments:function(e,t){var n;return void 0===e&&(e=p.comments),null!==(n=function(e,t){switch(t.type){case"SET_EDITORIAL_COMMENT_INPUT_VALUE":return g(g({},e),{input:t.value});case"MARK_EDITORIAL_COMMENT_AS_SYNCHING":return g(g({},e),{synching:t.isSynching?E(E([],e.synching,!0),[t.commentId],!1):(0,m.without)(e.synching,t.commentId)});case"MARK_EDITORIAL_COMMENT_AS_DELETING":return g(g({},e),{deleting:t.isDeleting?E(E([],e.deleting,!0),[t.commentId],!1):(0,m.without)(e.deleting,t.commentId)});case"MARK_AS_LOADING_POST_ITEMS":return g(g({},e),{isRetrievingComments:t.isLoading})}}(e,t))&&void 0!==n?n:e},externalFeaturedImage:function(e,t){var n;return void 0===e&&(e=p.externalFeaturedImage),null!==(n=function(e,t){var n;switch(t.type){case"SET_EXTERNAL_FEATURED_IMAGE":return{view:"image",fields:{url:t.url,alt:t.altText},imageUrl:t.url,imageAlt:t.altText};case"REMOVE_EXTERNAL_FEATURED_IMAGE":return{view:"no-image",fields:{url:"",alt:""},imageUrl:void 0,imageAlt:""};case"SET_EXTERNAL_FEATURED_IMAGE_URL_FIELD":return h(h({},e),{fields:h(h({},e.fields),{url:t.url})});case"SET_EXTERNAL_FEATURED_IMAGE_ALT_FIELD":return h(h({},e),{fields:h(h({},e.fields),{alt:t.altText})});case"EDIT_EXTERNAL_FEATURED_IMAGE":return h(h({},e),{view:"edit-image"});case"CANCEL_EDITION_OF_EXTERNAL_FEATURED_IMAGE":return h(h({},e),{view:e.imageUrl?"image":"no-image",fields:{url:null!==(n=e.imageUrl)&&void 0!==n?n:"",alt:e.imageAlt}})}}(e,t))&&void 0!==n?n:e},post:function(e,t){var n;return void 0===e&&(e=p.post),null!==(n=function(e,t){var n,r,o,i;switch(t.type){case"SET_POST_ID":return e.id?e:v(v({},e),{id:e.id});case"SET_POST":var a=t.post,s=a.imageSrc,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(a,["imageSrc"]);return v(v(v({},p.post),c),{imageSrc:s||!1,images:y(null==c?void 0:c.content),automationSources:v(v({},p.post.automationSources),null==c?void 0:c.automationSources)});case"SET_QUERY_ARGS":return v(v({},e),{permalinkQueryArgs:t.args});case"SET_CUSTOM_FIELD":return v(v({},e),{customFields:(0,m.has)(e.customFields,t.key)?v(v({},e.customFields),(n={},n[t.key]=v(v({},e.customFields[t.key]),{value:t.value}),n)):e.customFields});case"REMOVE_CUSTOM_FIELD":return v(v({},e),{customFields:(0,m.has)(e.customFields,t.key)?v(v({},e.customFields),(r={},r[t.key]=v(v({},e.customFields[t.key]),{value:""}),r)):e.customFields});case"SET_TITLE":return v(v({},e),{title:t.title});case"SET_EXCERPT":return v(v({},e),{excerpt:t.excerpt});case"SET_CONTENT":return v(v({},e),{content:t.content,images:y(t.content)});case"SET_DATE":return v(v({},e),{date:null!==(i=t.date)&&void 0!==i&&i});case"SET_AUTHOR":return v(v({},e),{author:t.authorId,authorName:t.authorName});case"SET_PERMALINK":return v(v({},e),{permalink:t.permalink});case"SET_FEATURED_IMAGE":return v(v({},e),{imageId:t.imageId,imageSrc:t.imageSrc,thumbnailSrc:t.thumbnailSrc});case"REMOVE_FEATURED_IMAGE":return v(v({},e),{imageId:0,imageSrc:!1,thumbnailSrc:!1});case"SET_FOLLOWERS":return v(v({},e),{followers:t.followers});case"SET_STATUS":return v(v({},e),{status:t.status});case"SET_TERMS":return v(v({},e),{taxonomies:v(v({},e.taxonomies),(o={},o[t.taxonomy]=t.terms,o))});case"ENABLE_AUTO_SHARE":return v(v({},e),{isAutoShareEnabled:t.isAutoShareEnabled});case"SET_AUTO_SHARE_END_MODE":return v(v({},e),{autoShareEndMode:t.autoShareEndMode});case"SET_AUTOMATION_SOURCES":return v(v({},e),{automationSources:v(v({},e.automationSources),t.sources)});case"MARK_AS_LOADING_POST_ITEMS":return e}}(e,t))&&void 0!==n?n:e},postQuality:function(e,t){var n;return void 0===e&&(e=p.postQuality),null!==(n=function(e,t){var n;switch(t.type){case"ADD_QUALITY_CHECK_TYPE":case"UPDATE_QUALITY_CHECK_SETTINGS":return e;case"REMOVE_QUALITY_CHECK_TYPE":return _(_({},e),{checks:(0,m.omit)(e.checks,t.name)});case"MARK_QUALITY_ANALYSIS_AS_FULLY_INTEGRATED":return _(_({},e),{isFullyIntegrated:t.isFullyIntegrated});case"UPDATE_QUALITY_CHECK_ITEM":return _(_({},e),{checks:_(_({},e.checks),(n={},n[t.name]={status:t.status,text:t.text},n))});case"SET_POST_QUALITY_SETTINGS":var r=_({allowedBads:e.settings.allowedBads,allowedImprovables:e.settings.allowedImprovables,unacceptableImprovables:e.settings.unacceptableImprovables},t.settings);return _(_({},e),{settings:{allowedBads:r.allowedBads,allowedImprovables:r.allowedImprovables,unacceptableImprovables:r.unacceptableImprovables}})}}(e,t))&&void 0!==n?n:e},premiumByType:function(e,t){var n;return void 0===e&&(e=p.premiumByType),null!==(n=function(e,t){var n,r,o;if("MARK_PREMIUM_ITEM_AS_DELETING"===t.type){var i=null!==(o=null===(r=e[t.typeName])||void 0===r?void 0:r.deleting)&&void 0!==o?o:[];return T(T({},e),((n={})[t.typeName]=T(T({},e[t.typeName]),{deleting:t.isDeleting?b(b([],i,!0),[t.itemId],!1):(0,m.without)(i,t.itemId)}),n))}}(e,t))&&void 0!==n?n:e},qualityCheckTypes:function(e,t){var n;return void 0===e&&(e=p.qualityCheckTypes),null!==(n=function(e,t){var n,r;switch(t.type){case"ADD_QUALITY_CHECK_TYPE":return S(S({},e),((n={})[t.definition.name]=t.definition,n));case"REMOVE_QUALITY_CHECK_TYPE":return e[t.name]?(0,m.omit)(e,t.name):e;case"UPDATE_QUALITY_CHECK_SETTINGS":var o=e[t.name];return o?S(S({},e),((r={})[t.name]=S(S({},o),{settings:S(S({},o.settings),t.settings)}),r)):e}}(e,t))&&void 0!==n?n:e},references:function(e,t){var n;return void 0===e&&(e=p.references),null!==(n=function(e,t){switch(t.type){case"RECEIVE_REFERENCES":return A(A({},e),{byUrl:t.references.reduce((function(e,t){var n;return A(A({},e),((n={})[t.url]=A(A({},e[t.url]),t),n))}),e.byUrl)});case"SET_SUGGESTED_REFERENCE_URL":return A(A({},e),{suggestedUrl:t.url});case"SUGGEST_REFERENCE":var n=e.byType.suggested;return A(A({},e),{byType:A(A({},e.byType),{suggested:n.includes(t.url)?n:x(x([],n,!0),[t.url],!1)})});case"SUGGEST_REFERENCES":return A(A({},e),{byType:A(A({},e.byType),{suggested:(0,m.uniq)(x(x([],e.byType.suggested,!0),t.urls,!0))})});case"DISCARD_REFERENCE":return A(A({},e),{byType:A(A({},e.byType),{suggested:(0,m.without)(e.byType.suggested,t.url)})});case"OPEN_REFERENCE_EDITOR":return A(A({},e),{editor:{isActive:!0,reference:t.reference}});case"UPDATE_EDITING_REFERENCE":return e.editor.isActive?A(A({},e),{editor:A(A({},e.editor),{reference:A(A({},e.editor.reference),t.attributes)})}):e;case"CLOSE_REFERENCE_EDITOR":return A(A({},e),{editor:{isActive:!1}});case"MARK_REFERENCE_AS_LOADING":return A(A({},e),{status:A(A({},e.status),{loading:t.isLoading?x(x([],e.status.loading,!0),[t.referenceUrl],!1):(0,m.without)(e.status.loading,t.referenceUrl)})});case"MARK_REFERENCE_AS_SAVING":return A(A({},e),{status:A(A({},e.status),{saving:t.isSaving?x(x([],e.status.saving,!0),[t.referenceUrl],!1):(0,m.without)(e.status.saving,t.referenceUrl)})})}}(e,t))&&void 0!==n?n:e},settings:function(e,t){var n;return void 0===e&&(e=p.settings),null!==(n=function(e,t){var n;switch(t.type){case"SET_EDITOR_TO_CLASSIC":return k(k({},e),{isClassicEditor:t.isClassicEditor});case"PANEL_SETTINGS":return k(k({},e),{panels:t.settings});case"TOGGLE_PANEL":return e.panels[t.panelName]===t.isOpen?e:k(k({},e),{panels:k(k({},e.panels),(n={},n[t.panelName]=t.isOpen,n))});case"INCLUDE_AUTHOR_IN_FOLLOWERS":return k(k({},e),{shouldAuthorBeFollower:t.shouldAuthorBeFollower});case"SET_AUTO_SHARE_END_MODES":return k(k({},e),{autoShareEndModes:t.autoShareEndModes})}}(e,t))&&void 0!==n?n:e},social:function(e,t){var n;return void 0===e&&(e=p.social),null!==(n=function(e,t){switch(t.type){case"MARK_SOCIAL_MESSAGE_AS_DELETING":return I(I({},e),{deleting:t.isDeleting?w(w([],e.deleting,!0),[t.messageId],!1):(0,m.without)(e.deleting,t.messageId)});case"MARK_TIMELINE_AS_GENERATING":return I(I({},e),{timelineStatus:t.isGenerating?"generating":"ready"});case"MARK_TIMELINE_AS_CLEARING":return I(I({},e),{timelineStatus:t.isClearing?"clearing":"ready"});case"MARK_AS_LOADING_POST_ITEMS":return I(I({},e),{isRetrievingSocialMessages:t.isLoading})}}(e,t))&&void 0!==n?n:e},tasks:function(e,t){var n;return void 0===e&&(e=p.tasks),null!==(n=function(e,t){switch(t.type){case"MARK_EDITORIAL_TASK_AS_SYNCHING":return C(C({},e),{synching:t.isSynching?R(R([],e.synching,!0),[t.taskId],!1):(0,m.without)(e.synching,t.taskId)});case"MARK_EDITORIAL_TASK_AS_DELETING":return C(C({},e),{deleting:t.isDeleting?R(R([],e.deleting,!0),[t.taskId],!1):(0,m.without)(e.deleting,t.taskId)});case"MARK_AS_LOADING_POST_ITEMS":return C(C({},e),{isRetrievingTasks:t.isLoading});case"OPEN_TASK_PRESET_LOADER":return C(C({},e),{preset:t.isOpen?{selection:[],state:"selection"}:void 0});case"SELECT_TASK_PRESETS":return C(C({},e),{preset:e.preset?C(C({},e.preset),{selection:t.selection}):void 0});case"SET_TASK_PRESETS_STATE":return C(C({},e),{preset:e.preset?C(C({},e.preset),{state:t.state}):void 0})}}(e,t))&&void 0!==n?n:e}});function N(e){return e.comments.input}function D(e,t){return e.comments.deleting.includes(t)}function O(e,t){return e.comments.synching.includes(t)}function L(e){return e.comments.isRetrievingComments}function M(e){return e.externalFeaturedImage.view}function F(e){return e.externalFeaturedImage.imageUrl}function U(e){return e.externalFeaturedImage.imageAlt}function G(e){return e.externalFeaturedImage.fields.url}function B(e){return e.externalFeaturedImage.fields.alt}function j(e){return"auto-draft"!==e.post.status&&!!e.post.id}function Q(e){return e.post}function K(e){return e.post.id||void 0}function V(e){return e.post.type||void 0}function q(e){return e.post.title||""}function Y(e){return e.post.excerpt||""}function H(e){return e.post.content||""}function z(e){return e.post.date||void 0}function X(e){return e.post.author||void 0}function W(e){return e.post.permalink||void 0}function $(e){return e.post.permalinkTemplate}function J(e){return e.post.followers||[]}function Z(e){return e.post.imageId||void 0}function ee(e){return e.post.imageSrc||void 0}function te(e){return e.post.status}function ne(e){return e.post.images||[]}function re(e,t){var n;return null!==(n=e.post.taxonomies[t])&&void 0!==n?n:[]}function oe(e){return e.post.permalinkQueryArgs}function ie(e){return!!e.post.isAutoShareEnabled}function ae(e){return e.post.autoShareEndMode}function se(e){return e.post.automationSources}const ce=window.wp.i18n;function le(e){return e.postQuality.settings}function ue(e){return!!e.postQuality.isFullyIntegrated}function de(e){var t=e.postQuality.checks,n=(0,m.size)((0,m.filter)(t,{status:"good"})),r=(0,m.size)((0,m.filter)(t,{status:"improvable"})),o=(0,m.size)((0,m.filter)(t,{status:"bad"}));if(!n&&!r&&!o)return"unknown";if(e.postQuality.settings.allowedBads<o)return"bad";var i=o+r;if(e.postQuality.settings.unacceptableImprovables<i)return"bad";var a=e.postQuality.settings.allowedImprovables;return o||a<i?"improvable":i?"good":"perfect"}function me(e,t){var n=e.postQuality.checks[t];return(null==n?void 0:n.status)||"unknown"}function fe(e,t){var n=e.postQuality.checks[t];return(null==n?void 0:n.text)||(0,ce._x)("Unknown status","text","nelio-content")}function pe(e,t,n){var r;return!!(null===(r=e.premiumByType[t])||void 0===r?void 0:r.deleting.includes(n))}function ge(e){return(0,m.values)(e.qualityCheckTypes)}function Ee(e,t){return e.qualityCheckTypes[t]}function he(e,t){return e.references.byUrl[t]}function ve(e){return e.references.byType.suggested}function ye(e,t){return!e.references.byUrl[t]||e.references.status.loading.includes(t)}function _e(e,t){return e.references.status.saving.includes(t)}function Te(e){return e.references.editor.isActive}function be(e){var t=e.references.editor;return t.isActive?t.reference:void 0}function Se(e){return e.references.suggestedUrl}function Ae(e){return e.settings.isClassicEditor}function xe(e){return e.settings.panels}function ke(e,t){var n=e.settings.panels[t];return void 0===n||n}function Ie(e){return e.settings.shouldAuthorBeFollower}function we(e){return e.settings.autoShareEndModes}function Ce(e,t){var n=(0,m.find)(e.settings.autoShareEndModes,{value:t});return(null==n?void 0:n.months)||0}function Re(e){return"ready"!==e.social.timelineStatus}function Pe(e){return"generating"===e.social.timelineStatus}function Ne(e){return"clearing"===e.social.timelineStatus}function De(e,t){return e.social.deleting.includes(t)}function Oe(e){return e.social.deleting}function Le(e){return!!e.social.isRetrievingSocialMessages}function Me(e,t){return e.tasks.deleting.includes(t)}function Fe(e,t){return e.tasks.synching.includes(t)}function Ue(e){return!!e.tasks.isRetrievingTasks}function Ge(e){var t,n;return null!==(n=null===(t=e.tasks.preset)||void 0===t?void 0:t.selection)&&void 0!==n?n:[]}function Be(e){var t;return null===(t=e.tasks.preset)||void 0===t?void 0:t.state}function je(e){return{type:"SET_EDITORIAL_COMMENT_INPUT_VALUE",value:e}}function Qe(e,t){return{type:"MARK_EDITORIAL_COMMENT_AS_SYNCHING",commentId:e,isSynching:t}}function Ke(e,t){return{type:"MARK_EDITORIAL_COMMENT_AS_DELETING",commentId:e,isDeleting:t}}function Ve(){return{type:"EDIT_EXTERNAL_FEATURED_IMAGE"}}function qe(){return{type:"CANCEL_EDITION_OF_EXTERNAL_FEATURED_IMAGE"}}function Ye(e,t){return{type:"SET_EXTERNAL_FEATURED_IMAGE",url:e,altText:t}}function He(){return{type:"REMOVE_EXTERNAL_FEATURED_IMAGE"}}function ze(e){return{type:"SET_EXTERNAL_FEATURED_IMAGE_URL_FIELD",url:e}}function Xe(e){return{type:"SET_EXTERNAL_FEATURED_IMAGE_ALT_FIELD",altText:e}}function We(e,t){return{type:"SET_CUSTOM_FIELD",key:e,value:t}}function $e(e){return{type:"REMOVE_CUSTOM_FIELD",key:e}}function Je(e){return{type:"SET_POST",post:e}}function Ze(e){return{type:"SET_POST_ID",id:e}}function et(e){return{type:"SET_TITLE",title:e}}function tt(e){return{type:"SET_EXCERPT",excerpt:e}}function nt(e){return{type:"SET_CONTENT",content:e}}function rt(e){return{type:"SET_DATE",date:e}}function ot(e,t){return{type:"SET_AUTHOR",authorId:e,authorName:t}}function it(e){return{type:"SET_PERMALINK",permalink:e}}function at(e){return{type:"SET_FOLLOWERS",followers:e}}function st(e,t){return{type:"SET_FEATURED_IMAGE",imageId:e,imageSrc:t||!1,thumbnailSrc:t||!1}}function ct(){return{type:"REMOVE_FEATURED_IMAGE"}}function lt(e){return{type:"SET_STATUS",status:e}}function ut(e,t){return{type:"SET_TERMS",taxonomy:e,terms:t}}function dt(e){return{type:"ENABLE_AUTO_SHARE",isAutoShareEnabled:e}}function mt(e){return{type:"SET_AUTO_SHARE_END_MODE",autoShareEndMode:e}}function ft(e){return{type:"SET_AUTOMATION_SOURCES",sources:e}}function pt(e){return{type:"SET_QUERY_ARGS",args:e}}function gt(e){return{type:"MARK_AS_LOADING_POST_ITEMS",isLoading:e}}function Et(e){return{type:"MARK_QUALITY_ANALYSIS_AS_FULLY_INTEGRATED",isFullyIntegrated:e}}function ht(e){return{type:"SET_POST_QUALITY_SETTINGS",settings:e}}function vt(e,t,n){return{type:"UPDATE_QUALITY_CHECK_ITEM",name:e,status:t,text:n}}function yt(e,t,n){return{type:"MARK_PREMIUM_ITEM_AS_DELETING",typeName:e,itemId:t,isDeleting:n}}function _t(e){return{type:"ADD_QUALITY_CHECK_TYPE",definition:e}}function Tt(e){return{type:"REMOVE_QUALITY_CHECK_TYPE",name:e}}function bt(e,t){return{type:"UPDATE_QUALITY_CHECK_SETTINGS",name:e,settings:t}}function St(e){return{type:"RECEIVE_REFERENCES",references:(0,m.castArray)(e)}}function At(e){return{type:"SET_SUGGESTED_REFERENCE_URL",url:e}}function xt(e){return{type:"SUGGEST_REFERENCE",url:e}}function kt(e){return{type:"SUGGEST_REFERENCES",urls:(0,m.castArray)(e)}}function It(e){return{type:"DISCARD_REFERENCE",url:e}}function wt(e){return{type:"UPDATE_EDITING_REFERENCE",attributes:e}}function Ct(){return{type:"CLOSE_REFERENCE_EDITOR"}}function Rt(e,t){return{type:"MARK_REFERENCE_AS_LOADING",referenceUrl:e,isLoading:t}}function Pt(e,t){return{type:"MARK_REFERENCE_AS_SAVING",referenceUrl:e,isSaving:t}}function Nt(e){return{type:"OPEN_REFERENCE_EDITOR",reference:e}}function Dt(e){return{type:"PANEL_SETTINGS",settings:e}}function Ot(e,t){return{type:"TOGGLE_PANEL",panelName:e,isOpen:t}}function Lt(e){return{type:"SET_EDITOR_TO_CLASSIC",isClassicEditor:e}}function Mt(e){return{type:"INCLUDE_AUTHOR_IN_FOLLOWERS",shouldAuthorBeFollower:e}}function Ft(e){return{type:"SET_AUTO_SHARE_END_MODES",autoShareEndModes:e}}function Ut(e,t){return{type:"MARK_SOCIAL_MESSAGE_AS_DELETING",messageId:e,isDeleting:t}}function Gt(e){return{type:"MARK_TIMELINE_AS_GENERATING",isGenerating:e}}function Bt(e){return{type:"MARK_TIMELINE_AS_CLEARING",isClearing:e}}function jt(e,t){return{type:"MARK_EDITORIAL_TASK_AS_SYNCHING",taskId:e,isSynching:t}}function Qt(e,t){return{type:"MARK_EDITORIAL_TASK_AS_DELETING",taskId:e,isDeleting:t}}function Kt(e){return{type:"OPEN_TASK_PRESET_LOADER",isOpen:e}}function Vt(e){return{type:"SELECT_TASK_PRESETS",selection:e}}function qt(e){return{type:"SET_TASK_PRESETS_STATE",state:e}}const Yt=window.wp.apiFetch,Ht=n.n(Yt)(),zt=window.NelioContent.data;var Xt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Wt=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function $t(e){return Xt(this,void 0,Promise,(function(){var t,n,r,o;return Wt(this,(function(i){switch(i.label){case 0:return[4,(0,c.dispatch)(zt.store).receiveComments(e)];case 1:return i.sent(),[4,(0,c.dispatch)(nr).markEditorialCommentAsSynching(e.id,!0)];case 2:i.sent(),i.label=3;case 3:return i.trys.push([3,10,,12]),t=(0,c.select)(zt.store).getApiRoot(),n=(0,c.select)(zt.store).getSiteId(),r=(0,c.select)(zt.store).getAuthenticationToken(),[4,Ht({url:"".concat(t,"/site/").concat(n,"/comment"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)},data:e})];case 4:return o=i.sent(),[4,(0,c.dispatch)(zt.store).receiveComments(o)];case 5:i.sent(),i.label=6;case 6:return i.trys.push([6,8,,9]),[4,Ht({path:"/nelio-content/v1/notifications/comment",method:"POST",data:o})];case 7:case 8:return i.sent(),[3,9];case 9:return[3,12];case 10:return i.sent(),[4,(0,c.dispatch)(zt.store).removeComment(e.id)];case 11:return i.sent(),[3,12];case 12:return[4,(0,c.dispatch)(nr).markEditorialCommentAsSynching(e.id,!1)];case 13:return i.sent(),[2]}}))}))}function Jt(e){return Xt(this,void 0,Promise,(function(){var t,n,r;return Wt(this,(function(o){switch(o.label){case 0:return(0,c.select)(zt.store).getComment(e)?[4,(0,c.dispatch)(nr).markEditorialCommentAsDeleting(e,!0)]:[2];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,5,,6]),t=(0,c.select)(zt.store).getSiteId(),n=(0,c.select)(zt.store).getApiRoot(),r=(0,c.select)(zt.store).getAuthenticationToken(),[4,Ht({url:"".concat(n,"/site/").concat(t,"/comment/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 3:return o.sent(),[4,(0,c.dispatch)(zt.store).removeComment(e)];case 4:case 5:return o.sent(),[3,6];case 6:return[4,(0,c.dispatch)(nr).markEditorialCommentAsDeleting(e,!1)];case 7:return o.sent(),[2]}}))}))}var Zt=function(){return Zt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zt.apply(this,arguments)},en=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},tn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function nn(){return en(this,void 0,Promise,(function(){var e;return tn(this,(function(t){switch(t.label){case 0:return(0,c.select)(nr).isPostReady()&&(e=(0,c.select)(nr).getPostId())?[4,(0,c.dispatch)(nr).markAsLoadingPostItems(!0)]:[2];case 1:return t.sent(),[4,u(zt.store).getPostRelatedItems(e)];case 2:return t.sent(),[4,(0,c.dispatch)(nr).updateDatesInPostRelatedItems()];case 3:return t.sent(),[4,(0,c.dispatch)(nr).markAsLoadingPostItems(!1)];case 4:return t.sent(),[2]}}))}))}function rn(){return en(this,void 0,Promise,(function(){var e,t,n,r,o,i,a,s;return tn(this,(function(l){switch(l.label){case 0:return e=(0,c.select)(nr).getPost(),t=e.status,n=e.date,r=e.id,"publish"!==t&&n?[4,u(zt.store).getSocialMessagesRelatedToPost(r)]:[2];case 1:return o=l.sent(),i=(0,m.map)(o,(function(e){return Zt(Zt({},e),{schedule:(0,d.getSocialMessageSchedule)({baseDatetime:n,dateValue:e.dateValue,timeType:e.timeType,timeValue:e.timeValue})})})),[4,u(zt.store).getTasksRelatedToPost(r)];case 2:return a=l.sent(),s=(0,m.map)(a,(function(e){return Zt(Zt({},e),{dateDue:(0,d.getTaskDateDue)({baseDatetime:n,dateType:e.dateType,dateValue:e.dateValue})})})),(0,d.isEmpty)(i)?[3,4]:[4,(0,c.dispatch)(zt.store).receiveSocialMessages(i)];case 3:l.sent(),l.label=4;case 4:return(0,d.isEmpty)(s)?[3,6]:[4,(0,c.dispatch)(zt.store).receiveTasks(s)];case 5:l.sent(),l.label=6;case 6:return[2]}}))}))}const on=window.wp.hooks;var an=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},sn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function cn(e,t){return an(this,void 0,Promise,(function(){var n;return sn(this,(function(r){switch(r.label){case 0:return(n=(0,c.select)(zt.store).getPremiumItem(e,t))?[4,(0,c.dispatch)(nr).markPremiumItemAsDeleting(e,t,!0)]:[2];case 1:return r.sent(),[4,(0,on.applyFilters)("nelio-content_edit-post_onDeletePremiumItem",new Promise((function(e){return e()})),e,n)];case 2:return r.sent(),[4,(0,c.dispatch)(nr).markPremiumItemAsDeleting(e,t,!1)];case 3:return r.sent(),[2]}}))}))}var ln=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},un=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function dn(e){return ln(this,void 0,Promise,(function(){var t;return un(this,(function(n){switch(n.label){case 0:return[4,u(nr).getReferenceByUrl(e)];case 1:return(t=n.sent())?[4,(0,c.dispatch)(nr).doOpenReferenceEditor(t)]:[2];case 2:return n.sent(),[2]}}))}))}function mn(){return ln(this,void 0,Promise,(function(){var e;return un(this,(function(t){switch(t.label){case 0:return(e=(0,c.select)(nr).getEditingReference())?[4,(0,c.dispatch)(nr).saveReference(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,(0,c.dispatch)(nr).closeReferenceEditor()];case 3:return t.sent(),[2]}}))}))}function fn(e){return ln(this,void 0,Promise,(function(){var t;return un(this,(function(n){switch(n.label){case 0:return[4,(0,c.dispatch)(nr).markReferenceAsSaving(e.url,!0)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,6]),[4,Ht({path:"/nelio-content/v1/reference/".concat(e.id),method:"PUT",data:(0,m.omitBy)(e,d.isEmpty)})];case 3:return t=n.sent(),[4,(0,c.dispatch)(nr).receiveReferences(t)];case 4:case 5:return n.sent(),[3,6];case 6:return[4,(0,c.dispatch)(nr).markReferenceAsSaving(e.url,!1)];case 7:return n.sent(),[2]}}))}))}const pn=window.wp.richText;var gn=function(){return gn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},gn.apply(this,arguments)},En=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},hn=["p","h1","h2","h3","h4","li"],vn=hn.reduce((function(e,t){return En(En([],e,!0),hn.map((function(e){return"".concat(t," ").concat(e)})),!0)}),[]).join(", ");function yn(){var e=(0,c.select)(zt.store),t=e.isSubscribed,n=e.getProfilesWithMessagesRelatedToPost;return t()?[]:n((0,(0,c.select)(nr).getPost)().id)}function Tn(e){void 0===e&&(e="");var t,n,r=function(e){var t=document.createElement("div");t.innerHTML=e;var n,r="".concat(vn,", ncshare ncshare");do{bn(n=t.querySelector(r))}while(n);return t}(e),o=Array.from(r.querySelectorAll(hn.join(",")));return{clean:(0,m.map)(o,Sn).join("\n\n"),highlights:(t=o,n=m.union.apply(void 0,(0,m.map)(t,(function(e){var t,n,r,o=(0,pn.create)({element:e});return(t=o,n=function(e,t){return kn(e)&&kn(t)||!kn(e)&&!kn(t)},r=(0,m.uniq)(An(t.formats.reduce((function(e,t,r,o){return n(o[r-1],t)||(e=An(e,r)),n(t,o[r+1])||(e=An(e,r+1)),e}),[0]),t.formats.length)),(0,m.zip)((0,m.dropRight)(r,1),(0,m.drop)(r,1)).map((function(e){var n=e[0],r=e[1];return(0,pn.slice)(t,n,r)})).filter((function(e){return e.formats.some(kn)}))).map(xn)}))),(0,m.map)(n,(function(e){return{html:e,text:e.replace(/<[^>]*>/g,"")}}))),top:(0,m.union)((0,m.map)(r.getElementsByTagName("h1"),Sn),(0,m.map)(r.getElementsByTagName("h2"),Sn),(0,m.map)(r.getElementsByTagName("h3"),Sn),(0,m.map)(r.getElementsByTagName("strong"),Sn))}}function bn(e){var t,n;if(e){for(;e.firstChild;)null===(t=e.parentElement)||void 0===t||t.insertBefore(e.firstChild,e);null===(n=e.parentElement)||void 0===n||n.removeChild(e)}}function Sn(e){var t;return(null===(t=null==e?void 0:e.textContent)||void 0===t?void 0:t.replace(/\s+/g," "))||""}function An(e,t){return e.push(t),e}function xn(e){var t=e.formats.reduce((function(e,t){var n=wn(t);return n&&(e[n]=[{type:"a",attributes:{href:n}}]),e}),{"":[]});return e=gn(gn({},e),{formats:e.formats.map((function(e){return t[wn(e)]||[]}))}),(0,pn.toHTMLString)({value:e})}var kn=function(e){return!!(null==e?void 0:e.some((function(e){var t=e.type;return"ncshare"===t||"nelio-content/highlight"===t})))},In=function(e){var t,n;return"a"===e.type&&!!(null===(t=e.attributes)||void 0===t?void 0:t.href)||"core/link"===e.type&&!!(null===(n=e.attributes)||void 0===n?void 0:n.url)},wn=function(e){var t,n,r,o=null===(t=null==e?void 0:e.find(In))||void 0===t?void 0:t.attributes;return null!==(r=null!==(n=null==o?void 0:o.href)&&void 0!==n?n:null==o?void 0:o.url)&&void 0!==r?r:""},Cn=function(){return Cn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Cn.apply(this,arguments)},Rn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Pn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},Nn="core/editor";function Dn(){return Rn(this,void 0,Promise,(function(){return Pn(this,(function(e){switch(e.label){case 0:return(0,c.select)(nr).isClassicEditor()?[4,Un()]:[3,2];case 1:return e.sent(),[2];case 2:return(0,c.select)(nr).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(nr).markTimelineAsGenerating(!0)];case 3:e.sent(),e.label=4;case 4:return e.trys.push([4,7,,8]),[4,(0,c.dispatch)(Nn).savePost()];case 5:return e.sent(),[4,Gn()];case 6:case 7:return e.sent(),[3,8];case 8:return[4,(0,c.dispatch)(nr).markTimelineAsGenerating(!1)];case 9:return e.sent(),[2]}}))}))}function On(){return Rn(this,void 0,Promise,(function(){return Pn(this,(function(e){switch(e.label){case 0:return(0,c.select)(nr).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(nr).markTimelineAsGenerating(!0)];case 1:return e.sent(),[4,Gn()];case 2:return e.sent(),[4,(0,c.dispatch)(nr).markTimelineAsGenerating(!1)];case 3:return e.sent(),[2]}}))}))}function Ln(){return Rn(this,void 0,Promise,(function(){var e,t,n;return Pn(this,(function(r){switch(r.label){case 0:return(e=(0,c.select)(nr).getPostId())?(0,c.select)(nr).isClearingTimeline()?[2]:[4,(0,c.dispatch)(nr).markTimelineAsClearing(!0)]:[2];case 1:return r.sent(),[4,u(zt.store).getSocialMessagesRelatedToPost(e)];case 2:return t=r.sent(),n=t.filter((function(e){return"publish"!==e.status})).map((function(e){return e.id})),[4,Promise.all(n.map(Fn))];case 3:return r.sent(),n.forEach((function(e){return(0,c.dispatch)(zt.store).removeSocialMessage(e)})),[4,(0,c.dispatch)(nr).markTimelineAsClearing(!1)];case 4:return r.sent(),[2]}}))}))}function Mn(e){return Rn(this,void 0,Promise,(function(){var t;return Pn(this,(function(n){switch(n.label){case 0:return(0,c.select)(nr).isSocialMessageBeingDeleted(e)?[2]:[4,(0,c.dispatch)(nr).markSocialMessageAsDeleting(e,!0)];case 1:return n.sent(),[4,Fn(e)];case 2:return n.sent(),t=(0,c.select)(zt.store).getSocialMessage(e),[4,(0,c.dispatch)(zt.store).removeRecurringMessages(null==t?void 0:t.recurrenceGroup)];case 3:return n.sent(),[4,(0,c.dispatch)(zt.store).removeSocialMessage(e)];case 4:return n.sent(),[4,(0,c.dispatch)(nr).markSocialMessageAsDeleting(e,!1)];case 5:return n.sent(),[2]}}))}))}function Fn(e){return Rn(this,void 0,Promise,(function(){var t,n,r;return Pn(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=(0,c.select)(zt.store).getSiteId(),n=(0,c.select)(zt.store).getApiRoot(),r=(0,c.select)(zt.store).getAuthenticationToken(),[4,Ht({url:"".concat(n,"/site/").concat(t,"/social/").concat(e,"/following"),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 1:case 2:return o.sent(),[3,3];case 3:return[2]}}))}))}function Un(){return Rn(this,void 0,void 0,(function(){var e,t;return Pn(this,(function(n){switch(n.label){case 0:return(0,c.select)(nr).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(nr).markTimelineAsGenerating(!0)];case 1:return n.sent(),(e=document.getElementById("post"))?((t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("name","_nc_auto_messages"),t.setAttribute("value","true"),e.appendChild(t),e.submit(),[2]):[2]}}))}))}function Gn(){return Rn(this,void 0,void 0,(function(){var e,t,n,r,o,i;return Pn(this,(function(a){switch(a.label){case 0:if(!(e=(0,c.select)(nr).getPostId()))return[2];a.label=1;case 1:return a.trys.push([1,6,,7]),[4,Ht({path:"/nelio-content/v1/post/".concat(e,"?aws")})];case 2:return t=a.sent(),n=(0,c.select)(zt.store).getSiteId(),r=(0,c.select)(zt.store).getApiRoot(),o=(0,c.select)(zt.store).getAuthenticationToken(),[4,Ht({url:"".concat(r,"/site/").concat(n,"/post/").concat(e,"/social/auto"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(o)},data:Cn(Cn({},t),Tn(t.content))})];case 3:return i=a.sent(),[4,u(zt.store).getSocialMessageIdsRelatedToPost(e)];case 4:return a.sent().forEach((function(e){return(0,c.dispatch)(zt.store).removeSocialMessage(e)})),[4,(0,c.dispatch)(zt.store).receiveSocialMessages(i)];case 5:case 6:return a.sent(),[3,7];case 7:return[4,(0,c.dispatch)(nr).updateDatesInPostRelatedItems()];case 8:return a.sent(),[2]}}))}))}var Bn=function(){return Bn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Bn.apply(this,arguments)},jn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Qn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function Kn(e,t){return jn(this,void 0,Promise,(function(){var n,r,o,i,a,s;return Qn(this,(function(l){switch(l.label){case 0:return(n=(0,c.select)(zt.store).getTask(e))?[4,(0,c.dispatch)(nr).markEditorialTaskAsSynching(e,!0)]:[2];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,10,,12]),r=Bn(Bn({},n),{completed:t}),[4,(0,c.dispatch)(zt.store).receiveTasks(r)];case 3:return l.sent(),o=(0,c.select)(zt.store).getSiteId(),i=(0,c.select)(zt.store).getApiRoot(),a=(0,c.select)(zt.store).getAuthenticationToken(),[4,Ht({url:"".concat(i,"/site/").concat(o,"/task/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(a)},data:r})];case 4:return s=l.sent(),[4,(0,c.dispatch)(zt.store).receiveTasks(s)];case 5:if(l.sent(),!s.completed)return[3,9];l.label=6;case 6:return l.trys.push([6,8,,9]),[4,Ht({path:"/nelio-content/v1/notifications/task",method:"POST",data:Bn({isNewTask:!1},s)})];case 7:case 8:return l.sent(),[3,9];case 9:return[3,12];case 10:return l.sent(),[4,(0,c.dispatch)(zt.store).receiveTasks(n)];case 11:return l.sent(),[3,12];case 12:return[4,(0,c.dispatch)(nr).markEditorialTaskAsSynching(e,!1)];case 13:return l.sent(),[2]}}))}))}function Vn(e,t){return jn(this,void 0,Promise,(function(){var n,r,o,i,a,s,l,f,p,g,E,h;return Qn(this,(function(v){switch(v.label){case 0:return(n=(0,c.select)(nr).getPost())?(r="replace"===e?"replacing":"merging",[4,(0,c.dispatch)(nr).setTaskPresetsState(r)]):[2];case 1:return v.sent(),o=u(zt.store).getTaskIdsRelatedToPost,i=(0,c.select)(zt.store).getTask,[4,o(n.id)];case 2:if(a=v.sent(),s=a.map(i).filter(d.isDefined),l="replace"===e?[]:s,!(f=(0,m.orderBy)(t.map(Hn),"_sort").map(Yn(n,l)).filter(d.isDefined)).length)return[3,8];v.label=3;case 3:return v.trys.push([3,7,,8]),p=(0,c.select)(zt.store).getSiteId(),g=(0,c.select)(zt.store).getApiRoot(),E=(0,c.select)(zt.store).getAuthenticationToken(),[4,new Promise((function(e){return setTimeout(e,1e3)}))];case 4:return v.sent(),[4,Ht({url:"".concat(g,"/site/").concat(p,"/task"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(E)},data:{mode:e,postId:n.id,tasks:f}})];case 5:return h=v.sent(),"replace"===e&&a.forEach((0,c.dispatch)(zt.store).removeTask),[4,(0,c.dispatch)(zt.store).receiveTasks(h)];case 6:case 7:return v.sent(),[3,8];case 8:return[4,(0,c.dispatch)(nr).openTaskPresetLoader(!1)];case 9:return v.sent(),[2]}}))}))}function qn(e){return jn(this,void 0,Promise,(function(){var t,n,r;return Qn(this,(function(o){switch(o.label){case 0:return(0,c.select)(zt.store).getTask(e)?[4,(0,c.dispatch)(nr).markEditorialTaskAsDeleting(e,!0)]:[2];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,5,,6]),t=(0,c.select)(zt.store).getSiteId(),n=(0,c.select)(zt.store).getApiRoot(),r=(0,c.select)(zt.store).getAuthenticationToken(),[4,Ht({url:"".concat(n,"/site/").concat(t,"/task/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 3:return o.sent(),[4,(0,c.dispatch)(zt.store).removeTask(e)];case 4:case 5:return o.sent(),[3,6];case 6:return[4,(0,c.dispatch)(nr).markEditorialTaskAsDeleting(e,!1)];case 7:return o.sent(),[2]}}))}))}var Yn=function(e,t){return function(n){var r;if(n.assigneeId||e.author){var o=Bn(Bn({},(0,d.createTask)()),{assigneeId:null!==(r=n.assigneeId)&&void 0!==r?r:e.author,task:n.task,color:n.color,dateType:n.dateType,dateValue:n.dateValue,postId:e.id,postType:e.type,dateDue:(0,d.getTaskDateDue)({baseDatetime:e.date||"now",dateType:n.dateType,dateValue:n.dateValue}),postAuthor:e.author,baseDatetime:(0,d.getBaseDatetime)(e,n.dateType)}),i=(0,m.pick)(o,["assigneeId","task","dateType","dateValue"]);return(0,m.some)(t,(function(e){return(0,m.isEqual)(i,(0,m.pick)(e,(0,m.keys)(i)))}))?void 0:o}}},Hn=function(e){var t=Math.abs(Number.parseInt(e.dateValue)||0),n="";return n+="positive-days"===e.dateType||0===t?"1:"+(0,m.padStart)("".concat(t),5,"0"):"0:"+(0,m.padStart)("".concat(Math.abs(9999-t)),5,"0"),n+=":",n+=e.task,Bn(Bn({},e),{_sort:n})};const zn=window.wp.url;var Xn=function(){return Xn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Xn.apply(this,arguments)},Wn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},$n=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function Jn(e){return Wn(this,void 0,Promise,(function(){var t,n,r;return $n(this,(function(o){switch(o.label){case 0:return e?[4,(0,c.dispatch)(nr).markReferenceAsLoading(e,!0)]:[2];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,7,,8]),[4,Ht({path:(0,zn.addQueryArgs)("/nelio-content/v1/reference/search",{url:e})})];case 3:return t=o.sent(),[4,(0,c.dispatch)(nr).receiveReferences(t)];case 4:return o.sent(),n=t.status,r=t.isExternal,"pending"===n&&r?[4,Zn(t)]:[3,6];case 5:o.sent(),o.label=6;case 6:return[3,8];case 7:return o.sent(),[3,8];case 8:return[4,(0,c.dispatch)(nr).markReferenceAsLoading(e,!1)];case 9:return o.sent(),[2]}}))}))}function Zn(e){return Wn(this,void 0,Promise,(function(){var t,n,r,o,i,a;return $n(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,(0,c.dispatch)(zt.store).loadLink(e.url)];case 1:return s.sent(),(t=(0,c.select)(zt.store).getSharedLinkData(e.url))?(n=t.author,r=t.date,o=t.title,i=t.twitter,a=Xn(Xn({},e),{author:n,date:r,title:o,twitter:i}),[4,(0,c.dispatch)(nr).saveReference(a)]):[2];case 2:case 3:return s.sent(),[3,4];case 4:return[2]}}))}))}var er=function(){return er=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},er.apply(this,arguments)},tr=er(er({},o),i),nr=(0,c.createReduxStore)("nelio-content/edit-post",{reducer:P,controls:c.controls,actions:tr,selectors:r,resolvers:a});!function(e){(0,c.register)(e)}(nr),function(){(0,(0,c.dispatch)(nr).setPanelSettings)((0,d.getValue)("panelSettings",{})||{});var e=(0,c.select)(nr).getPanelStatuses();(0,c.subscribe)((function(){var t=(0,c.select)(nr).getPanelStatuses();e!==t&&(e=t,(0,d.setValue)("panelSettings",t))}))}();const rr=window.wp.element,or=window.wp.compose,ir=window.wp.components;var ar=function(){return ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ar.apply(this,arguments)},sr=function(){var e=cr(),t=e[0],n=e[1],r=lr();return rr.createElement("div",{className:"nelio-content-editorial-comments-input"},rr.createElement(ir.TextareaControl,{placeholder:(0,ce._x)("Write a comment and press enter to send…","user","nelio-content"),className:"nelio-content-editorial-comments-input__textarea",value:t,onChange:n,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),r())}}))},cr=function(){return[l((function(e){return e(nr).getEditorialCommentInputValue()})),(0,c.useDispatch)(nr).setEditorialCommentInputValue]},lr=function(){var e=cr(),t=e[0],n=e[1],r=(0,c.useDispatch)(nr).createEditorialComment,o=l((function(e){return e(nr).getPostId()})),i=l((function(e){return e(nr).getPostType()}));return o&&i?function(){var e=(0,m.trim)(t);(0,d.isEmpty)(e)||(n(""),r(ar(ar({},(0,d.createComment)(o,i)),{comment:e})))}:function(){}},ur=n(6942),dr=n.n(ur);const mr=window.moment;var fr=n.n(mr);const pr=window.NelioContent.components,gr=window.NelioContent.date;var Er=function(e){var t=e.commentId,n=hr(t),r=(0,zt.useAuthorName)(null==n?void 0:n.authorId),o=l((function(e){return e(nr).isDeletingEditorialComment(t)})),i=l((function(e){return e(nr).isSynchingEditorialComment(t)})),a=vr(t),s=yr(t),u=(0,c.useDispatch)(nr).deleteEditorialComment;return rr.createElement("div",{className:dr()({"nelio-content-editorial-comments-comment":!0,"nelio-content-editorial-comments-comment--is-mine":a,"nelio-content-editorial-comments-comment--is-being-deleted":o})},!a&&rr.createElement("div",{className:"nelio-content-editorial-comments-comment__author-icon"},rr.createElement(pr.AuthorIcon,{authorId:null==n?void 0:n.authorId})),rr.createElement("div",null,rr.createElement("div",{className:dr()({"nelio-content-editorial-comments-comment__bubble":!0,"nelio-content-editorial-comments-comment__bubble--is-mine":a})},(null==n?void 0:n.comment)||""),rr.createElement("div",{className:dr()({"nelio-content-editorial-comments-comment__extra":!0,"nelio-content-editorial-comments-comment__extra--is-mine":a})},i&&(0,ce._x)("Sending…","text","nelio-content"),!i&&!a&&rr.createElement("div",{className:"nelio-content-editorial-comments-comment__author"},r),!i&&rr.createElement("div",{className:"nelio-content-editorial-comments-comment__date"},(0,gr.dateI18n)((0,gr.getSettings)().formats.datetime,null==n?void 0:n.date))),(o||s)&&!i&&rr.createElement("div",{className:"nelio-content-editorial-comments-comment__actions"},rr.createElement(pr.DeleteButton,{isDeleting:o,onClick:function(){u(t)}}))))},hr=function(e){return l((function(t){return t(zt.store).getComment(e)}))},vr=function(e){var t=hr(e);return l((function(e){return e(zt.store).getCurrentUserId()===(null==t?void 0:t.authorId)}))},yr=function(e){var t,n=null===(t=hr(e))||void 0===t?void 0:t.date,r=vr(e),o=n?fr()().diff(n,"minutes"):0,i=Math.abs(o)<5,a=(0,rr.useState)(0),s=a[0],c=a[1];return(0,rr.useEffect)((function(){i&&setTimeout((function(){return c(s+1)}),3e4)}),[s,i]),r&&i},_r=function(){var e=(0,rr.useRef)(null),t=(0,rr.useState)(-1),n=t[0],r=t[1],o=l((function(e){return e(zt.store).getCommentIdsRelatedToPost(e(nr).getPostId())})),i=o.length;return(0,rr.useEffect)((function(){var t;n!==i&&(n<i&&(null===(t=e.current)||void 0===t||t.scrollTo({top:999999,behavior:-1===n?void 0:"smooth"})),r(i))}),[n,i,r]),rr.createElement("div",{ref:e,className:"nelio-content-editorial-comment-list"},o.map((function(e){return rr.createElement(Er,{key:e,commentId:e})})))},Tr=function(){return Tr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Tr.apply(this,arguments)},br=(0,or.createHigherOrderComponent)((function(e){return function(t){return l((function(e){return e(nr).isPostReady()}))?rr.createElement(e,Tr({},t)):rr.createElement(rr.Fragment,null,(0,ce._x)("Please save post first to access this feature.","user","nelio-content"))}}),"withPostReadyCheck"),Sr=function(e){return function(t){return(0,or.createHigherOrderComponent)((function(t){return function(n){return l((function(t){return!!t(nr)[e]()}))?rr.createElement(pr.LoadingAnimation,{text:(0,ce._x)("Loading…","text","nelio-content"),isSmall:!0}):rr.createElement(t,Tr({},n))}}),"withLoadingCheck")(t)}},Ar=(0,or.compose)((function(e){return(0,zt.withSubscriptionCheck)("raw/editorial-comments",e)}),br,Sr("isRetrievingEditorialComments"))((function(){return rr.createElement(rr.Fragment,null,rr.createElement(_r,null),rr.createElement(sr,null))})),xr=function(){var e=kr(),t=e.completed,n=e.total;return n?rr.createElement("div",{className:"nelio-content-tasks-progress"},rr.createElement("div",{className:"nelio-content-tasks-progress__bar-background"},rr.createElement("div",{className:dr()({"nelio-content-tasks-progress__bar":!0,"nelio-content-tasks-progress__bar--is-completed":t===n}),style:{width:"".concat(Math.round(100*t/n),"%")}})),rr.createElement("div",{className:"nelio-content-tasks-progress__percentage"},Math.round(100*t/n),"%")):null},kr=function(){return l((function(e){var t=e(nr).getPostId,n=(0,e(zt.store).getTasksRelatedToPost)(t());return{completed:(0,m.filter)(n,{completed:!0}).length,total:n.length}}))};const Ir=window.NelioContent.taskEditor;var wr=function(e){var t,n=e.taskId,r=Cr(n),o=Rr(n),i=o.canCompleteTask,a=o.canDeleteTask,s=o.canEditTask,c=Pr(n),u=c.isDeleting,m=c.isSynching,f=c.isPastDateDue,p=r||{},g=p.completed,E=p.color,h=void 0===E?"":E,v=p.task,y=Nr(r),_=Dr(n),T=Or(n),b=(0,zt.useAuthorName)(null==r?void 0:r.assigneeId,(0,ce._x)("Unknown Assignee","text","nelio-content")),S=l((function(e){return e(nr).getPost()})),A=r?(0,d.getHumanDateDue)(S,r.dateType,r.dateValue):"";return rr.createElement("div",{className:dr()((t={"nelio-content-editorial-task":!0},t["nelio-content-editorial-task--is-".concat(h)]=!!h,t["nelio-content-editorial-task--is-task-".concat(n)]=!0,t["nelio-content-editorial-task--is-due"]=f,t))},rr.createElement(ir.CheckboxControl,{className:dr()({"nelio-content-editorial-task__control":!0,"nelio-content-editorial-task__control--is-completed":g}),label:v,onChange:T,checked:g,disabled:!i||u||m}),rr.createElement("div",{className:dr()({"nelio-content-editorial-task__extra":!0,"nelio-content-editorial-task__extra--is-completed":g,"nelio-content-editorial-task__extra--is-deleting":u,"nelio-content-editorial-task__extra--is-due":f,"nelio-content-editorial-task__extra--is-synching":m})},m&&(0,ce._x)("Saving…","text","nelio-content"),!m&&"".concat(b," • ").concat(A),f&&rr.createElement(ir.Dashicon,{icon:"warning"})),rr.createElement("div",{className:dr()({"nelio-content-editorial-task__actions":!0,"nelio-content-editorial-task__actions--is-deleting":u,"nelio-content-editorial-task__actions--is-synching":m})},rr.createElement(ir.Button,{variant:"link",disabled:!s||u||m,onClick:y},(0,ce._x)("Edit","command","nelio-content")),rr.createElement(pr.DeleteButton,{disabled:!a||m,isDeleting:u,onClick:_})))},Cr=function(e){return l((function(t){return t(zt.store).getTask(e)}))},Rr=function(e){var t=Cr(e);return l((function(e){var n=e(zt.store).canCurrentUserEditTask(t),r=e(zt.store).canCurrentUserDeleteTask(t);return{canCompleteTask:!!t&&n,canDeleteTask:!!t&&r,canEditTask:!!t&&n}}))},Pr=function(e){var t=Cr(e);return l((function(n){if(!t)return{isDeleting:!1,isSynching:!1,isPastDateDue:!1};var r=n(nr),o=r.isEditorialTaskBeingDeleted,i=r.isEditorialTaskBeingSynched,a=n(nr).getPost(),s=n(zt.store).getToday(),c=o(e),l=i(e);return{isDeleting:c,isSynching:l,isPastDateDue:!t.completed&&!l&&(0,d.getTaskDateDue)({baseDatetime:(null==a?void 0:a.date)||void 0,dateType:t.dateType,dateValue:t.dateValue})<s}}))},Nr=function(e){var t=l((function(e){return e(nr).getPost()})),n=(0,c.useDispatch)(Ir.store).openExistingTaskEditor;return function(){return!!t&&!!e&&n(e,{context:"post",post:t})}},Dr=function(e){var t=(0,c.useDispatch)(nr).deleteEditorialTask;return function(){return t(e)}},Or=function(e){var t=Cr(e),n=(0,c.useDispatch)(nr).markTaskAsCompleted;return function(){return n(e,!(null==t?void 0:t.completed))}},Lr=function(){var e=Mr();return(0,d.isEmpty)(e)?rr.createElement("div",{className:"nelio-content-task-list nelio-content-task-list--is-empty"},(0,ce._x)("Keep track of the things that need to get done with tasks.","user","nelio-content")):rr.createElement("div",{className:"nelio-content-task-list"},e.map((function(e){return rr.createElement(wr,{key:e,taskId:e})})))},Mr=function(){return l((function(e){var t=e(nr).getPostId;return(0,e(zt.store).getTaskIdsRelatedToPost)(t())}))},Fr=function(){var e=Br(),t=Gr(),n=(0,c.useDispatch)(nr).openTaskPresetLoader,r=jr();return rr.createElement("div",{className:"nelio-content-task-actions"},e&&rr.createElement(ir.Button,{variant:"secondary",disabled:!t,onClick:function(){return n(!0)}},(0,ce._x)("Load Tasks","command","nelio-content")),rr.createElement(ir.Button,{variant:"secondary",disabled:!t,onClick:r},(0,ce._x)("Add Task","command","nelio-content")))},Ur=function(){return l((function(e){return e(nr).getPost()}))},Gr=function(){var e=Ur();return l((function(t){return t(zt.store).canCurrentUserCreateTasksRelatedToPost(e)}))},Br=function(){return l((function(e){return!!e(zt.store).getTaskPresets().length}))},jr=function(){var e=Ur(),t=(0,c.useDispatch)(Ir.store).openNewTaskEditor;return function(){return t({dateType:"publish"!==e.status?"predefined-offset":void 0,dateValue:"publish"!==e.status?"0":void 0},{post:e,context:"post"})}},Qr=function(){var e=l((function(e){return e(nr).getPostId()})),t=l((function(t){return!!t(zt.store).getTaskIdsRelatedToPost(e).length})),n=l((function(e){return e(nr).getTaskPresetLoaderState()})),r=l((function(e){return e(nr).getTaskPresetSelection()})),o=(0,c.useDispatch)(nr),i=o.instantiatePresets,a=o.openTaskPresetLoader,s=o.selectTaskPresets;return rr.createElement(pr.TaskPresetLoader,{state:n,actions:t?"replace-or-merge":"add",selection:r,onUpdate:s,onCancel:function(){return a(!1)},onMerge:function(e){return i("merge",e)},onReplace:function(e){return i("replace",e)}})},Kr=(0,or.compose)((function(e){return(0,zt.withSubscriptionCheck)("raw/editorial-tasks",e)}),br,Sr("isRetrievingEditorialTasks"))((function(){return rr.createElement(rr.Fragment,null,rr.createElement(xr,null),rr.createElement(Lr,null),rr.createElement(Fr,null),rr.createElement(Qr,null))})),Vr=function(){var e=(0,c.useDispatch)(nr).editExternalFeaturedImage;return rr.createElement("div",{className:"nelio-content-efi-no-image"},rr.createElement(ir.Button,{variant:"link",onClick:e},(0,ce._x)("Set external featured image","command","nelio-content")))},qr=function(){var e=Hr(),t=e[0],n=e[1],r=Yr(),o=r[0],i=r[1],a=zr(),s=a.save,c=a.cancel,l=function(e){e&&"Enter"===e.key&&(e.preventDefault(),s())};return rr.createElement("div",{className:"nelio-content-efi-edit-image"},rr.createElement(ir.TextControl,{label:(0,ce._x)("Image URL","text","nelio-content"),placeholder:"https://…",value:t,onChange:function(e){n(e)},onKeyDown:l}),rr.createElement(ir.TextControl,{label:(0,ce._x)("Alt Text","text","nelio-content"),value:o,onChange:i,onKeyDown:l}),rr.createElement("div",{className:"nelio-content-efi-edit-image__action"},rr.createElement(ir.Button,{variant:"secondary",onClick:c},(0,ce._x)("Cancel","command","nelio-content"))," ",rr.createElement(ir.Button,{variant:"secondary",onClick:s,disabled:!(0,d.isUrl)(t)},(0,ce._x)("Set Image","command","nelio-content"))))},Yr=function(){return[l((function(e){return e(nr).getExternalFeaturedImageAltField()})),(0,c.useDispatch)(nr).setExternalFeaturedImageAltField]},Hr=function(){return[l((function(e){return e(nr).getExternalFeaturedImageUrlField()})),(0,c.useDispatch)(nr).setExternalFeaturedImageUrlField]},zr=function(){var e=Yr()[0],t=Hr()[0],n=(0,c.useDispatch)(nr),r=n.cancelEditionOfExternalFeaturedImage,o=n.setExternalFeaturedImage;return{save:function(){return(0,d.isUrl)(t)?o(t,e):void 0},cancel:function(){return r()}}},Xr=function(){var e=l((function(e){return e(nr).getExternalFeaturedImageAlt()})),t=l((function(e){return e(nr).getExternalFeaturedImageUrl()})),n=(0,c.useDispatch)(nr).editExternalFeaturedImage,r=(0,c.useDispatch)(nr).removeExternalFeaturedImage;return rr.createElement("div",{className:"nelio-content-efi-image"},rr.createElement(ir.Button,{className:"nelio-content-efi-image__image-button",onClick:n},rr.createElement("img",{className:"nelio-content-efi-image__actual-image",src:t,alt:e})),rr.createElement("div",{className:"nelio-content-efi-image__replace-button"},rr.createElement(ir.Button,{variant:"secondary",onClick:n},(0,ce._x)("Replace Image","command","nelio-content"))),rr.createElement("div",null,rr.createElement(ir.Button,{variant:"link",isDestructive:!0,onClick:r},(0,ce._x)("Remove external featured image","command","nelio-content"))))},Wr=function(){switch(l((function(e){return e(nr).getExternalFeaturedImageView()}))){case"no-image":return rr.createElement(Vr,null);case"edit-image":return rr.createElement(qr,null);case"image":return rr.createElement(Xr,null);default:return null}},$r=function(e){var t=e.isAuthor,n=e.remove,r=e.userId,o=(0,zt.useAuthorName)(r);return rr.createElement("div",{className:"nelio-content-notification-user"},rr.createElement("div",{className:"nelio-content-notification-user__icon"},rr.createElement(pr.AuthorIcon,{authorId:r})),rr.createElement("div",{className:"nelio-content-notification-user__info"},rr.createElement("div",{className:"nelio-content-notification-user__name"},o||(0,ce._x)("Unknown User","text","nelio-content")),rr.createElement("div",{className:"nelio-content-notification-user__extra"},t&&rr.createElement("span",{className:n?"nelio-content-notification-user__author nelio-content-notification-user__author--has-pipe":"nelio-content-notification-user__author"},(0,ce._x)("Author","text","nelio-content")),!!n&&rr.createElement(ir.Button,{className:"nelio-content-notification-user__remove-action",isDestructive:!0,variant:"link",onClick:n},(0,ce._x)("Remove","command","nelio-content")))))},Jr=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Zr=function(){var e=no(),t=e[0],n=e[1],r=eo(),o=to();return rr.createElement("div",{className:"nelio-content-notifications"},rr.createElement("div",{className:"nelio-content-notifications__user-searcher"},rr.createElement(pr.AuthorSearcher,{placeholder:(0,ce._x)("Select a user…","user","nelio-content"),onChange:function(e){var r;e&&(r=e,n((0,m.uniq)(Jr(Jr([],t,!0),[r],!1))))}})),rr.createElement("div",{className:"nelio-content-notifications__followers"},t.map((function(e){return rr.createElement($r,{key:e,userId:e,isAuthor:e===r,remove:e===r&&o?void 0:function(){return r=e,n((0,m.without)(t,r));var r}})}))))},eo=function(){return l((function(e){return e(nr).getAuthorId()}))},to=function(){return l((function(e){return e(nr).getAuthorId()}))},no=function(){var e=eo(),t=l((function(e){return e(nr).getFollowers()})),n=(0,c.useDispatch)(nr).setFollowers;return[to()&&e?(0,m.uniq)(Jr([e],t,!0)):t,n]},ro=function(){var e=oo(),t=e[0],n=e[1],r=l((function(e){return e(nr).isReferenceEditorVisible()})),o=l((function(e){var n=e(nr).isReferenceSaving;return!(null==t?void 0:t.url)||n(t.url)})),i=io(),a=i.close,s=i.saveAndClose;if(!r||!t)return null;var c=t.title,u=t.author,d=t.email,m=t.twitter,f=t.url,p=ao(t);return rr.createElement(ir.Modal,{className:"nelio-content-reference-editor",title:(0,ce._x)("Edit Reference","text","nelio-content"),isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:function(){}},rr.createElement(ir.TextControl,{value:c,onChange:function(e){return n({title:e})},placeholder:(0,ce._x)("Enter the title…","user","nelio-content")}),rr.createElement("div",{className:"nelio-content-reference-editor__url"},rr.createElement("strong",null,"URL:")," ",rr.createElement(ir.ExternalLink,{href:f},f)),rr.createElement("h3",{className:"nelio-content-reference-editor__section-title"},(0,ce._x)("Author Information","text","nelio-content")),rr.createElement(ir.TextControl,{label:(0,ce._x)("Name","text","nelio-content"),value:u,onChange:function(e){return n({author:e})},placeholder:(0,ce._x)("First and Last Names","text","nelio-content")}),rr.createElement(ir.TextControl,{label:(0,ce._x)("Email","text","nelio-content"),value:d,onChange:function(e){return n({email:e})},placeholder:(0,ce._x)("author@example.com","text","nelio-content")}),rr.createElement(ir.TextControl,{label:(0,ce._x)("X","text","nelio-content"),value:m,onChange:function(e){return n({twitter:e})},placeholder:(0,ce._x)("@username","text","nelio-content")}),rr.createElement("div",{className:"nelio-content-reference-editor__actions"},rr.createElement(ir.Button,{variant:"secondary",disabled:o,onClick:a},(0,ce._x)("Cancel","command","nelio-content")),rr.createElement(pr.SaveButton,{variant:"primary",error:p,isSaving:o,onClick:function(){s()}})))},oo=function(){return[l((function(e){return e(nr).getEditingReference()})),(0,c.useDispatch)(nr).updateEditingReference]},io=function(){var e=(0,c.useDispatch)(nr);return{close:e.closeReferenceEditor,saveAndClose:e.saveAndCloseEditingReference}},ao=function(e){var t=e.email,n=e.twitter;return(0,d.isEmpty)(t)||(0,zn.isEmail)(t)?(0,d.isValidTwitterHandler)(n)?"":(0,ce._x)("Please write a valid twitter handle","user","nelio-content"):(0,ce._x)("Please write a valid email address","user","nelio-content")},so=function(e){var t=e.onClick;return rr.createElement(pr.DeleteButton,{labels:{delete:(0,ce._x)("Discard","command","nelio-content"),deleting:(0,ce._x)("Discarding…","text","nelio-content")},confirmationLabels:{title:(0,ce._x)("Discard Reference","text","nelio-content"),text:(0,ce._x)("Are you sure you want to discard this reference? This operation can’t be undone.","user","nelio-content")},onClick:t})},co=function(){return co=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},co.apply(this,arguments)},lo=function(e){var t=e.link;return rr.createElement("div",{className:"nelio-content-link-reference"},rr.createElement(uo,{link:t}),rr.createElement(mo,{link:t}),rr.createElement(fo,{link:t}),rr.createElement(po,{link:t}))},uo=function(e){var t=e.link,n=go(t),r=n.title,o=n.url;return r?rr.createElement(rr.Fragment,null,rr.createElement("div",{className:"nelio-content-link-reference__title"},r),rr.createElement("div",{className:"nelio-content-link-reference__link"},rr.createElement(ir.ExternalLink,{href:o},o))):rr.createElement("div",{className:"nelio-content-link-reference__title"},rr.createElement(ir.ExternalLink,{href:o},o))},mo=function(e){var t=e.link,n=Eo(t),r=go(t),o=r.author,i=r.email,a=r.twitter;return n?rr.createElement("div",{className:"nelio-content-link-reference__extra"},(0,ce._x)("Loading…","text","nelio-content")):a||i?rr.createElement("div",{className:"nelio-content-link-reference__extra"},rr.createElement("div",{className:"nelio-content-link-reference__author"},o||(0,ce._x)("Unknown Author","text","nelio-content")),rr.createElement("div",{className:"nelio-content-link-reference__contact"},!!a&&rr.createElement(ir.ExternalLink,{href:"https://twitter.com/".concat(a)},rr.createElement(ir.Dashicon,{className:"nelio-content-link-reference__contact-icon",icon:"twitter"}))," ",!!i&&rr.createElement(ir.ExternalLink,{href:"mailto:".concat(i)},rr.createElement(ir.Dashicon,{className:"nelio-content-link-reference__contact-icon",icon:"email"})))):rr.createElement("div",{className:"nelio-content-link-reference__extra"},rr.createElement("div",{className:"nelio-content-link-reference__author"},o||(0,ce._x)("Unknown Author","text","nelio-content")))},fo=function(e){var t=e.link,n=go(t),r=(0,zt.useIsUserYou)(null==n?void 0:n.suggestionAdvisorId),o=(0,zt.useAuthorName)(null==n?void 0:n.suggestionAdvisorId);return n?!n.suggestionAdvisorId||r?rr.createElement("div",{className:"nelio-content-link-reference__advisor"},(0,ce._x)("Suggested by you","text","nelio-content")):rr.createElement("div",{className:"nelio-content-link-reference__advisor"},o?(0,ce.sprintf)(/* translators: author name */ /* translators: author name */
(0,ce._x)("Suggested by %s","text","nelio-content"),o):(0,ce._x)("Suggested by someone","text","nelio-content")):rr.createElement("div",{className:"nelio-content-link-reference__advisor"},(0,ce._x)("Suggested by someone","text","nelio-content"))},po=function(e){var t=e.link,n=Eo(t),r=(0,c.useDispatch)(nr).openReferenceEditor,o=(0,c.useDispatch)(nr).discardReference;return n?rr.createElement("div",{className:"nelio-content-link-reference__actions"},(0,ce.sprintf)("%1$s | %2$s",(0,ce._x)("Discard","command","nelio-content"),(0,ce._x)("Edit","command","nelio-content"))):rr.createElement("div",{className:"nelio-content-link-reference__actions"},rr.createElement(so,{onClick:function(){return o(t)}})," | ",rr.createElement(ir.Button,{variant:"link",onClick:function(){return r(t)}},(0,ce._x)("Edit","command","nelio-content")))},go=function(e){return l((function(t){var n=co(co({author:"",date:"",email:"",isExternal:!0,isSuggestion:!0,status:"pending",title:"",twitter:""},t(nr).getReferenceByUrl(e)),{url:e}),r=n.twitter,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["twitter"]);return co(co({},o),{twitter:/^@/.test(r)?r.substring(1):r})}))},Eo=function(e){return l((function(t){return t(nr).isReferenceLoading(e)}))},ho=function(){var e=l((function(e){return e(nr).getSuggestedReferences()}));return(0,d.isEmpty)(e)?rr.createElement("div",null,(0,ce._x)("Do you have an interesting or helpful link for the author? Save it here!","user","nelio-content")):rr.createElement("div",null,e.map((function(e){return rr.createElement(lo,{key:e,link:e})})))},vo=function(){var e=yo(),t=e[0],n=e[1],r=_o(),o=To(),i=!(0,d.isEmpty)(t)&&(0,zn.isURL)(t);return rr.createElement("div",{className:"nelio-content-reference-creator"},rr.createElement(ir.TextControl,{autoComplete:"off",placeholder:(0,ce._x)("Enter a URL…","user","nelio-content"),value:t,onChange:n,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),i&&r())}}),rr.createElement(ir.Button,{variant:"secondary",disabled:!i,onClick:r},o?(0,ce._x)("Add","command","nelio-content"):(0,ce._x)("Suggest","command","nelio-content")))},yo=function(){return[l((function(e){return e(nr).getSuggestedReferenceUrl()})),(0,c.useDispatch)(nr).setSuggestedReferenceUrl]},_o=function(){var e=yo(),t=e[0],n=e[1],r=(0,c.useDispatch)(nr).suggestReference;return function(){(0,d.isUrl)(t)&&r(t),n("")}},To=function(){return l((function(e){return e(zt.store).getCurrentUserId()===e(nr).getAuthorId()}))},bo=function(){return rr.createElement(rr.Fragment,null,rr.createElement(ho,null),rr.createElement(vo,null))},So=function(e){var t=e.onClick,n=e.label,r=l((function(e){return e(nr).getOverallPostQualityStatus()})),o=n||function(e){switch(e){case"perfect":return(0,rr.createInterpolateElement)((0,ce._x)("The post looks <strong>awesome</strong>!","text","nelio-content"),{strong:rr.createElement("strong",null)});case"good":return(0,rr.createInterpolateElement)((0,ce._x)("The post looks <strong>good</strong>!","text","nelio-content"),{strong:rr.createElement("strong",null)});case"improvable":return(0,rr.createInterpolateElement)((0,ce._x)("The post is <strong>improvable</strong>","text","nelio-content"),{strong:rr.createElement("strong",null)});case"bad":return(0,rr.createInterpolateElement)((0,ce._x)("The post is <strong>poor</strong>","text","nelio-content"),{strong:rr.createElement("strong",null)});default:return(0,ce._x)("Post can’t be evaluated","text","nelio-content")}}(r);return rr.createElement("div",{className:"nelio-content-quality-analysis-summary"},rr.createElement("div",{className:"nelio-content-quality-analysis-summary__icon-wrapper"},rr.createElement("div",{className:"nelio-content-quality-analysis-summary__icon nelio-content-quality-analysis-summary__icon--is-".concat(r)},"perfect"===r&&rr.createElement(ir.Dashicon,{icon:"awards"}),"good"===r&&rr.createElement(ir.Dashicon,{icon:"thumbs-up"}),"improvable"===r&&rr.createElement(ir.Dashicon,{icon:"admin-tools"}),"bad"===r&&rr.createElement(ir.Dashicon,{icon:"thumbs-down"}))),rr.createElement("div",{className:"nelio-content-quality-analysis-summary__explanation"},t?rr.createElement(ir.Button,{variant:"link",onClick:t},rr.createElement("span",null,o)):rr.createElement("span",null,o)))},Ao=function(e){var t=e.icon,n=e.name,r=l((function(e){return e(nr).getQualityCheckStatus(n)})),o=l((function(e){return e(nr).getQualityCheckRationale(n)}));return"invisible"===r?null:rr.createElement("div",{className:"nelio-content-quality-analysis__quality-check"},rr.createElement("div",{className:"nelio-content-quality-analysis__quality-check-icon-wrapper"},rr.createElement("div",{className:"nelio-content-quality-analysis__quality-check-icon nelio-content-quality-analysis__quality-check-icon--is-".concat(r)},rr.createElement(ir.Dashicon,{icon:t}))),rr.createElement("div",{className:"nelio-content-quality-analysis__quality-check-rationale nelio-content-quality-analysis__quality-check-rationale--is-".concat(r)},o))},xo=function(e){var t=e.isMetabox,n=Co()[0],r=wo();return rr.createElement("div",{className:"nelio-content-quality-analysis"},rr.createElement(ko,{enabled:!!t}),n&&rr.createElement("div",{className:"nelio-content-quality-analysis__details"},r.map((function(e){var t=e.name,n=e.icon;return rr.createElement(Ao,{key:t,name:t,icon:n})}))))},ko=function(e){var t=e.enabled,n=Io(),r=Co(),o=r[0],i=r[1];return t?rr.createElement("div",{className:"nelio-content-quality-analysis__summary"},rr.createElement("div",{className:"nelio-content-quality-analysis__actual-summary"},rr.createElement(So,null)),n&&rr.createElement(ir.Button,{className:"nelio-content-quality-analysis__details-toggler",size:"small",onClick:function(){return i(!o)}},rr.createElement(ir.Dashicon,{icon:o?"arrow-up":"arrow-down"}))):null},Io=function(){return l((function(e){return e(nr).isQualityAnalysisFullyIntegrated()}))},wo=function(){return l((function(e){return e(nr).getQualityCheckTypes()}))},Co=function(){var e="post-quality-analysis",t=Io(),n=l((function(t){return t(nr).isPanelOpen(e)})),r=!t||n,o=(0,c.useDispatch)(nr).togglePanel;return[r,function(t){return o(e,t)}]},Ro=function(e){var t=e.children,n=e.icon,r=e.title,o=e.titleActions,i=e.type;return rr.createElement("div",{className:"nelio-content-social-media-metabox__section"},rr.createElement("div",{className:"nelio-content-social-media-metabox__section-title"},rr.createElement(ir.Dashicon,{icon:n}),r,!!o&&o),rr.createElement("div",{className:"nelio-content-social-media-metabox__section-content nelio-content-social-media-metabox__section-content--is-".concat(i)},t))},Po=function(){var e=l((function(e){return e(nr).getPost()})),t="publish"===(null==e?void 0:e.status),n=l((function(t){return t(zt.store).getPostTypes("analytics").some((function(t){return t.name===e.type}))}));return e&&n&&t?rr.createElement(Ro,{icon:"chart-bar",title:(0,ce._x)("Analytics","text","nelio-content"),type:"analytics"},rr.createElement(pr.PostPageviewsAnalytics,{postId:e.id}),rr.createElement(pr.PostEngagementAnalytics,{postId:e.id})):null},No=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Do=function(){var e=Lo(),t=e.items,n=e.add,r=e.replace,o=e.set;return(0,rr.useEffect)((function(){o(t.filter((function(e){var t=e[0];return!!(0,m.trim)(t)})))}),[]),rr.createElement("div",{className:"nelio-content-permalink-settings"},rr.createElement("div",{className:"nelio-content-permalink-settings__query-args"},t.length?rr.createElement("p",null,(0,ce._x)("URL Parameters:","text","nelio-content")):rr.createElement("p",null,(0,ce._x)("Add custom URL parameters when sharing this post on social media:","user","nelio-content")),t.map((function(e,t){return rr.createElement(Oo,{key:t,name:e[0],value:e[1],showLabel:!t,onNameChange:function(t){return r(e,[t,e[1]])},onValueChange:function(t){return r(e,[e[0],t])}})})),rr.createElement("div",{className:"nelio-content-permalink-settings__query-args-actions"},rr.createElement(ir.Button,{variant:"secondary",onClick:n},(0,ce._x)("Add New","command (URL parameter)","nelio-content")))))},Oo=function(e){var t=e.name,n=e.value,r=e.showLabel,o=e.onNameChange,i=e.onValueChange;return rr.createElement("div",{className:"nelio-content-permalink-settings__query-arg"},rr.createElement(ir.TextControl,{label:r?(0,ce._x)("Name","text","nelio-content"):void 0,placeholder:(0,ce._x)("Name","text","nelio-content"),value:t,onChange:o}),rr.createElement(ir.TextControl,{label:r?(0,ce._x)("Value (optional)","text","nelio-content"):void 0,placeholder:(0,ce._x)("Value (optional)","text","nelio-content"),value:n,onChange:i}))},Lo=function(){var e=l((function(e){return e(nr).getQueryArgs()})),t=(0,c.useDispatch)(nr).setQueryArgs;return{items:e,add:function(){return t(No(No([],e,!0),[["",""]],!1))},replace:function(n,r){return t(e.map((function(e){return e===n?r:e})))},set:t}},Mo=function(){return rr.createElement(Ro,{icon:"admin-links",title:(0,ce._x)("Permalink Settings","text","nelio-content"),type:"permalink-settings"},rr.createElement(Do,null))},Fo=function(){return l((function(e){var t=e(nr).getPost();return e(zt.store).getPostAutomationGroups(t).some((function(e){return!!e.priority&&(0,m.values)(e.profileSettings).some((function(e){return e.enabled&&(e.publication.enabled||e.reshare.enabled)}))}))}))},Uo=function(){return l((function(e){var t=e(nr),n=t.getPost,r=t.isTimelineBusy,o=e(zt.store).canCurrentUserUseAutomationsInPost;return!r()&&o(n())}))},Go=function(){return l((function(e){return e(nr).getDeletingMessageIds()}))},Bo=function(){return l((function(e){return e(nr).getPost()}))},jo=function(){return l((function(e){return e(nr).isTimelineBusy()}))},Qo=function(){var e=Uo(),t=qo(),n=t[0],r=t[1],o=Xo(),i=o[0],a=o[1],s=$o();return rr.createElement("div",{className:"nelio-content-automation-settings"},rr.createElement(ir.CheckboxControl,{label:(0,ce._x)("Auto share on social media","command","nelio-content"),disabled:!e,checked:n,onChange:r}),n&&rr.createElement(rr.Fragment,null,rr.createElement(ir.SelectControl,{disabled:!e,value:i,onChange:a,options:s}),rr.createElement(Vo,null),rr.createElement(Ko,null)))},Ko=function(){var e=Uo(),t=Yo(),n=t[0],r=t[1],o=Ho(),i=o[0],a=o[1];return rr.createElement("div",{className:"nelio-content-automation-settings__automation-sources"},rr.createElement(ir.CheckboxControl,{label:(0,ce._x)("Custom highlights","text","nelio-content"),disabled:!e,checked:n,onChange:function(e){return r(e)}}),n&&rr.createElement(ir.TextareaControl,{help:(0,ce._x)("Please write one highlight per line.","user","nelio-content"),disabled:!e,value:i.join("\n"),onChange:a}))},Vo=function(){var e=Fo(),t=Wo(),n=(0,zt.useAdminUrl)("admin.php",{page:"nelio-content-settings",subpage:"social--automations"});return t?rr.createElement("div",{className:"nelio-content-automation-settings__warning"},(0,ce.sprintf)(/* translators: date */ /* translators: date */
(0,ce._x)("Warning! Nelio Content will not share any more social messages automatically, because auto sharing was set to end on %s.","text","nelio-content"),t)):e?null:rr.createElement("div",{className:"nelio-content-automation-settings__warning"},(0,rr.createInterpolateElement)((0,ce._x)("Warning! None of your automation groups can share this content. Nelio Content will not be able to automatically create any social messages until you <a>update your settings</a> and refresh.","user","nelio-content"),{a:rr.createElement(ir.ExternalLink,{href:n})}))},qo=function(){return[l((function(e){return e(nr).isAutoShareEnabled()})),(0,c.useDispatch)(nr).enableAutoShare]},Yo=function(){return zo("useCustomSentences")},Ho=function(){var e=l((function(e){return e(nr).getAutomationSources().customSentences})),t=(0,c.useDispatch)(nr).setAutomationSources;return[e,function(e){return t({customSentences:e.split("\n")})}]},zo=function(e){var t=l((function(t){return t(nr).getAutomationSources()[e]})),n=(0,c.useDispatch)(nr).setAutomationSources;return[t,function(t){var r;return n(((r={})[e]=t,r))}]},Xo=function(){return[l((function(e){return e(nr).getAutoShareEndMode()})),(0,c.useDispatch)(nr).setAutoShareEndMode]},Wo=function(){var e,t=qo()[0],n=Xo()[0],r=l((function(e){return e(zt.store).getToday()})),o=l((function(e){return e(nr).getAutoShareEndModeDuration(n)})),i=l((function(e){return e(nr).getPost()}));if(!t)return!1;if(!o)return!1;if("publish"!==i.status)return!1;var a=fr()((null==i?void 0:i.date)||void 0).add(o,"months");return(0,gr.dateI18n)("Y-m-d",a)<r&&(0,gr.dateI18n)((null===(e=(0,gr.getSettings)().formats)||void 0===e?void 0:e.date)||"Y-m-d",a)},$o=function(){return l((function(e){return e(nr).getAutoShareEndModes()}))},Jo=function(){return rr.createElement(Ro,{icon:"admin-settings",title:(0,ce._x)("Automation Settings","text","nelio-content"),type:"settings"},rr.createElement(Qo,null))};const Zo=window.NelioContent.socialTimeline;var ei=function(e){var t=e.isSmall,n=jo(),r=Uo(),o=(0,c.useDispatch)(nr).clearTimeline;return rr.createElement(pr.DeleteButton,{size:t?"small":void 0,disabled:!r,onClick:o,isDeleting:n,labels:{delete:(0,ce._x)("Clear Timeline","command","nelio-content"),deleting:(0,ce._x)("Clearing Timeline…","text","nelio-content")},confirmationLabels:{title:(0,ce._x)("Clear Timeline","text","nelio-content"),text:(0,ce._x)("Are you sure you want to clear your timeline? This operation can’t be undone and you’ll lose any manual messages you might have created.","user","nelio-content")}})},ti=function(e){var t=e.enabled,n=Fo(),r=Uo(),o=l((function(e){return e(nr).isGeneratingTimeline()})),i=(0,c.useDispatch)(nr).savePostAndGenerateTimeline;return t?rr.createElement(rr.Fragment,null,n&&rr.createElement(ir.Button,{size:"small",variant:"secondary",isBusy:o,disabled:!r,onClick:i},o?(0,ce._x)("Generating Timeline…","text","nelio-content"):(0,ce._x)("Regenerate Timeline","command","nelio-content")),rr.createElement(ei,{isSmall:!0})):null};const ni=window.NelioContent.socialMessageEditor;var ri=(0,zt.withProfileCheck)((function(){var e=oi(),t=ii(),n=Fo(),r=Uo(),o=(0,c.useDispatch)(nr).savePostAndGenerateTimeline,i=l((function(e){return e(nr).getPost()})),a=(0,c.useDispatch)(ni.store).openNewSocialMessageEditor,s=l((function(e){var t=e(nr).getPost(),n=e(nr).isTimelineBusy,r=e(zt.store).canCurrentUserCreateMessagesRelatedToPost;return!n()&&r(t)})),u=l((function(e){var t=e(nr).getPost(),n=e(nr).isTimelineBusy,r=e(zt.store).couldSubscriberCreateMessagesRelatedToPost;return!n()&&r(t)})),d=(0,zt.useFeatureGuard)("edit-post/create-more-messages",u&&!s)((function(){return a({},{context:"post",post:i,disabledProfileIds:yn()})}));return rr.createElement("div",{className:"nelio-content-generate-timeline-button"},rr.createElement(pr.SubscribeAction,{className:"nelio-content-generate-timeline-button__promo-button"}),n&&rr.createElement("div",{className:"nelio-content-generate-timeline-button__timeline-button"},rr.createElement(ir.Button,{variant:"primary",isBusy:e,disabled:!r,onClick:o},t)),rr.createElement("div",{className:"nelio-content-generate-timeline-button__single-button"},rr.createElement(ir.Button,{variant:n?"tertiary":"primary",disabled:!u,onClick:d,icon:!s&&u?"lock":void 0},(0,ce._x)("Add Social Message","command","nelio-content"))))})),oi=function(){return l((function(e){return e(nr).isGeneratingTimeline()}))},ii=function(){return l((function(e){e(zt.store);var t=e(nr).getPost();if(!t)return"";var n=t.status,r=t.id,o=e(zt.store).getSocialMessagesRelatedToPost(r).filter((function(e){return"publish"!==e.status})),i=e(nr).isGeneratingTimeline;return(0,d.isEmpty)(o)?"publish"===n?i()?(0,ce._x)("Filling Timeline…","text","nelio-content"):(0,ce._x)("Fill Timeline","command","nelio-content"):(0,e(nr).isAutoShareEnabled)()?i()?(0,ce._x)("Loading Timeline…","text","nelio-content"):(0,ce._x)("Customize Timeline","command","nelio-content"):i()?(0,ce._x)("Generating Timeline…","text","nelio-content"):(0,ce._x)("Generate Timeline","command","nelio-content"):i()?(0,ce._x)("Generating Timeline…","text","nelio-content"):(0,ce._x)("Regenerate Timeline","command","nelio-content")}))},ai=function(){var e=l((function(e){return!!e(zt.store).getSocialProfileCount()})),t=si(),n=(0,c.useDispatch)(nr).deleteSocialMessage,r=Go(),o=jo(),i=Bo();return rr.createElement(Ro,{icon:"share",title:(0,ce._x)("Timeline","text","nelio-content"),titleActions:rr.createElement(ti,{enabled:e&&t}),type:"timeline"},t?rr.createElement(Zo.SocialTimeline,{deleteMessage:n,deletingMessageIds:r,isTimelineBusy:o,post:i}):rr.createElement(ri,null))},si=function(){return l((function(e){var t=e(nr).getPostId,n=(0,e(zt.store).getSocialMessagesRelatedToPost)(t());return!!(0,m.find)(n,(function(e){return"publish"!==e.status}))}))},ci=(0,or.compose)(br,Sr("isRetrievingSocialMessages"))((function(){return rr.createElement(ir.SlotFillProvider,null,rr.createElement("div",{className:"nelio-content-social-media-metabox"},rr.createElement(Po,null),rr.createElement(ai,null),rr.createElement(Jo,null),rr.createElement(Mo,null)),rr.createElement(ir.Popover.Slot,null))})),li=function(){var e=ui(),t=(0,c.useDispatch)("core/edit-post").openGeneralSidebar;return rr.createElement("div",{className:"nelio-content-social-media-publish-summary"},rr.createElement("div",{className:"nelio-content-social-media-publish-summary__icon"},rr.createElement(ir.Dashicon,{icon:"share"})),rr.createElement("div",{className:"nelio-content-social-media-publish-summary__button"},rr.createElement(ir.Button,{variant:"link",onClick:function(){t("nelio-content/nelio-content-social-sidebar")}},e)))},ui=function(){return l((function(e){var t=e(nr).getPost,n=e(zt.store).getSocialMessagesRelatedToPost,r=t()||{},o=r.status,i=n(r.id);if("publish"===o&&(0,d.isEmpty)(i))return(0,ce._x)("Share on social media","command","nelio-content");if((0,d.isEmpty)(i))return(0,e(nr).isAutoShareEnabled)()?(0,ce._x)("Customize social messages","command","nelio-content"):(0,ce._x)("Share on social media","command","nelio-content");var a=i.filter((function(e){return"publish"!==e.status})),s=a.length;return(0,ce.sprintf)(/* translators: number of social messages */ /* translators: number of social messages */
(0,ce._nx)("%d social message ready","%d social messages ready",s,"text","nelio-content"),s)}))},di=function(){return rr.createElement(ir.PanelBody,{className:"nelio-content-social-media-sidebar-main-panel"},rr.createElement(ir.PanelRow,{className:"nelio-content-social-media-sidebar-main-panel__buttons"},rr.createElement(ri,null)))},mi=function(){var e=(0,c.useDispatch)(nr).deleteSocialMessage,t=Go(),n=jo(),r=Bo();return fi()?rr.createElement(ir.PanelBody,{className:"nelio-content-sidebar-timeline",title:(0,ce._x)("Social Timeline","text","nelio-content")},rr.createElement(Zo.SocialTimeline,{deleteMessage:e,deletingMessageIds:t,isTimelineBusy:n,post:r}),rr.createElement("div",{className:"nelio-content-sidebar-timeline__clear-button"},rr.createElement(ei,null))):null},fi=function(){return l((function(e){var t=e(nr).getPostId,n=(0,e(zt.store).getSocialMessagesRelatedToPost)(t());return!!(0,m.find)(n,(function(e){return"publish"!==e.status}))}))},pi=function(){return rr.createElement(ir.PanelBody,{title:(0,ce._x)("Automation Settings","text","nelio-content")},rr.createElement(Qo,null))},gi=function(){return rr.createElement(ir.PanelBody,{title:(0,ce._x)("Permalink Settings","text","nelio-content")},rr.createElement(Do,null))},Ei=function(){var e=l((function(e){return e(nr).isPostReady()})),t=l((function(e){return e(nr).isRetrievingSocialMessages()}));return e?t?rr.createElement(ir.PanelBody,null,(0,ce._x)("Loading…","text","nelio-content")):rr.createElement(rr.Fragment,null,rr.createElement(di,null),rr.createElement(mi,null),rr.createElement(pi,null),rr.createElement(gi,null)):rr.createElement(ir.PanelBody,null,(0,ce._x)("Please save post first to access this feature.","user","nelio-content"))},hi=(0,or.compose)(zt.withProfileCheck,br)((function(){var e=(0,c.useDispatch)("core/edit-post").openGeneralSidebar;return rr.createElement("div",{className:"nelio-content-social-media-tools"},rr.createElement("p",null,(0,ce._x)("Nelio Content helps you share WordPress content on social media, so that you can reach a broader audience and engage with more people.","text","nelio-content")),rr.createElement(ir.Button,{variant:"secondary",onClick:function(){e("nelio-content/nelio-content-social-sidebar")}},(0,ce._x)("View Social Timeline","command","nelio-content")))})),vi={};function yi(e){var t,n,r;void 0===e&&(e={});var o=(0,c.select)(nr).getPostQualitySettings(),i={allowedBads:null!==(t=e.allowedBads)&&void 0!==t?t:o.allowedBads,allowedImprovables:null!==(n=e.allowedImprovables)&&void 0!==n?n:o.allowedImprovables,unacceptableImprovables:null!==(r=e.unacceptableImprovables)&&void 0!==r?r:o.unacceptableImprovables};(0,c.dispatch)(nr).setPostQualitySettings(i)}function _i(e,t){var n=t.icon,r=t.interval,o=void 0===r?500:r,i=t.settings,a=void 0===i?{}:i,s=t.attributes,l=t.validate;if("string"==typeof e)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(e))if((0,c.select)(nr).getQualityCheckType(e))console.error("Quality check “".concat(e,"” is already registered."));else if(n)if((0,m.isFunction)(s))if((0,m.isFunction)(l)){if(void 0!==o&&a){var u={name:e,icon:n,interval:o,settings:a,attributes:s,validate:l};return(0,c.dispatch)(nr).addQualityCheckType(u),function(e,t){t=Math.max(t,500);var n=(0,m.throttle)((function(){var t=(0,(0,c.select)(nr).getQualityCheckType)(e);if(t){var n=vi[e];if(n){var r,o=n.prevAttributes,i=n.prevSettings,a=t.settings;try{r=t.attributes(c.select)}catch(e){return void console.error(e)}if(n.prevAttributes=r,n.prevSettings=a,!(0,m.isEqual)(o,r)||i!==a)try{var s=t.validate(r,a)||{},l=s.status,u=void 0===l?"unknown":l,d=s.text,f=void 0===d?(0,ce._x)("Unknown status","text","nelio-content"):d;(0,(0,c.dispatch)(nr).updateQualityCheckItem)(e,u,f)}catch(e){console.error(e)}}}}),t);vi[e]={unsubscribe:(0,c.subscribe)(n),prevAttributes:{},prevSettings:{}},n()}(e,u.interval),u}}else console.error("The “validate” property must be a valid function.");else console.error("The “attributes” property must be a valid function.");else console.error("Quality check “".concat(e,"” must have an icon."));else console.error("Quality check names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-quality-check");else console.error("Quality check names must be strings.")}function Ti(e){!function(e){var t;null===(t=vi[e])||void 0===t||t.unsubscribe(),delete vi[e]}(e),(0,c.dispatch)(nr).removeQualityCheckType(e)}function bi(e,t){(0,c.select)(nr).getQualityCheckType(e)&&(0,c.dispatch)(nr).updateQualityCheckSettings(e,t)}_i("nelio-content/yoast-seo",{icon:"book",attributes:function(e){var t;if(!e("yoast-seo/editor"))return{status:"invisible",text:""};try{var n=e("yoast-seo/editor").getFocusKeyphrase;if(!(null==n?void 0:n()))return{status:"unknown",text:(0,ce._x)("Yoast SEO score is not available","text","nelio-content")};var r=e("yoast-seo/editor").getResultsForFocusKeyword,o=null==r?void 0:r(),i=null!==(t=null==o?void 0:o.overallScore)&&void 0!==t?t:0;return i<40?{status:"bad",text:(0,ce._x)("Address your Yoast SEO score","user","nelio-content")}:i<70?{status:"improvable",text:(0,ce._x)("Improve Yoast SEO score","user","nelio-content")}:{status:"good",text:(0,ce._x)("Yoast SEO looks good","user","nelio-content")}}catch(e){return{status:"unknown",text:(0,ce._x)("Unable to retrieve Yoast SEO score","text","nelio-content")}}},validate:function(e){return e}}),_i("nelio-content/yoast-content",{icon:"chart-bar",attributes:function(e){var t;if(!e("yoast-seo/editor"))return{status:"invisible",text:""};try{var n=e("yoast-seo/editor").getReadabilityResults,r=null==n?void 0:n(),o=null!==(t=null==r?void 0:r.overallScore)&&void 0!==t?t:0;return o<40?{status:"bad",text:(0,ce._x)("According to Yoast, content needs improvement","text","nelio-content")}:o<70?{status:"improvable",text:(0,ce._x)("According to Yoast, content is OK","text","nelio-content")}:{status:"good",text:(0,ce._x)("According to Yoast, content is good","text","nelio-content")}}catch(e){return{status:"unknown",text:(0,ce._x)("Unable to retrieve Yoast Content Analysis","text","nelio-content")}}},validate:function(e){return e}});const Si=window.NelioContent.networks;function Ai(e){return"tiktok"!==e.network}_i("nelio-content/social-messages",{icon:"share",settings:{isNoProfilesBad:!0,isAllProfilesEmptyBad:!0,isSomeProfilesEmptyBad:!1},attributes:function(e){var t=e(nr),n=e(zt.store),r=t.getAutomationSources(),o=t.isAutoShareEnabled(),i=t.getContent().includes("<ncshare>")||r.useCustomSentences;return{isEnabled:n.getPostTypes("social").map((function(e){return e.name})).includes(t.getPostType()),isPostAutoShareable:o&&i,isPublished:"publish"===t.getStatus(),hasImages:!!t.getImages().length||!!t.getFeaturedImageSrc(),messages:n.getSocialMessagesRelatedToPost(t.getPostId()),profiles:n.getSocialProfiles()}},validate:function(e,t){var n=e.isEnabled,r=e.isPostAutoShareable,o=e.isPublished,i=e.hasImages,a=e.messages,s=e.profiles,c=t.isNoProfilesBad,l=t.isAllProfilesEmptyBad,u=t.isSomeProfilesEmptyBad;return n?o?{status:"good",text:(0,ce._x)("Social messages look good","text","nelio-content")}:(0,d.isEmpty)(s)?{status:c?"bad":"improvable",text:(0,ce._x)("Connect some profiles to share this on social media","user","nelio-content")}:(s=s.filter(Ai),(0,d.isEmpty)(s)?{status:"improvable",text:(0,ce._x)("Connect non-TikTok profiles to promote this on social media","user","nelio-content")}:(0,d.isEmpty)(a)?r&&s.every((function(e){return!!e.publicationFrequency}))?!i&&s.every((function(e){return(0,Si.doesNetworkRequire)("image",e.network)}))?{status:l?"bad":"improvable",text:(0,ce._x)("Social messages can’t be auto-generated because all profiles require an image","text","nelio-content")}:!i&&s.some((function(e){return(0,Si.doesNetworkRequire)("image",e.network)}))?{status:u?"bad":"improvable",text:(0,ce._x)("Some profiles require an image and their social messages can’t be auto-generated","text","nelio-content")}:{status:"good",text:(0,ce._x)("Automatic social messages look good","text","nelio-content")}:{status:l?"bad":"improvable",text:(0,ce._x)("Schedule social messages on all profiles","user","nelio-content")}:s.every((function(e){return a.some((function(t){return t.profileId===e.id}))}))?{status:"good",text:(0,ce._x)("Social messages look good","text","nelio-content")}:{status:u?"bad":"improvable",text:(0,ce._x)("Schedule social messages on all profiles","user","nelio-content")}):{status:"invisible",text:""}}}),_i("nelio-content/editorial-tasks",{icon:"flag",settings:{useBadStatus:!0},attributes:function(e){var t=e(nr),n=t.getPostId,r=t.getPostType,o=e(zt.store),i=o.getPostTypes,a=o.getTasksRelatedToPost;return{isEnabled:i("tasks").map((function(e){return e.name})).includes(r()),tasks:a(n())}},validate:function(e,t){var n=e.isEnabled,r=e.tasks,o=t.useBadStatus;if(!n)return{status:"invisible",text:""};var i=r.filter((function(e){return!e.completed}));return(0,d.isEmpty)(i)?{status:"good",text:(0,ce._x)("There are no pending tasks","text","nelio-content")}:{status:o?"bad":"improvable",text:(0,ce._x)("Complete all tasks","user","nelio-content")}}});const xi=window.wp.coreData;_i("nelio-content/featured-image",{icon:"format-image",settings:{useBadStatus:!0,canImageBeAutoSet:!1},attributes:function(e){var t=e(nr),n=t.getFeaturedImageSrc,r=(0,t.getPostType)(),o=r?e(xi.store).getEntityRecord("root","postType",r):void 0;return{isEnabled:!!(null==o?void 0:o.supports.excerpt),imageSrc:n()}},validate:function(e,t){var n=e.isEnabled,r=e.imageSrc,o=t.canImageBeAutoSet,i=t.useBadStatus;if(!n)return{status:"invisible",text:""};var a=!(0,d.isEmpty)(r);return o||a?{status:"good",text:a?(0,ce._x)("There’s a featured image","text","nelio-content"):(0,ce._x)("Automatic featured image","text","nelio-content")}:{status:i?"bad":"improvable",text:(0,ce._x)("Set a featured image","user","nelio-content")}}}),_i("nelio-content/content-length",{icon:"edit",interval:2e3,settings:{improvableThreshold:700,goodThreshold:1e3},attributes:function(e){return{content:(0,e(nr).getContent)()}},validate:function(e,t){var n=e.content,r=t.improvableThreshold,o=t.goodThreshold,i=function(e){return void 0===e&&(e=""),(e=(e=e.replace(/<[^>]*>/g,"")).replace(/\s+/g," ")).split(" ").length}(n);return i<r?{status:"bad",text:(0,ce._x)("Write a longer copy","user","nelio-content")}:i<o?{status:"improvable",text:(0,ce._x)("Write a longer copy","user","nelio-content")}:{status:"good",text:(0,ce._x)("Copy length looks good","text","nelio-content")}}}),_i("nelio-content/internal-links",{icon:"admin-links",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{content:(0,e(nr).getContent)()}},validate:function(e,t){var n=e.content,r=(0,d.getLinks)(n).filter(d.isInternalUrl),o=t.improvableThreshold,i=t.goodThreshold,a=i-r.length;return(0,d.isEmpty)(r)?{status:r.length<o?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,ce._nx)("Add %d link to your own site","Add %d links to your own site",a,"user","nelio-content"),a)}:r.length<i?{status:r.length<o?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,ce._nx)("Add %d more link to your own site","Add %d more links to your own site",a,"user","nelio-content"),a)}:{status:"good",text:(0,ce._x)("Links to your own site look good","text","nelio-content")}}}),_i("nelio-content/external-links",{icon:"external",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{content:(0,e(nr).getContent)()}},validate:function(e,t){var n=e.content,r=(0,d.getLinks)(n).filter(d.isExternalUrl),o=t.improvableThreshold,i=t.goodThreshold,a=i-r.length;return(0,d.isEmpty)(r)?{status:r.length<o?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,ce._nx)("Add %d link to an external source","Add %d links to external sources",a,"user","nelio-content"),a)}:r.length<i?{status:r.length<o?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,ce._nx)("Add %d more link to an external source","Add %d more links to external sources",a,"user","nelio-content"),a)}:{status:"good",text:(0,ce._x)("Links to external sources look good","text","nelio-content")}}}),_i("nelio-content/content-images",{icon:"images-alt",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{images:(0,e(nr).getImages)()}},validate:function(e,t){var n=e.images,r=t.improvableThreshold,o=t.goodThreshold,i=o-n.length;return(0,d.isEmpty)(n)?{status:n.length<r?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of images */ /* translators: number of images */
(0,ce._nx)("Add %d image in your copy","Add %d images in your copy",i,"user","nelio-content"),i)}:n.length<o?{status:n.length<r?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of images */ /* translators: number of images */
(0,ce._nx)("Add %d more image in your copy","Add %d more images in your copy",i,"user","nelio-content"),i)}:{status:"good",text:(0,ce._x)("Image count looks good","text","nelio-content")}}}),_i("nelio-content/author",{icon:"admin-users",settings:{useBadStatus:!1},attributes:function(e){var t=e(nr),n=t.getAuthorId,r=t.getPostType,o=(0,e(zt.store).getAuthor)(n()),i=r(),a=i?e(xi.store).getEntityRecord("root","postType",i):void 0;return{isEnabled:!!(null==a?void 0:a.supports.author),isAdmin:!!(null==o?void 0:o.isAdmin)}},validate:function(e,t){var n=e.isEnabled,r=e.isAdmin,o=t.useBadStatus;return n?r?{status:o?"bad":"improvable",text:(0,ce._x)("Select a non-admin author","user","nelio-content")}:{status:"good",text:(0,ce._x)("Valid author","text","nelio-content")}:{status:"invisible",text:""}}}),_i("nelio-content/excerpt",{icon:"text",settings:{useBadStatus:!1},attributes:function(e){var t=e(nr),n=t.getExcerpt,r=(0,t.getPostType)(),o=r?e(xi.store).getEntityRecord("root","postType",r):void 0;return{isEnabled:!!(null==o?void 0:o.supports.excerpt),excerpt:n()}},validate:function(e,t){var n=e.isEnabled,r=e.excerpt,o=t.useBadStatus;return n?(0,d.isEmpty)((0,m.trim)(r))?{status:o?"bad":"improvable",text:(0,ce._x)("Write an excerpt","user","nelio-content")}:{status:"good",text:(0,ce._x)("Excerpt looks good","text","nelio-content")}:{status:"invisible",text:""}}}),_i("nelio-content/tags",{icon:"tag",settings:{useBadStatus:!0},attributes:function(e){var t,n=e(nr),r=n.getPostType,o=n.getTerms,i=e(xi.store).getEntityRecords,a=r(),s=i("root","taxonomy",{per_page:-1})||[],c=(0,m.filter)(s,(function(e){return e.visibility.public&&e.types.includes(null!=a?a:"")})).map((function(e){return e.slug}));return{tags:null!==(t=o(d.TAG))&&void 0!==t?t:o(d.PROD_TAG),isActive:c.includes(d.TAG)||c.includes(d.PROD_TAG)}},validate:function(e,t){var n=e.tags,r=t.useBadStatus;return(0,d.isEmpty)(n)?{status:r?"bad":"improvable",text:(0,ce._x)("Add one or more tags","user","nelio-content")}:{status:"good",text:(0,ce._x)("Content is properly tagged","text","nelio-content")}}});var ki=function(e){var t=l((function(t){return t(nr).isPanelOpen(e)})),n=(0,c.useDispatch)(nr).togglePanel;return[t,function(){return n(e,!t)}]},Ii=function(){return l((function(e){var t=e(nr).getPost,n=e(zt.store),r=n.isSubscribed,o=n.getProfilesWithMessagesRelatedToPost,i=t();return r()||!(null==i?void 0:i.id)?[]:o(i.id)}))};function wi(e,t){(0,on.addFilter)("nelio-content_edit-post_onDeletePremiumItem","deletePremium".concat((0,d.pascalCase)(e)),(function(n,r,o){return r===e?t(o):n}))}},4396:(e,t)=>{"use strict";function n(e){return e}t.L8=void 0,t.L8=function(){return n}},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],i=e[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={3178:0,805:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,a=n[0],s=n[1],c=n[2],l=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var u=c(r)}for(t&&t(n);l<a.length;l++)i=a[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},n=self.webpackChunkNelioContent=self.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[805],(()=>r(5999)));o=r.O(o);var i=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var a in o)i[a]=o[a];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();