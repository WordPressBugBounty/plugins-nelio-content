(()=>{var e,t={5999:(e,t,n)=>{"use strict";n.r(t),n.d(t,{editPost:()=>s});var r={};n.r(r),n.d(r,{getAuthorId:()=>X,getAutoShareEndMode:()=>ae,getAutoShareEndModeDuration:()=>Ce,getAutoShareEndModes:()=>Re,getAutomationSources:()=>se,getContent:()=>H,getDate:()=>z,getDeletingMessageIds:()=>Le,getEditingReference:()=>be,getEditorialCommentInputValue:()=>N,getExcerpt:()=>Y,getExternalFeaturedImageAlt:()=>U,getExternalFeaturedImageAltField:()=>B,getExternalFeaturedImageUrl:()=>F,getExternalFeaturedImageUrlField:()=>G,getExternalFeaturedImageView:()=>M,getFeaturedImageId:()=>Z,getFeaturedImageSrc:()=>ee,getFollowers:()=>J,getImages:()=>ne,getOverallPostQualityStatus:()=>de,getPanelStatuses:()=>ke,getPermalink:()=>W,getPermalinkTemplate:()=>$,getPost:()=>Q,getPostId:()=>K,getPostQualitySettings:()=>le,getPostType:()=>V,getQualityCheckRationale:()=>fe,getQualityCheckStatus:()=>me,getQualityCheckType:()=>Ee,getQualityCheckTypes:()=>ge,getQueryArgs:()=>oe,getReferenceByUrl:()=>he,getStatus:()=>te,getSuggestedReferenceUrl:()=>Se,getSuggestedReferences:()=>ve,getTaskPresetLoaderState:()=>je,getTaskPresetSelection:()=>Be,getTerms:()=>re,getTitle:()=>q,isAutoShareEnabled:()=>ie,isClassicEditor:()=>Ae,isClearingTimeline:()=>De,isDeletingEditorialComment:()=>D,isEditorialTaskBeingDeleted:()=>Fe,isEditorialTaskBeingSynched:()=>Ue,isElementorEditor:()=>xe,isGeneratingTimeline:()=>Ne,isPanelOpen:()=>Ie,isPostReady:()=>j,isPremiumItemBeingDeleted:()=>pe,isQualityAnalysisFullyIntegrated:()=>ue,isReferenceEditorVisible:()=>Te,isReferenceLoading:()=>ye,isReferenceSaving:()=>_e,isRetrievingEditorialComments:()=>L,isRetrievingEditorialTasks:()=>Ge,isRetrievingSocialMessages:()=>Me,isSocialMessageBeingDeleted:()=>Oe,isSynchingEditorialComment:()=>O,isTimelineBusy:()=>Pe,shouldAuthorBeFollower:()=>we});var o={};n.r(o),n.d(o,{addQualityCheckType:()=>Tt,cancelEditionOfExternalFeaturedImage:()=>Ye,closeReferenceEditor:()=>Ct,discardReference:()=>wt,doOpenReferenceEditor:()=>Dt,editExternalFeaturedImage:()=>qe,enableAutoShare:()=>mt,includeAuthorInFollowers:()=>Ut,markAsLoadingPostItems:()=>Et,markEditorialCommentAsDeleting:()=>Ve,markEditorialCommentAsSynching:()=>Ke,markEditorialTaskAsDeleting:()=>Vt,markEditorialTaskAsSynching:()=>Kt,markPremiumItemAsDeleting:()=>_t,markQualityAnalysisAsFullyIntegrated:()=>ht,markReferenceAsLoading:()=>Pt,markReferenceAsSaving:()=>Nt,markSocialMessageAsDeleting:()=>Bt,markTimelineAsClearing:()=>Qt,markTimelineAsGenerating:()=>jt,openTaskPresetLoader:()=>qt,receiveReferences:()=>At,removeCustomField:()=>Je,removeExternalFeaturedImage:()=>ze,removeFeaturedImage:()=>lt,removeQualityCheckType:()=>bt,selectTaskPresets:()=>Yt,setAuthor:()=>it,setAutoShareEndMode:()=>ft,setAutoShareEndModes:()=>Gt,setAutomationSources:()=>pt,setContent:()=>rt,setCustomField:()=>$e,setDate:()=>ot,setEditorToClassic:()=>Mt,setEditorToElementor:()=>Ft,setEditorialCommentInputValue:()=>Qe,setExcerpt:()=>nt,setExternalFeaturedImage:()=>He,setExternalFeaturedImageAltField:()=>We,setExternalFeaturedImageUrlField:()=>Xe,setFeaturedImage:()=>ct,setFollowers:()=>st,setPanelSettings:()=>Ot,setPermalink:()=>at,setPost:()=>Ze,setPostId:()=>et,setPostQualitySettings:()=>vt,setQueryArgs:()=>gt,setStatus:()=>ut,setSuggestedReferenceUrl:()=>xt,setTaskPresetsState:()=>Ht,setTerms:()=>dt,setTitle:()=>tt,suggestReference:()=>kt,suggestReferences:()=>It,togglePanel:()=>Lt,updateEditingReference:()=>Rt,updateQualityCheckItem:()=>yt,updateQualityCheckSettings:()=>St});var i={};n.r(i),n.d(i,{clearTimeline:()=>Fn,createEditorialComment:()=>Zt,deleteEditorialComment:()=>en,deleteEditorialTask:()=>Xn,deletePremiumItem:()=>un,deleteSocialMessage:()=>Un,generateTimeline:()=>Mn,instantiatePresets:()=>zn,isElementor:()=>Kn,loadPostItems:()=>on,markTaskAsCompleted:()=>Hn,openReferenceEditor:()=>fn,saveAndCloseEditingReference:()=>pn,savePostAndGenerateTimeline:()=>Ln,saveReference:()=>gn,updateDatesInPostRelatedItems:()=>an});var a={};n.r(a),n.d(a,{getReferenceByUrl:()=>nr});var s={};n.r(s),n.d(s,{EditorialComments:()=>wr,EditorialTasks:()=>Hr,ExternalFeaturedImage:()=>eo,Notifications:()=>ro,QualityAnalysis:()=>Ro,QualityAnalysisSummary:()=>Io,ReferenceEditor:()=>so,References:()=>ko,SocialMediaMetabox:()=>mi,SocialMediaSidebar:()=>_i,SocialMediaSummary:()=>fi,SocialMediaTools:()=>Ti,deregisterQualityCheck:()=>xi,getDisabledProfiles:()=>bn,onDeletePremiumItem:()=>Ni,processHtml:()=>Sn,registerQualityCheck:()=>Ai,store:()=>ar,updatePostQualitySettings:()=>Si,updateQualityCheckSettings:()=>ki,useDisabledProfiles:()=>Pi,usePanelToggling:()=>Ci,withLoadingCheck:()=>Ir,withPostReadyCheck:()=>kr});const c=window.wp.data;function l(e,t){return(0,c.useSelect)(e,t)}function u(e){return(0,c.resolveSelect)(e)}const d=window.NelioContent.utils,m=window.lodash;var f=n(4396),p={comments:{synching:[],deleting:[],input:"",isRetrievingComments:!1},externalFeaturedImage:{view:"no-image",fields:{url:"",alt:""},imageUrl:void 0,imageAlt:""},post:{id:(0,f.L8)()(0),author:(0,f.L8)()(0),authorName:"",content:"",customFields:{},customPlaceholders:{},date:"",editLink:(0,f.L8)()(""),excerpt:"",followers:[],imageId:0,imageSrc:!1,images:[],isAutoShareEnabled:!1,permalink:(0,f.L8)()(""),permalinks:{},permalinkQueryArgs:[],permalinkTemplate:"",statistics:{engagement:{},pageviews:void 0},status:d.AUTO_DRAFT,taxonomies:{},thumbnailSrc:!1,title:"",type:d.POST,typeName:"",viewLink:(0,f.L8)()(""),autoShareEndMode:"never",automationSources:{useCustomSentences:!1,customSentences:[]}},postQuality:{checks:{},isFullyIntegrated:!1,settings:{allowedBads:1,allowedImprovables:2,unacceptableImprovables:4}},qualityCheckTypes:{},references:{byUrl:{},byType:{suggested:[]},status:{loading:[],saving:[]},editor:{isActive:!1},suggestedUrl:""},settings:{isClassicEditor:!1,isElementorEditor:!1,panels:{},shouldAuthorBeFollower:!1,autoShareEndModes:[]},social:{deleting:[],timelineStatus:"ready",isRetrievingSocialMessages:!1},tasks:{preset:void 0,synching:[],deleting:[],isRetrievingTasks:!1},premiumByType:{}},g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},g.apply(this,arguments)},E=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},h=function(){return h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)},v=function(){return v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},v.apply(this,arguments)};function y(e){void 0===e&&(e="");var t=e.match(/img[^>]*src="[^"]+"|img[^>]*src='[^']+'/gi)||[];return(0,m.uniq)(t.map((function(e){return e.replace(/.*src=.(.*)./,"$1")})).filter(d.isUrl))}var _=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)},T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},T.apply(this,arguments)},b=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S.apply(this,arguments)},A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},A.apply(this,arguments)},x=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},k=function(){return k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},k.apply(this,arguments)},I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},I.apply(this,arguments)},w=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},R.apply(this,arguments)},C=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const P=(0,c.combineReducers)({comments:function(e,t){var n;return void 0===e&&(e=p.comments),null!==(n=function(e,t){switch(t.type){case"SET_EDITORIAL_COMMENT_INPUT_VALUE":return g(g({},e),{input:t.value});case"MARK_EDITORIAL_COMMENT_AS_SYNCHING":return g(g({},e),{synching:t.isSynching?E(E([],e.synching,!0),[t.commentId],!1):(0,m.without)(e.synching,t.commentId)});case"MARK_EDITORIAL_COMMENT_AS_DELETING":return g(g({},e),{deleting:t.isDeleting?E(E([],e.deleting,!0),[t.commentId],!1):(0,m.without)(e.deleting,t.commentId)});case"MARK_AS_LOADING_POST_ITEMS":return g(g({},e),{isRetrievingComments:t.isLoading})}}(e,t))&&void 0!==n?n:e},externalFeaturedImage:function(e,t){var n;return void 0===e&&(e=p.externalFeaturedImage),null!==(n=function(e,t){var n;switch(t.type){case"SET_EXTERNAL_FEATURED_IMAGE":return{view:"image",fields:{url:t.url,alt:t.altText},imageUrl:t.url,imageAlt:t.altText};case"REMOVE_EXTERNAL_FEATURED_IMAGE":return{view:"no-image",fields:{url:"",alt:""},imageUrl:void 0,imageAlt:""};case"SET_EXTERNAL_FEATURED_IMAGE_URL_FIELD":return h(h({},e),{fields:h(h({},e.fields),{url:t.url})});case"SET_EXTERNAL_FEATURED_IMAGE_ALT_FIELD":return h(h({},e),{fields:h(h({},e.fields),{alt:t.altText})});case"EDIT_EXTERNAL_FEATURED_IMAGE":return h(h({},e),{view:"edit-image"});case"CANCEL_EDITION_OF_EXTERNAL_FEATURED_IMAGE":return h(h({},e),{view:e.imageUrl?"image":"no-image",fields:{url:null!==(n=e.imageUrl)&&void 0!==n?n:"",alt:e.imageAlt}})}}(e,t))&&void 0!==n?n:e},post:function(e,t){var n;return void 0===e&&(e=p.post),null!==(n=function(e,t){var n,r,o,i;switch(t.type){case"SET_POST_ID":return e.id?e:v(v({},e),{id:e.id});case"SET_POST":var a=t.post,s=a.imageSrc,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(a,["imageSrc"]);return v(v(v({},p.post),c),{imageSrc:s||!1,images:y(null==c?void 0:c.content),automationSources:v(v({},p.post.automationSources),null==c?void 0:c.automationSources)});case"SET_QUERY_ARGS":return v(v({},e),{permalinkQueryArgs:t.args});case"SET_CUSTOM_FIELD":return v(v({},e),{customFields:(0,m.has)(e.customFields,t.key)?v(v({},e.customFields),(n={},n[t.key]=v(v({},e.customFields[t.key]),{value:t.value}),n)):e.customFields});case"REMOVE_CUSTOM_FIELD":return v(v({},e),{customFields:(0,m.has)(e.customFields,t.key)?v(v({},e.customFields),(r={},r[t.key]=v(v({},e.customFields[t.key]),{value:""}),r)):e.customFields});case"SET_TITLE":return v(v({},e),{title:t.title});case"SET_EXCERPT":return v(v({},e),{excerpt:t.excerpt});case"SET_CONTENT":return v(v({},e),{content:t.content,images:y(t.content)});case"SET_DATE":return v(v({},e),{date:null!==(i=t.date)&&void 0!==i&&i});case"SET_AUTHOR":return v(v({},e),{author:t.authorId,authorName:t.authorName});case"SET_PERMALINK":return v(v({},e),{permalink:t.permalink});case"SET_FEATURED_IMAGE":return v(v({},e),{imageId:t.imageId,imageSrc:t.imageSrc,thumbnailSrc:t.thumbnailSrc});case"REMOVE_FEATURED_IMAGE":return v(v({},e),{imageId:0,imageSrc:!1,thumbnailSrc:!1});case"SET_FOLLOWERS":return v(v({},e),{followers:t.followers});case"SET_STATUS":return v(v({},e),{status:t.status});case"SET_TERMS":return v(v({},e),{taxonomies:v(v({},e.taxonomies),(o={},o[t.taxonomy]=t.terms,o))});case"ENABLE_AUTO_SHARE":return v(v({},e),{isAutoShareEnabled:t.isAutoShareEnabled});case"SET_AUTO_SHARE_END_MODE":return v(v({},e),{autoShareEndMode:t.autoShareEndMode});case"SET_AUTOMATION_SOURCES":return v(v({},e),{automationSources:v(v({},e.automationSources),t.sources)});case"MARK_AS_LOADING_POST_ITEMS":return e}}(e,t))&&void 0!==n?n:e},postQuality:function(e,t){var n;return void 0===e&&(e=p.postQuality),null!==(n=function(e,t){var n;switch(t.type){case"ADD_QUALITY_CHECK_TYPE":case"UPDATE_QUALITY_CHECK_SETTINGS":return e;case"REMOVE_QUALITY_CHECK_TYPE":return _(_({},e),{checks:(0,m.omit)(e.checks,t.name)});case"MARK_QUALITY_ANALYSIS_AS_FULLY_INTEGRATED":return _(_({},e),{isFullyIntegrated:t.isFullyIntegrated});case"UPDATE_QUALITY_CHECK_ITEM":return _(_({},e),{checks:_(_({},e.checks),(n={},n[t.name]={status:t.status,text:t.text},n))});case"SET_POST_QUALITY_SETTINGS":var r=_({allowedBads:e.settings.allowedBads,allowedImprovables:e.settings.allowedImprovables,unacceptableImprovables:e.settings.unacceptableImprovables},t.settings);return _(_({},e),{settings:{allowedBads:r.allowedBads,allowedImprovables:r.allowedImprovables,unacceptableImprovables:r.unacceptableImprovables}})}}(e,t))&&void 0!==n?n:e},premiumByType:function(e,t){var n;return void 0===e&&(e=p.premiumByType),null!==(n=function(e,t){var n,r,o;if("MARK_PREMIUM_ITEM_AS_DELETING"===t.type){var i=null!==(o=null===(r=e[t.typeName])||void 0===r?void 0:r.deleting)&&void 0!==o?o:[];return T(T({},e),((n={})[t.typeName]=T(T({},e[t.typeName]),{deleting:t.isDeleting?b(b([],i,!0),[t.itemId],!1):(0,m.without)(i,t.itemId)}),n))}}(e,t))&&void 0!==n?n:e},qualityCheckTypes:function(e,t){var n;return void 0===e&&(e=p.qualityCheckTypes),null!==(n=function(e,t){var n,r;switch(t.type){case"ADD_QUALITY_CHECK_TYPE":return S(S({},e),((n={})[t.definition.name]=t.definition,n));case"REMOVE_QUALITY_CHECK_TYPE":return e[t.name]?(0,m.omit)(e,t.name):e;case"UPDATE_QUALITY_CHECK_SETTINGS":var o=e[t.name];return o?S(S({},e),((r={})[t.name]=S(S({},o),{settings:S(S({},o.settings),t.settings)}),r)):e}}(e,t))&&void 0!==n?n:e},references:function(e,t){var n;return void 0===e&&(e=p.references),null!==(n=function(e,t){switch(t.type){case"RECEIVE_REFERENCES":return A(A({},e),{byUrl:t.references.reduce((function(e,t){var n;return A(A({},e),((n={})[t.url]=A(A({},e[t.url]),t),n))}),e.byUrl)});case"SET_SUGGESTED_REFERENCE_URL":return A(A({},e),{suggestedUrl:t.url});case"SUGGEST_REFERENCE":var n=e.byType.suggested;return A(A({},e),{byType:A(A({},e.byType),{suggested:n.includes(t.url)?n:x(x([],n,!0),[t.url],!1)})});case"SUGGEST_REFERENCES":return A(A({},e),{byType:A(A({},e.byType),{suggested:(0,m.uniq)(x(x([],e.byType.suggested,!0),t.urls,!0))})});case"DISCARD_REFERENCE":return A(A({},e),{byType:A(A({},e.byType),{suggested:(0,m.without)(e.byType.suggested,t.url)})});case"OPEN_REFERENCE_EDITOR":return A(A({},e),{editor:{isActive:!0,reference:t.reference}});case"UPDATE_EDITING_REFERENCE":return e.editor.isActive?A(A({},e),{editor:A(A({},e.editor),{reference:A(A({},e.editor.reference),t.attributes)})}):e;case"CLOSE_REFERENCE_EDITOR":return A(A({},e),{editor:{isActive:!1}});case"MARK_REFERENCE_AS_LOADING":return A(A({},e),{status:A(A({},e.status),{loading:t.isLoading?x(x([],e.status.loading,!0),[t.referenceUrl],!1):(0,m.without)(e.status.loading,t.referenceUrl)})});case"MARK_REFERENCE_AS_SAVING":return A(A({},e),{status:A(A({},e.status),{saving:t.isSaving?x(x([],e.status.saving,!0),[t.referenceUrl],!1):(0,m.without)(e.status.saving,t.referenceUrl)})})}}(e,t))&&void 0!==n?n:e},settings:function(e,t){var n;return void 0===e&&(e=p.settings),null!==(n=function(e,t){var n;switch(t.type){case"SET_EDITOR_TO_CLASSIC":return k(k({},e),{isClassicEditor:t.isClassicEditor});case"SET_EDITOR_TO_ELEMENTOR":return k(k({},e),{isElementorEditor:t.isElementorEditor});case"PANEL_SETTINGS":return k(k({},e),{panels:t.settings});case"TOGGLE_PANEL":return e.panels[t.panelName]===t.isOpen?e:k(k({},e),{panels:k(k({},e.panels),(n={},n[t.panelName]=t.isOpen,n))});case"INCLUDE_AUTHOR_IN_FOLLOWERS":return k(k({},e),{shouldAuthorBeFollower:t.shouldAuthorBeFollower});case"SET_AUTO_SHARE_END_MODES":return k(k({},e),{autoShareEndModes:t.autoShareEndModes})}}(e,t))&&void 0!==n?n:e},social:function(e,t){var n;return void 0===e&&(e=p.social),null!==(n=function(e,t){switch(t.type){case"MARK_SOCIAL_MESSAGE_AS_DELETING":return I(I({},e),{deleting:t.isDeleting?w(w([],e.deleting,!0),[t.messageId],!1):(0,m.without)(e.deleting,t.messageId)});case"MARK_TIMELINE_AS_GENERATING":return I(I({},e),{timelineStatus:t.isGenerating?"generating":"ready"});case"MARK_TIMELINE_AS_CLEARING":return I(I({},e),{timelineStatus:t.isClearing?"clearing":"ready"});case"MARK_AS_LOADING_POST_ITEMS":return I(I({},e),{isRetrievingSocialMessages:t.isLoading})}}(e,t))&&void 0!==n?n:e},tasks:function(e,t){var n;return void 0===e&&(e=p.tasks),null!==(n=function(e,t){switch(t.type){case"MARK_EDITORIAL_TASK_AS_SYNCHING":return R(R({},e),{synching:t.isSynching?C(C([],e.synching,!0),[t.taskId],!1):(0,m.without)(e.synching,t.taskId)});case"MARK_EDITORIAL_TASK_AS_DELETING":return R(R({},e),{deleting:t.isDeleting?C(C([],e.deleting,!0),[t.taskId],!1):(0,m.without)(e.deleting,t.taskId)});case"MARK_AS_LOADING_POST_ITEMS":return R(R({},e),{isRetrievingTasks:t.isLoading});case"OPEN_TASK_PRESET_LOADER":return R(R({},e),{preset:t.isOpen?{selection:[],state:"selection"}:void 0});case"SELECT_TASK_PRESETS":return R(R({},e),{preset:e.preset?R(R({},e.preset),{selection:t.selection}):void 0});case"SET_TASK_PRESETS_STATE":return R(R({},e),{preset:e.preset?R(R({},e.preset),{state:t.state}):void 0})}}(e,t))&&void 0!==n?n:e}});function N(e){return e.comments.input}function D(e,t){return e.comments.deleting.includes(t)}function O(e,t){return e.comments.synching.includes(t)}function L(e){return e.comments.isRetrievingComments}function M(e){return e.externalFeaturedImage.view}function F(e){return e.externalFeaturedImage.imageUrl}function U(e){return e.externalFeaturedImage.imageAlt}function G(e){return e.externalFeaturedImage.fields.url}function B(e){return e.externalFeaturedImage.fields.alt}function j(e){return"auto-draft"!==e.post.status&&!!e.post.id}function Q(e){return e.post}function K(e){return e.post.id||void 0}function V(e){return e.post.type||void 0}function q(e){return e.post.title||""}function Y(e){return e.post.excerpt||""}function H(e){return e.post.content||""}function z(e){return e.post.date||void 0}function X(e){return e.post.author||void 0}function W(e){return e.post.permalink||void 0}function $(e){return e.post.permalinkTemplate}function J(e){return e.post.followers||[]}function Z(e){return e.post.imageId||void 0}function ee(e){return e.post.imageSrc||void 0}function te(e){return e.post.status}function ne(e){return e.post.images||[]}function re(e,t){var n;return null!==(n=e.post.taxonomies[t])&&void 0!==n?n:[]}function oe(e){return e.post.permalinkQueryArgs}function ie(e){return!!e.post.isAutoShareEnabled}function ae(e){return e.post.autoShareEndMode}function se(e){return e.post.automationSources}const ce=window.wp.i18n;function le(e){return e.postQuality.settings}function ue(e){return!!e.postQuality.isFullyIntegrated}function de(e){var t=e.postQuality.checks,n=(0,m.size)((0,m.filter)(t,{status:"good"})),r=(0,m.size)((0,m.filter)(t,{status:"improvable"})),o=(0,m.size)((0,m.filter)(t,{status:"bad"}));if(!n&&!r&&!o)return"unknown";if(e.postQuality.settings.allowedBads<o)return"bad";var i=o+r;if(e.postQuality.settings.unacceptableImprovables<i)return"bad";var a=e.postQuality.settings.allowedImprovables;return o||a<i?"improvable":i?"good":"perfect"}function me(e,t){var n=e.postQuality.checks[t];return(null==n?void 0:n.status)||"unknown"}function fe(e,t){var n=e.postQuality.checks[t];return(null==n?void 0:n.text)||(0,ce._x)("Unknown status","text","nelio-content")}function pe(e,t,n){var r;return!!(null===(r=e.premiumByType[t])||void 0===r?void 0:r.deleting.includes(n))}function ge(e){return(0,m.values)(e.qualityCheckTypes)}function Ee(e,t){return e.qualityCheckTypes[t]}function he(e,t){return e.references.byUrl[t]}function ve(e){return e.references.byType.suggested}function ye(e,t){return!e.references.byUrl[t]||e.references.status.loading.includes(t)}function _e(e,t){return e.references.status.saving.includes(t)}function Te(e){return e.references.editor.isActive}function be(e){var t=e.references.editor;return t.isActive?t.reference:void 0}function Se(e){return e.references.suggestedUrl}function Ae(e){return e.settings.isClassicEditor}function xe(e){return e.settings.isElementorEditor}function ke(e){return e.settings.panels}function Ie(e,t){var n=e.settings.panels[t];return void 0===n||n}function we(e){return e.settings.shouldAuthorBeFollower}function Re(e){return e.settings.autoShareEndModes}function Ce(e,t){var n=(0,m.find)(e.settings.autoShareEndModes,{value:t});return(null==n?void 0:n.months)||0}function Pe(e){return"ready"!==e.social.timelineStatus}function Ne(e){return"generating"===e.social.timelineStatus}function De(e){return"clearing"===e.social.timelineStatus}function Oe(e,t){return e.social.deleting.includes(t)}function Le(e){return e.social.deleting}function Me(e){return!!e.social.isRetrievingSocialMessages}function Fe(e,t){return e.tasks.deleting.includes(t)}function Ue(e,t){return e.tasks.synching.includes(t)}function Ge(e){return!!e.tasks.isRetrievingTasks}function Be(e){var t,n;return null!==(n=null===(t=e.tasks.preset)||void 0===t?void 0:t.selection)&&void 0!==n?n:[]}function je(e){var t;return null===(t=e.tasks.preset)||void 0===t?void 0:t.state}function Qe(e){return{type:"SET_EDITORIAL_COMMENT_INPUT_VALUE",value:e}}function Ke(e,t){return{type:"MARK_EDITORIAL_COMMENT_AS_SYNCHING",commentId:e,isSynching:t}}function Ve(e,t){return{type:"MARK_EDITORIAL_COMMENT_AS_DELETING",commentId:e,isDeleting:t}}function qe(){return{type:"EDIT_EXTERNAL_FEATURED_IMAGE"}}function Ye(){return{type:"CANCEL_EDITION_OF_EXTERNAL_FEATURED_IMAGE"}}function He(e,t){return{type:"SET_EXTERNAL_FEATURED_IMAGE",url:e,altText:t}}function ze(){return{type:"REMOVE_EXTERNAL_FEATURED_IMAGE"}}function Xe(e){return{type:"SET_EXTERNAL_FEATURED_IMAGE_URL_FIELD",url:e}}function We(e){return{type:"SET_EXTERNAL_FEATURED_IMAGE_ALT_FIELD",altText:e}}function $e(e,t){return{type:"SET_CUSTOM_FIELD",key:e,value:t}}function Je(e){return{type:"REMOVE_CUSTOM_FIELD",key:e}}function Ze(e){return{type:"SET_POST",post:e}}function et(e){return{type:"SET_POST_ID",id:e}}function tt(e){return{type:"SET_TITLE",title:e}}function nt(e){return{type:"SET_EXCERPT",excerpt:e}}function rt(e){return{type:"SET_CONTENT",content:e}}function ot(e){return{type:"SET_DATE",date:e}}function it(e,t){return{type:"SET_AUTHOR",authorId:e,authorName:t}}function at(e){return{type:"SET_PERMALINK",permalink:e}}function st(e){return{type:"SET_FOLLOWERS",followers:e}}function ct(e,t){return{type:"SET_FEATURED_IMAGE",imageId:e,imageSrc:t||!1,thumbnailSrc:t||!1}}function lt(){return{type:"REMOVE_FEATURED_IMAGE"}}function ut(e){return{type:"SET_STATUS",status:e}}function dt(e,t){return{type:"SET_TERMS",taxonomy:e,terms:t}}function mt(e){return{type:"ENABLE_AUTO_SHARE",isAutoShareEnabled:e}}function ft(e){return{type:"SET_AUTO_SHARE_END_MODE",autoShareEndMode:e}}function pt(e){return{type:"SET_AUTOMATION_SOURCES",sources:e}}function gt(e){return{type:"SET_QUERY_ARGS",args:e}}function Et(e){return{type:"MARK_AS_LOADING_POST_ITEMS",isLoading:e}}function ht(e){return{type:"MARK_QUALITY_ANALYSIS_AS_FULLY_INTEGRATED",isFullyIntegrated:e}}function vt(e){return{type:"SET_POST_QUALITY_SETTINGS",settings:e}}function yt(e,t,n){return{type:"UPDATE_QUALITY_CHECK_ITEM",name:e,status:t,text:n}}function _t(e,t,n){return{type:"MARK_PREMIUM_ITEM_AS_DELETING",typeName:e,itemId:t,isDeleting:n}}function Tt(e){return{type:"ADD_QUALITY_CHECK_TYPE",definition:e}}function bt(e){return{type:"REMOVE_QUALITY_CHECK_TYPE",name:e}}function St(e,t){return{type:"UPDATE_QUALITY_CHECK_SETTINGS",name:e,settings:t}}function At(e){return{type:"RECEIVE_REFERENCES",references:(0,m.castArray)(e)}}function xt(e){return{type:"SET_SUGGESTED_REFERENCE_URL",url:e}}function kt(e){return{type:"SUGGEST_REFERENCE",url:e}}function It(e){return{type:"SUGGEST_REFERENCES",urls:(0,m.castArray)(e)}}function wt(e){return{type:"DISCARD_REFERENCE",url:e}}function Rt(e){return{type:"UPDATE_EDITING_REFERENCE",attributes:e}}function Ct(){return{type:"CLOSE_REFERENCE_EDITOR"}}function Pt(e,t){return{type:"MARK_REFERENCE_AS_LOADING",referenceUrl:e,isLoading:t}}function Nt(e,t){return{type:"MARK_REFERENCE_AS_SAVING",referenceUrl:e,isSaving:t}}function Dt(e){return{type:"OPEN_REFERENCE_EDITOR",reference:e}}function Ot(e){return{type:"PANEL_SETTINGS",settings:e}}function Lt(e,t){return{type:"TOGGLE_PANEL",panelName:e,isOpen:t}}function Mt(e){return{type:"SET_EDITOR_TO_CLASSIC",isClassicEditor:e}}function Ft(e){return{type:"SET_EDITOR_TO_ELEMENTOR",isElementorEditor:e}}function Ut(e){return{type:"INCLUDE_AUTHOR_IN_FOLLOWERS",shouldAuthorBeFollower:e}}function Gt(e){return{type:"SET_AUTO_SHARE_END_MODES",autoShareEndModes:e}}function Bt(e,t){return{type:"MARK_SOCIAL_MESSAGE_AS_DELETING",messageId:e,isDeleting:t}}function jt(e){return{type:"MARK_TIMELINE_AS_GENERATING",isGenerating:e}}function Qt(e){return{type:"MARK_TIMELINE_AS_CLEARING",isClearing:e}}function Kt(e,t){return{type:"MARK_EDITORIAL_TASK_AS_SYNCHING",taskId:e,isSynching:t}}function Vt(e,t){return{type:"MARK_EDITORIAL_TASK_AS_DELETING",taskId:e,isDeleting:t}}function qt(e){return{type:"OPEN_TASK_PRESET_LOADER",isOpen:e}}function Yt(e){return{type:"SELECT_TASK_PRESETS",selection:e}}function Ht(e){return{type:"SET_TASK_PRESETS_STATE",state:e}}const zt=window.wp.apiFetch,Xt=n.n(zt)(),Wt=window.NelioContent.data;var $t=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Jt=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function Zt(e){return $t(this,void 0,Promise,(function(){var t,n,r,o;return Jt(this,(function(i){switch(i.label){case 0:return[4,(0,c.dispatch)(Wt.store).receiveComments(e)];case 1:return i.sent(),[4,(0,c.dispatch)(ar).markEditorialCommentAsSynching(e.id,!0)];case 2:i.sent(),i.label=3;case 3:return i.trys.push([3,10,,12]),t=(0,c.select)(Wt.store).getApiRoot(),n=(0,c.select)(Wt.store).getSiteId(),r=(0,c.select)(Wt.store).getAuthenticationToken(),[4,Xt({url:"".concat(t,"/site/").concat(n,"/comment"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)},data:e})];case 4:return o=i.sent(),[4,(0,c.dispatch)(Wt.store).receiveComments(o)];case 5:i.sent(),i.label=6;case 6:return i.trys.push([6,8,,9]),[4,Xt({path:"/nelio-content/v1/notifications/comment",method:"POST",data:o})];case 7:case 8:return i.sent(),[3,9];case 9:return[3,12];case 10:return i.sent(),[4,(0,c.dispatch)(Wt.store).removeComment(e.id)];case 11:return i.sent(),[3,12];case 12:return[4,(0,c.dispatch)(ar).markEditorialCommentAsSynching(e.id,!1)];case 13:return i.sent(),[2]}}))}))}function en(e){return $t(this,void 0,Promise,(function(){var t,n,r;return Jt(this,(function(o){switch(o.label){case 0:return(0,c.select)(Wt.store).getComment(e)?[4,(0,c.dispatch)(ar).markEditorialCommentAsDeleting(e,!0)]:[2];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,5,,6]),t=(0,c.select)(Wt.store).getSiteId(),n=(0,c.select)(Wt.store).getApiRoot(),r=(0,c.select)(Wt.store).getAuthenticationToken(),[4,Xt({url:"".concat(n,"/site/").concat(t,"/comment/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 3:return o.sent(),[4,(0,c.dispatch)(Wt.store).removeComment(e)];case 4:case 5:return o.sent(),[3,6];case 6:return[4,(0,c.dispatch)(ar).markEditorialCommentAsDeleting(e,!1)];case 7:return o.sent(),[2]}}))}))}var tn=function(){return tn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tn.apply(this,arguments)},nn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},rn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function on(){return nn(this,void 0,Promise,(function(){var e;return rn(this,(function(t){switch(t.label){case 0:return(0,c.select)(ar).isPostReady()&&(e=(0,c.select)(ar).getPostId())?[4,(0,c.dispatch)(ar).markAsLoadingPostItems(!0)]:[2];case 1:return t.sent(),[4,u(Wt.store).getPostRelatedItems(e)];case 2:return t.sent(),[4,(0,c.dispatch)(ar).updateDatesInPostRelatedItems()];case 3:return t.sent(),[4,(0,c.dispatch)(ar).markAsLoadingPostItems(!1)];case 4:return t.sent(),[2]}}))}))}function an(){return nn(this,void 0,Promise,(function(){var e,t,n,r,o,i,a,s;return rn(this,(function(l){switch(l.label){case 0:return e=(0,c.select)(ar).getPost(),t=e.status,n=e.date,r=e.id,"publish"!==t&&n?[4,u(Wt.store).getSocialMessagesRelatedToPost(r)]:[2];case 1:return o=l.sent(),i=(0,m.map)(o,(function(e){return tn(tn({},e),{schedule:(0,d.getSocialMessageSchedule)({baseDatetime:n,dateValue:e.dateValue,timeType:e.timeType,timeValue:e.timeValue})})})),[4,u(Wt.store).getTasksRelatedToPost(r)];case 2:return a=l.sent(),s=(0,m.map)(a,(function(e){return tn(tn({},e),{dateDue:(0,d.getTaskDateDue)({baseDatetime:n,dateType:e.dateType,dateValue:e.dateValue})})})),(0,d.isEmpty)(i)?[3,4]:[4,(0,c.dispatch)(Wt.store).receiveSocialMessages(i)];case 3:l.sent(),l.label=4;case 4:return(0,d.isEmpty)(s)?[3,6]:[4,(0,c.dispatch)(Wt.store).receiveTasks(s)];case 5:l.sent(),l.label=6;case 6:return[2]}}))}))}const sn=window.wp.hooks;var cn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ln=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function un(e,t){return cn(this,void 0,Promise,(function(){var n;return ln(this,(function(r){switch(r.label){case 0:return(n=(0,c.select)(Wt.store).getPremiumItem(e,t))?[4,(0,c.dispatch)(ar).markPremiumItemAsDeleting(e,t,!0)]:[2];case 1:return r.sent(),[4,(0,sn.applyFilters)("nelio-content_edit-post_onDeletePremiumItem",new Promise((function(e){return e()})),e,n)];case 2:return r.sent(),[4,(0,c.dispatch)(ar).markPremiumItemAsDeleting(e,t,!1)];case 3:return r.sent(),[2]}}))}))}var dn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},mn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function fn(e){return dn(this,void 0,Promise,(function(){var t;return mn(this,(function(n){switch(n.label){case 0:return[4,u(ar).getReferenceByUrl(e)];case 1:return(t=n.sent())?[4,(0,c.dispatch)(ar).doOpenReferenceEditor(t)]:[2];case 2:return n.sent(),[2]}}))}))}function pn(){return dn(this,void 0,Promise,(function(){var e;return mn(this,(function(t){switch(t.label){case 0:return(e=(0,c.select)(ar).getEditingReference())?[4,(0,c.dispatch)(ar).saveReference(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,(0,c.dispatch)(ar).closeReferenceEditor()];case 3:return t.sent(),[2]}}))}))}function gn(e){return dn(this,void 0,Promise,(function(){var t;return mn(this,(function(n){switch(n.label){case 0:return[4,(0,c.dispatch)(ar).markReferenceAsSaving(e.url,!0)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,5,,6]),[4,Xt({path:"/nelio-content/v1/reference/".concat(e.id),method:"PUT",data:(0,m.omitBy)(e,d.isEmpty)})];case 3:return t=n.sent(),[4,(0,c.dispatch)(ar).receiveReferences(t)];case 4:case 5:return n.sent(),[3,6];case 6:return[4,(0,c.dispatch)(ar).markReferenceAsSaving(e.url,!1)];case 7:return n.sent(),[2]}}))}))}const En=window.wp.richText;var hn=function(){return hn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},hn.apply(this,arguments)},vn=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},yn=["p","h1","h2","h3","h4","li"],Tn=yn.reduce((function(e,t){return vn(vn([],e,!0),yn.map((function(e){return"".concat(t," ").concat(e)})),!0)}),[]).join(", ");function bn(){var e=(0,c.select)(Wt.store),t=e.isSubscribed,n=e.getProfilesWithMessagesRelatedToPost;return t()?[]:n((0,(0,c.select)(ar).getPost)().id)}function Sn(e){void 0===e&&(e="");var t,n,r=function(e){var t=document.createElement("div");t.innerHTML=e;var n,r="".concat(Tn,", ncshare ncshare");do{An(n=t.querySelector(r))}while(n);return t}(e),o=Array.from(r.querySelectorAll(yn.join(",")));return{clean:(0,m.map)(o,xn).join("\n\n"),highlights:(t=o,n=m.union.apply(void 0,(0,m.map)(t,(function(e){var t,n,r,o=(0,En.create)({element:e});return(t=o,n=function(e,t){return wn(e)&&wn(t)||!wn(e)&&!wn(t)},r=(0,m.uniq)(kn(t.formats.reduce((function(e,t,r,o){return n(o[r-1],t)||(e=kn(e,r)),n(t,o[r+1])||(e=kn(e,r+1)),e}),[0]),t.formats.length)),(0,m.zip)((0,m.dropRight)(r,1),(0,m.drop)(r,1)).map((function(e){var n=e[0],r=e[1];return(0,En.slice)(t,n,r)})).filter((function(e){return e.formats.some(wn)}))).map(In)}))),(0,m.map)(n,(function(e){return{html:e,text:e.replace(/<[^>]*>/g,"")}}))),top:(0,m.union)((0,m.map)(r.getElementsByTagName("h1"),xn),(0,m.map)(r.getElementsByTagName("h2"),xn),(0,m.map)(r.getElementsByTagName("h3"),xn),(0,m.map)(r.getElementsByTagName("strong"),xn))}}function An(e){var t,n;if(e){for(;e.firstChild;)null===(t=e.parentElement)||void 0===t||t.insertBefore(e.firstChild,e);null===(n=e.parentElement)||void 0===n||n.removeChild(e)}}function xn(e){var t;return(null===(t=null==e?void 0:e.textContent)||void 0===t?void 0:t.replace(/\s+/g," "))||""}function kn(e,t){return e.push(t),e}function In(e){var t=e.formats.reduce((function(e,t){var n=Cn(t);return n&&(e[n]=[{type:"a",attributes:{href:n}}]),e}),{"":[]});return e=hn(hn({},e),{formats:e.formats.map((function(e){return t[Cn(e)]||[]}))}),(0,En.toHTMLString)({value:e})}var wn=function(e){return!!(null==e?void 0:e.some((function(e){var t=e.type;return"ncshare"===t||"nelio-content/highlight"===t})))},Rn=function(e){var t,n;return"a"===e.type&&!!(null===(t=e.attributes)||void 0===t?void 0:t.href)||"core/link"===e.type&&!!(null===(n=e.attributes)||void 0===n?void 0:n.url)},Cn=function(e){var t,n,r,o=null===(t=null==e?void 0:e.find(Rn))||void 0===t?void 0:t.attributes;return null!==(r=null!==(n=null==o?void 0:o.href)&&void 0!==n?n:null==o?void 0:o.url)&&void 0!==r?r:""},Pn=function(){return Pn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pn.apply(this,arguments)},Nn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Dn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},On="core/editor";function Ln(){return Nn(this,void 0,Promise,(function(){return Dn(this,(function(e){switch(e.label){case 0:return(0,c.select)(ar).isClassicEditor()?[4,Bn()]:[3,2];case 1:return e.sent(),[2];case 2:return(0,c.select)(ar).isElementorEditor()?[4,jn()]:[3,4];case 3:return e.sent(),[2];case 4:return(0,c.select)(ar).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(ar).markTimelineAsGenerating(!0)];case 5:e.sent(),e.label=6;case 6:return e.trys.push([6,9,,10]),[4,(0,c.dispatch)(On).savePost()];case 7:return e.sent(),[4,Qn()];case 8:case 9:return e.sent(),[3,10];case 10:return[4,(0,c.dispatch)(ar).markTimelineAsGenerating(!1)];case 11:return e.sent(),[2]}}))}))}function Mn(){return Nn(this,void 0,Promise,(function(){return Dn(this,(function(e){switch(e.label){case 0:return(0,c.select)(ar).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(ar).markTimelineAsGenerating(!0)];case 1:return e.sent(),[4,Qn()];case 2:return e.sent(),[4,(0,c.dispatch)(ar).markTimelineAsGenerating(!1)];case 3:return e.sent(),[2]}}))}))}function Fn(){return Nn(this,void 0,Promise,(function(){var e,t,n;return Dn(this,(function(r){switch(r.label){case 0:return(e=(0,c.select)(ar).getPostId())?(0,c.select)(ar).isClearingTimeline()?[2]:[4,(0,c.dispatch)(ar).markTimelineAsClearing(!0)]:[2];case 1:return r.sent(),[4,u(Wt.store).getSocialMessagesRelatedToPost(e)];case 2:return t=r.sent(),n=t.filter((function(e){return"publish"!==e.status})).map((function(e){return e.id})),[4,Promise.all(n.map(Gn))];case 3:return r.sent(),n.forEach((function(e){return(0,c.dispatch)(Wt.store).removeSocialMessage(e)})),[4,(0,c.dispatch)(ar).markTimelineAsClearing(!1)];case 4:return r.sent(),[2]}}))}))}function Un(e){return Nn(this,void 0,Promise,(function(){var t;return Dn(this,(function(n){switch(n.label){case 0:return(0,c.select)(ar).isSocialMessageBeingDeleted(e)?[2]:[4,(0,c.dispatch)(ar).markSocialMessageAsDeleting(e,!0)];case 1:return n.sent(),[4,Gn(e)];case 2:return n.sent(),t=(0,c.select)(Wt.store).getSocialMessage(e),[4,(0,c.dispatch)(Wt.store).removeRecurringMessages(null==t?void 0:t.recurrenceGroup)];case 3:return n.sent(),[4,(0,c.dispatch)(Wt.store).removeSocialMessage(e)];case 4:return n.sent(),[4,(0,c.dispatch)(ar).markSocialMessageAsDeleting(e,!1)];case 5:return n.sent(),[2]}}))}))}function Gn(e){return Nn(this,void 0,Promise,(function(){var t,n,r;return Dn(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=(0,c.select)(Wt.store).getSiteId(),n=(0,c.select)(Wt.store).getApiRoot(),r=(0,c.select)(Wt.store).getAuthenticationToken(),[4,Xt({url:"".concat(n,"/site/").concat(t,"/social/").concat(e,"/following"),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 1:case 2:return o.sent(),[3,3];case 3:return[2]}}))}))}function Bn(){return Nn(this,void 0,void 0,(function(){var e,t;return Dn(this,(function(n){switch(n.label){case 0:return(0,c.select)(ar).isGeneratingTimeline()?[2]:[4,(0,c.dispatch)(ar).markTimelineAsGenerating(!0)];case 1:return n.sent(),(e=document.getElementById("post"))?((t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("name","_nc_auto_messages"),t.setAttribute("value","true"),e.appendChild(t),e.submit(),[2]):[2]}}))}))}function jn(){return Nn(this,void 0,void 0,(function(){var e,t=this;return Dn(this,(function(n){switch(n.label){case 0:return(0,c.select)(ar).isGeneratingTimeline()?[2]:(e=window.elementor,Kn(e)?[4,(0,c.dispatch)(ar).markTimelineAsGenerating(!0)]:[2]);case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,3,,5]),e.saver.saveEditor({onSuccess:function(){return Nn(t,void 0,void 0,(function(){return Dn(this,(function(e){switch(e.label){case 0:return[4,Qn()];case 1:return e.sent(),[4,(0,c.dispatch)(ar).markTimelineAsGenerating(!1)];case 2:return e.sent(),[2]}}))}))}}),[3,5];case 3:return n.sent(),[4,(0,c.dispatch)(ar).markTimelineAsGenerating(!1)];case 4:return n.sent(),[3,5];case 5:return[2]}}))}))}function Qn(){return Nn(this,void 0,void 0,(function(){var e,t,n,r,o,i;return Dn(this,(function(a){switch(a.label){case 0:if(!(e=(0,c.select)(ar).getPostId()))return[2];a.label=1;case 1:return a.trys.push([1,6,,7]),[4,Xt({path:"/nelio-content/v1/post/".concat(e,"?aws")})];case 2:return t=a.sent(),n=(0,c.select)(Wt.store).getSiteId(),r=(0,c.select)(Wt.store).getApiRoot(),o=(0,c.select)(Wt.store).getAuthenticationToken(),[4,Xt({url:"".concat(r,"/site/").concat(n,"/post/").concat(e,"/social/auto"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(o)},data:Pn(Pn({},t),Sn(t.content))})];case 3:return i=a.sent(),[4,u(Wt.store).getSocialMessageIdsRelatedToPost(e)];case 4:return a.sent().forEach((function(e){return(0,c.dispatch)(Wt.store).removeSocialMessage(e)})),[4,(0,c.dispatch)(Wt.store).receiveSocialMessages(i)];case 5:case 6:return a.sent(),[3,7];case 7:return[4,(0,c.dispatch)(ar).updateDatesInPostRelatedItems()];case 8:return a.sent(),[2]}}))}))}var Kn=function(e){return!!e&&"object"==typeof e&&"saver"in e},Vn=function(){return Vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Vn.apply(this,arguments)},qn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Yn=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function Hn(e,t){return qn(this,void 0,Promise,(function(){var n,r,o,i,a,s;return Yn(this,(function(l){switch(l.label){case 0:return(n=(0,c.select)(Wt.store).getTask(e))?[4,(0,c.dispatch)(ar).markEditorialTaskAsSynching(e,!0)]:[2];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,10,,12]),r=Vn(Vn({},n),{completed:t}),[4,(0,c.dispatch)(Wt.store).receiveTasks(r)];case 3:return l.sent(),o=(0,c.select)(Wt.store).getSiteId(),i=(0,c.select)(Wt.store).getApiRoot(),a=(0,c.select)(Wt.store).getAuthenticationToken(),[4,Xt({url:"".concat(i,"/site/").concat(o,"/task/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(a)},data:r})];case 4:return s=l.sent(),[4,(0,c.dispatch)(Wt.store).receiveTasks(s)];case 5:if(l.sent(),!s.completed)return[3,9];l.label=6;case 6:return l.trys.push([6,8,,9]),[4,Xt({path:"/nelio-content/v1/notifications/task",method:"POST",data:Vn({isNewTask:!1},s)})];case 7:case 8:return l.sent(),[3,9];case 9:return[3,12];case 10:return l.sent(),[4,(0,c.dispatch)(Wt.store).receiveTasks(n)];case 11:return l.sent(),[3,12];case 12:return[4,(0,c.dispatch)(ar).markEditorialTaskAsSynching(e,!1)];case 13:return l.sent(),[2]}}))}))}function zn(e,t){return qn(this,void 0,Promise,(function(){var n,r,o,i,a,s,l,f,p,g,E,h;return Yn(this,(function(v){switch(v.label){case 0:return(n=(0,c.select)(ar).getPost())?(r="replace"===e?"replacing":"merging",[4,(0,c.dispatch)(ar).setTaskPresetsState(r)]):[2];case 1:return v.sent(),o=u(Wt.store).getTaskIdsRelatedToPost,i=(0,c.select)(Wt.store).getTask,[4,o(n.id)];case 2:if(a=v.sent(),s=a.map(i).filter(d.isDefined),l="replace"===e?[]:s,!(f=(0,m.orderBy)(t.map($n),"_sort").map(Wn(n,l)).filter(d.isDefined)).length)return[3,8];v.label=3;case 3:return v.trys.push([3,7,,8]),p=(0,c.select)(Wt.store).getSiteId(),g=(0,c.select)(Wt.store).getApiRoot(),E=(0,c.select)(Wt.store).getAuthenticationToken(),[4,new Promise((function(e){return setTimeout(e,1e3)}))];case 4:return v.sent(),[4,Xt({url:"".concat(g,"/site/").concat(p,"/task"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(E)},data:{mode:e,postId:n.id,tasks:f}})];case 5:return h=v.sent(),"replace"===e&&a.forEach((0,c.dispatch)(Wt.store).removeTask),[4,(0,c.dispatch)(Wt.store).receiveTasks(h)];case 6:case 7:return v.sent(),[3,8];case 8:return[4,(0,c.dispatch)(ar).openTaskPresetLoader(!1)];case 9:return v.sent(),[2]}}))}))}function Xn(e){return qn(this,void 0,Promise,(function(){var t,n,r;return Yn(this,(function(o){switch(o.label){case 0:return(0,c.select)(Wt.store).getTask(e)?[4,(0,c.dispatch)(ar).markEditorialTaskAsDeleting(e,!0)]:[2];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,5,,6]),t=(0,c.select)(Wt.store).getSiteId(),n=(0,c.select)(Wt.store).getApiRoot(),r=(0,c.select)(Wt.store).getAuthenticationToken(),[4,Xt({url:"".concat(n,"/site/").concat(t,"/task/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(r)}})];case 3:return o.sent(),[4,(0,c.dispatch)(Wt.store).removeTask(e)];case 4:case 5:return o.sent(),[3,6];case 6:return[4,(0,c.dispatch)(ar).markEditorialTaskAsDeleting(e,!1)];case 7:return o.sent(),[2]}}))}))}var Wn=function(e,t){return function(n){var r;if(n.assigneeId||e.author){var o=Vn(Vn({},(0,d.createTask)()),{assigneeId:null!==(r=n.assigneeId)&&void 0!==r?r:e.author,task:n.task,color:n.color,dateType:n.dateType,dateValue:n.dateValue,postId:e.id,postType:e.type,dateDue:(0,d.getTaskDateDue)({baseDatetime:e.date||"now",dateType:n.dateType,dateValue:n.dateValue}),postAuthor:e.author,baseDatetime:(0,d.getBaseDatetime)(e,n.dateType)}),i=(0,m.pick)(o,["assigneeId","task","dateType","dateValue"]);return(0,m.some)(t,(function(e){return(0,m.isEqual)(i,(0,m.pick)(e,(0,m.keys)(i)))}))?void 0:o}}},$n=function(e){var t=Math.abs(Number.parseInt(e.dateValue)||0),n="";return n+="positive-days"===e.dateType||0===t?"1:"+(0,m.padStart)("".concat(t),5,"0"):"0:"+(0,m.padStart)("".concat(Math.abs(9999-t)),5,"0"),n+=":",n+=e.task,Vn(Vn({},e),{_sort:n})};const Jn=window.wp.url;var Zn=function(){return Zn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zn.apply(this,arguments)},er=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},tr=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};function nr(e){return er(this,void 0,Promise,(function(){var t,n,r;return tr(this,(function(o){switch(o.label){case 0:return e?[4,(0,c.dispatch)(ar).markReferenceAsLoading(e,!0)]:[2];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,7,,8]),[4,Xt({path:(0,Jn.addQueryArgs)("/nelio-content/v1/reference/search",{url:e})})];case 3:return t=o.sent(),[4,(0,c.dispatch)(ar).receiveReferences(t)];case 4:return o.sent(),n=t.status,r=t.isExternal,"pending"===n&&r?[4,rr(t)]:[3,6];case 5:o.sent(),o.label=6;case 6:return[3,8];case 7:return o.sent(),[3,8];case 8:return[4,(0,c.dispatch)(ar).markReferenceAsLoading(e,!1)];case 9:return o.sent(),[2]}}))}))}function rr(e){return er(this,void 0,Promise,(function(){var t,n,r,o,i,a;return tr(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,(0,c.dispatch)(Wt.store).loadLink(e.url)];case 1:return s.sent(),(t=(0,c.select)(Wt.store).getSharedLinkData(e.url))?(n=t.author,r=t.date,o=t.title,i=t.twitter,a=Zn(Zn({},e),{author:n,date:r,title:o,twitter:i}),[4,(0,c.dispatch)(ar).saveReference(a)]):[2];case 2:case 3:return s.sent(),[3,4];case 4:return[2]}}))}))}var or=function(){return or=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},or.apply(this,arguments)},ir=or(or({},o),i),ar=(0,c.createReduxStore)("nelio-content/edit-post",{reducer:P,controls:c.controls,actions:ir,selectors:r,resolvers:a});!function(e){(0,c.register)(e)}(ar),function(){(0,(0,c.dispatch)(ar).setPanelSettings)((0,d.getValue)("panelSettings",{})||{});var e=(0,c.select)(ar).getPanelStatuses();(0,c.subscribe)((function(){var t=(0,c.select)(ar).getPanelStatuses();e!==t&&(e=t,(0,d.setValue)("panelSettings",t))}),ar)}();const sr=window.wp.element,cr=window.wp.compose,lr=window.wp.components;var ur=function(){return ur=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ur.apply(this,arguments)},dr=function(){var e=mr(),t=e[0],n=e[1],r=fr();return sr.createElement("div",{className:"nelio-content-editorial-comments-input"},sr.createElement(lr.TextareaControl,{placeholder:(0,ce._x)("Write a comment and press enter to send","user","nelio-content"),className:"nelio-content-editorial-comments-input__textarea",value:t,onChange:n,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),r())}}))},mr=function(){return[l((function(e){return e(ar).getEditorialCommentInputValue()})),(0,c.useDispatch)(ar).setEditorialCommentInputValue]},fr=function(){var e=mr(),t=e[0],n=e[1],r=(0,c.useDispatch)(ar).createEditorialComment,o=l((function(e){return e(ar).getPostId()})),i=l((function(e){return e(ar).getPostType()}));return o&&i?function(){var e=(0,m.trim)(t);(0,d.isEmpty)(e)||(n(""),r(ur(ur({},(0,d.createComment)(o,i)),{comment:e})))}:function(){}},pr=n(6942),gr=n.n(pr);const Er=window.moment;var hr=n.n(Er);const vr=window.NelioContent.components,yr=window.NelioContent.date;var _r=function(e){var t=e.commentId,n=Tr(t),r=(0,Wt.useAuthorName)(null==n?void 0:n.authorId),o=l((function(e){return e(ar).isDeletingEditorialComment(t)})),i=l((function(e){return e(ar).isSynchingEditorialComment(t)})),a=br(t),s=Sr(t),u=(0,c.useDispatch)(ar).deleteEditorialComment;return sr.createElement("div",{className:gr()({"nelio-content-editorial-comments-comment":!0,"nelio-content-editorial-comments-comment--is-mine":a,"nelio-content-editorial-comments-comment--is-being-deleted":o})},!a&&sr.createElement("div",{className:"nelio-content-editorial-comments-comment__author-icon"},sr.createElement(vr.AuthorIcon,{authorId:null==n?void 0:n.authorId})),sr.createElement("div",null,sr.createElement("div",{className:gr()({"nelio-content-editorial-comments-comment__bubble":!0,"nelio-content-editorial-comments-comment__bubble--is-mine":a})},(null==n?void 0:n.comment)||""),sr.createElement("div",{className:gr()({"nelio-content-editorial-comments-comment__extra":!0,"nelio-content-editorial-comments-comment__extra--is-mine":a})},i&&(0,ce._x)("Sending","text","nelio-content"),!i&&!a&&sr.createElement("div",{className:"nelio-content-editorial-comments-comment__author"},r),!i&&sr.createElement("div",{className:"nelio-content-editorial-comments-comment__date"},(0,yr.dateI18n)((0,yr.getSettings)().formats.datetime,null==n?void 0:n.date))),(o||s)&&!i&&sr.createElement("div",{className:"nelio-content-editorial-comments-comment__actions"},sr.createElement(vr.DeleteButton,{isDeleting:o,onClick:function(){u(t)}}))))},Tr=function(e){return l((function(t){return t(Wt.store).getComment(e)}))},br=function(e){var t=Tr(e);return l((function(e){return e(Wt.store).getCurrentUserId()===(null==t?void 0:t.authorId)}))},Sr=function(e){var t,n=null===(t=Tr(e))||void 0===t?void 0:t.date,r=br(e),o=n?hr()().diff(n,"minutes"):0,i=Math.abs(o)<5,a=(0,sr.useState)(0),s=a[0],c=a[1];return(0,sr.useEffect)((function(){i&&setTimeout((function(){return c(s+1)}),3e4)}),[s,i]),r&&i},Ar=function(){var e=(0,sr.useRef)(null),t=(0,sr.useState)(-1),n=t[0],r=t[1],o=l((function(e){return e(Wt.store).getCommentIdsRelatedToPost(e(ar).getPostId())})),i=o.length;return(0,sr.useEffect)((function(){var t;n!==i&&(n<i&&(null===(t=e.current)||void 0===t||t.scrollTo({top:999999,behavior:-1===n?void 0:"smooth"})),r(i))}),[n,i,r]),sr.createElement("div",{ref:e,className:"nelio-content-editorial-comment-list"},o.map((function(e){return sr.createElement(_r,{key:e,commentId:e})})))},xr=function(){return xr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xr.apply(this,arguments)},kr=(0,cr.createHigherOrderComponent)((function(e){return function(t){return l((function(e){return e(ar).isPostReady()}))?sr.createElement(e,xr({},t)):sr.createElement(sr.Fragment,null,(0,ce._x)("Please save post first to access this feature.","user","nelio-content"))}}),"withPostReadyCheck"),Ir=function(e){return function(t){return(0,cr.createHigherOrderComponent)((function(t){return function(n){return l((function(t){return!!t(ar)[e]()}))?sr.createElement(vr.LoadingAnimation,{text:(0,ce._x)("Loading","text","nelio-content"),isSmall:!0}):sr.createElement(t,xr({},n))}}),"withLoadingCheck")(t)}},wr=(0,cr.compose)((function(e){return(0,Wt.withSubscriptionCheck)("raw/editorial-comments",e)}),kr,Ir("isRetrievingEditorialComments"))((function(){return sr.createElement(sr.Fragment,null,sr.createElement(Ar,null),sr.createElement(dr,null))})),Rr=function(){var e=Cr(),t=e.completed,n=e.total;return n?sr.createElement("div",{className:"nelio-content-tasks-progress"},sr.createElement("div",{className:"nelio-content-tasks-progress__bar-background"},sr.createElement("div",{className:gr()({"nelio-content-tasks-progress__bar":!0,"nelio-content-tasks-progress__bar--is-completed":t===n}),style:{width:"".concat(Math.round(100*t/n),"%")}})),sr.createElement("div",{className:"nelio-content-tasks-progress__percentage"},Math.round(100*t/n),"%")):null},Cr=function(){return l((function(e){var t=e(ar).getPostId,n=(0,e(Wt.store).getTasksRelatedToPost)(t());return{completed:(0,m.filter)(n,{completed:!0}).length,total:n.length}}))};const Pr=window.NelioContent.taskEditor;var Nr=function(e){var t,n=e.taskId,r=Dr(n),o=Or(n),i=o.canCompleteTask,a=o.canDeleteTask,s=o.canEditTask,c=Lr(n),u=c.isDeleting,m=c.isSynching,f=c.isPastDateDue,p=r||{},g=p.completed,E=p.color,h=void 0===E?"":E,v=p.task,y=Mr(r),_=Fr(n),T=Ur(n),b=(0,Wt.useAuthorName)(null==r?void 0:r.assigneeId,(0,ce._x)("Unknown Assignee","text","nelio-content")),S=l((function(e){return e(ar).getPost()})),A=r?(0,d.getHumanDateDue)(S,r.dateType,r.dateValue):"";return sr.createElement("div",{className:gr()((t={"nelio-content-editorial-task":!0},t["nelio-content-editorial-task--is-".concat(h)]=!!h,t["nelio-content-editorial-task--is-task-".concat(n)]=!0,t["nelio-content-editorial-task--is-due"]=f,t))},sr.createElement(lr.CheckboxControl,{className:gr()({"nelio-content-editorial-task__control":!0,"nelio-content-editorial-task__control--is-completed":g}),label:v,onChange:T,checked:g,disabled:!i||u||m}),sr.createElement("div",{className:gr()({"nelio-content-editorial-task__extra":!0,"nelio-content-editorial-task__extra--is-completed":g,"nelio-content-editorial-task__extra--is-deleting":u,"nelio-content-editorial-task__extra--is-due":f,"nelio-content-editorial-task__extra--is-synching":m})},m&&(0,ce._x)("Saving","text","nelio-content"),!m&&"".concat(b,"  ").concat(A),f&&sr.createElement(lr.Dashicon,{icon:"warning"})),sr.createElement("div",{className:gr()({"nelio-content-editorial-task__actions":!0,"nelio-content-editorial-task__actions--is-deleting":u,"nelio-content-editorial-task__actions--is-synching":m})},sr.createElement(lr.Button,{variant:"link",disabled:!s||u||m,onClick:y},(0,ce._x)("Edit","command","nelio-content")),sr.createElement(vr.DeleteButton,{disabled:!a||m,isDeleting:u,onClick:_})))},Dr=function(e){return l((function(t){return t(Wt.store).getTask(e)}))},Or=function(e){var t=Dr(e);return l((function(e){var n=e(Wt.store).canCurrentUserEditTask(t),r=e(Wt.store).canCurrentUserDeleteTask(t);return{canCompleteTask:!!t&&n,canDeleteTask:!!t&&r,canEditTask:!!t&&n}}))},Lr=function(e){var t=Dr(e);return l((function(n){if(!t)return{isDeleting:!1,isSynching:!1,isPastDateDue:!1};var r=n(ar),o=r.isEditorialTaskBeingDeleted,i=r.isEditorialTaskBeingSynched,a=n(ar).getPost(),s=n(Wt.store).getToday(),c=o(e),l=i(e);return{isDeleting:c,isSynching:l,isPastDateDue:!t.completed&&!l&&(0,d.getTaskDateDue)({baseDatetime:(null==a?void 0:a.date)||void 0,dateType:t.dateType,dateValue:t.dateValue})<s}}))},Mr=function(e){var t=l((function(e){return e(ar).getPost()})),n=(0,c.useDispatch)(Pr.store).openExistingTaskEditor;return function(){return!!t&&!!e&&n(e,{context:"post",post:t})}},Fr=function(e){var t=(0,c.useDispatch)(ar).deleteEditorialTask;return function(){return t(e)}},Ur=function(e){var t=Dr(e),n=(0,c.useDispatch)(ar).markTaskAsCompleted;return function(){return n(e,!(null==t?void 0:t.completed))}},Gr=function(){var e=Br();return(0,d.isEmpty)(e)?sr.createElement("div",{className:"nelio-content-task-list nelio-content-task-list--is-empty"},(0,ce._x)("Keep track of the things that need to get done with tasks.","user","nelio-content")):sr.createElement("div",{className:"nelio-content-task-list"},e.map((function(e){return sr.createElement(Nr,{key:e,taskId:e})})))},Br=function(){return l((function(e){var t=e(ar).getPostId;return(0,e(Wt.store).getTaskIdsRelatedToPost)(t())}))},jr=function(){var e=Vr(),t=Kr(),n=(0,c.useDispatch)(ar).openTaskPresetLoader,r=qr();return sr.createElement("div",{className:"nelio-content-task-actions"},e&&sr.createElement(lr.Button,{variant:"secondary",disabled:!t,onClick:function(){return n(!0)}},(0,ce._x)("Load Tasks","command","nelio-content")),sr.createElement(lr.Button,{variant:"secondary",disabled:!t,onClick:r},(0,ce._x)("Add Task","command","nelio-content")))},Qr=function(){return l((function(e){return e(ar).getPost()}))},Kr=function(){var e=Qr();return l((function(t){return t(Wt.store).canCurrentUserCreateTasksRelatedToPost(e)}))},Vr=function(){return l((function(e){return!!e(Wt.store).getTaskPresets().length}))},qr=function(){var e=Qr(),t=(0,c.useDispatch)(Pr.store).openNewTaskEditor;return function(){return t({dateType:"publish"!==e.status?"predefined-offset":void 0,dateValue:"publish"!==e.status?"0":void 0},{post:e,context:"post"})}},Yr=function(){var e=l((function(e){return e(ar).getPostId()})),t=l((function(t){return!!t(Wt.store).getTaskIdsRelatedToPost(e).length})),n=l((function(e){return e(ar).getTaskPresetLoaderState()})),r=l((function(e){return e(ar).getTaskPresetSelection()})),o=(0,c.useDispatch)(ar),i=o.instantiatePresets,a=o.openTaskPresetLoader,s=o.selectTaskPresets;return sr.createElement(vr.TaskPresetLoader,{state:n,actions:t?"replace-or-merge":"add",selection:r,onUpdate:s,onCancel:function(){return a(!1)},onMerge:function(e){return i("merge",e)},onReplace:function(e){return i("replace",e)}})},Hr=(0,cr.compose)((function(e){return(0,Wt.withSubscriptionCheck)("raw/editorial-tasks",e)}),kr,Ir("isRetrievingEditorialTasks"))((function(){return sr.createElement(sr.Fragment,null,sr.createElement(Rr,null),sr.createElement(Gr,null),sr.createElement(jr,null),sr.createElement(Yr,null))})),zr=function(){var e=(0,c.useDispatch)(ar).editExternalFeaturedImage;return sr.createElement("div",{className:"nelio-content-efi-no-image"},sr.createElement(lr.Button,{variant:"link",onClick:e},(0,ce._x)("Set external featured image","command","nelio-content")))},Xr=function(){var e=$r(),t=e[0],n=e[1],r=Wr(),o=r[0],i=r[1],a=Jr(),s=a.save,c=a.cancel,l=function(e){e&&"Enter"===e.key&&(e.preventDefault(),s())};return sr.createElement("div",{className:"nelio-content-efi-edit-image"},sr.createElement(lr.TextControl,{label:(0,ce._x)("Image URL","text","nelio-content"),placeholder:"https://",value:t,onChange:function(e){n(e)},onKeyDown:l}),sr.createElement(lr.TextControl,{label:(0,ce._x)("Alt Text","text","nelio-content"),value:o,onChange:i,onKeyDown:l}),sr.createElement("div",{className:"nelio-content-efi-edit-image__action"},sr.createElement(lr.Button,{variant:"secondary",onClick:c},(0,ce._x)("Cancel","command","nelio-content"))," ",sr.createElement(lr.Button,{variant:"secondary",onClick:s,disabled:!(0,d.isUrl)(t)},(0,ce._x)("Set Image","command","nelio-content"))))},Wr=function(){return[l((function(e){return e(ar).getExternalFeaturedImageAltField()})),(0,c.useDispatch)(ar).setExternalFeaturedImageAltField]},$r=function(){return[l((function(e){return e(ar).getExternalFeaturedImageUrlField()})),(0,c.useDispatch)(ar).setExternalFeaturedImageUrlField]},Jr=function(){var e=Wr()[0],t=$r()[0],n=(0,c.useDispatch)(ar),r=n.cancelEditionOfExternalFeaturedImage,o=n.setExternalFeaturedImage;return{save:function(){return(0,d.isUrl)(t)?o(t,e):void 0},cancel:function(){return r()}}},Zr=function(){var e=l((function(e){return e(ar).getExternalFeaturedImageAlt()})),t=l((function(e){return e(ar).getExternalFeaturedImageUrl()})),n=(0,c.useDispatch)(ar).editExternalFeaturedImage,r=(0,c.useDispatch)(ar).removeExternalFeaturedImage;return sr.createElement("div",{className:"nelio-content-efi-image"},sr.createElement(lr.Button,{className:"nelio-content-efi-image__image-button",onClick:n},sr.createElement("img",{className:"nelio-content-efi-image__actual-image",src:t,alt:e})),sr.createElement("div",{className:"nelio-content-efi-image__replace-button"},sr.createElement(lr.Button,{variant:"secondary",onClick:n},(0,ce._x)("Replace Image","command","nelio-content"))),sr.createElement("div",null,sr.createElement(lr.Button,{variant:"link",isDestructive:!0,onClick:r},(0,ce._x)("Remove external featured image","command","nelio-content"))))},eo=function(){switch(l((function(e){return e(ar).getExternalFeaturedImageView()}))){case"no-image":return sr.createElement(zr,null);case"edit-image":return sr.createElement(Xr,null);case"image":return sr.createElement(Zr,null);default:return null}},to=function(e){var t=e.isAuthor,n=e.remove,r=e.userId,o=(0,Wt.useAuthorName)(r);return sr.createElement("div",{className:"nelio-content-notification-user"},sr.createElement("div",{className:"nelio-content-notification-user__icon"},sr.createElement(vr.AuthorIcon,{authorId:r})),sr.createElement("div",{className:"nelio-content-notification-user__info"},sr.createElement("div",{className:"nelio-content-notification-user__name"},o||(0,ce._x)("Unknown User","text","nelio-content")),sr.createElement("div",{className:"nelio-content-notification-user__extra"},t&&sr.createElement("span",{className:n?"nelio-content-notification-user__author nelio-content-notification-user__author--has-pipe":"nelio-content-notification-user__author"},(0,ce._x)("Author","text","nelio-content")),!!n&&sr.createElement(lr.Button,{className:"nelio-content-notification-user__remove-action",isDestructive:!0,variant:"link",onClick:n},(0,ce._x)("Remove","command","nelio-content")))))},no=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},ro=function(){var e=ao(),t=e[0],n=e[1],r=oo(),o=io();return sr.createElement("div",{className:"nelio-content-notifications"},sr.createElement("div",{className:"nelio-content-notifications__user-searcher"},sr.createElement(vr.AuthorSearcher,{placeholder:(0,ce._x)("Select a user","user","nelio-content"),onChange:function(e){var r;e&&(r=e,n((0,m.uniq)(no(no([],t,!0),[r],!1))))}})),sr.createElement("div",{className:"nelio-content-notifications__followers"},t.map((function(e){return sr.createElement(to,{key:e,userId:e,isAuthor:e===r,remove:e===r&&o?void 0:function(){return r=e,n((0,m.without)(t,r));var r}})}))))},oo=function(){return l((function(e){return e(ar).getAuthorId()}))},io=function(){return l((function(e){return e(ar).getAuthorId()}))},ao=function(){var e=oo(),t=l((function(e){return e(ar).getFollowers()})),n=(0,c.useDispatch)(ar).setFollowers;return[io()&&e?(0,m.uniq)(no([e],t,!0)):t,n]},so=function(){var e=co(),t=e[0],n=e[1],r=l((function(e){return e(ar).isReferenceEditorVisible()})),o=l((function(e){var n=e(ar).isReferenceSaving;return!(null==t?void 0:t.url)||n(t.url)})),i=lo(),a=i.close,s=i.saveAndClose;if(!r||!t)return null;var c=t.title,u=t.author,d=t.email,m=t.twitter,f=t.url,p=uo(t);return sr.createElement(lr.Modal,{className:"nelio-content-reference-editor",title:(0,ce._x)("Edit Reference","text","nelio-content"),isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:function(){}},sr.createElement(lr.TextControl,{value:c,onChange:function(e){return n({title:e})},placeholder:(0,ce._x)("Enter the title","user","nelio-content")}),sr.createElement("div",{className:"nelio-content-reference-editor__url"},sr.createElement("strong",null,"URL:")," ",sr.createElement(lr.ExternalLink,{href:f},f)),sr.createElement("h3",{className:"nelio-content-reference-editor__section-title"},(0,ce._x)("Author Information","text","nelio-content")),sr.createElement(lr.TextControl,{label:(0,ce._x)("Name","text","nelio-content"),value:u,onChange:function(e){return n({author:e})},placeholder:(0,ce._x)("First and Last Names","text","nelio-content")}),sr.createElement(lr.TextControl,{label:(0,ce._x)("Email","text","nelio-content"),value:d,onChange:function(e){return n({email:e})},placeholder:(0,ce._x)("author@example.com","text","nelio-content")}),sr.createElement(lr.TextControl,{label:(0,ce._x)("X","text","nelio-content"),value:m,onChange:function(e){return n({twitter:e})},placeholder:(0,ce._x)("@username","text","nelio-content")}),sr.createElement("div",{className:"nelio-content-reference-editor__actions"},sr.createElement(lr.Button,{variant:"secondary",disabled:o,onClick:a},(0,ce._x)("Cancel","command","nelio-content")),sr.createElement(vr.SaveButton,{variant:"primary",error:p,isSaving:o,onClick:function(){s()}})))},co=function(){return[l((function(e){return e(ar).getEditingReference()})),(0,c.useDispatch)(ar).updateEditingReference]},lo=function(){var e=(0,c.useDispatch)(ar);return{close:e.closeReferenceEditor,saveAndClose:e.saveAndCloseEditingReference}},uo=function(e){var t=e.email,n=e.twitter;return(0,d.isEmpty)(t)||(0,Jn.isEmail)(t)?(0,d.isValidTwitterHandler)(n)?"":(0,ce._x)("Please write a valid twitter handle","user","nelio-content"):(0,ce._x)("Please write a valid email address","user","nelio-content")},mo=function(e){var t=e.onClick;return sr.createElement(vr.DeleteButton,{labels:{delete:(0,ce._x)("Discard","command","nelio-content"),deleting:(0,ce._x)("Discarding","text","nelio-content")},confirmationLabels:{title:(0,ce._x)("Discard Reference","text","nelio-content"),text:(0,ce._x)("Are you sure you want to discard this reference? This operation cant be undone.","user","nelio-content")},onClick:t})},fo=function(){return fo=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},fo.apply(this,arguments)},po=function(e){var t=e.link;return sr.createElement("div",{className:"nelio-content-link-reference"},sr.createElement(go,{link:t}),sr.createElement(Eo,{link:t}),sr.createElement(ho,{link:t}),sr.createElement(vo,{link:t}))},go=function(e){var t=e.link,n=yo(t),r=n.title,o=n.url;return r?sr.createElement(sr.Fragment,null,sr.createElement("div",{className:"nelio-content-link-reference__title"},r),sr.createElement("div",{className:"nelio-content-link-reference__link"},sr.createElement(lr.ExternalLink,{href:o},o))):sr.createElement("div",{className:"nelio-content-link-reference__title"},sr.createElement(lr.ExternalLink,{href:o},o))},Eo=function(e){var t=e.link,n=_o(t),r=yo(t),o=r.author,i=r.email,a=r.twitter;return n?sr.createElement("div",{className:"nelio-content-link-reference__extra"},(0,ce._x)("Loading","text","nelio-content")):a||i?sr.createElement("div",{className:"nelio-content-link-reference__extra"},sr.createElement("div",{className:"nelio-content-link-reference__author"},o||(0,ce._x)("Unknown Author","text","nelio-content")),sr.createElement("div",{className:"nelio-content-link-reference__contact"},!!a&&sr.createElement(lr.ExternalLink,{href:"https://twitter.com/".concat(a)},sr.createElement(lr.Dashicon,{className:"nelio-content-link-reference__contact-icon",icon:"twitter"}))," ",!!i&&sr.createElement(lr.ExternalLink,{href:"mailto:".concat(i)},sr.createElement(lr.Dashicon,{className:"nelio-content-link-reference__contact-icon",icon:"email"})))):sr.createElement("div",{className:"nelio-content-link-reference__extra"},sr.createElement("div",{className:"nelio-content-link-reference__author"},o||(0,ce._x)("Unknown Author","text","nelio-content")))},ho=function(e){var t=e.link,n=yo(t),r=(0,Wt.useIsUserYou)(null==n?void 0:n.suggestionAdvisorId),o=(0,Wt.useAuthorName)(null==n?void 0:n.suggestionAdvisorId);return n?!n.suggestionAdvisorId||r?sr.createElement("div",{className:"nelio-content-link-reference__advisor"},(0,ce._x)("Suggested by you","text","nelio-content")):sr.createElement("div",{className:"nelio-content-link-reference__advisor"},o?(0,ce.sprintf)(/* translators: author name */ /* translators: author name */
(0,ce._x)("Suggested by %s","text","nelio-content"),o):(0,ce._x)("Suggested by someone","text","nelio-content")):sr.createElement("div",{className:"nelio-content-link-reference__advisor"},(0,ce._x)("Suggested by someone","text","nelio-content"))},vo=function(e){var t=e.link,n=_o(t),r=(0,c.useDispatch)(ar).openReferenceEditor,o=(0,c.useDispatch)(ar).discardReference;return n?sr.createElement("div",{className:"nelio-content-link-reference__actions"},(0,ce.sprintf)("%1$s | %2$s",(0,ce._x)("Discard","command","nelio-content"),(0,ce._x)("Edit","command","nelio-content"))):sr.createElement("div",{className:"nelio-content-link-reference__actions"},sr.createElement(mo,{onClick:function(){return o(t)}})," | ",sr.createElement(lr.Button,{variant:"link",onClick:function(){return r(t)}},(0,ce._x)("Edit","command","nelio-content")))},yo=function(e){return l((function(t){var n=fo(fo({author:"",date:"",email:"",isExternal:!0,isSuggestion:!0,status:"pending",title:"",twitter:""},t(ar).getReferenceByUrl(e)),{url:e}),r=n.twitter,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(n,["twitter"]);return fo(fo({},o),{twitter:/^@/.test(r)?r.substring(1):r})}))},_o=function(e){return l((function(t){return t(ar).isReferenceLoading(e)}))},To=function(){var e=l((function(e){return e(ar).getSuggestedReferences()}));return(0,d.isEmpty)(e)?sr.createElement("div",null,(0,ce._x)("Do you have an interesting or helpful link for the author? Save it here!","user","nelio-content")):sr.createElement("div",null,e.map((function(e){return sr.createElement(po,{key:e,link:e})})))},bo=function(){var e=So(),t=e[0],n=e[1],r=Ao(),o=xo(),i=!(0,d.isEmpty)(t)&&(0,Jn.isURL)(t);return sr.createElement("div",{className:"nelio-content-reference-creator"},sr.createElement(lr.TextControl,{autoComplete:"off",placeholder:(0,ce._x)("Enter a URL","user","nelio-content"),value:t,onChange:n,onKeyDown:function(e){13===e.keyCode&&(e.preventDefault(),i&&r())}}),sr.createElement(lr.Button,{variant:"secondary",disabled:!i,onClick:r},o?(0,ce._x)("Add","command","nelio-content"):(0,ce._x)("Suggest","command","nelio-content")))},So=function(){return[l((function(e){return e(ar).getSuggestedReferenceUrl()})),(0,c.useDispatch)(ar).setSuggestedReferenceUrl]},Ao=function(){var e=So(),t=e[0],n=e[1],r=(0,c.useDispatch)(ar).suggestReference;return function(){(0,d.isUrl)(t)&&r(t),n("")}},xo=function(){return l((function(e){return e(Wt.store).getCurrentUserId()===e(ar).getAuthorId()}))},ko=function(){return sr.createElement(sr.Fragment,null,sr.createElement(To,null),sr.createElement(bo,null))},Io=function(e){var t=e.onClick,n=e.label,r=l((function(e){return e(ar).getOverallPostQualityStatus()})),o=n||function(e){switch(e){case"perfect":return(0,sr.createInterpolateElement)((0,ce._x)("The post looks <strong>awesome</strong>!","text","nelio-content"),{strong:sr.createElement("strong",null)});case"good":return(0,sr.createInterpolateElement)((0,ce._x)("The post looks <strong>good</strong>!","text","nelio-content"),{strong:sr.createElement("strong",null)});case"improvable":return(0,sr.createInterpolateElement)((0,ce._x)("The post is <strong>improvable</strong>","text","nelio-content"),{strong:sr.createElement("strong",null)});case"bad":return(0,sr.createInterpolateElement)((0,ce._x)("The post is <strong>poor</strong>","text","nelio-content"),{strong:sr.createElement("strong",null)});default:return(0,ce._x)("Post cant be evaluated","text","nelio-content")}}(r);return sr.createElement("div",{className:"nelio-content-quality-analysis-summary"},sr.createElement("div",{className:"nelio-content-quality-analysis-summary__icon-wrapper"},sr.createElement("div",{className:"nelio-content-quality-analysis-summary__icon nelio-content-quality-analysis-summary__icon--is-".concat(r)},"perfect"===r&&sr.createElement(lr.Dashicon,{icon:"awards"}),"good"===r&&sr.createElement(lr.Dashicon,{icon:"thumbs-up"}),"improvable"===r&&sr.createElement(lr.Dashicon,{icon:"admin-tools"}),"bad"===r&&sr.createElement(lr.Dashicon,{icon:"thumbs-down"}))),sr.createElement("div",{className:"nelio-content-quality-analysis-summary__explanation"},t?sr.createElement(lr.Button,{variant:"link",onClick:t},sr.createElement("span",null,o)):sr.createElement("span",null,o)))},wo=function(e){var t=e.icon,n=e.name,r=l((function(e){return e(ar).getQualityCheckStatus(n)})),o=l((function(e){return e(ar).getQualityCheckRationale(n)}));return"invisible"===r?null:sr.createElement("div",{className:"nelio-content-quality-analysis__quality-check"},sr.createElement("div",{className:"nelio-content-quality-analysis__quality-check-icon-wrapper"},sr.createElement("div",{className:"nelio-content-quality-analysis__quality-check-icon nelio-content-quality-analysis__quality-check-icon--is-".concat(r)},sr.createElement(lr.Dashicon,{icon:t}))),sr.createElement("div",{className:"nelio-content-quality-analysis__quality-check-rationale nelio-content-quality-analysis__quality-check-rationale--is-".concat(r)},o))},Ro=function(e){var t=e.isMetabox,n=Do()[0],r=No();return sr.createElement("div",{className:"nelio-content-quality-analysis"},sr.createElement(Co,{enabled:!!t}),n&&sr.createElement("div",{className:"nelio-content-quality-analysis__details"},r.map((function(e){var t=e.name,n=e.icon;return sr.createElement(wo,{key:t,name:t,icon:n})}))))},Co=function(e){var t=e.enabled,n=Po(),r=Do(),o=r[0],i=r[1];return t?sr.createElement("div",{className:"nelio-content-quality-analysis__summary"},sr.createElement("div",{className:"nelio-content-quality-analysis__actual-summary"},sr.createElement(Io,null)),n&&sr.createElement(lr.Button,{className:"nelio-content-quality-analysis__details-toggler",size:"small",onClick:function(){return i(!o)}},sr.createElement(lr.Dashicon,{icon:o?"arrow-up":"arrow-down"}))):null},Po=function(){return l((function(e){return e(ar).isQualityAnalysisFullyIntegrated()}))},No=function(){return l((function(e){return e(ar).getQualityCheckTypes()}))},Do=function(){var e="post-quality-analysis",t=Po(),n=l((function(t){return t(ar).isPanelOpen(e)})),r=!t||n,o=(0,c.useDispatch)(ar).togglePanel;return[r,function(t){return o(e,t)}]},Oo=function(e){var t=e.children,n=e.icon,r=e.title,o=e.titleActions,i=e.type;return sr.createElement("div",{className:"nelio-content-social-media-metabox__section"},sr.createElement("div",{className:"nelio-content-social-media-metabox__section-title"},sr.createElement(lr.Dashicon,{icon:n}),r,!!o&&o),sr.createElement("div",{className:"nelio-content-social-media-metabox__section-content nelio-content-social-media-metabox__section-content--is-".concat(i)},t))},Lo=function(){var e=l((function(e){return e(ar).getPost()})),t="publish"===(null==e?void 0:e.status),n=l((function(t){return t(Wt.store).getPostTypes("analytics").some((function(t){return t.name===e.type}))}));return e&&n&&t?sr.createElement(Oo,{icon:"chart-bar",title:(0,ce._x)("Analytics","text","nelio-content"),type:"analytics"},sr.createElement(vr.PostPageviewsAnalytics,{postId:e.id}),sr.createElement(vr.PostEngagementAnalytics,{postId:e.id})):null},Mo=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Fo=function(){var e=Go(),t=e.items,n=e.add,r=e.replace,o=e.set;return(0,sr.useEffect)((function(){o(t.filter((function(e){var t=e[0];return!!(0,m.trim)(t)})))}),[]),sr.createElement("div",{className:"nelio-content-permalink-settings"},sr.createElement("div",{className:"nelio-content-permalink-settings__query-args"},t.length?sr.createElement("p",null,(0,ce._x)("URL Parameters:","text","nelio-content")):sr.createElement("p",null,(0,ce._x)("Add custom URL parameters when sharing this post on social media:","user","nelio-content")),t.map((function(e,t){return sr.createElement(Uo,{key:t,name:e[0],value:e[1],showLabel:!t,onNameChange:function(t){return r(e,[t,e[1]])},onValueChange:function(t){return r(e,[e[0],t])}})})),sr.createElement("div",{className:"nelio-content-permalink-settings__query-args-actions"},sr.createElement(lr.Button,{variant:"secondary",onClick:n},(0,ce._x)("Add New","command (URL parameter)","nelio-content")))))},Uo=function(e){var t=e.name,n=e.value,r=e.showLabel,o=e.onNameChange,i=e.onValueChange;return sr.createElement("div",{className:"nelio-content-permalink-settings__query-arg"},sr.createElement(lr.TextControl,{label:r?(0,ce._x)("Name","text","nelio-content"):void 0,placeholder:(0,ce._x)("Name","text","nelio-content"),value:t,onChange:o}),sr.createElement(lr.TextControl,{label:r?(0,ce._x)("Value (optional)","text","nelio-content"):void 0,placeholder:(0,ce._x)("Value (optional)","text","nelio-content"),value:n,onChange:i}))},Go=function(){var e=l((function(e){return e(ar).getQueryArgs()})),t=(0,c.useDispatch)(ar).setQueryArgs;return{items:e,add:function(){return t(Mo(Mo([],e,!0),[["",""]],!1))},replace:function(n,r){return t(e.map((function(e){return e===n?r:e})))},set:t}},Bo=function(){return sr.createElement(Oo,{icon:"admin-links",title:(0,ce._x)("Permalink Settings","text","nelio-content"),type:"permalink-settings"},sr.createElement(Fo,null))},jo=function(){return l((function(e){var t=e(ar).getPost();return e(Wt.store).getPostAutomationGroups(t).some((function(e){return!!e.priority&&(0,m.values)(e.profileSettings).some((function(e){return e.enabled&&(e.publication.enabled||e.reshare.enabled)}))}))}))},Qo=function(){return l((function(e){var t=e(ar),n=t.getPost,r=t.isTimelineBusy,o=e(Wt.store).canCurrentUserUseAutomationsInPost;return!r()&&o(n())}))},Ko=function(){return l((function(e){return e(ar).getDeletingMessageIds()}))},Vo=function(){return l((function(e){return e(ar).getPost()}))},qo=function(){return l((function(e){return e(ar).isTimelineBusy()}))},Yo=function(){var e=Qo(),t=Xo(),n=t[0],r=t[1],o=Zo(),i=o[0],a=o[1],s=ti();return sr.createElement("div",{className:"nelio-content-automation-settings"},sr.createElement(lr.CheckboxControl,{label:(0,ce._x)("Auto share on social media","command","nelio-content"),disabled:!e,checked:n,onChange:r}),n&&sr.createElement(sr.Fragment,null,sr.createElement(lr.SelectControl,{disabled:!e,value:i,onChange:a,options:s}),sr.createElement(zo,null),sr.createElement(Ho,null)))},Ho=function(){var e=Qo(),t=Wo(),n=t[0],r=t[1],o=$o(),i=o[0],a=o[1];return sr.createElement("div",{className:"nelio-content-automation-settings__automation-sources"},sr.createElement(lr.CheckboxControl,{label:(0,ce._x)("Custom highlights","text","nelio-content"),disabled:!e,checked:n,onChange:function(e){return r(e)}}),n&&sr.createElement(lr.TextareaControl,{help:(0,ce._x)("Please write one highlight per line.","user","nelio-content"),disabled:!e,value:i.join("\n"),onChange:a}))},zo=function(){var e=jo(),t=ei(),n=(0,Wt.useAdminUrl)("admin.php",{page:"nelio-content-settings",subpage:"social--automations"});return t?sr.createElement("div",{className:"nelio-content-automation-settings__warning"},(0,ce.sprintf)(/* translators: date */ /* translators: date */
(0,ce._x)("Warning! Nelio Content will not share any more social messages automatically, because auto sharing was set to end on %s.","text","nelio-content"),t)):e?null:sr.createElement("div",{className:"nelio-content-automation-settings__warning"},(0,sr.createInterpolateElement)((0,ce._x)("Warning! None of your automation groups can share this content. Nelio Content will not be able to automatically create any social messages until you <a>update your settings</a> and refresh.","user","nelio-content"),{a:sr.createElement(lr.ExternalLink,{href:n})}))},Xo=function(){return[l((function(e){return e(ar).isAutoShareEnabled()})),(0,c.useDispatch)(ar).enableAutoShare]},Wo=function(){return Jo("useCustomSentences")},$o=function(){var e=l((function(e){return e(ar).getAutomationSources().customSentences})),t=(0,c.useDispatch)(ar).setAutomationSources;return[e,function(e){return t({customSentences:e.split("\n")})}]},Jo=function(e){var t=l((function(t){return t(ar).getAutomationSources()[e]})),n=(0,c.useDispatch)(ar).setAutomationSources;return[t,function(t){var r;return n(((r={})[e]=t,r))}]},Zo=function(){return[l((function(e){return e(ar).getAutoShareEndMode()})),(0,c.useDispatch)(ar).setAutoShareEndMode]},ei=function(){var e,t=Xo()[0],n=Zo()[0],r=l((function(e){return e(Wt.store).getToday()})),o=l((function(e){return e(ar).getAutoShareEndModeDuration(n)})),i=l((function(e){return e(ar).getPost()}));if(!t)return!1;if(!o)return!1;if("publish"!==i.status)return!1;var a=hr()((null==i?void 0:i.date)||void 0).add(o,"months");return(0,yr.dateI18n)("Y-m-d",a)<r&&(0,yr.dateI18n)((null===(e=(0,yr.getSettings)().formats)||void 0===e?void 0:e.date)||"Y-m-d",a)},ti=function(){return l((function(e){return e(ar).getAutoShareEndModes()}))},ni=function(){return sr.createElement(Oo,{icon:"admin-settings",title:(0,ce._x)("Automation Settings","text","nelio-content"),type:"settings"},sr.createElement(Yo,null))};const ri=window.NelioContent.socialTimeline;var oi=function(e){var t=e.isSmall,n=qo(),r=Qo(),o=(0,c.useDispatch)(ar).clearTimeline;return sr.createElement(vr.DeleteButton,{size:t?"small":void 0,disabled:!r,onClick:o,isDeleting:n,labels:{delete:(0,ce._x)("Clear Timeline","command","nelio-content"),deleting:(0,ce._x)("Clearing Timeline","text","nelio-content")},confirmationLabels:{title:(0,ce._x)("Clear Timeline","text","nelio-content"),text:(0,ce._x)("Are you sure you want to clear your timeline? This operation cant be undone and youll lose any manual messages you might have created.","user","nelio-content")}})},ii=function(e){var t=e.enabled,n=jo(),r=Qo(),o=l((function(e){return e(ar).isGeneratingTimeline()})),i=(0,c.useDispatch)(ar).savePostAndGenerateTimeline;return t?sr.createElement(sr.Fragment,null,n&&sr.createElement(lr.Button,{size:"small",variant:"secondary",isBusy:o,disabled:!r,onClick:i},o?(0,ce._x)("Generating Timeline","text","nelio-content"):(0,ce._x)("Regenerate Timeline","command","nelio-content")),sr.createElement(oi,{isSmall:!0})):null};const ai=window.NelioContent.socialMessageEditor;var si=(0,Wt.withProfileCheck)((function(){var e=ci(),t=li(),n=jo(),r=Qo(),o=(0,c.useDispatch)(ar).savePostAndGenerateTimeline,i=l((function(e){return e(ar).getPost()})),a=(0,c.useDispatch)(ai.store).openNewSocialMessageEditor,s=l((function(e){var t=e(ar).getPost(),n=e(ar).isTimelineBusy,r=e(Wt.store).canCurrentUserCreateMessagesRelatedToPost;return!n()&&r(t)})),u=l((function(e){var t=e(ar).getPost(),n=e(ar).isTimelineBusy,r=e(Wt.store).couldSubscriberCreateMessagesRelatedToPost;return!n()&&r(t)})),d=(0,Wt.useFeatureGuard)("edit-post/create-more-messages",u&&!s)((function(){return a({},{context:"post",post:i,disabledProfileIds:bn()})}));return sr.createElement("div",{className:"nelio-content-generate-timeline-button"},sr.createElement(vr.SubscribeAction,{className:"nelio-content-generate-timeline-button__promo-button"}),n&&sr.createElement("div",{className:"nelio-content-generate-timeline-button__timeline-button"},sr.createElement(lr.Button,{variant:"primary",isBusy:e,disabled:!r,onClick:o},t)),sr.createElement("div",{className:"nelio-content-generate-timeline-button__single-button"},sr.createElement(lr.Button,{variant:n?"tertiary":"primary",disabled:!u,onClick:d,icon:!s&&u?"lock":void 0},(0,ce._x)("Add Social Message","command","nelio-content"))))})),ci=function(){return l((function(e){return e(ar).isGeneratingTimeline()}))},li=function(){return l((function(e){e(Wt.store);var t=e(ar).getPost();if(!t)return"";var n=t.status,r=t.id,o=e(Wt.store).getSocialMessagesRelatedToPost(r).filter((function(e){return"publish"!==e.status})),i=e(ar).isGeneratingTimeline;return(0,d.isEmpty)(o)?"publish"===n?i()?(0,ce._x)("Filling Timeline","text","nelio-content"):(0,ce._x)("Fill Timeline","command","nelio-content"):(0,e(ar).isAutoShareEnabled)()?i()?(0,ce._x)("Loading Timeline","text","nelio-content"):(0,ce._x)("Customize Timeline","command","nelio-content"):i()?(0,ce._x)("Generating Timeline","text","nelio-content"):(0,ce._x)("Generate Timeline","command","nelio-content"):i()?(0,ce._x)("Generating Timeline","text","nelio-content"):(0,ce._x)("Regenerate Timeline","command","nelio-content")}))},ui=function(){var e=l((function(e){return!!e(Wt.store).getSocialProfileCount()})),t=di(),n=(0,c.useDispatch)(ar).deleteSocialMessage,r=Ko(),o=qo(),i=Vo();return sr.createElement(Oo,{icon:"share",title:(0,ce._x)("Timeline","text","nelio-content"),titleActions:sr.createElement(ii,{enabled:e&&t}),type:"timeline"},t?sr.createElement(ri.SocialTimeline,{deleteMessage:n,deletingMessageIds:r,isTimelineBusy:o,post:i}):sr.createElement(si,null))},di=function(){return l((function(e){var t=e(ar).getPostId,n=(0,e(Wt.store).getSocialMessagesRelatedToPost)(t());return!!(0,m.find)(n,(function(e){return"publish"!==e.status}))}))},mi=(0,cr.compose)(kr,Ir("isRetrievingSocialMessages"))((function(){return sr.createElement(lr.SlotFillProvider,null,sr.createElement("div",{className:"nelio-content-social-media-metabox"},sr.createElement(Lo,null),sr.createElement(ui,null),sr.createElement(ni,null),sr.createElement(Bo,null)),sr.createElement(lr.Popover.Slot,null))})),fi=function(){var e=pi(),t=(0,c.useDispatch)("core/edit-post").openGeneralSidebar;return sr.createElement("div",{className:"nelio-content-social-media-publish-summary"},sr.createElement("div",{className:"nelio-content-social-media-publish-summary__icon"},sr.createElement(lr.Dashicon,{icon:"share"})),sr.createElement("div",{className:"nelio-content-social-media-publish-summary__button"},sr.createElement(lr.Button,{variant:"link",onClick:function(){t("nelio-content/nelio-content-social-sidebar")}},e)))},pi=function(){return l((function(e){var t=e(ar).getPost,n=e(Wt.store).getSocialMessagesRelatedToPost,r=t()||{},o=r.status,i=n(r.id);if("publish"===o&&(0,d.isEmpty)(i))return(0,ce._x)("Share on social media","command","nelio-content");if((0,d.isEmpty)(i))return(0,e(ar).isAutoShareEnabled)()?(0,ce._x)("Customize social messages","command","nelio-content"):(0,ce._x)("Share on social media","command","nelio-content");var a=i.filter((function(e){return"publish"!==e.status})),s=a.length;return(0,ce.sprintf)(/* translators: number of social messages */ /* translators: number of social messages */
(0,ce._nx)("%d social message ready","%d social messages ready",s,"text","nelio-content"),s)}))},gi=function(){return sr.createElement(lr.PanelBody,{className:"nelio-content-social-media-sidebar-main-panel"},sr.createElement(lr.PanelRow,{className:"nelio-content-social-media-sidebar-main-panel__buttons"},sr.createElement(si,null)))},Ei=function(){var e=(0,c.useDispatch)(ar).deleteSocialMessage,t=Ko(),n=qo(),r=Vo();return hi()?sr.createElement(lr.PanelBody,{className:"nelio-content-sidebar-timeline",title:(0,ce._x)("Social Timeline","text","nelio-content")},sr.createElement(ri.SocialTimeline,{deleteMessage:e,deletingMessageIds:t,isTimelineBusy:n,post:r}),sr.createElement("div",{className:"nelio-content-sidebar-timeline__clear-button"},sr.createElement(oi,null))):null},hi=function(){return l((function(e){var t=e(ar).getPostId,n=(0,e(Wt.store).getSocialMessagesRelatedToPost)(t());return!!(0,m.find)(n,(function(e){return"publish"!==e.status}))}))},vi=function(){return sr.createElement(lr.PanelBody,{title:(0,ce._x)("Automation Settings","text","nelio-content")},sr.createElement(Yo,null))},yi=function(){return sr.createElement(lr.PanelBody,{title:(0,ce._x)("Permalink Settings","text","nelio-content")},sr.createElement(Fo,null))},_i=function(){var e=l((function(e){return e(ar).isPostReady()})),t=l((function(e){return e(ar).isRetrievingSocialMessages()}));return e?t?sr.createElement(lr.PanelBody,null,(0,ce._x)("Loading","text","nelio-content")):sr.createElement(sr.Fragment,null,sr.createElement(gi,null),sr.createElement(Ei,null),sr.createElement(vi,null),sr.createElement(yi,null)):sr.createElement(lr.PanelBody,null,(0,ce._x)("Please save post first to access this feature.","user","nelio-content"))},Ti=(0,cr.compose)(Wt.withProfileCheck,kr)((function(){var e=(0,c.useDispatch)("core/edit-post").openGeneralSidebar;return sr.createElement("div",{className:"nelio-content-social-media-tools"},sr.createElement("p",null,(0,ce._x)("Nelio Content helps you share WordPress content on social media, so that you can reach a broader audience and engage with more people.","text","nelio-content")),sr.createElement(lr.Button,{variant:"secondary",onClick:function(){e("nelio-content/nelio-content-social-sidebar")}},(0,ce._x)("View Social Timeline","command","nelio-content")))})),bi={};function Si(e){var t,n,r;void 0===e&&(e={});var o=(0,c.select)(ar).getPostQualitySettings(),i={allowedBads:null!==(t=e.allowedBads)&&void 0!==t?t:o.allowedBads,allowedImprovables:null!==(n=e.allowedImprovables)&&void 0!==n?n:o.allowedImprovables,unacceptableImprovables:null!==(r=e.unacceptableImprovables)&&void 0!==r?r:o.unacceptableImprovables};(0,c.dispatch)(ar).setPostQualitySettings(i)}function Ai(e,t){var n=t.icon,r=t.interval,o=void 0===r?500:r,i=t.settings,a=void 0===i?{}:i,s=t.attributes,l=t.validate;if("string"==typeof e)if(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/.test(e))if((0,c.select)(ar).getQualityCheckType(e))console.error("Quality check ".concat(e," is already registered."));else if(n)if((0,m.isFunction)(s))if((0,m.isFunction)(l)){if(void 0!==o&&a){var u={name:e,icon:n,interval:o,settings:a,attributes:s,validate:l};return(0,c.dispatch)(ar).addQualityCheckType(u),function(e,t){t=Math.max(t,500);var n=(0,m.throttle)((function(){var t=(0,(0,c.select)(ar).getQualityCheckType)(e);if(t){var n=bi[e];if(n){var r,o=n.prevAttributes,i=n.prevSettings,a=t.settings;try{r=t.attributes(c.select)}catch(e){return void console.error(e)}if(n.prevAttributes=r,n.prevSettings=a,!(0,m.isEqual)(o,r)||i!==a)try{var s=t.validate(r,a)||{},l=s.status,u=void 0===l?"unknown":l,d=s.text,f=void 0===d?(0,ce._x)("Unknown status","text","nelio-content"):d;(0,(0,c.dispatch)(ar).updateQualityCheckItem)(e,u,f)}catch(e){console.error(e)}}}}),t);bi[e]={unsubscribe:(0,c.subscribe)(n),prevAttributes:{},prevSettings:{}},n()}(e,u.interval),u}}else console.error("The validate property must be a valid function.");else console.error("The attributes property must be a valid function.");else console.error("Quality check ".concat(e," must have an icon."));else console.error("Quality check names must contain a namespace prefix, include only lowercase alphanumeric characters or dashes, and start with a letter. Example: my-plugin/my-custom-quality-check");else console.error("Quality check names must be strings.")}function xi(e){!function(e){var t;null===(t=bi[e])||void 0===t||t.unsubscribe(),delete bi[e]}(e),(0,c.dispatch)(ar).removeQualityCheckType(e)}function ki(e,t){(0,c.select)(ar).getQualityCheckType(e)&&(0,c.dispatch)(ar).updateQualityCheckSettings(e,t)}Ai("nelio-content/yoast-seo",{icon:"book",attributes:function(e){var t;if(!e("yoast-seo/editor"))return{status:"invisible",text:""};try{var n=e("yoast-seo/editor").getFocusKeyphrase;if(!(null==n?void 0:n()))return{status:"unknown",text:(0,ce._x)("Yoast SEO score is not available","text","nelio-content")};var r=e("yoast-seo/editor").getResultsForFocusKeyword,o=null==r?void 0:r(),i=null!==(t=null==o?void 0:o.overallScore)&&void 0!==t?t:0;return i<40?{status:"bad",text:(0,ce._x)("Address your Yoast SEO score","user","nelio-content")}:i<70?{status:"improvable",text:(0,ce._x)("Improve Yoast SEO score","user","nelio-content")}:{status:"good",text:(0,ce._x)("Yoast SEO looks good","user","nelio-content")}}catch(e){return{status:"unknown",text:(0,ce._x)("Unable to retrieve Yoast SEO score","text","nelio-content")}}},validate:function(e){return e}}),Ai("nelio-content/yoast-content",{icon:"chart-bar",attributes:function(e){var t;if(!e("yoast-seo/editor"))return{status:"invisible",text:""};try{var n=e("yoast-seo/editor").getReadabilityResults,r=null==n?void 0:n(),o=null!==(t=null==r?void 0:r.overallScore)&&void 0!==t?t:0;return o<40?{status:"bad",text:(0,ce._x)("According to Yoast, content needs improvement","text","nelio-content")}:o<70?{status:"improvable",text:(0,ce._x)("According to Yoast, content is OK","text","nelio-content")}:{status:"good",text:(0,ce._x)("According to Yoast, content is good","text","nelio-content")}}catch(e){return{status:"unknown",text:(0,ce._x)("Unable to retrieve Yoast Content Analysis","text","nelio-content")}}},validate:function(e){return e}});const Ii=window.NelioContent.networks;function wi(e){return"tiktok"!==e.network}Ai("nelio-content/social-messages",{icon:"share",settings:{isNoProfilesBad:!0,isAllProfilesEmptyBad:!0,isSomeProfilesEmptyBad:!1},attributes:function(e){var t=e(ar),n=e(Wt.store),r=t.getAutomationSources(),o=t.isAutoShareEnabled(),i=t.getContent().includes("<ncshare>")||r.useCustomSentences;return{isEnabled:n.getPostTypes("social").map((function(e){return e.name})).includes(t.getPostType()),isPostAutoShareable:o&&i,isPublished:"publish"===t.getStatus(),hasImages:!!t.getImages().length||!!t.getFeaturedImageSrc(),messages:n.getSocialMessagesRelatedToPost(t.getPostId()),profiles:n.getSocialProfiles()}},validate:function(e,t){var n=e.isEnabled,r=e.isPostAutoShareable,o=e.isPublished,i=e.hasImages,a=e.messages,s=e.profiles,c=t.isNoProfilesBad,l=t.isAllProfilesEmptyBad,u=t.isSomeProfilesEmptyBad;return n?o?{status:"good",text:(0,ce._x)("Social messages look good","text","nelio-content")}:(0,d.isEmpty)(s)?{status:c?"bad":"improvable",text:(0,ce._x)("Connect some profiles to share this on social media","user","nelio-content")}:(s=s.filter(wi),(0,d.isEmpty)(s)?{status:"improvable",text:(0,ce._x)("Connect non-TikTok profiles to promote this on social media","user","nelio-content")}:(0,d.isEmpty)(a)?r&&s.every((function(e){return!!e.publicationFrequency}))?!i&&s.every((function(e){return(0,Ii.doesNetworkRequire)("image",e.network)}))?{status:l?"bad":"improvable",text:(0,ce._x)("Social messages cant be auto-generated because all profiles require an image","text","nelio-content")}:!i&&s.some((function(e){return(0,Ii.doesNetworkRequire)("image",e.network)}))?{status:u?"bad":"improvable",text:(0,ce._x)("Some profiles require an image and their social messages cant be auto-generated","text","nelio-content")}:{status:"good",text:(0,ce._x)("Automatic social messages look good","text","nelio-content")}:{status:l?"bad":"improvable",text:(0,ce._x)("Schedule social messages on all profiles","user","nelio-content")}:s.every((function(e){return a.some((function(t){return t.profileId===e.id}))}))?{status:"good",text:(0,ce._x)("Social messages look good","text","nelio-content")}:{status:u?"bad":"improvable",text:(0,ce._x)("Schedule social messages on all profiles","user","nelio-content")}):{status:"invisible",text:""}}}),Ai("nelio-content/editorial-tasks",{icon:"flag",settings:{useBadStatus:!0},attributes:function(e){var t=e(ar),n=t.getPostId,r=t.getPostType,o=e(Wt.store),i=o.getPostTypes,a=o.getTasksRelatedToPost;return{isEnabled:i("tasks").map((function(e){return e.name})).includes(r()),tasks:a(n())}},validate:function(e,t){var n=e.isEnabled,r=e.tasks,o=t.useBadStatus;if(!n)return{status:"invisible",text:""};var i=r.filter((function(e){return!e.completed}));return(0,d.isEmpty)(i)?{status:"good",text:(0,ce._x)("There are no pending tasks","text","nelio-content")}:{status:o?"bad":"improvable",text:(0,ce._x)("Complete all tasks","user","nelio-content")}}});const Ri=window.wp.coreData;Ai("nelio-content/featured-image",{icon:"format-image",settings:{useBadStatus:!0,canImageBeAutoSet:!1},attributes:function(e){var t=e(ar),n=t.getFeaturedImageSrc,r=(0,t.getPostType)(),o=r?e(Ri.store).getEntityRecord("root","postType",r):void 0;return{isEnabled:!!(null==o?void 0:o.supports.excerpt),imageSrc:n()}},validate:function(e,t){var n=e.isEnabled,r=e.imageSrc,o=t.canImageBeAutoSet,i=t.useBadStatus;if(!n)return{status:"invisible",text:""};var a=!(0,d.isEmpty)(r);return o||a?{status:"good",text:a?(0,ce._x)("Theres a featured image","text","nelio-content"):(0,ce._x)("Automatic featured image","text","nelio-content")}:{status:i?"bad":"improvable",text:(0,ce._x)("Set a featured image","user","nelio-content")}}}),Ai("nelio-content/content-length",{icon:"edit",interval:2e3,settings:{improvableThreshold:700,goodThreshold:1e3},attributes:function(e){return{content:(0,e(ar).getContent)()}},validate:function(e,t){var n=e.content,r=t.improvableThreshold,o=t.goodThreshold,i=function(e){return void 0===e&&(e=""),(e=(e=e.replace(/<[^>]*>/g,"")).replace(/\s+/g," ")).split(" ").length}(n);return i<r?{status:"bad",text:(0,ce._x)("Write a longer copy","user","nelio-content")}:i<o?{status:"improvable",text:(0,ce._x)("Write a longer copy","user","nelio-content")}:{status:"good",text:(0,ce._x)("Copy length looks good","text","nelio-content")}}}),Ai("nelio-content/internal-links",{icon:"admin-links",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{content:(0,e(ar).getContent)()}},validate:function(e,t){var n=e.content,r=(0,d.getLinks)(n).filter(d.isInternalUrl),o=t.improvableThreshold,i=t.goodThreshold,a=i-r.length;return(0,d.isEmpty)(r)?{status:r.length<o?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,ce._nx)("Add %d link to your own site","Add %d links to your own site",a,"user","nelio-content"),a)}:r.length<i?{status:r.length<o?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,ce._nx)("Add %d more link to your own site","Add %d more links to your own site",a,"user","nelio-content"),a)}:{status:"good",text:(0,ce._x)("Links to your own site look good","text","nelio-content")}}}),Ai("nelio-content/external-links",{icon:"external",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{content:(0,e(ar).getContent)()}},validate:function(e,t){var n=e.content,r=(0,d.getLinks)(n).filter(d.isExternalUrl),o=t.improvableThreshold,i=t.goodThreshold,a=i-r.length;return(0,d.isEmpty)(r)?{status:r.length<o?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,ce._nx)("Add %d link to an external source","Add %d links to external sources",a,"user","nelio-content"),a)}:r.length<i?{status:r.length<o?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of links */ /* translators: number of links */
(0,ce._nx)("Add %d more link to an external source","Add %d more links to external sources",a,"user","nelio-content"),a)}:{status:"good",text:(0,ce._x)("Links to external sources look good","text","nelio-content")}}}),Ai("nelio-content/content-images",{icon:"images-alt",settings:{improvableThreshold:1,goodThreshold:2},attributes:function(e){return{images:(0,e(ar).getImages)()}},validate:function(e,t){var n=e.images,r=t.improvableThreshold,o=t.goodThreshold,i=o-n.length;return(0,d.isEmpty)(n)?{status:n.length<r?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of images */ /* translators: number of images */
(0,ce._nx)("Add %d image in your copy","Add %d images in your copy",i,"user","nelio-content"),i)}:n.length<o?{status:n.length<r?"bad":"improvable",text:(0,ce.sprintf)(/* translators: number of images */ /* translators: number of images */
(0,ce._nx)("Add %d more image in your copy","Add %d more images in your copy",i,"user","nelio-content"),i)}:{status:"good",text:(0,ce._x)("Image count looks good","text","nelio-content")}}}),Ai("nelio-content/author",{icon:"admin-users",settings:{useBadStatus:!1},attributes:function(e){var t=e(ar),n=t.getAuthorId,r=t.getPostType,o=(0,e(Wt.store).getAuthor)(n()),i=r(),a=i?e(Ri.store).getEntityRecord("root","postType",i):void 0;return{isEnabled:!!(null==a?void 0:a.supports.author),isAdmin:!!(null==o?void 0:o.isAdmin)}},validate:function(e,t){var n=e.isEnabled,r=e.isAdmin,o=t.useBadStatus;return n?r?{status:o?"bad":"improvable",text:(0,ce._x)("Select a non-admin author","user","nelio-content")}:{status:"good",text:(0,ce._x)("Valid author","text","nelio-content")}:{status:"invisible",text:""}}}),Ai("nelio-content/excerpt",{icon:"text",settings:{useBadStatus:!1},attributes:function(e){var t=e(ar),n=t.getExcerpt,r=(0,t.getPostType)(),o=r?e(Ri.store).getEntityRecord("root","postType",r):void 0;return{isEnabled:!!(null==o?void 0:o.supports.excerpt),excerpt:n()}},validate:function(e,t){var n=e.isEnabled,r=e.excerpt,o=t.useBadStatus;return n?(0,d.isEmpty)((0,m.trim)(r))?{status:o?"bad":"improvable",text:(0,ce._x)("Write an excerpt","user","nelio-content")}:{status:"good",text:(0,ce._x)("Excerpt looks good","text","nelio-content")}:{status:"invisible",text:""}}}),Ai("nelio-content/tags",{icon:"tag",settings:{useBadStatus:!0},attributes:function(e){var t,n=e(ar),r=n.getPostType,o=n.getTerms,i=e(Ri.store).getEntityRecords,a=r(),s=i("root","taxonomy",{per_page:-1})||[],c=(0,m.filter)(s,(function(e){return e.visibility.public&&e.types.includes(null!=a?a:"")})).map((function(e){return e.slug}));return{tags:null!==(t=o(d.TAG))&&void 0!==t?t:o(d.PROD_TAG),isActive:c.includes(d.TAG)||c.includes(d.PROD_TAG)}},validate:function(e,t){var n=e.tags,r=t.useBadStatus;return(0,d.isEmpty)(n)?{status:r?"bad":"improvable",text:(0,ce._x)("Add one or more tags","user","nelio-content")}:{status:"good",text:(0,ce._x)("Content is properly tagged","text","nelio-content")}}});var Ci=function(e){var t=l((function(t){return t(ar).isPanelOpen(e)})),n=(0,c.useDispatch)(ar).togglePanel;return[t,function(){return n(e,!t)}]},Pi=function(){return l((function(e){var t=e(ar).getPost,n=e(Wt.store),r=n.isSubscribed,o=n.getProfilesWithMessagesRelatedToPost,i=t();return r()||!(null==i?void 0:i.id)?[]:o(i.id)}))};function Ni(e,t){(0,sn.addFilter)("nelio-content_edit-post_onDeletePremiumItem","deletePremium".concat((0,d.pascalCase)(e)),(function(n,r,o){return r===e?t(o):n}))}},4396:(e,t)=>{"use strict";function n(e){return e}t.L8=void 0,t.L8=function(){return n}},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],i=e[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[c])))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={3178:0,805:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,a=n[0],s=n[1],c=n[2],l=0;if(a.some((t=>0!==e[t]))){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(c)var u=c(r)}for(t&&t(n);l<a.length;l++)i=a[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},n=self.webpackChunkNelioContent=self.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[805],(()=>r(5999)));o=r.O(o);var i=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var a in o)i[a]=o[a];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();