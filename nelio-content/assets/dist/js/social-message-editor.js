(()=>{var e,t={2151:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},3503:(e,t,n)=>{var i,a,o,r,l;i=n(3939),a=n(2151).utf8,o=n(7206),r=n(2151).bin,(l=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?r.stringToBytes(e):a.stringToBytes(e):o(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=i.bytesToWords(e),s=8*e.length,c=1732584193,u=-271733879,m=-1732584194,d=271733878,g=0;g<n.length;g++)n[g]=16711935&(n[g]<<8|n[g]>>>24)|4278255360&(n[g]<<24|n[g]>>>8);n[s>>>5]|=128<<s%32,n[14+(s+64>>>9<<4)]=s;var p=l._ff,v=l._gg,f=l._hh,_=l._ii;for(g=0;g<n.length;g+=16){var h=c,w=u,E=m,y=d;c=p(c,u,m,d,n[g+0],7,-680876936),d=p(d,c,u,m,n[g+1],12,-389564586),m=p(m,d,c,u,n[g+2],17,606105819),u=p(u,m,d,c,n[g+3],22,-1044525330),c=p(c,u,m,d,n[g+4],7,-176418897),d=p(d,c,u,m,n[g+5],12,1200080426),m=p(m,d,c,u,n[g+6],17,-1473231341),u=p(u,m,d,c,n[g+7],22,-45705983),c=p(c,u,m,d,n[g+8],7,1770035416),d=p(d,c,u,m,n[g+9],12,-1958414417),m=p(m,d,c,u,n[g+10],17,-42063),u=p(u,m,d,c,n[g+11],22,-1990404162),c=p(c,u,m,d,n[g+12],7,1804603682),d=p(d,c,u,m,n[g+13],12,-40341101),m=p(m,d,c,u,n[g+14],17,-1502002290),c=v(c,u=p(u,m,d,c,n[g+15],22,1236535329),m,d,n[g+1],5,-165796510),d=v(d,c,u,m,n[g+6],9,-1069501632),m=v(m,d,c,u,n[g+11],14,643717713),u=v(u,m,d,c,n[g+0],20,-373897302),c=v(c,u,m,d,n[g+5],5,-701558691),d=v(d,c,u,m,n[g+10],9,38016083),m=v(m,d,c,u,n[g+15],14,-660478335),u=v(u,m,d,c,n[g+4],20,-405537848),c=v(c,u,m,d,n[g+9],5,568446438),d=v(d,c,u,m,n[g+14],9,-1019803690),m=v(m,d,c,u,n[g+3],14,-187363961),u=v(u,m,d,c,n[g+8],20,1163531501),c=v(c,u,m,d,n[g+13],5,-1444681467),d=v(d,c,u,m,n[g+2],9,-51403784),m=v(m,d,c,u,n[g+7],14,1735328473),c=f(c,u=v(u,m,d,c,n[g+12],20,-1926607734),m,d,n[g+5],4,-378558),d=f(d,c,u,m,n[g+8],11,-2022574463),m=f(m,d,c,u,n[g+11],16,1839030562),u=f(u,m,d,c,n[g+14],23,-35309556),c=f(c,u,m,d,n[g+1],4,-1530992060),d=f(d,c,u,m,n[g+4],11,1272893353),m=f(m,d,c,u,n[g+7],16,-155497632),u=f(u,m,d,c,n[g+10],23,-1094730640),c=f(c,u,m,d,n[g+13],4,681279174),d=f(d,c,u,m,n[g+0],11,-358537222),m=f(m,d,c,u,n[g+3],16,-722521979),u=f(u,m,d,c,n[g+6],23,76029189),c=f(c,u,m,d,n[g+9],4,-640364487),d=f(d,c,u,m,n[g+12],11,-421815835),m=f(m,d,c,u,n[g+15],16,530742520),c=_(c,u=f(u,m,d,c,n[g+2],23,-995338651),m,d,n[g+0],6,-198630844),d=_(d,c,u,m,n[g+7],10,1126891415),m=_(m,d,c,u,n[g+14],15,-1416354905),u=_(u,m,d,c,n[g+5],21,-57434055),c=_(c,u,m,d,n[g+12],6,1700485571),d=_(d,c,u,m,n[g+3],10,-1894986606),m=_(m,d,c,u,n[g+10],15,-1051523),u=_(u,m,d,c,n[g+1],21,-2054922799),c=_(c,u,m,d,n[g+8],6,1873313359),d=_(d,c,u,m,n[g+15],10,-30611744),m=_(m,d,c,u,n[g+6],15,-1560198380),u=_(u,m,d,c,n[g+13],21,1309151649),c=_(c,u,m,d,n[g+4],6,-145523070),d=_(d,c,u,m,n[g+11],10,-1120210379),m=_(m,d,c,u,n[g+2],15,718787259),u=_(u,m,d,c,n[g+9],21,-343485551),c=c+h>>>0,u=u+w>>>0,m=m+E>>>0,d=d+y>>>0}return i.endian([c,u,m,d])})._ff=function(e,t,n,i,a,o,r){var l=e+(t&n|~t&i)+(a>>>0)+r;return(l<<o|l>>>32-o)+t},l._gg=function(e,t,n,i,a,o,r){var l=e+(t&i|n&~i)+(a>>>0)+r;return(l<<o|l>>>32-o)+t},l._hh=function(e,t,n,i,a,o,r){var l=e+(t^n^i)+(a>>>0)+r;return(l<<o|l>>>32-o)+t},l._ii=function(e,t,n,i,a,o,r){var l=e+(n^(t|~i))+(a>>>0)+r;return(l<<o|l>>>32-o)+t},l._blocksize=16,l._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=i.wordsToBytes(l(e,t));return t&&t.asBytes?n:t&&t.asString?r.bytesToString(n):i.bytesToHex(n)}},3901:(e,t,n)=>{"use strict";n.r(t),n.d(t,{socialMessageEditor:()=>r});var i={};n.r(i),n.d(i,{areMediumTagsVisible:()=>ue,areTikTokSettingsVisible:()=>ve,getActiveSocialNetwork:()=>fe,getActiveSocialProfile:()=>me,getDateType:()=>R,getDateValue:()=>B,getDisabledProfileIds:()=>Ee,getEditorContext:()=>_e,getFailureDescription:()=>A,getId:()=>C,getImageId:()=>q,getImageUrl:()=>G,getMediumTags:()=>$,getMessageTypeInNetwork:()=>j,getPost:()=>Q,getPostId:()=>X,getPostType:()=>Z,getProfileIdInTargetSelector:()=>ke,getRecurrenceContext:()=>ce,getRecurrenceMode:()=>oe,getRecurrenceSettings:()=>se,getRelatedPostStatus:()=>ge,getReusableMessageId:()=>V,getSelectedSocialNetworks:()=>te,getSelectedSocialProfiles:()=>J,getSelectedSocialProfilesInNetwork:()=>ee,getSelectedTargets:()=>ne,getSelectedTargetsInProfile:()=>ie,getSelectedTargetsInTargetSelector:()=>xe,getStatus:()=>M,getText:()=>ae,getTikTokSettings:()=>K,getTimeType:()=>D,getTimeValue:()=>U,getTypeByNetwork:()=>F,getValidationError:()=>he,getVideoId:()=>z,getVideoUrl:()=>H,hasExplicitImage:()=>Y,hasExplicitVideo:()=>W,isEditingRecurrenceSettings:()=>le,isEditingReusableMessage:()=>O,isEditorVisible:()=>ye,isFreePreview:()=>L,isImageUrlSelectorVisible:()=>be,isNewMessage:()=>we,isPreviewVisible:()=>de,isRecurrenceEnabled:()=>re,isSaving:()=>pe,isTargetSelectedInTargetSelector:()=>Ne,isTargetSelectorVisible:()=>Se});var a={};n.r(a),n.d(a,{close:()=>it,closeTargetSelector:()=>ut,editRecurrenceSettings:()=>We,enableRecurrence:()=>Ye,makeEditable:()=>Le,markAsSaving:()=>Ze,openNewSocialMessageEditor:()=>nt,openTargetSelector:()=>ct,removeImages:()=>Ve,removeVideo:()=>Be,resetDateTime:()=>Ce,resetTime:()=>Me,selectSingleSocialProfile:()=>je,selectSingleTarget:()=>Ge,selectSocialProfile:()=>qe,selectTargetInTargetSelector:()=>mt,setActiveSocialNetwork:()=>at,setDateTypeAndValue:()=>Ie,setImages:()=>Oe,setMediumTags:()=>De,setPost:()=>Fe,setRecurrenceContext:()=>Ke,setRecurrenceSettings:()=>$e,setRelatedPostStatus:()=>ot,setSelectedTargetsInProfile:()=>ze,setText:()=>He,setTikTokSettings:()=>Ue,setTimeTypeAndValue:()=>Pe,setValidationError:()=>rt,setVideos:()=>Re,showImageUrlSelector:()=>lt,showMediumTags:()=>Qe,showPreview:()=>Xe,showTikTokSettings:()=>Je,switchMessageType:()=>Ae});var o={};n.r(o),n.d(o,{loadRelatedPost:()=>Lt,openSocialMessageEditor:()=>Mt,saveAndClose:()=>xt,saveReusableAndClose:()=>Nt,sendNow:()=>kt});var r={};n.r(r),n.d(r,{SocialMessageEditor:()=>Do,store:()=>Ot});const l=window.wp.element,s=window.wp.data;function c(e,t){return(0,s.useSelect)(e,t)}function u(e){return(0,s.resolveSelect)(e)}const m=window.NelioContent.data,d=window.lodash,g=window.NelioContent.networks;var p={attributes:{profileIds:{all:[],byNetwork:{}},targetNamesByProfile:{},typeByNetwork:{bluesky:"text",discord:"text",facebook:"text",gmb:"text",instagram:"text",linkedin:"text",mastodon:"text",medium:"text",pinterest:"text",reddit:"text",telegram:"text",threads:"text",tiktok:"text",tumblr:"text",twitter:"text"},message:{dateType:"predefined-offset",dateValue:"0",status:"draft",text:"",timeType:"predefined-offset",timeValue:"0"},reusableMessage:{active:!1}},recurrence:{context:{monthday:1,weekday:"sun",weekindex:[1]},mode:"toggeable",enabled:!1,editing:!1,settings:{occurrences:2,interval:1,period:"day"}},status:{activeSocialNetwork:"twitter",context:"calendar",disabledProfileIds:[],error:"",areMediumTagsVisible:!1,areTikTokSettingsVisible:!1,isImageUrlSelectorVisible:!1,isPreviewVisible:!1,isSaving:!1,isVisible:!1,relatedPostStatus:{type:"none"}},targetSelector:{selectedTargetNames:[]}},v=function(){return v=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},v.apply(this,arguments)},f=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};function _(e){return void 0===e&&(e=""),(0,d.isEmpty)((0,d.trim)(e))?"{title} {permalink}":e}function h(e){return void 0===e?"":"".concat(e)}function w(e,t){var n=E(p.attributes.typeByNetwork,p.attributes.message,"update-post",t);switch(e){case"image":return E(n,p.attributes.message,"set-image",t);case"video":return E(n,p.attributes.message,"set-video",t);case"auto-image":case"multi-media":case"text":return n}}function E(e,t,n,i){switch(e=function(e){return(0,g.getSupportedNetworks)().reduce((function(e,t){var n;return v(v({},e),((n={})[t]="auto-image"===e[t]?"text":e[t],n))}),e)}(e),n){case"set-image":e=y("image",t,e);break;case"remove-image":e=b("image",t,e);break;case"set-video":e=y("video",t,e);break;case"remove-video":e=b("video",t,e)}return function(e,t){var n=(0,d.values)(e),i=!!(null==t?void 0:t.imageSrc)||!!(null==t?void 0:t.images[0]),a=n.includes("image"),o=n.includes("video");return(0,g.getSupportedNetworks)().reduce((function(e,t){var n;return v(v({},e),((n={})[t]=function(e,t){return"text"!==t?t:a&&o&&(0,g.doesNetworkSupport)("multi-media",e)?"multi-media":a&&(0,g.doesNetworkSupport)("image",e)?"image":o&&(0,g.doesNetworkSupport)("video",e)?"video":i&&(0,g.doesNetworkRequire)("image",e)?"auto-image":"text"}(t,e[t]),n))}),e)}(e,i)}function y(e,t,n){return(0,g.getSupportedNetworks)().reduce((function(n,i){var a;return v(v({},n),((a={})[i]=function(n,i){return"image"===e&&"video"===i&&(0,g.doesNetworkSupport)("image",n)&&(0,g.doesNetworkSupport)("multi-media",n)&&!(0,d.isEmpty)(t.video)?"multi-media":"image"===e&&"video"===i&&(0,g.doesNetworkSupport)("image",n)&&!(0,g.doesNetworkSupport)("multi-media",n)?"image":"video"===e&&"image"===i&&(0,g.doesNetworkSupport)("video",n)&&(0,g.doesNetworkSupport)("multi-media",n)&&!(0,d.isEmpty)(t.image)?"multi-media":"video"===e&&"image"===i&&(0,g.doesNetworkSupport)("video",n)&&!(0,g.doesNetworkSupport)("multi-media",n)?"video":"text"===i&&(0,g.doesNetworkSupport)(e,n)?e:i}(i,n[i]),a))}),n)}function b(e,t,n){return(0,g.getSupportedNetworks)().reduce((function(n,i){var a;return v(v({},n),((a={})[i]=function(n,i){return"image"===e&&"multi-media"===i&&(0,g.doesNetworkSupport)("video",n)&&!(0,d.isEmpty)(t.video)?"video":"video"===e&&"multi-media"===i&&(0,g.doesNetworkSupport)("image",n)&&!(0,d.isEmpty)(t.image)?"image":i===e?"text":i}(i,n[i]),a))}),n)}const k=window.NelioContent.utils;var x=function(){return x=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},x.apply(this,arguments)},N=function(e){return!!(null==e?void 0:e.id)},S=function(){return S=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},S.apply(this,arguments)},T=function(){return T=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},T.apply(this,arguments)},I=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};const P=(0,s.combineReducers)({attributes:function(e,t){var n;return void 0===e&&(e=p.attributes),null!==(n=function(e,t){var n,i,a,o,r;switch(t.type){case"OPEN_EDITOR":return function(e){var t,n,i=e.message,a=e.reusableMessage,o=e.post,r=!i.id;return{typeByNetwork:w(i.type,o),message:{id:r?void 0:i.id,dateType:i.dateType,dateValue:h(i.dateValue),timeType:i.timeType,timeValue:h(i.timeValue),image:i.image,imageId:i.imageId,video:i.video,videoId:i.videoId,text:r&&o?_(i.text):i.text,status:i.status,isFreePreview:!!i.isFreePreview,failureDescription:i.failureDescription},mediumTags:i.tags,tiktokSettings:i.tiktokSettings,relatedPost:o,reusableMessage:a,profileIds:i.profileId&&i.network?{all:[i.profileId],byNetwork:(t={},t[i.network]=[i.profileId],t)}:p.attributes.profileIds,targetNamesByProfile:i.profileId&&i.network&&i.targetName&&(0,g.doesNetworkSupport)("multi-target",i.network)?(n={},n[i.profileId]=[i.targetName],n):p.attributes.targetNamesByProfile}}(t);case"MAKE_EDITABLE":return v(v({},e),{message:v(v({},e.message),{status:"draft",failureDescription:void 0})});case"SET_DATE":return v(v({},e),{message:v(v({},e.message),{dateType:t.dateType,dateValue:h(t.dateValue),timeType:t.timeType,timeValue:h(t.timeValue)})});case"SET_TIME":return v(v({},e),{message:v(v({},e.message),{timeType:t.timeType,timeValue:h(t.timeValue)})});case"SWITCH_MESSAGE_TYPE":return v(v({},e),{typeByNetwork:v(v({},e.typeByNetwork),(n={},n[t.network]=t.messageType,n))});case"SET_IMAGES":return v(v({},e),{typeByNetwork:v({},E(e.typeByNetwork,e.message,"set-image",e.relatedPost)),message:v(v({},e.message),{image:1===t.imageUrls.length?t.imageUrls[0]:t.imageUrls,imageId:1===t.imageIds.length?t.imageIds[0]:t.imageIds})});case"REMOVE_IMAGES":return v(v({},e),{typeByNetwork:E(e.typeByNetwork,e.message,"remove-image",e.relatedPost),message:v(v({},e.message),{image:void 0,imageId:void 0})});case"SET_VIDEOS":return v(v({},e),{typeByNetwork:v({},E(e.typeByNetwork,e.message,"set-video",e.relatedPost)),message:v(v({},e.message),{video:1===t.videoUrls.length?t.videoUrls[0]:t.videoUrls,videoId:1===t.videoIds.length?t.videoIds[0]:t.videoIds})});case"REMOVE_VIDEOS":return v(v({},e),{typeByNetwork:E(e.typeByNetwork,e.message,"remove-video",e.relatedPost),message:v(v({},e.message),{video:void 0,videoId:void 0})});case"SET_POST":return t.post?v(v({},e),{relatedPost:t.post,typeByNetwork:E(e.typeByNetwork,e.message,"update-post",t.post),message:v(v({},e.message),{text:_(e.message.text)})}):v(v({},e),{relatedPost:void 0,typeByNetwork:E(e.typeByNetwork,e.message,"update-post",void 0)});case"SELECT_SINGLE_SOCIAL_PROFILE":return v(v({},e),{profileIds:{all:[t.profileId],byNetwork:(i={},i[t.network]=[t.profileId],i)},targetNamesByProfile:{}});case"SELECT_SOCIAL_PROFILE":var l=e.profileIds.byNetwork[t.network]||[];return v(v({},e),{profileIds:{all:t.isSelected?f(f([],e.profileIds.all,!0),[t.profileId],!1):(0,d.without)(e.profileIds.all,t.profileId),byNetwork:v(v({},e.profileIds.byNetwork),(a={},a[t.network]=t.isSelected?f(f([],l,!0),[t.profileId],!1):(0,d.without)(l,t.profileId),a))}});case"SELECT_SINGLE_TARGET":return v(v({},e),{profileIds:{all:[t.profileId],byNetwork:(o={},o[t.network]=[t.profileId],o)},targetNamesByProfile:(r={},r[t.profileId]=[t.targetName],r)});case"SET_SELECTED_TARGETS_IN_PROFILE":return function(e,t){var n,i,a=t.selectedTargetNames,o=t.profileId,r=t.network,l=e.profileIds.all.includes(o)?e.profileIds.all:f(f([],e.profileIds.all,!0),[o],!1),s=e.profileIds.byNetwork[r]||[],c=s.includes(o)?s:f(f([],s,!0),[o],!1),u=!(0,d.isEmpty)(a);return v(v({},e),{profileIds:{all:u?l:(0,d.without)(l,o),byNetwork:v(v({},e.profileIds.byNetwork),(n={},n[r]=u?c:(0,d.without)(c,o),n))},targetNamesByProfile:v(v({},e.targetNamesByProfile),(i={},i[o]=t.selectedTargetNames,i))})}(e,t);case"SET_TEXT":return v(v({},e),{message:v(v({},e.message),{text:t.text||""})});case"SET_MEDIUM_TAGS":return v(v({},e),{mediumTags:t.tags});case"SET_TIKTOK_SETTINGS":return v(v({},e),{tiktokSettings:t.settings})}}(e,t))&&void 0!==n?n:e},recurrence:function(e,t){var n;return void 0===e&&(e=p.recurrence),null!==(n=function(e,t){var n,i;switch(t.type){case"OPEN_EDITOR":return x(x({},p.recurrence),{mode:(i=t.message,N(i)?(0,k.isRecurringMessage)(i)&&(0,k.isRecurringSource)(i)?"editable":"locked":"toggeable"),enabled:N(t.message)&&(0,k.isRecurringMessage)(t.message),settings:null!==(n=t.message.recurrenceSettings)&&void 0!==n?n:p.recurrence.settings});case"ENABLE_RECURRENCE":return x(x({},e),{enabled:"toggeable"===e.mode?t.enabled:e.enabled});case"EDIT_RECURRENCE_SETTINGS":return x(x({},e),{editing:"locked"!==e.mode&&t.editing});case"SET_RECURRENCE_SETTINGS":return x(x({},e),{settings:"locked"!==e.mode?t.settings:e.settings});case"SET_RECURRENCE_CONTEXT":return function(e,t){var n=x(x({},t.context),e);switch(t.settings.period){case"day":return x(x({},t),{context:n});case"week":var i=1===Object.values(t.settings.weekdays).filter((function(e){return!!e})).length,a=t.settings.weekdays.includes(t.context.weekday);return x(x({},t),i&&a?{context:n,settings:x(x({},t.settings),{weekdays:[n.weekday]})}:{context:n});case"month":return"monthday"===t.settings.day?x(x({},t),{context:n,settings:x(x({},t.settings),{day:"monthday"})}):"last-weekday"===t.settings.day&&n.weekindex.includes(5)?x(x({},t),{context:n,settings:x(x({},t.settings),{day:"last-weekday"})}):x(x({},t),{context:n,settings:x(x({},t.settings),{day:5===n.weekindex[0]?"last-weekday":"nth-weekday"})})}}(t.context,e)}}(e,t))&&void 0!==n?n:e},status:function(e,t){var n;return void 0===e&&(e=p.status),null!==(n=function(e,t){switch(t.type){case"OPEN_EDITOR":return S(S({},p.status),{activeSocialNetwork:t.activeSocialNetwork,context:t.context,disabledProfileIds:t.disabledProfileIds,isVisible:!0,isPreviewVisible:t.isPreviewVisible,areMediumTagsVisible:t.areMediumTagsVisible,areTikTokSettingsVisible:t.areTikTokSettingsVisible,relatedPostStatus:t.post?{type:"ready"}:{type:"none"}});case"CLOSE_EDITOR":return p.status;case"SET_ACTIVE_SOCIAL_NETWORK":case"SELECT_SINGLE_SOCIAL_PROFILE":return S(S({},e),{activeSocialNetwork:t.network});case"SET_RELATED_POST_STATUS":return S(S({},e),{relatedPostStatus:t.status});case"SET_VALIDATION_ERROR":return S(S({},e),{error:t.error});case"MARK_AS_SAVING":return S(S({},e),{isSaving:!!t.isSaving});case"SHOW_IMAGE_URL_SELECTOR":return S(S({},e),{isImageUrlSelectorVisible:t.isVisible});case"SHOW_PREVIEW":return S(S({},e),{isPreviewVisible:t.isVisible});case"SHOW_MEDIUM_TAGS":return S(S({},e),{areMediumTagsVisible:t.isVisible});case"SHOW_TIKTOK_SETTINGS":return S(S({},e),{areTikTokSettingsVisible:t.isVisible})}}(e,t))&&void 0!==n?n:e},targetSelector:function(e,t){var n;return void 0===e&&(e=p.targetSelector),null!==(n=function(e,t){switch(t.type){case"OPEN_TARGET_SELECTOR":return T(T({},p.targetSelector),{profileId:t.profileId,selectedTargetNames:t.selectedTargetNames});case"CLOSE_TARGET_SELECTOR":return p.targetSelector;case"SELECT_TARGET_IN_TARGET_SELECTOR":return T(T({},e),{selectedTargetNames:t.isSelected?I(I([],e.selectedTargetNames,!0),[t.targetName],!1):(0,d.without)(e.selectedTargetNames,t.targetName)})}}(e,t))&&void 0!==n?n:e}});function C(e){return e.attributes.message.id}function M(e){return e.attributes.message.status}function L(e){return!!e.attributes.message.isFreePreview}function A(e){var t;return null!==(t=e.attributes.message.failureDescription)&&void 0!==t?t:""}function O(e){return e.attributes.reusableMessage.active}function V(e){return e.attributes.reusableMessage.id}function R(e){return e.attributes.message.dateType}function B(e){return e.attributes.message.dateValue}function D(e){return e.attributes.message.timeType}function U(e){return e.attributes.message.timeValue}function F(e){return e.attributes.typeByNetwork}function j(e,t){return e.attributes.typeByNetwork[t]}function q(e){var t;return e.attributes.message.imageId||(null===(t=e.attributes.relatedPost)||void 0===t?void 0:t.imageId)||void 0}function G(e,t){var n,i,a;return e.attributes.message.image||t&&(null===(n=e.attributes.relatedPost)||void 0===n?void 0:n.networkImages[t])||(null===(i=e.attributes.relatedPost)||void 0===i?void 0:i.imageSrc)||(null===(a=e.attributes.relatedPost)||void 0===a?void 0:a.images[0])}function z(e){return e.attributes.message.videoId}function H(e){return e.attributes.message.video}function Y(e){return(0,d.values)(e.attributes.typeByNetwork).includes("image")}function W(e){return(0,d.values)(e.attributes.typeByNetwork).includes("video")}function $(e){return e.attributes.mediumTags}function K(e){return e.attributes.tiktokSettings}function Q(e){return e.attributes.relatedPost}function X(e){var t;return null===(t=e.attributes.relatedPost)||void 0===t?void 0:t.id}function Z(e){var t;return null===(t=e.attributes.relatedPost)||void 0===t?void 0:t.type}function J(e){return e.attributes.profileIds.all||[]}function ee(e,t){return e.attributes.profileIds.byNetwork[t]||[]}function te(e){return(0,d.keys)(e.attributes.profileIds.byNetwork).filter((function(t){return!(0,k.isEmpty)(e.attributes.profileIds.byNetwork[t])}))}function ne(e){return e.attributes.targetNamesByProfile}function ie(e,t){return e.attributes.targetNamesByProfile[t]||[]}function ae(e){return e.attributes.message.text||""}function oe(e){return e.recurrence.mode}function re(e){return e.recurrence.enabled}function le(e){return e.recurrence.editing}function se(e){return e.recurrence.settings}function ce(e){return e.recurrence.context}function ue(e){return!!e.status.areMediumTagsVisible}function me(e){var t=e.status.activeSocialNetwork,n=e.attributes.profileIds.byNetwork[t];return(0,d.last)(n)}function de(e){return!!e.status.isPreviewVisible}function ge(e){return e.status.relatedPostStatus}function pe(e){return!!e.status.isSaving}function ve(e){return!!e.status.areTikTokSettingsVisible}function fe(e){return e.status.activeSocialNetwork}function _e(e){return e.status.context}function he(e){return e.status.error}function we(e){return!e.attributes.message.id}function Ee(e){return e.status.disabledProfileIds}function ye(e){return e.status.isVisible}function be(e){return ye(e)&&e.status.isImageUrlSelectorVisible}function ke(e){return e.targetSelector.profileId||void 0}function xe(e){return e.targetSelector.selectedTargetNames}function Ne(e,t){return e.targetSelector.selectedTargetNames.includes(t)}function Se(e){return!!e.targetSelector.profileId}var Te=function(){return Te=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Te.apply(this,arguments)};function Ie(e,t){var n={dateType:(0,s.select)(Ot).getDateType(),dateValue:(0,s.select)(Ot).getDateValue(),timeType:(0,s.select)(Ot).getTimeType(),timeValue:(0,s.select)(Ot).getTimeValue()},i=Te(Te({},n),{dateType:e,dateValue:t});return Te({type:"SET_DATE"},function(e,t){var n="predefined-offset"===t.dateType&&"0"===t.dateValue;switch(e.timeType){case"exact":return t;case"positive-hours":case"predefined-offset":default:return Te(Te({},t),{timeType:n?e.timeType:"time-interval",timeValue:n?e.timeValue:"morning"});case"time-interval":return Te(Te({},t),{timeType:n?"predefined-offset":e.timeType,timeValue:n?"0":e.timeValue})}}(n,i))}function Pe(e,t){return{type:"SET_TIME",timeType:e,timeValue:t}}function Ce(){return Ie("predefined-offset","0")}function Me(){if((0,s.select)(Ot).isEditingReusableMessage())return Pe("time-interval","morning");var e=(0,s.select)(Ot).getDateType(),t=(0,s.select)(Ot).getDateValue();return"predefined-offset"===e&&"0"===t?Pe("predefined-offset","0"):Pe("time-interval","morning")}function Le(){return{type:"MAKE_EDITABLE"}}function Ae(e,t){return{type:"SWITCH_MESSAGE_TYPE",network:e,messageType:t}}function Oe(e,t,n){return{type:"SET_IMAGES",network:e,imageIds:t,imageUrls:n}}function Ve(){return{type:"REMOVE_IMAGES"}}function Re(e,t,n){return{type:"SET_VIDEOS",network:e,videoIds:t,videoUrls:n}}function Be(){return{type:"REMOVE_VIDEOS"}}function De(e){return{type:"SET_MEDIUM_TAGS",tags:e}}function Ue(e){return{type:"SET_TIKTOK_SETTINGS",settings:e}}function Fe(e){return{type:"SET_POST",post:e}}function je(e){var t=(0,s.select)(m.store).getSocialProfile(e);if(t)return{type:"SELECT_SINGLE_SOCIAL_PROFILE",profileId:e,network:t.network}}function qe(e,t){var n=(0,s.select)(m.store).getSocialProfile(e);if(n)return{type:"SELECT_SOCIAL_PROFILE",profileId:e,network:n.network,isSelected:t}}function Ge(e,t){var n=(0,s.select)(m.store).getSocialProfile(e);if(n)return{type:"SELECT_SINGLE_TARGET",profileId:e,network:n.network,targetName:t}}function ze(e,t){var n=(0,s.select)(m.store).getSocialProfile(e);if(n)return{type:"SET_SELECTED_TARGETS_IN_PROFILE",profileId:e,network:n.network,selectedTargetNames:t}}function He(e){return{type:"SET_TEXT",text:e}}function Ye(e){return{type:"ENABLE_RECURRENCE",enabled:e}}function We(e){return{type:"EDIT_RECURRENCE_SETTINGS",editing:e}}function $e(e){return{type:"SET_RECURRENCE_SETTINGS",settings:e}}function Ke(e){return{type:"SET_RECURRENCE_CONTEXT",context:e}}function Qe(e){return(0,k.setValue)("areSocialMessageMediumTagsVisible",e),{type:"SHOW_MEDIUM_TAGS",isVisible:e}}function Xe(e){return(0,k.setValue)("isSocialMessagePreviewVisible",e),{type:"SHOW_PREVIEW",isVisible:e}}function Ze(e){return{type:"MARK_AS_SAVING",isSaving:e}}function Je(e){return(0,k.setValue)("areSocialMessageTikTokSettingsVisible",e),{type:"SHOW_TIKTOK_SETTINGS",isVisible:e}}var et=function(){return et=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},et.apply(this,arguments)},tt=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))};function nt(e,t){var n,i;void 0===e&&(e={});var a,o=t.disabledProfileIds,r=void 0===o?[]:o,l=t.isPreviewVisible,c=void 0===l?!!(0,k.getValue)("isSocialMessagePreviewVisible",!1):l,u=t.areMediumTagsVisible,p=void 0===u?!!(0,k.getValue)("areSocialMessageMediumTagsVisible",!1):u,v=t.areTikTokSettingsVisible,f=void 0===v?!!(0,k.getValue)("areSocialMessageTikTokSettingsVisible",!1):v,_=t.post,h=function(e,t,n){void 0===t&&(t={});var i=(0,s.select)(m.store).isSubscribed();return tt(tt(tt([],i?[]:e,!0),n.reusableMessage?st("reusability"):[],!0),"recurrenceGroup"in t?st("recurrence"):[],!0)}(r,e,t),w=(a=h,(0,d.filter)((0,s.select)(m.store).getSocialProfiles(),(function(e){return!a.includes(e.id)})));if((0,k.hasHead)(w)&&1===w.length){var E=w[0],y=E.id,b=E.network;(0,g.doesNetworkSupport)("multi-target",b)||(e=et(et({},e),{profileId:y,network:b}))}var x=(0,d.map)(w,"network");return{type:"OPEN_EDITOR",activeSocialNetwork:null!==(i=null!==(n=e.network)&&void 0!==n?n:x[0])&&void 0!==i?i:"twitter",disabledProfileIds:h,isPreviewVisible:c,areMediumTagsVisible:p,areTikTokSettingsVisible:f,context:t.context,message:et(et({},(0,k.createSocialMessage)()),(0,d.omitBy)(e,d.isNil)),post:_,reusableMessage:{active:!!t.reusableMessage,id:"number"==typeof t.reusableMessage?t.reusableMessage:void 0}}}function it(){return{type:"CLOSE_EDITOR"}}function at(e){return{type:"SET_ACTIVE_SOCIAL_NETWORK",network:e}}function ot(e){return{type:"SET_RELATED_POST_STATUS",status:e}}function rt(e){return{type:"SET_VALIDATION_ERROR",error:e}}function lt(e){return{type:"SHOW_IMAGE_URL_SELECTOR",isVisible:e}}function st(e){return(0,s.select)(m.store).getSocialProfiles().filter((function(t){return!(0,g.doesNetworkSupport)(e,t.network)})).map((function(e){return e.id}))}function ct(e){if((0,s.select)(m.store).getSocialProfile(e))return{type:"OPEN_TARGET_SELECTOR",profileId:e,selectedTargetNames:(0,s.select)(Ot).getSelectedTargetsInProfile(e)}}function ut(){return{type:"CLOSE_TARGET_SELECTOR"}}function mt(e,t){return{type:"SELECT_TARGET_IN_TARGET_SELECTOR",targetName:e,isSelected:t}}const dt=window.wp.apiFetch,gt=n.n(dt)(),pt=window.wp.url,vt={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let ft;const _t=new Uint8Array(16),ht=[];for(let e=0;e<256;++e)ht.push((e+256).toString(16).slice(1));const wt=function(e,t,n){if(vt.randomUUID&&!t&&!e)return vt.randomUUID();const i=(e=e||{}).random??e.rng?.()??function(){if(!ft){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");ft=crypto.getRandomValues.bind(crypto)}return ft(_t)}();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return(ht[e[t+0]]+ht[e[t+1]]+ht[e[t+2]]+ht[e[t+3]]+"-"+ht[e[t+4]]+ht[e[t+5]]+"-"+ht[e[t+6]]+ht[e[t+7]]+"-"+ht[e[t+8]]+ht[e[t+9]]+"-"+ht[e[t+10]]+ht[e[t+11]]+ht[e[t+12]]+ht[e[t+13]]+ht[e[t+14]]+ht[e[t+15]]).toLowerCase()}(i)};var Et=function(){return Et=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Et.apply(this,arguments)},yt=function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{s(i.next(e))}catch(e){o(e)}}function l(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((i=i.apply(e,t||[])).next())}))},bt=function(e,t){var n,i,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=l(0),r.throw=l(1),r.return=l(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(o=0)),o;)try{if(n=1,i&&(a=2&l[0]?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],i=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}};function kt(){return yt(this,void 0,Promise,(function(){var e,t,n,i,a,o;return bt(this,(function(r){switch(r.label){case 0:return(e=(0,s.select)(Ot).getId())?"error"!==(0,s.select)(Ot).getStatus()||(0,s.select)(Ot).isSaving()?[2]:[4,(0,s.dispatch)(Ot).markAsSaving(!0)]:[2];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,5,,7]),t=(0,s.select)(m.store).getSiteId(),n=(0,s.select)(m.store).getApiRoot(),i=(0,s.select)(m.store).getAuthenticationToken(),[4,gt({url:"".concat(n,"/site/").concat(t,"/social/").concat(e,"/retry"),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(i)}})];case 3:return a=r.sent(),[4,(0,s.dispatch)(m.store).receiveSocialMessages(Et(Et({},a),{status:"publish"}))];case 4:return r.sent(),[3,7];case 5:return o=r.sent(),[4,(0,k.showErrorNotice)(o)];case 6:return r.sent(),[3,7];case 7:return[4,(0,s.dispatch)(Ot).markAsSaving(!1)];case 8:return r.sent(),[4,(0,s.dispatch)(Ot).close()];case 9:return r.sent(),[2]}}))}))}function xt(e){return yt(this,void 0,Promise,(function(){var t,n,i,a,o,r,l,c,u,d,g,p,v,f;return bt(this,(function(_){switch(_.label){case 0:return(0,s.select)(Ot).isSaving()?[2]:[4,(0,s.dispatch)(Ot).markAsSaving(!0)];case 1:_.sent(),_.label=2;case 2:return _.trys.push([2,8,,9]),t=(0,s.select)(Ot).getId(),n=Tt(),i=!e&&(0,s.select)(Ot).isRecurrenceEnabled(),a=i?(0,s.select)(Ot).getRecurrenceSettings():void 0,o=(0,s.select)(m.store).getSiteId(),r=(0,s.select)(m.store).getApiRoot(),l=(0,s.select)(m.store).getAuthenticationToken(),c=t?"PUT":"POST",u=t?"".concat(r,"/site/").concat(o,"/social/").concat(t):"".concat(r,"/site/").concat(o,"/social"),[4,It()];case 3:return d=_.sent(),g=t?Et(Et(Et({},n),d[0]),{id:t,recurrenceSettings:a}):Et(Et({},n),{slots:d,recurrenceSettings:a}),[4,gt({url:u,method:c,credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(l)},data:g})];case 4:return p=_.sent(),[4,(0,s.dispatch)(m.store).removeRecurringMessages(null===(f=(0,s.select)(m.store).getSocialMessage(t))||void 0===f?void 0:f.recurrenceGroup)];case 5:return _.sent(),[4,(0,s.dispatch)(m.store).receiveSocialMessages(p)];case 6:return _.sent(),[4,St(n)];case 7:return _.sent(),[3,9];case 8:return v=_.sent(),console.error(v),[3,9];case 9:return[4,(0,s.dispatch)(Ot).markAsSaving(!1)];case 10:return _.sent(),[4,(0,s.dispatch)(Ot).close()];case 11:return _.sent(),[2]}}))}))}function Nt(){return yt(this,void 0,Promise,(function(){var e,t,n,i,a,o,r;return bt(this,(function(l){switch(l.label){case 0:return(0,s.select)(Ot).isSaving()?[2]:[4,(0,s.dispatch)(Ot).markAsSaving(!0)];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,7,,8]),[4,It()];case 3:return e=l.sent(),t=Tt(),n=(0,s.select)(Ot).getReusableMessageId(),i=(0,s.select)(m.store).getDefaultTime("social"),a=Et(Et(Et({},e[0]),t),{targetName:"default"!==e[0].targetName?e[0].targetName:void 0,timeType:"exact"===t.timeType||"time-interval"===t.timeType?t.timeType:"exact",timeValue:"exact"===t.timeType||"time-interval"===t.timeType?t.timeValue:i}),[4,gt({path:"/nelio-content/v1/reusable-message",method:"POST",data:{message:Et(Et({},a),{id:n})}})];case 4:return o=l.sent(),[4,(0,s.dispatch)(m.store).receiveReusableMessages(o)];case 5:return l.sent(),[4,St(a)];case 6:return l.sent(),[3,8];case 7:return r=l.sent(),console.error(r),[3,8];case 8:return[4,(0,s.dispatch)(Ot).markAsSaving(!1)];case 9:return l.sent(),[4,(0,s.dispatch)(Ot).close()];case 10:return l.sent(),[2]}}))}))}function St(e){return yt(this,arguments,void 0,(function(e){var t=e.timeType,n=e.timeValue;return bt(this,(function(e){switch(e.label){case 0:return"exact"!==t?[2]:[4,(0,s.dispatch)(m.store).setDefaultTime("social",n)];case 1:return e.sent(),(0,k.setValue)("defaultSocialTime",n),[2]}}))}))}function Tt(){var e=(0,s.select)(Ot).getPost(),t=(0,s.select)(Ot).getDateType(),n=(0,s.select)(Ot).getDateValue(),i=(0,s.select)(Ot).getTimeType(),a=(0,s.select)(Ot).getTimeValue(),o=(0,s.select)(Ot).getText(),r=(0,s.select)(Ot).getImageUrl(),l=(0,s.select)(Ot).getImageId(),c=(0,s.select)(Ot).getVideoUrl(),u=(0,s.select)(Ot).getVideoId(),p=(0,s.select)(Ot).getSelectedSocialNetworks(),v=(0,d.min)(p.map(g.getCharLimitInNetwork))||(0,g.getMinCharLimit)(),f=(0,s.select)(m.store).getSiteTimezone(),_=(0,k.getBaseDatetime)(e,t),h=(0,k.getSocialMessageSchedule)({baseDatetime:_,dateValue:n,timeType:i,timeValue:a}),w=(0,k.computeSocialMessageText)(v,e?Et(Et({},e),{permalink:"{permalink}"}):void 0,o);return{baseDatetime:_,dateType:t,dateValue:n,image:r,imageId:l,postAuthor:e?e.author:void 0,postId:e?e.id:void 0,postType:e?e.type:void 0,schedule:h,source:"manual",text:o,textComputed:w,timeType:i,timeValue:a,timezone:f,video:c,videoId:u}}function It(){return yt(this,void 0,Promise,(function(){var e,t,n,i,a,o,r,l,c,p,v;return bt(this,(function(f){switch(f.label){case 0:e=(0,s.select)(Ot).getSelectedSocialProfiles(),t=[],n=(0,s.select)(Ot).getPost(),i=(null!==(p=null==n?void 0:n.permalinkQueryArgs)&&void 0!==p?p:[]).reduce((function(e,t){var n,i=t[0],a=t[1];return Et(Et({},e),((n={})[i]=a,n))}),{}),a=n?Et({default:(0,pt.addQueryArgs)(n.permalink,i)},(0,d.mapValues)(n.permalinks,(function(e){return(0,pt.addQueryArgs)(null!=e?e:"",i)}))):void 0,o=function(e){var i,o,r,l;return bt(this,(function(c){switch(c.label){case 0:return(i=(0,s.select)(m.store).getSocialProfile(e))?(o=(0,s.select)(Ot).getMessageTypeInNetwork(i.network),function(e){var t=e.network;return(0,g.doesNetworkSupport)("multi-target",t)}(i)?(r=(0,s.select)(Ot).getSelectedTargetsInProfile(e),(0,k.isEmpty)(r)?[2,"continue"]:[4,u(m.store).getTargetsInProfile(e)]):(t.push(Et(Et(Et({id:wt(),profileId:e,targetName:"default",network:i.network,permalink:null!==(v=null==a?void 0:a[i.network])&&void 0!==v?v:null==a?void 0:a.default,type:o},"tiktok"===i.network&&{tiktokSettings:(0,s.select)(Ot).getTikTokSettings()}),"medium"===i.network&&{title:null==n?void 0:n.title,content:null==n?void 0:n.content,tags:(0,s.select)(Ot).getMediumTags()}),["text","auto-image"].includes(o)&&!!n&&n.networkImages[i.network]&&{image:n.networkImages[i.network]})),[2,"continue"])):[2,"continue"];case 1:return(null!=(l=c.sent())?l:[]).filter((function(e){var t=e.name;return r.includes(t)})).forEach((function(n){var r;return t.push({id:wt(),network:i.network,profileId:e,targetDisplayName:n.displayName,targetName:n.name,permalink:null!==(r=null==a?void 0:a[i.network])&&void 0!==r?r:null==a?void 0:a.default,type:o})})),[2]}}))},r=0,l=e,f.label=1;case 1:return r<l.length?(c=l[r],[5,o(c)]):[3,4];case 2:f.sent(),f.label=3;case 3:return r++,[3,1];case 4:if(!(0,k.hasHead)(t))throw new Error("Unable to create slots!");return[2,t]}}))}))}var Pt=function(e,t,n,i){return new(n||(n=Promise))((function(a,o){function r(e){try{s(i.next(e))}catch(e){o(e)}}function l(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,l)}s((i=i.apply(e,t||[])).next())}))},Ct=function(e,t){var n,i,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},r=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return r.next=l(0),r.throw=l(1),r.return=l(2),"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(l){return function(s){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,l[0]&&(o=0)),o;)try{if(n=1,i&&(a=2&l[0]?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,i=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){o=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){o.label=l[1];break}if(6===l[0]&&o.label<a[1]){o.label=a[1],a=l;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(l);break}a[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],i=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,s])}}};function Mt(e,t){return Pt(this,void 0,Promise,(function(){var n;return Ct(this,(function(i){switch(i.label){case 0:return[4,(0,s.dispatch)(Ot).openNewSocialMessageEditor(e,t)];case 1:return i.sent(),t.post?[2]:(n=e.postId)?[4,Lt(n)]:[2];case 2:return i.sent(),[2]}}))}))}function Lt(e){return Pt(this,void 0,Promise,(function(){var t;return Ct(this,(function(n){switch(n.label){case 0:return[4,(0,s.dispatch)(Ot).setRelatedPostStatus({type:"loading",postId:e})];case 1:return n.sent(),[4,u(m.store).getPost(e)];case 2:return(t=n.sent())?[3,4]:[4,(0,s.dispatch)(Ot).setRelatedPostStatus({type:"error",postId:e})];case 3:case 6:return n.sent(),[2];case 4:return[4,(0,s.dispatch)(Ot).setPost(t)];case 5:return n.sent(),[4,(0,s.dispatch)(Ot).setRelatedPostStatus({type:"ready"})]}}))}))}var At=function(){return At=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},At.apply(this,arguments)},Ot=(0,s.createReduxStore)("nelio-content/social-message-editor",{reducer:P,controls:s.controls,actions:At(At({},a),o),selectors:i});!function(e){(0,s.register)(e)}(Ot);const Vt=window.wp.components,Rt=window.wp.i18n;var Bt=function(){return[{dateType:c((function(e){return e(Ot).getDateType()})),dateValue:c((function(e){return e(Ot).getDateValue()}))},(0,s.useDispatch)(Ot).setDateTypeAndValue]},Dt=function(){return[{timeType:c((function(e){return e(Ot).getTimeType()})),timeValue:c((function(e){return e(Ot).getTimeValue()}))},(0,s.useDispatch)(Ot).setTimeTypeAndValue]},Ut=function(){return c((function(e){if("exact"===(0,e(Ot).getDateType)())return!1;var t=(0,e(Ot).getPost)();return!!t&&"publish"!==t.status}))},Ft=function(){return c((function(e){return e(Ot).getActiveSocialNetwork()}))},jt=function(e){return(0,g.doesNetworkSupport)(e,Ft())},qt=function(){return[c((function(e){return e(Ot).getActiveSocialNetwork()})),(0,s.useDispatch)(Ot).setActiveSocialNetwork]},Gt=function(){var e=Ft();return c((function(t){return t(Ot).getMessageTypeInNetwork(e)}))},zt=function(){return c((function(e){return e(Ot).getTypeByNetwork()}))},Ht=function(){return[c((function(e){return e(Ot).getValidationError()})),(0,s.useDispatch)(Ot).setValidationError]},Yt=function(){return c((function(e){return!!e(Ot).isNewMessage()}))},Wt=function(){return c((function(e){return!!e(Ot).isSaving()}))},$t=function(){return c((function(e){if(!(0,e(Ot).isNewMessage)())return!1;var t=(0,e(m.store).getSocialProfiles)();return 1<t.length||t.some((function(e){return(0,g.doesNetworkSupport)("multi-target",e.network)}))}))},Kt=function(){return[c((function(e){return e(Ot).areMediumTagsVisible()})),(0,s.useDispatch)(Ot).showMediumTags]},Qt=function(){return[c((function(e){return e(Ot).getTikTokSettings()})),(0,s.useDispatch)(Ot).setTikTokSettings]},Xt=function(){return[c((function(e){return e(Ot).areTikTokSettingsVisible()})),(0,s.useDispatch)(Ot).showTikTokSettings]};const Zt=window.wp.coreData;var Jt=function(){return c((function(e){return"loading"===e(Ot).getRelatedPostStatus().type}))},en=function(){var e=c((function(e){return e(Ot).getPost()})),t=(0,s.useDispatch)(Ot).setPost;return[e,c((function(e){return function(n){var i=e(m.store).getPost(n);i&&t(i)}}))]},tn=function(){return c((function(e){return e(Ot).getPostId()}))},nn=function(){return c((function(e){return e(Ot).getRelatedPostStatus()}))},an=function(e,t){return c((function(n){var i,a,o=n(Zt.store).getEntityRecord,r=null==t?void 0:t.type,l=r?o("root","postType",r):void 0;switch(e){case"author":return!!(null===(i=null==l?void 0:l.supports)||void 0===i?void 0:i.author);case"excerpt":return!!(null===(a=null==l?void 0:l.supports)||void 0===a?void 0:a.excerpt);default:return!1}}))},on=function(){return[c((function(e){return e(Ot).getText()})),(0,s.useDispatch)(Ot).setText]},rn=function(){var e=ln();return c((function(t){var n=t(Ot),i=n.getPost,a=n.getText;return(0,k.computeSocialMessageText)(e,i(),a())}))},ln=function(){return c((function(e){var t=e(Ot),n=t.getActiveSocialNetwork,i=t.getSelectedSocialNetworks,a=(0,d.filter)(function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}([n()],i(),!0));return(0,d.min)((0,d.map)(a,g.getCharLimitInNetwork))||(0,g.getMinCharLimit)()}))},sn=function(){return[c((function(e){return e(Ot).isPreviewVisible()})),(0,s.useDispatch)(Ot).showPreview]},cn=function(){var e=ln();return c((function(t){var n,i=t(m.store).getSocialProfile,a=t(Ot),o=a.getActiveSocialNetwork,r=a.getActiveSocialProfile,l=a.getDateType,s=a.getDateValue,c=a.getImageUrl,u=a.getPost,d=a.getText,g=a.getTimeType,p=a.getTimeValue,v=a.getVideoUrl,f=a.getMessageTypeInNetwork,_=o(),h=r(),w=(0,k.getSocialMessageSchedule)({baseDatetime:(0,k.getBaseDatetime)(u(),l()),dateValue:s(),timeType:g(),timeValue:p()});return{activeProfile:h?i(h):void 0,dateValue:s(),image:c(_),video:v(),postId:null===(n=u())||void 0===n?void 0:n.id,schedule:w,textComputed:(0,k.computeSocialMessageText)(e,u(),d()),timeValue:p(),type:f(_)}}))},un=function(e,t){var n=mn(e),i=en()[0],a=!!i&&gn(n,null==i?void 0:i.permalink),o=c((function(e){return n&&!a?e(m.store).getSharedLinkStatus(n):void 0}),[n,a]),r=c((function(e){return n&&!a?e(m.store).getSharedLinkData(n):void 0}),[n,a]);return n?a?{sharedLinkStatus:"ready",sharedLink:dn(i,t)}:{sharedLinkStatus:o||"loading",sharedLink:r}:{sharedLinkStatus:"no-url"}},mn=function(e){var t=ln();return c((function(n){var i=n(Ot),a=i.getPost,o=i.getText,r=a(),l=(0,k.computeSocialMessageText)(t,r,o()),s=(0,k.getAllUrls)(l);return"first"===e?(0,d.head)(s):(0,d.last)(s)}))},dn=function(e,t){return{author:e.authorName,date:e.date||"",domain:(e.permalink||"").replace(/^https?:\/\//,"").replace(/\/.*$/,""),email:"",excerpt:e.excerpt,image:!!t&&e.networkImages[t]||e.imageSrc||"",permalink:e.permalink,responseCode:200,title:e.title,twitter:""}},gn=function(e,t){return!!e&&!!t&&e.replace(/^https?:\/\//,"http://")===t.replace(/^https?:\/\//,"http://")},pn=function(){return c((function(e){var t=(0,e(Ot).getDisabledProfileIds)();return(0,d.filter)(e(m.store).getSocialProfiles(),(function(e){var n=e.id;return!t.includes(n)}))}))},vn=function(){var e=c((function(e){return e(Ot).getSelectedSocialProfiles()})),t=(0,s.useDispatch)(Ot).selectSocialProfile;return[e,function(n){return t(n,!e.includes(n))}]},fn=function(){return[c((function(e){return e(Ot).isRecurrenceEnabled()})),(0,s.useDispatch)(Ot).enableRecurrence]},hn=function(){return[c((function(e){return e(Ot).isEditingRecurrenceSettings()})),(0,s.useDispatch)(Ot).editRecurrenceSettings]},wn=function(){return[c((function(e){return e(Ot).getRecurrenceSettings()})),(0,s.useDispatch)(Ot).setRecurrenceSettings]},En=function(){return[c((function(e){return e(Ot).getRecurrenceContext()})),(0,s.useDispatch)(Ot).setRecurrenceContext]},yn=function(e){return c((function(t){var n=t(Ot).getSelectedTargetsInProfile;return e?n(e):[]}))},bn=function(e,t){return!e||!t.length||t.includes(e)},kn=function(){var e=(0,l.useRef)(null),t=Ft(),n=(0,l.useState)(""),i=n[0],a=n[1],o=(0,l.useState)(void 0),r=o[0],c=o[1],u=(0,s.useDispatch)(Ot),m=u.setImages,g=u.showImageUrlSelector;(0,l.useEffect)((function(){if(null==e?void 0:e.current){var t=function(){var t;return(null===(t=e.current)||void 0===t?void 0:t.src)===i&&(0,k.isUrl)(i)&&c(i)};return e.current.addEventListener("load",t),function(){var n;return null===(n=e.current)||void 0===n?void 0:n.removeEventListener("load",t)}}}),[i]);var p=function(){return g(!1)};return l.createElement(Vt.Modal,{className:"nelio-content-social-message-image-url-dialog",title:(0,Rt._x)("Add Image","text","nelio-content"),onRequestClose:p},l.createElement("div",{className:"nelio-content-social-message-image-url-dialog__content"},l.createElement(Vt.TextControl,{value:i,onChange:function(e){a((0,d.trim)(e)),c(void 0)},placeholder:"https://…"}),l.createElement("img",{ref:e,alt:(0,Rt._x)("Image Preview","text","nelio-content"),src:i,style:{display:"none"}}),r&&l.createElement("div",{className:"nelio-content-social-message-image-url-dialog__image",style:{backgroundImage:"url(".concat(r,")")}})),l.createElement("div",{className:"nelio-content-social-message-image-url-dialog__actions"},l.createElement(Vt.Button,{variant:"secondary",onClick:p},(0,Rt._x)("Cancel","command","nelio-content")),l.createElement(Vt.Button,{variant:"primary",onClick:function(){r&&(m(t,[void 0],[r]),p())},disabled:!r},(0,Rt._x)("Add Image","command","nelio-content"))))},xn=function(){var e=(0,m.useAdminUrl)("admin.php",{page:"nelio-content-settings",subpage:"social--profiles"}),t=(0,s.useDispatch)(Ot).close;return l.createElement(Vt.Modal,{className:"nelio-content-connect-profile-warning",title:(0,Rt._x)("Social Profiles","text","nelio-content"),onRequestClose:t},l.createElement("div",{className:"nelio-content-connect-profile-warning__content"},(0,Rt._x)("Nelio Content helps you to engage with your audience by sharing your WordPress content on social media. Connect one or more social profiles and then refresh this page to use them.","user","nelio-content")),l.createElement("div",{className:"nelio-content-connect-profile-warning__actions"},l.createElement(Vt.ExternalLink,{className:"components-button is-primary",href:e,onClick:t},(0,Rt._x)("Connect Profiles","command","nelio-content"))))};const Nn=window.NelioContent.components;var Sn=[{title:(0,Rt._x)("Social Message Editor","text","nelio-content"),intro:(0,Rt._x)("Welcome to the social message editor. Use it to create and schedule social messages that will be automatically shared by Nelio Content when the right time comes.","user","nelio-content")},{title:(0,Rt._x)("Profile Selector","text","nelio-content"),intro:(0,Rt._x)("This is your profile selector, where you can select the profiles in which your social message will be shared. Please notice you can schedule the same social message on multiple accounts at once.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-multiple-profile-selector")},element:function(){return document.querySelector(".nelio-content-multiple-profile-selector")}},{title:(0,Rt._x)("Profile Selector","text","nelio-content"),intro:(0,Rt._x)("Click on the accounts you’re interested in to toggle their selection. When a profile is selected, it’ll be properly highlighted.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-multiple-profile-selector")},element:function(){return document.querySelector(".nelio-content-multiple-profile-selector__profile-input-field")}},{title:(0,Rt._x)("Profile Selector","text","nelio-content"),intro:(0,Rt._x)("If you want to select profiles from a different network, switch to the desired network here. Nelio Content will keep track of the social profiles you’ve already selected, which means the same message can be shared on different profiles from different networks.","user","nelio-content"),active:function(){return 1<document.querySelectorAll(".nelio-content-multiple-profile-selector .nelio-content-multiple-profile-selector__network").length},element:function(){return document.querySelectorAll(".nelio-content-multiple-profile-selector .nelio-content-multiple-profile-selector__network")[1]||null}},{title:(0,Rt._x)("Profile Selector","text","nelio-content"),intro:(0,Rt._x)("When editing an existing social message, use this selector to change the social account in which it should be shared.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-single-profile-selector")},element:function(){return document.querySelector(".nelio-content-single-profile-selector")}},{title:(0,Rt._x)("Social Message","text","nelio-content"),intro:(0,Rt._x)("Use this text area to write and customize your social message. You can write hashtags and X mentions.","user","nelio-content"),element:function(){return document.querySelector(".nelio-content-social-message-editor__message-editor")}},{title:(0,Rt._x)("Social Message","text","nelio-content"),intro:(0,Rt._x)("Social networks usually impose certain limits on the maximum number of characters a message can have. This counter will let you know when you’re about to reach the limit.","user","nelio-content"),element:function(){return document.querySelector(".nelio-content-social-char-counter")}},{title:(0,Rt._x)("Quick Actions","text","nelio-content"),intro:(0,Rt._x)("The icons before the character counter are quick actions you can use to tweak your message and/or preview it. Hover over each action to reveal its purpose. Also, if you want to share the social message with an image, you can do so using the “Add Image” action.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-social-message-editor__quick-actions")},element:function(){return document.querySelector(".nelio-content-social-message-editor__quick-actions")}},{title:(0,Rt._x)("Message Preview","text","nelio-content"),intro:(0,Rt._x)("Use this action to enable the message preview, which will show you an approximation of the look and feel the message will have when it’s finally published on the selected social media accounts.","user","nelio-content"),active:function(){return!document.querySelector(".nelio-content-social-message-preview")},element:function(){return document.querySelector(".nelio-content-social-message-editor__quick-action--is-preview")}},{title:(0,Rt._x)("Message Preview","text","nelio-content"),intro:(0,Rt._x)("This area shows an approximated preview of the look and feel the message will have when it’s finally published on the selected social media accounts.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-social-message-preview")},element:function(){return document.querySelector(".nelio-content-social-message-preview")}},{title:(0,Rt._x)("Schedule","text","nelio-content"),intro:(0,Rt._x)("Finally, use these two settings to schedule the publication date and time of your social message.","user","nelio-content"),element:function(){return document.querySelector(".nelio-content-social-message-editor__schedule-options")}}],Tn=function(){var e=Yt(),t=Ln(),n=Pn(),i=Ht()[0],a=Wt(),o=(0,s.useDispatch)(Ot),r=o.close,c=o.saveAndClose;return l.createElement("div",{className:"nelio-content-social-message-editor__actions"},!!i&&l.createElement("div",{className:"nelio-content-social-message-editor__error-summary"},l.createElement("span",null,l.createElement(Vt.Dashicon,{icon:"warning"})),l.createElement("span",null,i)),l.createElement(Vt.Button,{variant:"secondary",disabled:a,onClick:r},(0,Rt._x)("Cancel","command","nelio-content")),n?l.createElement(In,null):l.createElement(Nn.SaveButton,{variant:"primary",disabled:e?void 0:!t,error:i,isSaving:a,isUpdate:!e,onClick:c}))},In=function(){var e=Yt(),t=Ln(),n=(0,l.useState)(!1),i=n[0],a=n[1],o=Ht()[0],r=Wt(),c=(0,s.useDispatch)(Ot).saveAndClose;return l.createElement(l.Fragment,null,i&&l.createElement(Vt.Modal,{title:(0,Rt._x)("Recurring Message Update","text","nelio-content"),isDismissible:!1,onRequestClose:function(){}},l.createElement("div",{className:"nelio-content-social-message-editor__recurring-dialog"},l.createElement(Vt.Button,{variant:"secondary",onClick:function(){return a(!1),c("removing-recurrence")}},(0,Rt._x)("Save This Message","command","nelio-content")),l.createElement(Vt.Button,{variant:"primary",onClick:function(){return a(!1),c()}},(0,Rt._x)("Save This and Following Messages","command","nelio-content")))),l.createElement(Nn.SaveButton,{variant:"primary",disabled:e?void 0:!t,error:o,isSaving:r,isUpdate:!e,onClick:function(){return a(!0)}}))},Pn=function(){var e=Cn(),t=Yt(),n=fn()[0],i=Mn();return!(t||!n||"post"===e||(0,k.isRecurringMessage)(i)&&(0,k.isRecurringSource)(i))},Cn=function(){return c((function(e){return e(Ot).getEditorContext()}))},Mn=function(){return c((function(e){return e(m.store).getSocialMessage(e(Ot).getId())}))},Ln=function(){var e=Mn();return c((function(t){var n,i;if(t(Ot),!e)return!0;var a=t(Ot).getSelectedSocialProfiles()[0],o={profileId:a,targetName:a?null===(n=t(Ot).getSelectedTargetsInProfile(a))||void 0===n?void 0:n[0]:void 0,text:t(Ot).getText(),tags:t(Ot).getMediumTags(),postId:null===(i=t(Ot).getPost())||void 0===i?void 0:i.id,dateType:t(Ot).getDateType(),dateValue:t(Ot).getDateValue(),timeType:t(Ot).getTimeType(),timeValue:t(Ot).getTimeValue(),image:t(Ot).hasExplicitImage()?t(Ot).getImageUrl():void 0,video:t(Ot).getVideoUrl()},r=t(Ot).isRecurrenceEnabled()?t(Ot).getRecurrenceSettings():void 0;if(!(0,d.isEqual)(e.recurrenceSettings,r))return!0;var l=(0,d.mapValues)(o,(function(t,n){return e[n]!==t}));return(0,d.some)((0,d.values)(l))}))},An=function(e){var t=e.disabled,n=(0,s.useDispatch)(Ot).resetDateTime;return l.createElement("div",{className:"nelio-content-social-message-editor__reset-date-button"},l.createElement(Vt.Button,{variant:"link",disabled:t,onClick:function(){return n()}},(0,Rt._x)("Change","command","nelio-content")))},On=function(e){var t=e.disabled,n=Bt(),i=n[0].dateValue,a=n[1],o=(0,m.useToday)();return l.createElement(Vt.BaseControl,{id:"nelio-content-social-message-editor__date-selector",label:(0,Rt._x)("Date","text","nelio-content")},l.createElement("div",{className:"nelio-content-social-message-editor__date-selector"},l.createElement(Nn.DateInput,{disabled:t,value:i||"",min:o,onChange:function(e){return a("exact",null!=e?e:"")}}),l.createElement(An,{disabled:t})))},Vn=function(e){var t=e.disabled,n=Bt(),i=n[0].dateValue,a=n[1],o=Ut();return l.createElement(Vt.BaseControl,{id:"nelio-content-social-message-editor__date-selector",label:(0,Rt._x)("Date","text","nelio-content")},l.createElement("div",{className:"nelio-content-social-message-editor__date-selector"},(0,l.createInterpolateElement)(Rn(o),{input:l.createElement(Nn.NumberControl,{className:"nelio-content-social-message-editor__positive-days-selector",disabled:t,value:i,min:2,onChange:function(e){return a("positive-days",void 0===e?"":"".concat(e))}})}),l.createElement(An,{disabled:t})))},Rn=function(e){return e?(0,Rt.sprintf)(/* translators: number of days */ /* translators: number of days */
(0,Rt._x)("%s days after publication.","text","nelio-content"),"<input/>"):(0,Rt.sprintf)(/* translators: number of days */ /* translators: number of days */
(0,Rt._x)("In %s days.","text","nelio-content"),"<input/>")},Bn=function(e){var t=e.disabled,n=Bt(),i=n[0].dateValue,a=n[1],o=Ut();return l.createElement(Vt.BaseControl,{id:"nelio-content-social-message-editor__date-selector",label:(0,Rt._x)("Date","text","nelio-content")},l.createElement("div",{className:"nelio-content-social-message-editor__date-selector"},l.createElement(Vt.SelectControl,{disabled:t,options:o?Un:Dn,value:null!=i?i:"",onChange:function(e){"positive-days"===e||"exact"===e?a(e,""):a("predefined-offset",e)}})))},Dn=[{value:"0",label:(0,Rt._x)("Today","text","nelio-content")},{value:"1",label:(0,Rt._x)("Tomorrow","text","nelio-content")},{value:"7",label:(0,Rt._x)("Next week","text","nelio-content")},{value:"28",label:(0,Rt._x)("Next month","text","nelio-content")},{value:"positive-days",label:(0,Rt._x)("In __ days","text","nelio-content")},{value:"exact",label:(0,Rt._x)("Choose a custom date…","user","nelio-content")}],Un=[{value:"0",label:(0,Rt._x)("Same day as publication","text","nelio-content")},{value:"1",label:(0,Rt._x)("The day after publication","text","nelio-content")},{value:"7",label:(0,Rt._x)("A week after publication","text","nelio-content")},{value:"28",label:(0,Rt._x)("A month after publication","text","nelio-content")},{value:"positive-days",label:(0,Rt._x)("__ days after publication","text","nelio-content")},{value:"exact",label:(0,Rt._x)("Choose a custom date…","user","nelio-content")}],Fn=function(e){var t=e.disabled;switch(Bt()[0].dateType){case"exact":return l.createElement(On,{disabled:t});case"positive-days":return l.createElement(Vn,{disabled:t});default:return l.createElement(Bn,{disabled:t})}},jn=function(){var e=Bt()[0].dateValue,t=Dt()[0].timeValue,n=on()[0],i=rn(),a=tn(),o=Ft(),r=vn()[0],s=c((function(e){return r.map((function(t){return e(m.store).getSocialProfile(t)})).filter((function(e){return!!e}))})),u=c((function(e){return e(Ot).getSelectedTargets()})),p=zt(),v=Qt()[0],f=Ht(),_=(f[0],f[1]),h=c((function(e){var t=e(Ot).getImageId();if(t)return(0,d.isArray)(t)?t.map((function(t){return e(m.store).getMedia(t)})).filter((function(e){return!!e})):e(m.store).getMedia(t)})),w=c((function(e){var t=e(Ot).getVideoId();if(t)return(0,d.isArray)(t)?t.map((function(t){return e(m.store).getMedia(t)})).filter((function(e){return!!e})):e(m.store).getMedia(t)}));return(0,l.useEffect)(qn((function(){var r;if(s.length)if(n.includes("{highlight}"))_((0,Rt.sprintf)(/* translators: a placeholder */ /* translators: a placeholder */
(0,Rt._x)("Please remove %s (social template only)","user","nelio-content"),"{highlight}"));else if(n.includes("{phrase}"))_((0,Rt.sprintf)(/* translators: a placeholder */ /* translators: a placeholder */
(0,Rt._x)("Please remove %s, as it can only be used in social templates","user","nelio-content"),"{phrase}"));else if(e)if(t){for(var l=(0,d.find)(s,{network:o}),c=0,m=l?function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}([l],s,!0):s;c<m.length;c++){var f=m[c],E=(0,g.getRequirementsError)({network:f.network,postId:a,targetName:null===(r=u[f.id])||void 0===r?void 0:r[0],textComputed:i,type:p[f.network],tiktokSettings:v,image:h,video:w});if(E)return void _(E)}_("")}else _((0,Rt._x)("Please specify a time","user","nelio-content"));else _((0,Rt._x)("Please specify a date","user","nelio-content"));else _((0,Rt._x)("Please select a social profile","user","nelio-content"))})),[e,h,o,a,r,u,i,t,v,p,w]),null},qn=function(e){return function(){e()}};function Gn(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Gn(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}const zn=function(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Gn(e))&&(i&&(i+=" "),i+=t);return i};var Hn=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},Yn=function(e){var t=e.disabled,n=qt()[0],i=jt("medium-tags"),a=Kt()[0],o=[c((function(e){return e(Ot).getMediumTags()})),(0,s.useDispatch)(Ot).setMediumTags],r=o[0],u=o[1];return i&&a?l.createElement("div",{className:zn({"nelio-content-social-message-editor__medium-tags-selector":!0})},l.createElement(Vt.FormTokenField,{label:(0,Rt._x)("Medium Tags","text","nelio-content"),disabled:t,maxLength:(0,g.getTagsLimitInNetwork)(n),value:r?Hn([],r,!0):[],suggestions:[],onChange:function(e){return u(e)}})):null},Wn=function(e){var t=e.disabled,n=jt("text"),i=on(),a=i[0],o=i[1],r=$t();return n?l.createElement("div",{className:zn({"nelio-content-social-message-editor__message-editor":!0,"nelio-content-social-message-editor__message-editor--is-merged-with-social-profile-selector":r})},l.createElement(Vt.TextareaControl,{disabled:t,value:a,onChange:function(e){return o(e)},placeholder:(0,Rt._x)("Your status update…","text","nelio-content")})):null};const $n=window.NelioContent.date;var Kn=function(){return l.createElement("div",{className:"nelio-content-shared-link-loader"},l.createElement(Vt.Spinner,null))},Qn=function(){var e=un("last","bluesky"),t=e.sharedLinkStatus,n=e.sharedLink,i=void 0===n?{}:n,a=i.title,o=i.excerpt,r=i.image,s=i.domain;switch(t){case"loading":return l.createElement(Kn,null);case"ready":return l.createElement("div",{className:"nelio-content-bluesky-shared-link"},!!r&&l.createElement("img",{className:"nelio-content-bluesky-shared-link__image",alt:(0,Rt._x)("Featured image in shared link","text","nelio-content"),src:r}),l.createElement("div",{className:"nelio-content-bluesky-shared-link__content"},l.createElement("div",{className:"nelio-content-bluesky-shared-link__domain"},s),l.createElement("div",{className:"nelio-content-bluesky-shared-link__title"},a),!!o&&l.createElement("div",{className:"nelio-content-bluesky-shared-link__excerpt"},o)));default:return null}},Xn=function(){return Xn=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Xn.apply(this,arguments)},Zn=function(e){var t=e.activeProfile,n=t.id,i=t.displayName,a=t.username,o=e.dateValue,r=e.schedule,s=e.textComputed,c=e.timeValue,u=e.type;return l.createElement("div",{className:"nelio-content-social-message-bluesky-preview"},l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__profile"},l.createElement(Nn.SocialProfileIcon,{profileId:n,isNetworkHidden:!0}),l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__name-info"},l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__display-name"},i),l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__username"},"@",a))),l.createElement(Nn.SocialMessageTextPreview,{value:s,linkBeautifier:function(e){var t=e.replace(/^(https?:\/\/[^\/]+.{0,15}).*/,"$1");return t===e?t.replace(/^https?:\/\//,""):t.replace(/^https?:\/\//,"")+"…"}}),"image"===u?l.createElement(Jn,Xn({},e)):l.createElement(Qn,null),l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__date"},!!o&&!!c&&(0,$n.dateI18n)((0,Rt._x)("g:i A · d M Y","text (Bluesky preview date)","nelio-content"),r),!!o&&!c&&(0,$n.dateI18n)((0,Rt._x)("d M Y","text (Bluesky preview date)","nelio-content"),r),!o&&(0,Rt._x)("Someday","text","nelio-content")))},Jn=function(e){var t=e.image,n=e.type,i=(0,d.compact)(function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}([],(0,d.castArray)(null!=t?t:[]),!0));return"image"===n&&i.length>=4?l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-group nelio-content-social-message-bluesky-preview__media-group--vertical"},l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-pair"},l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-bluesky-preview__image nelio-content-social-message-bluesky-preview__image--top-left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:i[0]})),l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-bluesky-preview__image nelio-content-social-message-bluesky-preview__image--top-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:i[1]}))),l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-pair"},l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-bluesky-preview__image nelio-content-social-message-bluesky-preview__image--bottom-left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:i[2]})),l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-bluesky-preview__image nelio-content-social-message-bluesky-preview__image--bottom-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:i[3]})))):"image"===n&&3===i.length?l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-group"},l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-bluesky-preview__image nelio-content-social-message-bluesky-preview__image--left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:i[0]})),l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-pair nelio-content-social-message-bluesky-preview__media-pair--vertical"},l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-bluesky-preview__image nelio-content-social-message-bluesky-preview__image--top-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:i[1]})),l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-bluesky-preview__image nelio-content-social-message-bluesky-preview__image--bottom-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:i[2]})))):"image"===n&&2===i.length?l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-pair"},l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-bluesky-preview__image nelio-content-social-message-bluesky-preview__image--left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:i[0]})),l.createElement("div",{className:"nelio-content-social-message-bluesky-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-bluesky-preview__image nelio-content-social-message-bluesky-preview__image--right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:i[1]}))):l.createElement("img",{className:"nelio-content-social-message-bluesky-preview__image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:i[0]})},ei=function(){var e=un("last"),t=e.sharedLinkStatus,n=e.sharedLink,i=void 0===n?{}:n,a=i.title,o=i.image,r=i.excerpt;switch(t){case"loading":return l.createElement(Kn,null);case"ready":return l.createElement("div",{className:"nelio-content-discord-shared-link"},l.createElement("div",{className:"nelio-content-discord-shared-link__title"},a),l.createElement("div",{className:"nelio-content-discord-shared-link__excerpt"},r),!!o&&l.createElement("img",{className:"nelio-content-discord-shared-link__image",alt:(0,Rt._x)("Featured image in shared link","text","nelio-content"),src:o}));default:return null}};const ti=window.React;var ni;function ii(){return ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ii.apply(null,arguments)}const ai=function(e){return ti.createElement("svg",ii({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 40 40"},e),ni||(ni=ti.createElement("path",{fill:"inherit",d:"M20 2.5C10.335 2.5 2.5 10.335 2.5 20S10.335 37.5 20 37.5c5.532 0 10.457-2.574 13.664-6.582l-2.97-2.285C28.172 31.75 24.321 33.75 20 33.75c-7.594 0-13.75-6.156-13.75-13.75S12.406 6.25 20 6.25c3.146 0 6.036 1.069 8.352 2.848l-8.63 8.629-4.867-4.868-2.285 2.286 4.868 4.867 2.285 2.285 2.285-2.285 8.668-8.668 2.66-2.66q-.531-.623-1.121-1.188a18 18 0 0 0-1.201-1.06C28.005 3.986 24.182 2.5 20 2.5m14.428 9.598a1.886 1.886 0 0 0-1.885 1.884 1.886 1.886 0 0 0 1.885 1.887 1.886 1.886 0 0 0 1.886-1.887 1.886 1.886 0 0 0-1.886-1.884m1.187 6.017A1.886 1.886 0 0 0 33.73 20a1.886 1.886 0 0 0 1.886 1.885A1.886 1.886 0 0 0 37.5 20a1.886 1.886 0 0 0-1.885-1.885m-1.209 6.102a1.886 1.886 0 0 0-1.885 1.885 1.886 1.886 0 0 0 1.885 1.884 1.886 1.886 0 0 0 1.887-1.884 1.886 1.886 0 0 0-1.887-1.885"})))};var oi=function(){return oi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},oi.apply(this,arguments)},ri=function(e){var t=e.activeProfile.username,n=e.dateValue,i=e.schedule,a=e.textComputed,o=e.timeValue,r=e.type;return l.createElement("div",{className:"nelio-content-social-message-discord-preview"},l.createElement("div",{className:"nelio-content-social-message-discord-preview__header"},l.createElement("div",{className:"nelio-content-social-message-discord-preview__display-name"},"# ",t)),l.createElement("div",{className:"nelio-content-social-message-discord-preview__app"},l.createElement(ai,{className:"nelio-content-social-message-discord-preview__app-logo"}),l.createElement("div",{className:"nelio-content-social-message-discord-preview__message-text"},l.createElement("div",{className:"nelio-content-social-message-discord-preview__app-info"},l.createElement("div",{className:"nelio-content-social-message-discord-preview__app-name"},"Nelio Content"),l.createElement("div",{className:"nelio-content-social-message-discord-preview__app-tag"},"APP"),l.createElement("div",{className:"nelio-content-social-message-discord-preview__date"},!!n&&!!o&&(0,$n.dateI18n)((0,Rt._x)("g:i A · d M Y","text (Discord preview date)","nelio-content"),i),!!n&&!o&&(0,$n.dateI18n)((0,Rt._x)("d M Y","text (Discord preview date)","nelio-content"),i),!n&&(0,Rt._x)("Someday","text","nelio-content"))),l.createElement(Nn.SocialMessageTextPreview,{value:a,linkBeautifier:function(e){var t=e.replace(/^(https?:\/\/[^\/]+.{0,15}).*/,"$1");return t===e?t.replace(/^https?:\/\//,""):t.replace(/^https?:\/\//,"")+"…"}}))),["image","multi-image"].includes(r)?l.createElement(li,oi({},e)):l.createElement(ei,null))},li=function(e){var t=e.image,n=(0,d.compact)(function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}([],(0,d.castArray)(null!=t?t:[]),!0));return l.createElement(l.Fragment,null,n.map((function(e,t){return l.createElement("div",{className:"nelio-content-discord-shared-link",key:t},l.createElement("img",{className:"nelio-content-discord-shared-link__image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:e}))})))},si=function(){var e=un("first","facebook"),t=e.sharedLinkStatus,n=e.sharedLink,i=void 0===n?{}:n,a=i.title,o=i.excerpt,r=i.image,s=i.domain;switch(t){case"loading":return l.createElement(Kn,null);case"ready":return l.createElement("div",{className:"nelio-content-facebook-shared-link"},!!r&&l.createElement("img",{className:"nelio-content-facebook-shared-link__image",alt:(0,Rt._x)("Featured image in shared link","text","nelio-content"),src:r}),l.createElement("div",{className:"nelio-content-facebook-shared-link__content"},l.createElement("div",{className:"nelio-content-facebook-shared-link__domain"},s),l.createElement("div",{className:"nelio-content-facebook-shared-link__title"},a),!!o&&l.createElement("div",{className:"nelio-content-facebook-shared-link__excerpt"},o)));default:return null}},ci=function(e){var t=e.activeProfile,n=t.id,i=t.displayName,a=e.image,o=e.schedule,r=e.textComputed,s=e.type,c=(0,d.compact)(function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}([],(0,d.castArray)(null!=a?a:[]),!0));return l.createElement("div",{className:"nelio-content-social-message-facebook-preview"},l.createElement("div",{className:"nelio-content-social-message-facebook-preview__profile-and-date"},l.createElement(Nn.SocialProfileIcon,{profileId:n,isNetworkHidden:!0}),l.createElement("div",{className:"nelio-content-social-message-facebook-preview__name"},l.createElement("div",{className:"nelio-content-social-message-facebook-preview__display-name"},i)),l.createElement("div",{className:"nelio-content-social-message-facebook-preview__date"},(0,$n.dateI18n)((0,Rt._x)("F j, Y","text (Facebook preview date)","nelio-content"),o))),l.createElement(Nn.SocialMessageTextPreview,{value:r,linkBeautifier:function(e){var t=e.replace(/^(https?:\/\/[^\/]+.{0,15}).*/,"$1");return t===e?t.replace(/^https?:\/\//,""):t.replace(/^https?:\/\//,"")+"…"}}),"image"===s&&c.length?l.createElement("img",{className:"nelio-content-social-message-facebook-preview__image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:c[0]}):l.createElement(si,null))},ui=function(){var e=un("first","gmb"),t=e.sharedLinkStatus,n=e.sharedLink,i=(void 0===n?{}:n).image;switch(t){case"loading":return l.createElement(Kn,null);case"ready":return i?l.createElement("img",{className:"nelio-content-social-message-gmb-preview__image",alt:(0,Rt._x)("Featured image in shared link","text","nelio-content"),src:i}):null;default:return null}},mi=function(){return mi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},mi.apply(this,arguments)},di=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},gi=function(e){var t=e.activeProfile,n=t.id,i=t.displayName,a=e.schedule,o=e.textComputed,r=e.type;return l.createElement("div",{className:"nelio-content-social-message-gmb-preview"},l.createElement("div",{className:"nelio-content-social-message-gmb-preview__profile-and-date"},l.createElement(Nn.SocialProfileIcon,{profileId:n,isNetworkHidden:!0}),l.createElement("div",{className:"nelio-content-social-message-gmb-preview__name"},l.createElement("div",{className:"nelio-content-social-message-gmb-preview__display-name"},i)),l.createElement("div",{className:"nelio-content-social-message-gmb-preview__date"},(0,$n.dateI18n)((0,Rt._x)("F j, Y","text (Google My Business preview date)","nelio-content"),a))),["image","video","multi-media"].includes(r)?l.createElement(pi,mi({},e)):l.createElement(ui,null),l.createElement(Nn.SocialMessageTextPreview,{value:o,linkBeautifier:function(e){var t=e.replace(/^(https?:\/\/[^\/]+.{0,15}).*/,"$1");return t===e?t.replace(/^https?:\/\//,""):t.replace(/^https?:\/\//,"")+"…"}}))},pi=function(e){var t,n=e.image,i=e.video,a=(0,l.useState)(0),o=a[0],r=a[1],s=(0,d.compact)(di(di([],(0,d.castArray)(null!=n?n:[]),!0),(0,d.castArray)(null!=i?i:[]),!0));return(0,l.useEffect)((function(){o>s.length-1&&r(0)}),[s]),l.createElement("div",{className:"nelio-content-social-message-gmb-preview__container"},!!s.length&&(n===(t=s[o])||(0,d.isArray)(n)&&n.includes(t))&&l.createElement("img",{className:"nelio-content-social-message-gmb-preview__actual-image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:s[o]}),!!s.length&&function(e){return i===e||(0,d.isArray)(i)&&i.includes(e)}(s[o])&&l.createElement("video",{className:"nelio-content-social-message-gmb-preview__actual-image",src:s[o],autoPlay:!0,loop:!0,muted:!0}),s.length>1&&0!==o&&l.createElement(Vt.Button,{className:"nelio-content-social-message-gmb-preview__previous-image-action",icon:"arrow-left-alt2",onClick:function(){return r(o-1)}}),s.length>1&&o!==s.length-1&&l.createElement(Vt.Button,{className:"nelio-content-social-message-gmb-preview__next-image-action",icon:"arrow-right-alt2",onClick:function(){return r(o+1)}}))},vi=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},fi=function(e){var t,n=e.activeProfile,i=n.id,a=n.displayName,o=e.image,r=e.video,s=e.schedule,c=e.textComputed,u=(0,l.useState)(0),m=u[0],g=u[1],p=(0,d.compact)(vi(vi([],(0,d.castArray)(null!=o?o:[]),!0),(0,d.castArray)(null!=r?r:[]),!0));return(0,l.useEffect)((function(){m>p.length-1&&g(0)}),[p]),l.createElement("div",{className:"nelio-content-social-message-instagram-preview"},l.createElement("div",{className:"nelio-content-social-message-instagram-preview__image"},!p.length&&l.createElement("div",{className:"nelio-content-social-message-instagram-preview__image-placeholder"},l.createElement(Vt.Dashicon,{className:"nelio-content-social-message-instagram-preview__image-icon",icon:"format-image"})),!!p.length&&(o===(t=p[m])||(0,d.isArray)(o)&&o.includes(t))&&l.createElement("img",{className:"nelio-content-social-message-instagram-preview__actual-image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:p[m]}),!!p.length&&function(e){return r===e||(0,d.isArray)(r)&&r.includes(e)}(p[m])&&l.createElement("video",{className:"nelio-content-social-message-instagram-preview__actual-image",src:p[m],autoPlay:!0,loop:!0,muted:!0}),p.length>1&&0!==m&&l.createElement(Vt.Button,{className:"nelio-content-social-message-instagram-preview__previous-image-action",icon:"arrow-left-alt2",onClick:function(){return g(m-1)}}),p.length>1&&m!==p.length-1&&l.createElement(Vt.Button,{className:"nelio-content-social-message-instagram-preview__next-image-action",icon:"arrow-right-alt2",onClick:function(){return g(m+1)}}),p.length>1&&l.createElement("div",{className:"nelio-content-social-message-instagram-preview__image-dots"},(0,d.range)(0,p.length).map((function(e){return l.createElement("div",{key:e,className:zn("nelio-content-social-message-instagram-preview__image-dot",{"nelio-content-social-message-instagram-preview__image-dot--current":m===e})})})))),l.createElement("div",{className:"nelio-content-social-message-instagram-preview__content"},l.createElement("div",{className:"nelio-content-social-message-instagram-preview__profile-and-name"},l.createElement(Nn.SocialProfileIcon,{profileId:i,isNetworkHidden:!0}),l.createElement("div",{className:"nelio-content-social-message-instagram-preview__display-name"},a)),l.createElement(Nn.SocialMessageTextPreview,{value:c,linkBeautifier:function(e){return e.replace(/https?:\/\/([^\/]+).*/,"$1")}}),l.createElement("div",{className:"nelio-content-social-message-instagram-preview__date"},(0,$n.dateI18n)((0,Rt._x)("F j, Y","text (Instagram preview date)","nelio-content"),s))))},_i=n(3503),hi=n.n(_i),wi=function(){var e=un("first","linkedin"),t=e.sharedLinkStatus,n=e.sharedLink,i=void 0===n?{}:n,a=i.domain,o=i.image,r=i.title;switch(t){case"loading":return l.createElement(Kn,null);case"no-url":case"ready":return l.createElement("div",{className:"nelio-content-linkedin-shared-link"},o?l.createElement("img",{className:"nelio-content-linkedin-shared-link__image",alt:(0,Rt._x)("Featured image in shared link","text","nelio-content"),src:o}):l.createElement("br",null),l.createElement("div",{className:"nelio-content-linkedin-shared-link__content"},l.createElement("div",{className:"nelio-content-linkedin-shared-link__title"},r),l.createElement("div",{className:"nelio-content-linkedin-shared-link__signature"},a)));default:return null}},Ei=function(){return Ei=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ei.apply(this,arguments)},yi=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},bi=function(e){var t=e.activeProfile,n=t.id,i=t.displayName,a=e.schedule,o=e.textComputed,r=e.type;return l.createElement("div",{className:"nelio-content-social-message-linkedin-preview"},l.createElement("div",{className:"nelio-content-social-message-linkedin-preview__profile-and-date"},l.createElement(Nn.SocialProfileIcon,{profileId:n,isNetworkHidden:!0}),l.createElement("div",{className:"nelio-content-social-message-linkedin-preview__name-and-date"},l.createElement("div",{className:"nelio-content-social-message-linkedin-preview__display-name"},i),l.createElement("div",{className:"nelio-content-social-message-linkedin-preview__date"},(0,$n.dateI18n)((0,Rt._x)("F j, Y","LinkedIn preview date","nelio-content"),a)))),l.createElement(Nn.SocialMessageTextPreview,{value:o,linkBeautifier:function(e){return"https://lnkd.in/"+xi(e)}}),["image","video"].includes(r)?l.createElement(ki,Ei({},e)):l.createElement(wi,null))},ki=function(e){var t=e.image,n=e.video,i=e.type,a=(0,d.compact)(yi([],(0,d.castArray)(null!=t?t:[]),!0)),o=(0,d.compact)(yi([],(0,d.castArray)(null!=n?n:[]),!0));if("video"===i)return l.createElement("video",{className:"nelio-content-social-message-linkedin-preview__image",src:o[0],autoPlay:!0,controls:!0,loop:!0,muted:!0});if(a.length>1){var r=(0,d.take)(a,4);return l.createElement("div",{className:zn("nelio-content-social-message-linkedin-preview__image-container",{"nelio-content-social-message-linkedin-preview__image-container--two-images":2===r.length,"nelio-content-social-message-linkedin-preview__image-container--three-images":3===r.length,"nelio-content-social-message-linkedin-preview__image-container--four-images":4===r.length})},r.map((function(e,t){return l.createElement("div",{key:t,className:"nelio-content-social-message-linkedin-preview__container-item"},l.createElement("img",{className:"nelio-content-social-message-linkedin-preview__image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:e}),t===r.length-1&&r.length<a.length&&l.createElement("div",{className:"nelio-content-social-message-linkedin-preview__excess-image-count-overlay"},l.createElement("span",{className:"nelio-content-social-message-linkedin-preview__excess-image-count-text"},"+".concat(a.length-r.length))))})))}return l.createElement("img",{className:"nelio-content-social-message-linkedin-preview__image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[0]})},xi=function(e){return hi()(e).substring(0,6)},Ni=function(){var e=un("last"),t=e.sharedLinkStatus,n=e.sharedLink,i=void 0===n?{}:n,a=i.title,o=i.excerpt,r=i.image,s=i.domain;switch(t){case"loading":return l.createElement(Kn,null);case"ready":return l.createElement("div",{className:"nelio-content-mastodon-shared-link"},!!r&&l.createElement("img",{className:"nelio-content-mastodon-shared-link__image",alt:(0,Rt._x)("Featured image in shared link","text","nelio-content"),src:r}),l.createElement("div",{className:"nelio-content-mastodon-shared-link__content"},l.createElement("div",{className:"nelio-content-mastodon-shared-link__domain"},s),l.createElement("div",{className:"nelio-content-mastodon-shared-link__title"},a),!!o&&l.createElement("div",{className:"nelio-content-mastodon-shared-link__excerpt"},o)));default:return null}},Si=function(){return Si=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Si.apply(this,arguments)},Ti=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},Ii=function(e){var t=e.activeProfile,n=t.id,i=t.displayName,a=t.username,o=e.dateValue,r=e.schedule,s=e.textComputed,c=e.timeValue,u=e.type;return l.createElement("div",{className:"nelio-content-social-message-mastodon-preview"},l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__profile"},l.createElement(Nn.SocialProfileIcon,{profileId:n,isNetworkHidden:!0}),l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__name-info"},l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__display-name"},i),l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__username"},a))),l.createElement(Nn.SocialMessageTextPreview,{value:s,linkBeautifier:function(e){var t=e.replace(/^(https?:\/\/[^\/]+.{0,15}).*/,"$1");return t===e?t.replace(/^https?:\/\//,""):t.replace(/^https?:\/\//,"")+"…"}}),["image","video"].includes(u)?l.createElement(Pi,Si({},e)):l.createElement(Ni,null),l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__date"},!!o&&!!c&&(0,$n.dateI18n)((0,Rt._x)("g:i A · d M Y","text (mastodon preview date)","nelio-content"),r),!!o&&!c&&(0,$n.dateI18n)((0,Rt._x)("d M Y","text (mastodon preview date)","nelio-content"),r),!o&&(0,Rt._x)("Someday","text","nelio-content")))},Pi=function(e){var t=e.image,n=e.video,i=e.type,a=(0,d.compact)(Ti([],(0,d.castArray)(null!=t?t:[]),!0)),o=(0,d.compact)(Ti([],(0,d.castArray)(null!=n?n:[]),!0));return"video"===i?l.createElement("video",{className:"nelio-content-social-message-mastodon-preview__image",src:o[0],autoPlay:!0,loop:!0,muted:!0}):"image"===i&&a.length>=4?l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-group nelio-content-social-message-mastodon-preview__media-group--vertical"},l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-pair"},l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-mastodon-preview__image nelio-content-social-message-mastodon-preview__image--top-left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[0]})),l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-mastodon-preview__image nelio-content-social-message-mastodon-preview__image--top-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[1]}))),l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-pair"},l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-mastodon-preview__image nelio-content-social-message-mastodon-preview__image--bottom-left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[2]})),l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-mastodon-preview__image nelio-content-social-message-mastodon-preview__image--bottom-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[3]})))):"image"===i&&3===a.length?l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-group"},l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-mastodon-preview__image nelio-content-social-message-mastodon-preview__image--left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[0]})),l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-pair nelio-content-social-message-mastodon-preview__media-pair--vertical"},l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-mastodon-preview__image nelio-content-social-message-mastodon-preview__image--top-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[1]})),l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-mastodon-preview__image nelio-content-social-message-mastodon-preview__image--bottom-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[2]})))):"image"===i&&2===a.length?l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-pair"},l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-mastodon-preview__image nelio-content-social-message-mastodon-preview__image--left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[0]})),l.createElement("div",{className:"nelio-content-social-message-mastodon-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-mastodon-preview__image nelio-content-social-message-mastodon-preview__image--right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[1]}))):l.createElement("img",{className:"nelio-content-social-message-mastodon-preview__image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[0]})},Ci=function(e){var t,n,i=e.activeProfile,a=i.id,o=i.displayName,r=e.postId,s=e.schedule,c=e.image,u=(0,m.usePost)(r);if(!u)return l.createElement(Kn,null);var d=c?'<figure><picture><img alt="'.concat(null!==(t=u.title)&&void 0!==t?t:"",'" src="').concat(c,'" /></picture></figure>'):"",g="".concat(d).concat(null!==(n=null==u?void 0:u.content)&&void 0!==n?n:"");return l.createElement("div",{className:"nelio-content-social-message-medium-preview"},l.createElement("div",{className:"nelio-content-social-message-medium-preview__content"},l.createElement("div",{className:"nelio-content-social-message-medium-preview__title"},null==u?void 0:u.title),l.createElement("div",{className:"nelio-content-social-message-medium-preview__profile-and-name"},l.createElement(Nn.SocialProfileIcon,{profileId:a,isNetworkHidden:!0}),l.createElement("div",{className:"nelio-content-social-message-medium-preview__display-name-and-date"},l.createElement("div",{className:"nelio-content-social-message-medium-preview__display-name"},o),l.createElement("div",{className:"nelio-content-social-message-medium-preview__date"},(0,$n.dateI18n)((0,Rt._x)("F j, Y","text (Instagram preview date)","nelio-content"),s)))),l.createElement("div",{className:"nelio-content-social-message-medium-preview__medium-toolbar"},l.createElement("div",{className:"nelio-content-social-message-medium-preview__medium-toolbar-section"},l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.createElement("path",{fill:"#dfdfdf",d:"M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z"}),l.createElement("path",{fill:"#dfdfdf",d:"M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z"})),l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},l.createElement("path",{fill:"#757575",d:"M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"}))),l.createElement("div",{className:"nelio-content-social-message-medium-preview__medium-toolbar-section"},l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},l.createElement("path",{fill:"#757575",d:"M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"})),l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},l.createElement("path",{fill:"#757575",d:"M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832"})),l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},l.createElement("path",{fill:"#757575",d:"M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1"})),l.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},l.createElement("path",{fill:"#757575",d:"M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41"})))),l.createElement("div",{className:"nelio-content-computed-text-preview",dangerouslySetInnerHTML:{__html:g.replace(/<\/?ncshare>/g,"")}})))},Mi=function(){return l.createElement("div",{className:"nelio-content-no-preview-in-social-editor "},l.createElement("div",{className:"nelio-content-no-preview-in-social-editor__title"},l.createElement(Vt.Dashicon,{className:"nelio-content-no-preview-in-social-editor__icon",icon:"warning"}),(0,Rt._x)("Preview not available","text","nelio-content")),l.createElement("div",{className:"nelio-content-no-preview-in-social-editor__explanation"},(0,Rt._x)("Please select a social profile using the selector above.","user","nelio-content")),l.createElement("div",{className:"nelio-content-no-preview-in-social-editor__action"},l.createElement(Vt.ExternalLink,{href:(0,pt.addQueryArgs)("https://neliosoftware.com/content/help/how-to-select-social-profiles/",{utm_source:"nelio-content",utm_medium:"plugin",utm_campaign:"support",utm_content:"social-message-editor"})},(0,Rt._x)("Show me how…","command","nelio-content"))))},Li=function(e){var t=e.activeProfile,n=t.id,i=t.displayName,a=void 0===i?"Nelio":i,o=e.image,r=e.textComputed,s=(0,l.useState)(0),c=s[0],u=s[1],m=(0,d.compact)(function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}([],(0,d.castArray)(null!=o?o:[]),!0)),g=un("last","pinterest"),p=g.sharedLinkStatus,v=g.sharedLink,f=(void 0===v?{}:v).title;return(0,l.useEffect)((function(){c>m.length-1&&u(0)}),[m]),l.createElement("div",{className:"nelio-content-social-message-pinterest-preview"},l.createElement("div",{className:"nelio-content-social-message-pinterest-preview__image"},!m.length&&l.createElement("div",{className:"nelio-content-social-message-pinterest-preview__image-placeholder"},l.createElement(Vt.Dashicon,{className:"nelio-content-social-message-pinterest-preview__image-icon",icon:"format-image"})),!!m.length&&l.createElement("img",{className:"nelio-content-social-message-pinterest-preview__actual-image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:m[c]}),m.length>1&&0!==c&&l.createElement(Vt.Button,{className:"nelio-content-social-message-pinterest-preview__previous-image-action",icon:"arrow-left-alt2",onClick:function(){return u(c-1)}}),m.length>1&&c!==m.length-1&&l.createElement(Vt.Button,{className:"nelio-content-social-message-pinterest-preview__next-image-action",icon:"arrow-right-alt2",onClick:function(){return u(c+1)}})),l.createElement("div",{className:"nelio-content-social-message-pinterest-preview__content"},"ready"===p&&!!f&&l.createElement("div",{className:"nelio-content-pinterest-shared-link"},l.createElement("div",{className:"nelio-content-pinterest-shared-link__title"},(0,d.truncate)(f,{length:30,omission:"…"}))),l.createElement("div",{className:"nelio-content-social-message-pinterest-preview__profile"},l.createElement(Nn.SocialProfileIcon,{profileId:n,isNetworkHidden:!0}),l.createElement("strong",null,a)),"ready"===p&&!!f&&l.createElement("div",{className:"nelio-content-pinterest-shared-link"},l.createElement("div",{className:"nelio-content-pinterest-shared-link__action"},(0,Rt._x)("Visit Site","command (pinterest)","nelio-content"))),l.createElement(Nn.SocialMessageTextPreview,{value:(0,d.truncate)(r,{length:80,omission:" "+(0,Rt._x)("… more","text (pinterest)","nelio-content")}),linkBeautifier:function(e){return e.replace(/https?:\/\/([^\/]+).*/,"$1")}})))},Ai=function(){var e=un("first"),t=e.sharedLinkStatus,n=e.sharedLink,i=(void 0===n?{}:n).image;switch(t){case"loading":return l.createElement(Kn,null);case"ready":return i?l.createElement("img",{className:"nelio-content-social-message-reddit-preview__image",alt:(0,Rt._x)("Featured image in shared link","text","nelio-content"),src:i}):null;default:return null}},Oi=function(e){var t=e.activeProfile.displayName,n=e.image,i=e.schedule,a=e.textComputed,o=e.type,r=(0,d.compact)(function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}([],(0,d.castArray)(null!=n?n:[]),!0));return l.createElement("div",{className:"nelio-content-social-message-reddit-preview"},l.createElement("div",{className:"nelio-content-social-message-reddit-preview__text-and-image"},l.createElement("div",{className:"nelio-content-social-message-reddit-preview__text-wrapper"},l.createElement("div",{className:"nelio-content-social-message-reddit-preview__profile-and-date"},(0,Rt.sprintf)(/* translators: 1 -> username. 2 -> date */ /* translators: 1 -> username. 2 -> date */
(0,Rt._x)("Published by %1$s. %2$s","text (reddit)","nelio-content"),t,(0,$n.dateI18n)((0,Rt._x)("F j, Y","text (Reddit preview date)","nelio-content"),i))),l.createElement(Nn.SocialMessageTextPreview,{value:a,linkBeautifier:Vi}),l.createElement("div",{className:"nelio-content-social-message-reddit-preview__link"},Vi(Ri(a)).replace(/^https?:\/\//,""))),l.createElement("div",{className:"nelio-content-social-message-reddit-preview__image-wrapper"},"image"===o&&r.length?l.createElement("img",{className:"nelio-content-social-message-reddit-preview__image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:r[0]}):l.createElement(Ai,null))))},Vi=function(e){var t=e.replace(/^(https?:\/\/[^\/]+.{0,16}).*/,"$1");return t===e?t:t+"…"},Ri=function(e){var t=" ".concat(e," ").match(/\s(https?:\/\/[^ ]*)\s/g)||[];return t[t.length-1]||""},Bi=function(){var e=un("first"),t=e.sharedLinkStatus,n=e.sharedLink,i=void 0===n?{}:n,a=i.author,o=i.excerpt,r=i.image,s=i.title;switch(t){case"loading":return l.createElement(Kn,null);case"no-url":case"ready":return l.createElement("div",{className:"nelio-content-telegram-shared-link"},!!r&&l.createElement("img",{className:"nelio-content-telegram-shared-link__image",alt:(0,Rt._x)("Featured image in shared link","text","nelio-content"),src:r}),l.createElement("div",{className:"nelio-content-telegram-shared-link__content"},l.createElement("div",{className:"nelio-content-telegram-shared-link__author"},a),l.createElement("div",{className:"nelio-content-telegram-shared-link__title"},s),l.createElement("div",{className:"nelio-content-telegram-shared-link__excerpt"},o)));default:return null}},Di=function(){return Di=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Di.apply(this,arguments)},Ui=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},Fi=function(e){var t=e.schedule,n=e.textComputed,i=e.type;return l.createElement("div",{className:"nelio-content-social-message-telegram-preview"},["image","video","multi-media"].includes(i)&&l.createElement(ji,Di({},e)),l.createElement(Nn.SocialMessageTextPreview,{value:n}),!["image","video","multi-media"].includes(i)&&l.createElement(Bi,null),l.createElement("div",{className:"nelio-content-social-message-telegram-preview__date"},l.createElement(Vt.Dashicon,{icon:"visibility"}),(0,$n.dateI18n)(" H:i",t)))},ji=function(e){var t=e.image,n=e.video,i=(0,d.take)((0,d.compact)(Ui(Ui([],(0,d.castArray)(null!=t?t:[]),!0),(0,d.castArray)(null!=n?n:[]),!0)),10);return l.createElement("div",{className:"nelio-content-social-message-telegram-preview__media-items nelio-content-social-message-telegram-preview__media-items--items-".concat(i.length)},i.map((function(e,n){return l.createElement("div",{className:"nelio-content-social-message-telegram-preview__media-item",key:n},t===(i=e)||(0,d.isArray)(t)&&t.includes(i)?l.createElement("img",{className:"nelio-content-social-message-telegram-preview__media-item-image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:e}):l.createElement("video",{className:"nelio-content-social-message-telegram-preview__media-item-video",src:e,autoPlay:!0,loop:!0,muted:!0}));var i})))},qi=function(){var e=un("last"),t=e.sharedLinkStatus,n=e.sharedLink,i=void 0===n?{}:n,a=i.title,o=i.image,r=i.domain;switch(t){case"loading":return l.createElement(Kn,null);case"ready":return l.createElement("div",{className:"nelio-content-threads-shared-link"},!!o&&l.createElement("img",{className:"nelio-content-threads-shared-link__image",alt:(0,Rt._x)("Featured image in shared link","text","nelio-content"),src:o}),l.createElement("div",{className:"nelio-content-threads-shared-link__content"},l.createElement("div",{className:"nelio-content-threads-shared-link__domain"},r),l.createElement("div",{className:"nelio-content-threads-shared-link__title"},a)));default:return null}},Gi=function(){return Gi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Gi.apply(this,arguments)},zi=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},Hi=function(e){var t=e.activeProfile,n=t.id,i=t.displayName,a=t.username,o=e.dateValue,r=e.schedule,s=e.textComputed,c=e.timeValue,u=e.type;return l.createElement("div",{className:"nelio-content-social-message-threads-preview"},l.createElement("div",{className:"nelio-content-social-message-threads-preview__profile"},l.createElement(Nn.SocialProfileIcon,{profileId:n,isNetworkHidden:!0}),l.createElement("div",{className:"nelio-content-social-message-threads-preview__name-info"},l.createElement("div",{className:"nelio-content-social-message-threads-preview__display-name"},i),l.createElement("div",{className:"nelio-content-social-message-threads-preview__username"},"@",a))),l.createElement(Nn.SocialMessageTextPreview,{value:s,linkBeautifier:function(e){var t=e.replace(/^(https?:\/\/[^\/]+.{0,15}).*/,"$1");return t===e?t.replace(/^https?:\/\//,""):t.replace(/^https?:\/\//,"")+"…"}}),["image","video","multi-media"].includes(u)?l.createElement(Yi,Gi({},e)):l.createElement(qi,null),l.createElement("div",{className:"nelio-content-social-message-threads-preview__date"},!!o&&!!c&&(0,$n.dateI18n)((0,Rt._x)("g:i A · d M Y","text (Threads preview date)","nelio-content"),r),!!o&&!c&&(0,$n.dateI18n)((0,Rt._x)("d M Y","text (Threads preview date)","nelio-content"),r),!o&&(0,Rt._x)("Someday","text","nelio-content")))},Yi=function(e){var t,n=e.image,i=e.video,a=(0,d.compact)(zi(zi([],(0,d.castArray)(null!=n?n:[]),!0),(0,d.castArray)(null!=i?i:[]),!0)),o=function(e){return n===e||(0,d.isArray)(n)&&n.includes(e)};return 1===a.length&&o(a[0])?l.createElement("img",{className:"nelio-content-social-message-threads-preview__image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[0]}):1===a.length&&(i===(t=a[0])||(0,d.isArray)(i)&&i.includes(t))?l.createElement("video",{className:"nelio-content-social-message-threads-preview__image",src:a[0],autoPlay:!0,loop:!0,muted:!0}):l.createElement("div",{className:"nelio-content-social-message-threads-preview__media-carousel"},a.map((function(e,t){return l.createElement("div",{className:"nelio-content-social-message-threads-preview__media-item",key:t},o(e)?l.createElement("img",{className:"nelio-content-social-message-threads-preview__media-item-image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:e}):l.createElement("video",{className:"nelio-content-social-message-threads-preview__media-item-video",src:e,autoPlay:!0,loop:!0,muted:!0}))})))},Wi=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},$i=function(e){var t=e.activeProfile,n=t.id,i=t.displayName,a=e.image,o=e.video,r=e.type,s=e.schedule,c=e.textComputed,u=(0,l.useState)(0),m=u[0],g=u[1],p=(0,d.compact)(Wi([],(0,d.castArray)(null!=a?a:[]),!0)),v=(0,d.compact)(Wi([],(0,d.castArray)(null!=o?o:[]),!0));return(0,l.useEffect)((function(){p.length&&m>p.length-1&&g(0)}),[p]),l.createElement("div",{className:"nelio-content-social-message-tiktok-preview"},l.createElement("div",{className:"nelio-content-social-message-tiktok-preview__image"},!v.length&&("video"===r||"text"===r)&&l.createElement("div",{className:"nelio-content-social-message-tiktok-preview__image-placeholder"},l.createElement(Vt.Dashicon,{className:"nelio-content-social-message-tiktok-preview__image-icon",icon:"format-video"})),!p.length&&"image"===r&&l.createElement("div",{className:"nelio-content-social-message-tiktok-preview__image-placeholder"},l.createElement(Vt.Dashicon,{className:"nelio-content-social-message-tiktok-preview__image-icon",icon:"format-image"})),!!v.length&&"video"===r&&l.createElement("video",{className:"nelio-content-social-message-tiktok-preview__actual-image",src:v[0],autoPlay:!0,loop:!0,muted:!0}),!!p.length&&"image"===r&&l.createElement("img",{className:"nelio-content-social-message-tiktok-preview__actual-image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:p[m]}),p.length>1&&0!==m&&"image"===r&&l.createElement(Vt.Button,{className:"nelio-content-social-message-tiktok-preview__previous-image-action",icon:"arrow-left-alt2",onClick:function(){return g(m-1)}}),p.length>1&&m!==p.length-1&&"image"===r&&l.createElement(Vt.Button,{className:"nelio-content-social-message-tiktok-preview__next-image-action",icon:"arrow-right-alt2",onClick:function(){return g(m+1)}}),p.length>1&&"image"===r&&l.createElement("div",{className:"nelio-content-social-message-tiktok-preview__image-dots"},(0,d.range)(0,p.length).map((function(e){return l.createElement("div",{key:e,className:zn("nelio-content-social-message-tiktok-preview__image-dot",{"nelio-content-social-message-tiktok-preview__image-dot--current":m===e})})})))),l.createElement("div",{className:"nelio-content-social-message-tiktok-preview__content"},l.createElement("div",{className:"nelio-content-social-message-tiktok-preview__profile-and-name"},l.createElement(Nn.SocialProfileIcon,{profileId:n,isNetworkHidden:!0}),l.createElement("div",{className:"nelio-content-social-message-tiktok-preview__display-name"},i)),l.createElement(Nn.SocialMessageTextPreview,{value:c,linkBeautifier:function(e){return e.replace(/https?:\/\/([^\/]+).*/,"$1")}}),l.createElement("div",{className:"nelio-content-social-message-tiktok-preview__date"},(0,$n.dateI18n)((0,Rt._x)("F j, Y","text (Tiktok preview date)","nelio-content"),s))))},Ki=function(){var e=un("first","tumblr"),t=e.sharedLinkStatus,n=e.sharedLink,i=void 0===n?{}:n,a=i.domain,o=i.excerpt,r=i.image,s=i.title;switch(t){case"loading":return l.createElement(Kn,null);case"ready":return l.createElement("div",{className:"nelio-content-tumblr-shared-link"},!!r&&l.createElement("div",{className:"nelio-content-tumblr-shared-link__image"},l.createElement("img",{alt:(0,Rt._x)("Featured image in shared link","text","nelio-content"),src:r}),l.createElement("div",{className:"nelio-content-tumblr-shared-link__signature"},a)),l.createElement("div",{className:"nelio-content-tumblr-shared-link__content"},l.createElement("div",{className:"nelio-content-tumblr-shared-link__title"},s),!!o&&l.createElement("div",{className:"nelio-content-tumblr-shared-link__excerpt"},o)));default:return null}},Qi=function(e){var t=e.activeProfile,n=t.id,i=t.username,a=e.image,o=e.textComputed,r=e.type,s=(0,d.compact)(function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))}([],(0,d.castArray)(null!=a?a:[]),!0));return l.createElement("div",{className:"nelio-content-social-message-tumblr-preview"},l.createElement("div",{className:"nelio-content-social-message-tumblr-preview__profile"},l.createElement(Nn.SocialProfileIcon,{profileId:n,isNetworkHidden:!0})),l.createElement("div",{className:"nelio-content-social-message-tumblr-preview__wrapper"},l.createElement("div",{className:"nelio-content-social-message-tumblr-preview__name"},i),"image"===r?l.createElement("img",{className:"nelio-content-social-message-tumblr-preview__image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:s[0]}):l.createElement(Ki,null),l.createElement(Nn.SocialMessageTextPreview,{value:o,linkBeautifier:function(e){var t=e.replace(/^(https?:\/\/[^\/]+.{0,15}).*/,"$1");return t===e?t.replace(/^https?:\/\//,""):t.replace(/^https?:\/\//,"")+"…"}})))},Xi=function(){var e=un("last","twitter"),t=e.sharedLinkStatus,n=e.sharedLink,i=void 0===n?{}:n,a=i.title,o=i.image,r=i.excerpt,s=i.domain;switch(t){case"loading":return l.createElement(Kn,null);case"ready":return o?l.createElement(l.Fragment,null,l.createElement("div",{className:"nelio-content-twitter-shared-link-with-image"},l.createElement("img",{className:"nelio-content-twitter-shared-link-with-image__image",alt:(0,Rt._x)("Featured image in shared link","text","nelio-content"),src:o}),l.createElement("div",{className:"nelio-content-twitter-shared-link-with-image__title-container"},l.createElement("div",{className:"nelio-content-twitter-shared-link-with-image__title"},a))),l.createElement("div",{className:"nelio-content-twitter-shared-link-with-image__domain"},(0,Rt.sprintf)(/* translators: domain */ /* translators: domain */
(0,Rt._x)("From %s","text","nelio-content"),s))):l.createElement(l.Fragment,null,l.createElement("div",{className:"nelio-content-twitter-shared-link"},l.createElement("div",{className:"nelio-content-twitter-shared-link__logo"},l.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true"},l.createElement("g",null,l.createElement("path",{d:"M1.998 5.5c0-1.38 1.119-2.5 2.5-2.5h15c1.381 0 2.5 1.12 2.5 2.5v13c0 1.38-1.119 2.5-2.5 2.5h-15c-1.381 0-2.5-1.12-2.5-2.5v-13zm2.5-.5c-.276 0-.5.22-.5.5v13c0 .28.224.5.5.5h15c.276 0 .5-.22.5-.5v-13c0-.28-.224-.5-.5-.5h-15zM6 7h6v6H6V7zm2 2v2h2V9H8zm10 0h-4V7h4v2zm0 4h-4v-2h4v2zm-.002 4h-12v-2h12v2z"})))),l.createElement("div",{className:"nelio-content-twitter-shared-link__content"},l.createElement("div",{className:"nelio-content-twitter-shared-link__domain"},s),l.createElement("div",{className:"nelio-content-twitter-shared-link__title"},a),l.createElement("div",{className:"nelio-content-twitter-shared-link__excerpt"},r))));default:return null}},Zi=function(){return Zi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Zi.apply(this,arguments)},Ji=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},ea=function(e){var t=e.activeProfile,n=t.id,i=t.displayName,a=t.username,o=e.dateValue,r=e.schedule,s=e.textComputed,c=e.timeValue,u=e.type;return l.createElement("div",{className:"nelio-content-social-message-twitter-preview"},l.createElement("div",{className:"nelio-content-social-message-twitter-preview__profile"},l.createElement(Nn.SocialProfileIcon,{profileId:n,isNetworkHidden:!0}),l.createElement("div",{className:"nelio-content-social-message-twitter-preview__name-info"},l.createElement("div",{className:"nelio-content-social-message-twitter-preview__display-name"},i),l.createElement("div",{className:"nelio-content-social-message-twitter-preview__username"},a))),l.createElement(Nn.SocialMessageTextPreview,{value:s,linkBeautifier:function(e){var t=e.replace(/^(https?:\/\/[^\/]+.{0,15}).*/,"$1");return t===e?t.replace(/^https?:\/\//,""):t.replace(/^https?:\/\//,"")+"…"}}),["image","video"].includes(u)?l.createElement(ta,Zi({},e)):l.createElement(Xi,null),l.createElement("div",{className:"nelio-content-social-message-twitter-preview__date"},!!o&&!!c&&(0,$n.dateI18n)((0,Rt._x)("g:i A · d M Y","text (Twitter preview date)","nelio-content"),r),!!o&&!c&&(0,$n.dateI18n)((0,Rt._x)("d M Y","text (Twitter preview date)","nelio-content"),r),!o&&(0,Rt._x)("Someday","text","nelio-content")))},ta=function(e){var t=e.image,n=e.video,i=e.type,a=(0,d.compact)(Ji([],(0,d.castArray)(null!=t?t:[]),!0)),o=(0,d.compact)(Ji([],(0,d.castArray)(null!=n?n:[]),!0));return"video"===i?l.createElement("video",{className:"nelio-content-social-message-twitter-preview__image",src:o[0],autoPlay:!0,loop:!0,muted:!0}):"image"===i&&a.length>=4?l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-group nelio-content-social-message-twitter-preview__media-group--vertical"},l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-pair"},l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-twitter-preview__image nelio-content-social-message-twitter-preview__image--top-left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[0]})),l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-twitter-preview__image nelio-content-social-message-twitter-preview__image--top-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[1]}))),l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-pair"},l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-twitter-preview__image nelio-content-social-message-twitter-preview__image--bottom-left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[2]})),l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-twitter-preview__image nelio-content-social-message-twitter-preview__image--bottom-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[3]})))):"image"===i&&3===a.length?l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-group"},l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-twitter-preview__image nelio-content-social-message-twitter-preview__image--left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[0]})),l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-pair nelio-content-social-message-twitter-preview__media-pair--vertical"},l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-twitter-preview__image nelio-content-social-message-twitter-preview__image--top-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[1]})),l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-twitter-preview__image nelio-content-social-message-twitter-preview__image--bottom-right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[2]})))):"image"===i&&2===a.length?l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-pair"},l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-twitter-preview__image nelio-content-social-message-twitter-preview__image--left",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[0]})),l.createElement("div",{className:"nelio-content-social-message-twitter-preview__media-item"},l.createElement("img",{className:"nelio-content-social-message-twitter-preview__image nelio-content-social-message-twitter-preview__image--right",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[1]}))):l.createElement("img",{className:"nelio-content-social-message-twitter-preview__image",alt:(0,Rt._x)("Image that will be shared with this message.","text","nelio-content"),src:a[0]})},na=function(){return na=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},na.apply(this,arguments)},ia=function(){var e=sn()[0],t=cn(),n=(0,k.getAllUrls)(t.textComputed),i=Ft();if(function(e){var t=(0,l.useState)(),n=t[0],i=t[1],a=(0,s.useDispatch)(m.store).loadLink,o=en()[0];(0,l.useEffect)((function(){clearTimeout(n),i(setTimeout((function(){return e.filter((function(e){return!(null==o?void 0:o.permalink)||!gn(e,null==o?void 0:o.permalink)})).forEach((function(e){a(e)}))}),1e3))}),[e.join("; ")])}(n),!(0,g.doesNetworkRequire)("preview",i)){if(!e)return null;if(!(0,g.doesNetworkSupport)("preview",i))return null}if(!t.activeProfile)return l.createElement(Mi,null);var a=function(e){switch(e.network){case"bluesky":return Zn;case"discord":return ri;case"twitter":return ea;case"facebook":return ci;case"gmb":return gi;case"linkedin":return bi;case"instagram":return fi;case"pinterest":return Li;case"reddit":return Oi;case"telegram":return Fi;case"medium":return Ci;case"threads":return Hi;case"tiktok":return $i;case"tumblr":return Qi;case"mastodon":return Ii}}(t.activeProfile);return a?l.createElement("div",{className:"nelio-content-social-message-preview"},l.createElement(a,na({},t,{activeProfile:t.activeProfile}))):null},aa=function(e){var t=e.disabled,n=c((function(e){return!e(Ot).isNewMessage()&&!e(m.store).isSubscribed()})),i=qt()[0],a=vn()[0][0],o=oa(),r=yn(a)[0],s=1<pn().length,u=(0,g.doesNetworkSupport)("multi-target",i);return s||u?l.createElement(Nn.SocialProfileSelector,{className:"nelio-content-single-profile-selector",isProfileLocked:n,disabled:t,network:i,profileId:a,targetName:r,onChange:function(e){var t=e.profileId,n=e.targetName;return t?o(t,n):void 0}}):null},oa=function(){var e=(0,s.useDispatch)(Ot),t=e.selectSingleSocialProfile,n=e.selectSingleTarget;return function(e,i){return i?n(e,i):t(e)}},ra=function(e){var t,n=e.disabled,i=e.isActive,a=e.isSelected,o=e.network,r=e.onSelect,s=pn(),c=vn(),u=c[0],m=c[1],d=(0,g.doesNetworkSupport)("multi-target",o),p=s.filter((function(e){return e.network===o}));return l.createElement("div",{className:zn((t={"nelio-content-multiple-profile-selector__network":!0,"nelio-content-multiple-profile-selector__network--has-arrow":i,"nelio-content-multiple-profile-selector__network--is-disabled":n},t["nelio-content-multiple-profile-selector__network--is-".concat(o)]=!0,t["nelio-content-multiple-profile-selector__network--is-".concat(o,"-active")]=i,t["nelio-content-multiple-profile-selector__network--is-".concat(o,"-selected")]=a,t["nelio-content-multiple-profile-selector__network--is-".concat(o,"-disabled")]=n,t))},l.createElement("input",{type:"radio",id:"nelio-content-multiple-profile-selector__network-input-field",className:"nelio-content-multiple-profile-selector__network-input-field",disabled:n,value:o,onChange:function(e){return e.target.checked&&r()},checked:i,onDoubleClick:function(){d||(p.filter((function(e){return u.includes(e.id)})).length===p.length?p.forEach((function(e){return m(e.id)})):p.forEach((function(e){return u.includes(e.id)||m(e.id)})))},title:(0,g.getNetworkLabel)("name",o)||void 0}),l.createElement("span",{className:"screen-reader-text"},o))},la=function(e){var t=e.disabled,n=qt(),i=n[0],a=n[1],o=c((function(e){var t=e(m.store),n=t.getAvailableSocialNetworks,i=t.isSubscribed,a=n();if(i())return a;var o=(0,e(m.store).getSocialProfiles)(),r=(0,e(Ot).getDisabledProfileIds)(),l=(0,d.filter)(o,(function(e){var t=e.id;return!r.includes(t)})),s=(0,d.uniq)((0,d.map)(l,"network"));return(0,d.intersection)(a,s)})),r=c((function(e){return e(Ot).getSelectedSocialNetworks()}));return l.createElement("div",{className:"nelio-content-multiple-profile-selector__networks"},l.createElement("p",{className:"screen-reader-text"},(0,Rt._x)("Select the network whose profiles you want to use:","user","nelio-content")),o.map((function(e){return l.createElement(ra,{key:e,network:e,disabled:t,isSelected:r.includes(e),isActive:e===i,onSelect:function(){return a(e)}})})))},sa=function(e){var t,n=e.disabled,i=e.profileId,a=(0,m.useSocialProfile)(i),o=vn(),r=o[0],c=o[1],u=yn(i),d=(0,s.useDispatch)(Ot).openTargetSelector,p=u.length,v=!!p,f=!r.length,_=r.includes(i)||v,h=a||{},w=h.alias,E=h.displayName,y=void 0===E?"":E,b=h.network,k=(0,g.doesNetworkSupport)("multi-target",b);return l.createElement(Vt.Tooltip,{text:null!=w?w:y,delay:0},l.createElement("li",{className:zn({"nelio-content-multiple-profile-selector__profile":!0,"nelio-content-multiple-profile-selector__profile--is-pulsing":f,"nelio-content-multiple-profile-selector__profile--is-selected":_,"nelio-content-multiple-profile-selector__profile--is-disabled":n,"nelio-content-multiple-profile-selector__profile--is-multi-target":k})},l.createElement("span",{className:"screen-reader-text"},"".concat(null!=w?w:y,": ")),k?l.createElement("input",{className:"nelio-content-multiple-profile-selector__profile-input-field",disabled:n,type:"button",value:b?(0,g.getTargetLabel)("selectTargets",b):"",onClick:function(){return d(i)}}):l.createElement("input",{className:"nelio-content-multiple-profile-selector__profile-input-field",disabled:n,type:"checkbox",checked:!!_,onChange:function(){return c(i)}}),l.createElement("div",{className:"nelio-content-multiple-profile-selector__icon-and-indicator"},l.createElement(Nn.SocialProfileIcon,{className:zn({"nelio-content-multiple-profile-selector__profile-icon":!0,"nelio-content-multiple-profile-selector__profile-icon--is-pulsing":f,"nelio-content-multiple-profile-selector__profile-icon--is-selected":_}),profileId:i,isNetworkHidden:!0}),l.createElement("div",{className:zn((t={"nelio-content-multiple-profile-selector__profile-indicator":!0,"nelio-content-multiple-profile-selector__profile-indicator--is-pulsing":f,"nelio-content-multiple-profile-selector__profile-indicator--is-selected":_,"nelio-content-multiple-profile-selector__profile-indicator--uses-targets":k},t["nelio-content-multiple-profile-selector__profile-indicator--has-".concat(p<10?p:"9-plus","-selected-targets")]=!!p,t))}))))},ca=function(e){var t=e.disabled,n=qt()[0],i=pn();return l.createElement(l.Fragment,null,l.createElement("p",{className:"screen-reader-text"},(0,Rt._x)("Select one or more profiles:","text","nelio-content")),l.createElement("ul",{className:zn({"nelio-content-multiple-profile-selector__profiles":!0,"nelio-content-multiple-profile-selector__profiles--is-disabled":t})},i.filter((function(e){return e.network===n})).map((function(e){return l.createElement(sa,{key:e.id,profileId:e.id,disabled:t})}))))},ua=function(e){var t=e.displayName,n=e.name,i=e.image,a=e.onClick,o=e.isSelected;return l.createElement("li",{className:"nelio-content-target-selector__target","data-name":n},l.createElement(Vt.CheckboxControl,{className:"nelio-content-target-selector__checkbox",label:o?l.createElement("strong",null,t):t,checked:o,onChange:a}),l.createElement("div",{className:"nelio-content-target-selector__target-image",style:{backgroundImage:"url(".concat(i||"",")")}}))},ma=function(){return ma=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ma.apply(this,arguments)},da=function(){var e=c((function(e){var t=e(m.store),n=t.getSocialProfile,i=t.getTargetsInProfile,a=e(Ot),o=a.getProfileIdInTargetSelector,r=a.getSelectedTargetsInTargetSelector,l=a.isTargetSelectorVisible,s=o();if(!s)return{isVisible:!1};var c=n(s);if(!l()||!c)return{isVisible:!1};var u=i(s);return{profileId:s,network:c.network,isLoading:!u,isVisible:!0,selectedTargetNames:r(),targets:u||[]}})),t=(0,s.useDispatch)(Ot),n=t.closeTargetSelector,i=t.selectTargetInTargetSelector,a=t.setSelectedTargetsInProfile;if(!e.isVisible)return null;var o=e.profileId,r=e.network,u=e.isLoading,d=e.selectedTargetNames,p=e.targets,v=n,f=i;return l.createElement(Vt.Modal,{className:"nelio-content-target-selector",title:(0,g.getTargetLabel)("title",r),isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:function(){}},!!u&&l.createElement("p",{className:"nelio-content-target-selector__info"},(0,g.getTargetLabel)("loading",r)),!u&&(0,k.isEmpty)(p)&&l.createElement("p",{className:"nelio-content-target-selector__info"},(0,g.getTargetLabel)("noTargetsExplanation",r)),!u&&!(0,k.isEmpty)(p)&&l.createElement("p",{className:"nelio-content-target-selector__info"},(0,g.getTargetLabel)("explanation",r)),!u&&!(0,k.isEmpty)(p)&&l.createElement("ul",{className:"nelio-content-target-selector__targets"},p.map((function(e){return l.createElement(ua,ma({key:e.name,isSelected:d.includes(e.name),onClick:function(){return f(e.name,!d.includes(e.name))}},e))}))),l.createElement("div",{className:"nelio-content-target-selector__actions"},l.createElement(Vt.Button,{variant:"secondary",className:"nelio-content-target-selector__cancel-action",onClick:v},(0,Rt._x)("Cancel","command","nelio-content")),l.createElement(Nn.SaveButton,{className:"nelio-content-target-selector__save-action",disabled:u,onClick:function(){a(o,d),n()}})))},ga=function(e){var t,n=e.disabled,i="nelio-content-multiple-profile-selector",a=jt("text");return l.createElement("div",{className:zn((t={},t[i]=!0,t["".concat(i,"--has-text-support")]=a,t))},l.createElement(la,{disabled:n}),l.createElement(ca,{disabled:n}),l.createElement(da,null))},pa=function(e){var t=e.disabled,n=$t()?ga:aa;return l.createElement(n,{disabled:t})},va=function(e){var t=e.disabled,n="nelio-content-social-message-editor__related-post-controls",i=en(),a=i[0],o=i[1],r=tn(),u=c((function(e){var t=e(Ot).getEditorContext(),n=!e(Ot).isNewMessage(),i="none"!==e(Ot).getRelatedPostStatus().type;return"calendar"!==t||n&&!i})),g=nn(),p=(0,s.useDispatch)(Ot).setRelatedPostStatus,v=jt("related-post"),f=(0,d.map)((0,m.usePostTypes)("social"),"name");return u?l.createElement("div",{className:n}):"ready"===g.type&&a?l.createElement("div",{className:"".concat(n," ").concat(n,"--has-related-post-link")},l.createElement("strong",null,(0,Rt._x)("Related Post:","text","nelio-content")+" "),l.createElement(Vt.ExternalLink,{href:a.viewLink},l.createElement("span",{className:"nelio-content-related-post-link"},a.title))):v?"none"===g.type?l.createElement("div",{className:n},l.createElement(Vt.Button,{variant:"link",disabled:t,onClick:function(){return p({type:"searcher"})}},(0,Rt._x)("Share old post…","command","nelio-content"))):"searcher"===g.type?l.createElement("div",{className:n},l.createElement(Nn.PostSearcher,{postTypes:f,disabled:t,value:r,onChange:function(e){e&&o(e)}})):l.createElement("div",{className:n}):l.createElement("div",{className:n})},fa=function(){var e=(0,g.getMessageLength)(rn()),t=ln(),n=t-e<=0,i=!n&&t-e<20;return l.createElement("div",{className:"nelio-content-social-char-counter"},l.createElement("div",{className:zn({"nelio-content-social-char-counter__count":!0,"nelio-content-social-char-counter__count--is-warning":i,"nelio-content-social-char-counter__count--is-error":n})},Math.min(99,Math.abs(t-e))),l.createElement("svg",{className:"nelio-content-social-char-counter__circle"},l.createElement("circle",{className:"nelio-content-social-char-counter__circle-base",cx:"50%",cy:"50%",r:"8",fill:"none",strokeWidth:"1"}),l.createElement("circle",{className:zn({"nelio-content-social-char-counter__circle-arc":!0,"nelio-content-social-char-counter__circle-arc--is-warning":i,"nelio-content-social-char-counter__circle-arc--is-error":n}),cx:"50%",cy:"50%",r:"8",fill:"none",strokeWidth:"2",style:{strokeDashoffset:50*(1-Math.min(1,e/t)),strokeDasharray:50}})))},_a=function(e){var t=e.disabled;return jt("text")?l.createElement("div",{className:zn({"nelio-content-social-message-editor__char-counter-wrapper":!0,"nelio-content-social-message-editor__char-counter-wrapper--is-disabled":t})},l.createElement(fa,null)):null};const ha=window.wp.mediaUtils;var wa,Ea,ya,ba,ka=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},xa=function(){"function"==typeof wa&&wa()},Na=function(e){var t,n=e.disabled,i=jt("image"),a=jt("multi-image"),o=Gt(),r=Ft(),u=c((function(e){return e(Ot).hasExplicitImage()})),p=(0,s.useDispatch)(Ot).setImages,v=(0,s.useDispatch)(m.store).receiveMediaUploadItem;return i?["image","multi-media"].includes(o)?l.createElement(Sa,{disabled:n}):u?l.createElement(Ca,{disabled:n}):l.createElement(ha.MediaUpload,{title:(0,Rt.sprintf)(/* translators: a social network name */ /* translators: a social network name */
(0,Rt._x)("Select or Upload Image Files for %s","command","nelio-content"),(0,g.getNetworkLabel)("name",r)),allowedTypes:ka([],null!==(t=(0,g.getSupportedImageTypes)(r))&&void 0!==t?t:"image",!0),multiple:!!a&&"add",onSelect:function(e){(e=(0,d.isArray)(e)?e:[e]).forEach((function(e){v(e)})),p(r,e.map((function(e){return e.id})),e.map((function(e){return e.url})))},render:function(e){var t=e.open;return l.createElement(Ta,{disabled:n,onClick:t})}}):null},Sa=function(e){var t=e.disabled,n=(0,s.useDispatch)(Ot).removeImages;return l.createElement(Vt.Button,{className:"nelio-content-social-message-editor__quick-action nelio-content-social-message-editor__quick-action--is-toggled",icon:"format-image",label:(0,Rt._x)("Remove Image","command","nelio-content"),tooltipPosition:"bottom center",isPressed:!0,disabled:t,onClick:n})},Ta=function(e){var t=e.disabled,n=e.onClick;return l.createElement(Vt.DropdownMenu,{className:zn({"nelio-content-social-message-editor__image-dropdown":!0,"nelio-content-social-message-editor__quick-action":!0}),icon:"format-image",label:(0,Rt._x)("Add Image…","command","nelio-content"),toggleProps:{tooltipPosition:"bottom center",disabled:t},popoverProps:{onClick:xa,onFocusOutside:xa}},(function(e){var t=e.onClose;return wa=t,l.createElement(Vt.MenuGroup,null,l.createElement(Ia,{closeMenu:t,openMediaLibrary:n}),l.createElement(Pa,{closeMenu:t}))}))},Ia=function(e){var t=e.openMediaLibrary,n=e.closeMenu;return l.createElement(Vt.MenuItem,{role:"menuitem",onClick:function(){n(),t()}},(0,Rt._x)("Media Library","text","nelio-content"))},Pa=function(e){var t=e.closeMenu,n=(0,s.useDispatch)(Ot).showImageUrlSelector;return l.createElement(Vt.MenuItem,{role:"menuitem",onClick:function(){t(),n(!0)}},(0,Rt._x)("URL","text","nelio-content"))},Ca=function(e){var t=e.disabled,n=Ft(),i=(0,s.useDispatch)(Ot).switchMessageType;return l.createElement(Vt.Button,{className:"nelio-content-social-message-editor__quick-action",icon:"format-image",label:(0,Rt._x)("Use Image","command","nelio-content"),tooltipPosition:"bottom center",disabled:t,onClick:function(){return i(n,"image")}})},Ma=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},La=function(e){var t,n=e.disabled,i=jt("video"),a=jt("multi-media"),o=Gt(),r=Ft(),u=c((function(e){return e(Ot).hasExplicitVideo()})),p=(0,s.useDispatch)(Ot).setVideos,v=(0,s.useDispatch)(m.store).receiveMediaUploadItem;return i?["video","multi-media"].includes(o)?l.createElement(Aa,{disabled:n}):u?l.createElement(Va,{disabled:n}):l.createElement(ha.MediaUpload,{title:(0,Rt.sprintf)(/* translators: a social network name */ /* translators: a social network name */
(0,Rt._x)("Select or Upload Video Files for %s","command","nelio-content"),(0,g.getNetworkLabel)("name",r)),allowedTypes:Ma([],null!==(t=(0,g.getSupportedVideoTypes)(r))&&void 0!==t?t:"video",!0),multiple:!!a&&"add",onSelect:function(e){(e=(0,d.isArray)(e)?e:[e]).forEach((function(e){v(e)})),p(r,e.map((function(e){return e.id})),e.map((function(e){return e.url})))},render:function(e){var t=e.open;return l.createElement(Oa,{disabled:n,onClick:t})}}):null},Aa=function(e){var t=e.disabled,n=(0,s.useDispatch)(Ot).removeVideo;return l.createElement(Vt.Button,{className:"nelio-content-social-message-editor__quick-action nelio-content-social-message-editor__quick-action--is-toggled",icon:"video-alt2",label:(0,Rt._x)("Remove Video","command","nelio-content"),tooltipPosition:"bottom center",isPressed:!0,disabled:t,onClick:n})},Oa=function(e){var t=e.label,n=e.disabled,i=e.onClick;return l.createElement(Vt.Button,{className:"nelio-content-social-message-editor__quick-action",icon:"video-alt2",label:null!=t?t:(0,Rt._x)("Add Video…","command","nelio-content"),tooltipPosition:"bottom center",disabled:n,onClick:i})},Va=function(e){var t=e.disabled,n=Ft(),i=(0,s.useDispatch)(Ot).switchMessageType;return l.createElement(Vt.Button,{className:"nelio-content-social-message-editor__quick-action",icon:"video-alt2",label:(0,Rt._x)("Use Video","command","nelio-content"),tooltipPosition:"bottom center",disabled:t,onClick:function(){return i(n,"video")}})},Ra=function(e){var t=e.disabled,n=jt("medium-tags"),i=(0,m.useIsSubscribed)(),a=Kt(),o=a[0],r=a[1];return n&&i?l.createElement(Vt.Button,{className:zn({"nelio-content-social-message-editor__quick-action":!0,"nelio-content-social-message-editor__quick-action--are-media-tags":!0,"nelio-content-social-message-editor__quick-action--is-toggled":o}),icon:"nametag",label:(0,Rt._x)("Medium Tags","text","nelio-content"),tooltipPosition:"bottom center",isPressed:o,disabled:t,onClick:function(){return r(!o)}}):null},Ba=function(e){var t=e.disabled,n=Ft(),i=Xt(),a=i[0],o=i[1];return"tiktok"!==n?null:l.createElement(Vt.Button,{className:zn({"nelio-content-social-message-editor__quick-action":!0,"nelio-content-social-message-editor__quick-action--are-tiktok-settings":!0,"nelio-content-social-message-editor__quick-action--is-toggled":a}),icon:"admin-settings",label:(0,Rt._x)("TikTok Settings","text","nelio-content"),tooltipPosition:"bottom center",isPressed:a,disabled:t,onClick:function(){return o(!a)}})},Da=function(){return Da=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Da.apply(this,arguments)},Ua=function(){"function"==typeof Ea&&Ea()},Fa=function(e){var t=e.disabled,n=jt("text"),i=en()[0],a=c((function(e){var t=(0,e(Ot).getPostId)();if(!t)return{published:[],pending:[]};var n=(0,e(m.store).getSocialMessagesRelatedToPost)(t),i=(0,d.filter)(n,(function(e){return"publish"===e.status})),a=(0,d.filter)(n,(function(e){return"publish"!==e.status}));return{published:(0,d.uniq)((0,d.map)(i,"text")),pending:(0,d.uniq)((0,d.map)(a,"text"))}})),o=a.published,r=a.pending,s=c((function(e){var t=e(Ot).getPostId(),n=e(m.store).isResolving("getPostRelatedItems",[t]);return!!t&&n})),u=on(),g=(u[0],u[1]),p=!!o.length||!!r.length;return n&&i?l.createElement(Vt.DropdownMenu,{className:"nelio-content-social-message-editor__quick-action nelio-content-social-message-editor__existing-message-selector",icon:"backup",label:(0,Rt._x)("Previous Social Messages","text","nelio-content"),toggleProps:{disabled:t||!p,tooltipPosition:"bottom center"},popoverProps:{onFocusOutside:Ua}},(function(e){var t=e.onClose;if(Ea=t,s)return l.createElement("div",{className:"nelio-content-social-message-editor__previous-messages-loader"},l.createElement(Vt.Spinner,Da({},{isActive:!0})),(0,Rt._x)("Loading…","text","nelio-conent"));var n=function(e){return 80<e.length?(0,d.trim)(e.substring(0,75))+"…":e};return l.createElement(l.Fragment,null,!!o.length&&l.createElement(Vt.MenuGroup,{label:(0,Rt._x)("Previous Social Messages","text","nelio-content")},o.map((function(e){return l.createElement(Vt.MenuItem,{key:e,role:"menuitem",onClick:function(){t(),g(e)}},n(e))}))),!!r.length&&l.createElement(Vt.MenuGroup,{label:(0,Rt._x)("Other Social Messages","text","nelio-content")},r.map((function(e){return l.createElement(Vt.MenuItem,{key:e,role:"menuitem",onClick:function(){t(),g(e)}},n(e))}))))})):null},ja=function(e){var t=e.disabled,n=jt("recurrence"),i=c((function(e){return"toggeable"===e(Ot).getRecurrenceMode()})),a=(0,m.useIsSubscribed)(),o=fn(),r=o[0],s=o[1];return n&&i&&a?l.createElement(Vt.Button,{className:zn({"nelio-content-social-message-editor__quick-action":!0,"nelio-content-social-message-editor__quick-action--is-recurring":!0,"nelio-content-social-message-editor__quick-action--is-toggled":r}),icon:"controls-repeat",label:(0,Rt._x)("Recurring Message","text","nelio-content"),tooltipPosition:"bottom center",isPressed:r,disabled:t,onClick:function(){return s(!r)}}):null},qa=function(){"function"==typeof ya&&ya()},Ga=function(e){var t=e.disabled,n=jt("text"),i=en()[0],a=on(),o=a[0],r=a[1],s=(0,d.values)(null==i?void 0:i.customFields),u=(0,d.values)(null==i?void 0:i.customPlaceholders),m=an("author",i),g=an("excerpt",i),p=function(e){return c((function(t){var n;return(null!==(n=(0,t(Zt.store).getEntityRecords)("root","taxonomy",{per_page:-1}))&&void 0!==n?n:[]).filter((function(e){return!!e})).filter((function(t){var n;return t.visibility.public&&t.types.includes(null!==(n=null==e?void 0:e.type)&&void 0!==n?n:"")}))}))}(i),v=!!s.length,f=!!u.length;return n?(0,k.isEmpty)(i)?null:l.createElement(Vt.DropdownMenu,{className:"nelio-content-social-message-editor__quick-action nelio-content-social-message-editor__add-placeholder",icon:"tag",label:(0,Rt._x)("Placeholders","text","nelio-content"),toggleProps:{disabled:!i||!!t,tooltipPosition:"bottom center"},popoverProps:{onFocusOutside:qa}},(function(e){var t=e.onClose;ya=t;var n=function(e){return r(/[^\s]$/.test(o)?"".concat(o," ").concat(e):"".concat(o).concat(e))};return l.createElement(Vt.MenuGroup,null,l.createElement(Vt.MenuGroup,null,l.createElement(Vt.MenuItem,{role:"menuitem",icon:"editor-textcolor",onClick:function(){return n("{title}")}},(0,Rt._x)("Add Title","command","nelio-content")),m&&l.createElement(Vt.MenuItem,{role:"menuitem",icon:"admin-users",onClick:function(){return n("{author}")}},(0,Rt._x)("Add Author","command","nelio-content")),g&&l.createElement(Vt.MenuItem,{role:"menuitem",icon:"text",onClick:function(){return n("{excerpt}")}},(0,Rt._x)("Add Excerpt","command","nelio-content")),l.createElement(Vt.MenuItem,{role:"menuitem",icon:"admin-links",onClick:function(){return n("{permalink}")}},(0,Rt._x)("Add Permalink","command","nelio-content"))),!!p.length&&l.createElement(Vt.MenuGroup,{label:(0,Rt._x)("Taxonomies","text","nelio-content")},p.map((function(e){var t=e.slug,i=e.labels;return l.createElement(Vt.MenuItem,{key:t,role:"menuitem",icon:za(t),onClick:function(){return n(Ha(t))}},(0,Rt.sprintf)(/* translators: taxonomy name */ /* translators: taxonomy name */
(0,Rt._x)("Add %s","command","nelio-content"),i.name))}))),v&&l.createElement(Vt.MenuGroup,{label:(0,Rt._x)("Custom fields","text","nelio-content")},s.map((function(e){var t=e.key,i=e.name;return l.createElement(Vt.MenuItem,{key:t,role:"menuitem",icon:"welcome-widgets-menus",onClick:function(){return n("{field:".concat(t,"}"))}},(0,Rt.sprintf)(/* translators: custom field name */ /* translators: custom field name */
(0,Rt._x)("Add %s","command","nelio-content"),i))}))),f&&l.createElement(Vt.MenuGroup,{label:(0,Rt._x)("Custom placeholders","text","nelio-content")},u.map((function(e){var t=e.key,i=e.name;return l.createElement(Vt.MenuItem,{key:t,role:"menuitem",icon:"plus-alt",onClick:function(){return n("{custom:".concat(t,"}"))}},(0,Rt.sprintf)(/* translators: custom placeholder name */ /* translators: custom placeholder name */
(0,Rt._x)("Add %s","command","nelio-content"),i))}))))})):null},za=function(e){switch(e){case"category":case"product_cat":return"category";case"post_tag":case"product_tag":return"tag";default:return"archive"}},Ha=function(e){switch(e){case"category":case"product_cat":return"{categories}";case"post_tag":case"product_tag":return"{tags}";default:return"{taxonomy:".concat(e,"}")}},Ya=function(e){var t=e.disabled,n=Ft(),i=(0,g.doesNetworkSupport)("preview",n)&&!(0,g.doesNetworkRequire)("preview",n),a=sn(),o=a[0],r=a[1];return i?l.createElement(Vt.Button,{className:zn({"nelio-content-social-message-editor__quick-action":!0,"nelio-content-social-message-editor__quick-action--is-preview":!0,"nelio-content-social-message-editor__quick-action--is-toggled":o}),icon:"visibility",label:(0,Rt._x)("Preview","text","nelio-content"),tooltipPosition:"bottom center",isPressed:o,disabled:t,onClick:function(){return r(!o)}}):null},Wa=function(){"function"==typeof ba&&ba()},$a=function(e){var t,n=e.disabled,i=jt("text"),a=(t=en()[0],c((function(e){var n=e(Ot),i=n.getSelectedSocialNetworks,a=n.getSelectedSocialProfiles,o=n.getSelectedTargetsInProfile,r=a(),l=i(),s=(0,d.flatten)((0,d.map)(r,o)),c=e(m.store).getSocialTemplates(t),u=(0,d.keyBy)((0,d.filter)(c,(function(e){return(!!t||!e.text.includes("{permalink}"))&&bn(e.profileId,r)&&bn(e.network,l)&&bn(e.targetName,s)&&(!t||(!e.author||e.author===t.author)&&(0,d.values)((0,d.mapValues)(t.taxonomies,(function(t,n){return!e.taxonomies[n]||!!(0,d.find)(t,{id:e.taxonomies[n]})}))).every(Boolean))})),"text"),g=(0,d.keys)(u),p=(0,d.keyBy)((0,d.filter)(c,(function(e){return!g.includes(e.text)})),"text");return{recommendedTemplates:(0,d.values)(u),otherTemplates:(0,d.values)(p)}}))),o=a.recommendedTemplates,r=a.otherTemplates,u=(0,s.useDispatch)(Ot).setText;if(!i)return null;var g=!!o.length,p=!!r.length;return g||p?l.createElement(Vt.DropdownMenu,{className:"nelio-content-social-message-editor__quick-action nelio-content-social-message-editor__use-template",icon:l.createElement(Qa,null),label:(0,Rt._x)("Templates","command","nelio-content"),toggleProps:{disabled:!!n,tooltipPosition:"bottom center"},popoverProps:{onFocusOutside:Wa}},(function(e){var t=e.onClose;return ba=t,l.createElement(Vt.MenuGroup,null,l.createElement(Ka,{title:(0,Rt._x)("Recommended","text (templates)","nelio-content"),templates:o,onClick:function(e){t(),u(e)}}),l.createElement(Ka,{title:g?(0,Rt._x)("Other Templates","text","nelio-content"):(0,Rt._x)("Available Templates","text","nelio-content"),templates:r,onClick:function(e){t(),u(e)}}))})):null},Ka=function(e){var t=e.title,n=e.templates,i=e.onClick;return n.length?t?l.createElement(Vt.MenuGroup,{label:t},n.map((function(e){var t=e.id,n=e.text;return l.createElement(Vt.MenuItem,{key:"template-".concat(t),role:"menuitem",onClick:function(){return i(n)}},Xa(n))}))):l.createElement(l.Fragment,null,n.map((function(e){var t=e.id,n=e.text;return l.createElement(Vt.MenuItem,{key:"template-".concat(t),role:"menuitem",onClick:function(){return i(n)}},Xa(n))}))):null},Qa=function(){return l.createElement("svg",{viewBox:"0 0 20 20",width:"20",height:"20"},l.createElement("path",{d:"M 3 2 C 2.45 2 2 2.45 2 3 L 2 17 C 2 17.55 2.45 18 3 18 L 18 18 C 18.55 18 19 17.55 19 17 L 19 3 C 19 2.45 18.55 2 18 2 L 3 2 z M 4 4 L 17 4 L 17 16 L 4 16 L 4 4 z M 5 5 L 5 9 L 7 9 L 7 8 L 6 8 L 6 6 L 7 6 L 7 5 L 5 5 z M 8 5 L 8 6 L 9 6 L 9 5 L 8 5 z M 10 5 L 10 6 L 11 6 L 11 5 L 10 5 z M 12 5 L 12 6 L 13 6 L 13 5 L 12 5 z M 14 5 L 14 6 L 15 6 L 15 8 L 14 8 L 14 9 L 16 9 L 16 5 L 14 5 z M 8 8 L 8 9 L 9 9 L 9 8 L 8 8 z M 10 8 L 10 9 L 11 9 L 11 8 L 10 8 z M 12 8 L 12 9 L 13 9 L 13 8 L 12 8 z M 5 11 L 5 15 L 7 15 L 7 14 L 6 14 L 6 12 L 7 12 L 7 11 L 5 11 z M 8 11 L 8 12 L 9 12 L 9 11 L 8 11 z M 10 11 L 10 12 L 11 12 L 11 11 L 10 11 z M 12 11 L 12 12 L 13 12 L 13 11 L 12 11 z M 14 11 L 14 12 L 15 12 L 15 14 L 14 14 L 14 15 L 16 15 L 16 11 L 14 11 z M 8 14 L 8 15 L 9 15 L 9 14 L 8 14 z M 10 14 L 10 15 L 11 15 L 11 14 L 10 14 z M 12 14 L 12 15 L 13 15 L 13 14 L 12 14 z "}))},Xa=function(e){return 80<e.length?(0,d.trim)(e.substring(0,75))+"…":e},Za=function(e){var t=e.disabled;return l.createElement("div",{className:"nelio-content-social-message-editor__quick-actions-wrapper"},l.createElement(va,{disabled:t}),l.createElement("div",{className:"nelio-content-social-message-editor__quick-actions"},l.createElement(Fa,{disabled:t}),l.createElement($a,{disabled:t}),l.createElement(Ga,{disabled:t}),l.createElement(ja,{disabled:t}),l.createElement(Ra,{disabled:t}),l.createElement(Ba,{disabled:t}),l.createElement(Na,{disabled:t}),l.createElement(La,{disabled:t}),l.createElement(Ya,{disabled:t}),l.createElement(_a,{disabled:t})))},Ja=function(){var e,t,n=jt("recurrence"),i=c((function(e){return"locked"!==e(Ot).getRecurrenceMode()})),a=fn()[0],o=hn(),r=(o[0],o[1]),s=(e=En()[0],t=wn()[0],(0,m.useRecurrenceSummary)(e,t));return n&&a?l.createElement("div",{className:"nelio-content-social-message-editor__recurrence-summary"},l.createElement(Vt.Dashicon,{icon:"controls-repeat"}),l.createElement(Vt.VisuallyHidden,null,(0,Rt._x)("Repeats","text","nelio-content")+": ")," ",i?l.createElement(Vt.Button,{variant:"link",onClick:function(){return r(!0)}},s):l.createElement(l.Fragment,null,s)):null},eo=function(){var e=to(),t=En(),n=(t[0],t[1]);return(0,l.useEffect)((function(){n((0,k.createRecurrenceContext)(e))}),[n,e]),null},to=function(){var e=cn().schedule,t=(0,m.useToday)(),n=c((function(e){return e(m.store).getSiteTimezone()}));return(e?(0,$n.dateI18n)("Y-m-d",e,n):void 0)||t},no=function(){return no=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},no.apply(this,arguments)},io=function(e){var t=e.disabled,n=qt()[0],i=zt(),a=Xt()[0],o=Qt(),r=o[0],s=o[1],c=no(no({},ao),r);if("tiktok"!==n)return null;if(!a)return null;var u=i[n],m=[{value:"PUBLIC_TO_EVERYONE",label:(0,Rt._x)("Public","text","nelio-content")},{value:"MUTUAL_FOLLOW_FRIENDS",label:(0,Rt._x)("Friends","text","nelio-content")},{value:"FOLLOWER_OF_CREATOR",label:(0,Rt._x)("Followers","text","nelio-content")},{value:"SELF_ONLY",label:(0,Rt._x)("Private","text","nelio-content"),disabled:c.discloseContent&&c.isBrandContent}];return l.createElement("div",{className:zn({"nelio-content-social-message-editor__tiktok-settings":!0})},l.createElement(Vt.SelectControl,{label:"image"===u?(0,Rt._x)("Who can view these photos","text","nelio-content"):(0,Rt._x)("Who can view this video","text","nelio-content"),help:c.discloseContent&&(0,Rt._x)("Branded content visibility cannot be set to private.","text","nelio-content"),value:c.privacyLevel,disabled:t,options:m,onChange:function(e){return s(no(no(no({},c),{privacyLevel:e}),"SELF_ONLY"===e&&{isBrandContent:!1}))}}),l.createElement(Vt.BaseControl,{id:"nelio-content-social-message-editor__tiktok-settings__user-capabilities",className:"nelio-content-social-message-editor__tiktok-settings__user-capabilities",label:(0,Rt._x)("Allow users to","text","nelio-content")},l.createElement("div",{className:"nelio-content-social-message-editor__tiktok-settings__user-capabilities-container"},l.createElement(Vt.CheckboxControl,{checked:!c.disableComment,label:(0,Rt._x)("Comment","action","nelio-content"),onChange:function(e){return s(no(no({},c),{disableComment:!e}))}}),"image"!==u&&l.createElement(Vt.CheckboxControl,{checked:!c.disableDuet,label:(0,Rt._x)("Duet","action","nelio-content"),onChange:function(e){return s(no(no({},c),{disableDuet:!e}))}}),"image"!==u&&l.createElement(Vt.CheckboxControl,{checked:!c.disableStitch,label:(0,Rt._x)("Stitch","action","nelio-content"),onChange:function(e){return s(no(no({},c),{disableStitch:!e}))}}))),l.createElement(Vt.ToggleControl,{className:"nelio-content-social-message-editor__tiktok-settings__disclose-content",checked:c.discloseContent,label:"image"!==u?(0,Rt._x)("Disclose video content","action","nelio-content"):(0,Rt._x)("Disclose image content","action","nelio-content"),help:"image"!==u?(0,Rt._x)("Turn on to disclose that this video promotes goods or services in exchange for something of value. Your video could promote yourself, a third party, or both.","user","nelio-content"):(0,Rt._x)("Turn on to disclose that this image promotes goods or services in exchange for something of value. Your image could promote yourself, a third party, or both.","user","nelio-content"),onChange:function(e){return s(no(no({},c),{discloseContent:e}))}}),c.discloseContent&&l.createElement(Vt.CheckboxControl,{checked:c.isBrandOrganic,label:(0,Rt._x)("Your brand","text","nelio-content"),help:"image"!==u?(0,Rt._x)("You are promoting yourself or your own business. This video will be classified as Brand Organic.","user","nelio-content"):(0,Rt._x)("You are promoting yourself or your own business. This image will be classified as Brand Organic.","user","nelio-content"),onChange:function(e){return s(no(no({},c),{isBrandOrganic:e}))}}),c.discloseContent&&l.createElement(Vt.CheckboxControl,{checked:c.isBrandContent,disabled:"SELF_ONLY"===c.privacyLevel,label:(0,Rt._x)("Branded content","text","nelio-content"),help:"image"!==u?(0,Rt._x)("You are promoting another brand or a third party. This video will be classified as Branded Content.","user","nelio-content"):(0,Rt._x)("You are promoting another brand or a third party. This image will be classified as Branded Content.","user","nelio-content"),onChange:function(e){return s(no(no(no({},c),{isBrandContent:e}),e&&{privacyLevel:"PUBLIC_TO_EVERYONE"}))}}),c.discloseContent&&(c.isBrandContent||c.isBrandOrganic)&&l.createElement("div",{className:"nelio-content-social-message-editor__tiktok-settings__disclosure-notice"},l.createElement("p",null,l.createElement(Vt.Dashicon,{icon:"info"})),l.createElement("p",null,function(e,t){return e.isBrandOrganic&&!e.isBrandContent?"image"!==t?(0,Rt._x)('Your video will be labeled "Promotional content". This cannot be changed once your video is posted.',"text","nelio-content"):(0,Rt._x)('Your photo will be labeled "Promotional content". This cannot be changed once your photo is posted.',"text","nelio-content"):"image"!==t?(0,Rt._x)('Your video will be labeled "Paid partnership". This cannot be changed once your video is posted.',"text","nelio-content"):(0,Rt._x)('Your photo will be labeled "Paid partnership". This cannot be changed once your photo is posted.',"text","nelio-content")}(c,u))),l.createElement("p",null,(0,l.createInterpolateElement)(c.isBrandContent?(0,Rt._x)("By posting, you agree to TikTok’s <ttp>Branded Content Policy</ttp> and <ttm>Music Usage Confirmation</ttm>.","user","nelio-content"):(0,Rt._x)("By posting, you agree to TikTok’s <ttm>Music Usage Confirmation</ttm>.","user","nelio-content"),{ttp:l.createElement(Vt.ExternalLink,{href:"https://www.tiktok.com/legal/page/global/bc-policy/en"}),ttm:l.createElement(Vt.ExternalLink,{href:"https://www.tiktok.com/legal/page/global/music-usage-confirmation/en"})})))},ao={privacyLevel:"PUBLIC_TO_EVERYONE",disableComment:!0,disableDuet:!0,disableStitch:!0,discloseContent:!1,isBrandContent:!1,isBrandOrganic:!1},oo=function(e){var t=e.disabled,n=(0,s.useDispatch)(Ot).resetTime;return l.createElement("div",{className:"nelio-content-social-message-editor__reset-time-button"},l.createElement(Vt.Button,{variant:"link",disabled:t,onClick:n},(0,Rt._x)("Change","command","nelio-content")))},ro=function(e){var t=e.disabled,n=Dt(),i=n[0].timeValue,a=n[1];return l.createElement(Vt.BaseControl,{id:"nelio-content-social-message-editor__time-selector",label:(0,Rt._x)("Time","text","nelio-content")},l.createElement("div",{className:"nelio-content-social-message-editor__time-selector"},l.createElement(Nn.TimeInput,{disabled:t,value:i,onChange:function(e){return a("exact",null!=e?e:"")}}),l.createElement(oo,{disabled:t})))},lo=function(e){var t=e.disabled,n=Dt(),i=n[0].timeValue,a=n[1],o=Ut();return l.createElement(Vt.BaseControl,{id:"nelio-content-social-message-editor__time-selector",label:(0,Rt._x)("Time","text","nelio-content")},l.createElement("div",{className:"nelio-content-social-message-editor__time-selector"},(0,l.createInterpolateElement)(so(o),{input:l.createElement(Nn.NumberControl,{className:"nelio-content-social-message-editor__positive-hours-selector",disabled:t,value:i,min:2,onChange:function(e){return a("positive-hours",void 0===e?"":"".concat(e))}})}),l.createElement(oo,{disabled:t})))},so=function(e){return e?(0,Rt.sprintf)(/* translators: number of hours */ /* translators: number of hours */
(0,Rt._x)("%s hours after publication.","text","nelio-content"),"<input/>"):(0,Rt.sprintf)(/* translators: number of hours */ /* translators: number of hours */
(0,Rt._x)("In %s hours.","text","nelio-content"),"<input/>")},co=function(e){var t=e.disabled,n=Dt(),i=n[0].timeValue,a=n[1];return l.createElement(Vt.BaseControl,{id:"nelio-content-social-message-editor__time-selector",label:(0,Rt._x)("Time","text","nelio-content")},l.createElement("div",{className:"nelio-content-social-message-editor__time-selector"},l.createElement(Vt.SelectControl,{disabled:t,options:uo,value:i,onChange:function(e){"exact"===e?a("exact",""):a("time-interval",e)}})))},uo=[{value:"morning",label:(0,Rt._x)("Morning (8am – 11am)","text","nelio-content")},{value:"noon",label:(0,Rt._x)("Noon (11am – 3pm)","text","nelio-content")},{value:"afternoon",label:(0,Rt._x)("Afternoon (3pm – 7pm)","text","nelio-content")},{value:"night",label:(0,Rt._x)("Night (7pm – 11pm)","text","nelio-content")},{value:"exact",label:(0,Rt._x)("Choose a custom time…","user","nelio-content")}],mo=function(e){var t=e.disabled,n=Dt(),i=n[0].timeValue,a=n[1],o=Ut();return l.createElement(Vt.BaseControl,{id:"nelio-content-social-message-editor__time-selector",label:(0,Rt._x)("Time","text","nelio-content")},l.createElement("div",{className:"nelio-content-social-message-editor__time-selector"},l.createElement(Vt.SelectControl,{disabled:t,options:o?po:go,value:i,onChange:function(e){"positive-hours"===e||"exact"===e?a(e,""):a("predefined-offset",e)}})))},go=[{value:"0",label:(0,Rt._x)("Now","text","nelio-content")},{value:"1",label:(0,Rt._x)("In one hour","text","nelio-content")},{value:"3",label:(0,Rt._x)("In three hours","text","nelio-content")},{value:"5",label:(0,Rt._x)("In five hours","text","nelio-content")},{value:"positive-hours",label:(0,Rt._x)("In __ hours","text","nelio-content")},{value:"exact",label:(0,Rt._x)("Choose a custom time…","user","nelio-content")}],po=[{value:"0",label:(0,Rt._x)("Same time as publication","text","nelio-content")},{value:"1",label:(0,Rt._x)("One hour after publication","text","nelio-content")},{value:"3",label:(0,Rt._x)("Three hours after publication","text","nelio-content")},{value:"5",label:(0,Rt._x)("Five hours after publication","text","nelio-content")},{value:"positive-hours",label:(0,Rt._x)("__ hours after publication","text","nelio-content")},{value:"exact",label:(0,Rt._x)("Choose a custom time…","user","nelio-content")}],vo=function(e){var t=e.disabled;switch(Dt()[0].timeType){case"exact":return l.createElement(ro,{disabled:t});case"positive-hours":return l.createElement(lo,{disabled:t});case"time-interval":return l.createElement(co,{disabled:t});default:return l.createElement(mo,{disabled:t})}},fo=function(){var e=Jt(),t=Wt(),n=(0,m.useIsSubscribed)(),i=nn(),a=l.createElement(_o,null);return l.createElement(Nn.LoadingModal,{className:"nelio-content-social-message-editor",title:a,onClose:function(){},isLoading:e,loadingErrorMessage:"error"===i.type?(0,Rt.sprintf)(/* translators: a post ID */ /* translators: a post ID */
(0,Rt._x)("Post %d not found.","text","nelio-content"),i.postId):""},l.createElement(jn,null),l.createElement(eo,null),l.createElement(pa,{disabled:t}),l.createElement(Wn,{disabled:t}),l.createElement(Za,{disabled:t}),l.createElement(ia,null),l.createElement(Yn,{disabled:t}),l.createElement(io,{disabled:t}),l.createElement("div",{className:"nelio-content-social-message-editor__schedule-options"},l.createElement(Fn,{disabled:t||!n}),l.createElement(vo,{disabled:t||!n})),l.createElement(Ja,null),l.createElement(Tn,null))},_o=function(){var e=Yt();return l.createElement("div",{className:"nelio-content-social-message-editor__title"},l.createElement("div",{className:"nelio-content-social-message-editor__title-text"},e?(0,Rt._x)("Create Social Message","text","nelio-content"):(0,Rt._x)("Edit Social Message","text","nelio-content")),l.createElement("div",{className:"nelio-content-social-message-editor__title-help"},l.createElement(Nn.ContextualHelp,{context:"social-message-editor",walkthrough:Sn,autostart:!0})))},ho=function(){var e=Wt(),t=c((function(e){return e(Ot).getFailureDescription()})),n=(0,s.useDispatch)(Ot),i=n.close,a=n.makeEditable,o=n.sendNow;return l.createElement(Vt.Modal,{className:"nelio-content-social-message-error-dialog",title:(0,Rt._x)("Failed Social Message","text","nelio-content"),onRequestClose:function(){return!e&&i()}},l.createElement("div",{className:"nelio-content-social-message-error-dialog__content"},(0,k.isEmpty)(t)?l.createElement(l.Fragment,null,(0,Rt._x)("An error occurred while attempting to share this social message.","text","nelio-content")):l.createElement(l.Fragment,null,l.createElement("strong",null,(0,Rt._x)("Error!","text","nelio-content"))," ".concat(t))),l.createElement("div",{className:"nelio-content-social-message-error-dialog__actions"},l.createElement(Vt.Button,{variant:"secondary",onClick:a,disabled:e},(0,Rt._x)("Edit","command","nelio-content")),l.createElement(Vt.Button,{variant:"primary",isBusy:e,onClick:o,disabled:e},e?(0,Rt._x)("Saving…","text","nelio-content"):(0,Rt._x)("Send Now","command","nelio-content"))))},wo=function(){var e=en()[0],t=tn(),n=!!t,i=Jt(),a=on()[0],o=(0,s.useDispatch)(Ot).close;return l.createElement(Nn.LoadingModal,{className:"nelio-content-social-message-publish-dialog",title:(0,Rt._x)("Social Message","text","nelio-content"),onClose:o,isLoading:i},l.createElement("div",{className:"nelio-content-social-message-publish-dialog__content"},l.createElement("p",null,a),n&&!!(null==e?void 0:e.title)&&l.createElement("p",null,l.createElement("strong",null,(0,Rt._x)("Related Post:","text","nelio-content"))," ",l.createElement(Vt.ExternalLink,{href:null==e?void 0:e.viewLink},null==e?void 0:e.title)),n&&!(null==e?void 0:e.title)&&l.createElement("p",null,l.createElement("em",null,l.createElement("strong",null,(0,Rt._x)("Warning:","text","nelio-content")+" "),(0,Rt.sprintf)(/* translators: post id */ /* translators: post id */
(0,Rt._x)("related post “%d” couldn’t be loaded.","text","nelio-content"),t)))),l.createElement("div",{className:"nelio-content-social-message-publish-dialog__actions"},l.createElement(Vt.Button,{variant:"secondary",onClick:o},(0,Rt._x)("Close","command","nelio-content"))))},Eo=function(){return Eo=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Eo.apply(this,arguments)},yo=function(e,t,n){if(n||2===arguments.length)for(var i,a=0,o=t.length;a<o;a++)!i&&a in t||(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return e.concat(i||Array.prototype.slice.call(t))},bo=function(){var e=En()[0],t=hn(),n=(t[0],t[1]),i=No(),a=wn(),o=a[0],r=a[1];return l.createElement(Vt.Modal,{className:"nelio-content-social-message-recurrence-settings-dialog",title:(0,Rt._x)("Recurring Message Settings","text","nelio-content"),isDismissible:!1,onRequestClose:function(){}},l.createElement("div",{className:"nelio-content-social-message-recurrence-settings-dialog__content"},l.createElement("div",{className:"nelio-content-social-message-recurrence-settings-dialog__basic-settings"},(0,l.createInterpolateElement)((0,Rt.sprintf)(/* translators: 1 -> number selector, 2 -> days/weeks/months selector */ /* translators: 1 -> number selector, 2 -> days/weeks/months selector */
(0,Rt._x)("Repeat every %1$s %2$s","text","nelio-content"),"<occurrences />","<period />"),{occurrences:l.createElement(Nn.NumberControl,{value:o.interval?o.interval:void 0,onChange:function(e){return void 0===e&&(e=0),r(Eo(Eo({},o),{interval:e}))},min:1}),period:l.createElement(Vt.SelectControl,{value:o.period,onChange:function(t){switch(t){case"day":return r({period:t,occurrences:o.occurrences,interval:o.interval});case"week":return r({period:t,occurrences:o.occurrences,interval:o.interval,firstWeekday:i,weekdays:[e.weekday],isMessageDay:!0});case"month":return r({period:t,occurrences:o.occurrences,interval:o.interval,day:"monthday"})}},options:To})})),l.createElement(ko,null),l.createElement(xo,null),l.createElement("div",{className:"nelio-content-social-message-recurrence-settings-dialog__occurrences"},(0,l.createInterpolateElement)((0,Rt.sprintf)(/* translators: 1 -> number */ /* translators: 1 -> number */
(0,Rt._x)("Ends after %s occurrences","text","nelio-content"),"<occurrences />"),{occurrences:l.createElement(Nn.NumberControl,{value:o.occurrences<2?void 0:o.occurrences,onChange:function(e){return void 0===e&&(e=0),r(Eo(Eo({},o),{occurrences:e}))},min:2,max:50})}))),l.createElement("div",{className:"nelio-content-social-message-recurrence-settings-dialog__actions"},l.createElement(Vt.Button,{variant:"primary",onClick:function(){return n(!1)},disabled:Mo(o)},(0,Rt._x)("Back","command","nelio-content"))))},ko=function(){var e=En()[0],t=wn(),n=t[0],i=t[1],a=c((function(e){return e(m.store).getFirstDayOfWeek()}));return"week"!==n.period?null:l.createElement("div",{className:"nelio-content-social-message-recurrence-settings-dialog__weekdays"},l.createElement("span",null,(0,Rt._x)("On","text (on + weekdays)","nelio-content")),(0,d.range)(0,7).map((function(e){return Io[(e+a)%7]||"sun"})).map((function(t,a){return l.createElement("div",{key:a,className:"nelio-content-social-message-recurrence-settings-dialog__weekdays__toggle"},l.createElement("input",{type:"checkbox",checked:n.weekdays.includes(t),onChange:function(a){return function(t,a){var o=a?yo(yo([],n.weekdays,!0),[t],!1):(0,d.without)(n.weekdays,t),r=Eo(Eo({},n),{weekdays:o,isMessageDay:1===o.length&&o.includes(e.weekday)}),l=Eo(Eo({},n),{weekdays:[e.weekday],isMessageDay:!0}),s=0===r.weekdays.length;i(s?l:r)}(t,a.target.checked)}}),l.createElement("span",null,Co[t]))})))},xo=function(){var e=En()[0],t=wn(),n=t[0],i=t[1];if("month"!==n.period)return null;var a=function(t){switch(t){case 1:return(0,Rt.sprintf)(/* translators: day of week */ /* translators: day of week */
(0,Rt._x)("On the first %s","text","nelio-content"),Po[e.weekday]);case 2:return(0,Rt.sprintf)(/* translators: day of week */ /* translators: day of week */
(0,Rt._x)("On the second %s","text","nelio-content"),Po[e.weekday]);case 3:return(0,Rt.sprintf)(/* translators: day of week */ /* translators: day of week */
(0,Rt._x)("On the third %s","text","nelio-content"),Po[e.weekday]);case 4:return(0,Rt.sprintf)(/* translators: day of week */ /* translators: day of week */
(0,Rt._x)("On the fourth %s","text","nelio-content"),Po[e.weekday]);case 5:return(0,Rt.sprintf)(/* translators: day of week */ /* translators: day of week */
(0,Rt._x)("On the last %s","text","nelio-content"),Po[e.weekday])}},o=[{value:"monthday",label:(0,Rt.sprintf)(/* translators: day number in month */ /* translators: day number in month */
(0,Rt._x)("On day %d","text","nelio-content"),e.monthday)},{value:5===e.weekindex[0]?"last-weekday":"nth-weekday",label:a(e.weekindex[0])}];return 5===e.weekindex[1]&&o.push({value:"last-weekday",label:a(5)}),l.createElement(Vt.SelectControl,{options:o,value:n.day,onChange:function(e){return i(Eo(Eo({},n),{day:e}))}})},No=function(){return c((function(e){return Io[e(m.store).getFirstDayOfWeek()]||"sun"}))},So={day:(0,Rt._x)("Days","text","nelio-content"),week:(0,Rt._x)("Weeks","text","nelio-content"),month:(0,Rt._x)("Months","text","nelio-content")},To=Object.keys(So).map((function(e){return e})).map((function(e){return{value:e,label:So[e]}})),Io=["sun","mon","tue","wed","thu","fri","sat"],Po={sun:(0,Rt._x)("Sunday","text","nelio-content"),mon:(0,Rt._x)("Monday","text","nelio-content"),tue:(0,Rt._x)("Tuesday","text","nelio-content"),wed:(0,Rt._x)("Wednesday","text","nelio-content"),thu:(0,Rt._x)("Thursday","text","nelio-content"),fri:(0,Rt._x)("Friday","text","nelio-content"),sat:(0,Rt._x)("Saturday","text","nelio-content")},Co={sun:(0,Rt._x)("S","text (sunday)","nelio-content"),mon:(0,Rt._x)("M","text (monday)","nelio-content"),tue:(0,Rt._x)("T","text (tuesday)","nelio-content"),wed:(0,Rt._x)("W","text (wednesday)","nelio-content"),thu:(0,Rt._x)("T","text (thursday)","nelio-content"),fri:(0,Rt._x)("F","text (friday)","nelio-content"),sat:(0,Rt._x)("S","text (saturday)","nelio-content")},Mo=function(e){return e.occurrences<2||e.interval<1},Lo=function(){var e=c((function(e){return e(Ot).getReusableMessageId()})),t=!e,n=Ao(),i=Ht()[0],a=Wt(),o=(0,s.useDispatch)(m.store).deleteReusableMessage,r=(0,s.useDispatch)(Ot),u=r.close,d=r.saveReusableAndClose;return l.createElement("div",{className:"nelio-content-social-message-editor__actions nelio-content-social-message-editor__actions--is-reusable-message"},!!i&&l.createElement("div",{className:"nelio-content-social-message-editor__error-summary"},l.createElement("span",null,l.createElement(Vt.Dashicon,{icon:"warning"})),l.createElement("span",null,i)),!t&&!i&&l.createElement(Nn.DeleteButton,{className:"nelio-content-social-message-editor__delete-reusable-message",disabled:a,onClick:function(){e&&(o(e),u())}}),l.createElement(Vt.Button,{variant:"secondary",disabled:a,onClick:u},(0,Rt._x)("Cancel","command","nelio-content")),l.createElement(Nn.SaveButton,{variant:"primary",disabled:t?void 0:!n,error:i,isSaving:a,isUpdate:!t,onClick:function(){d()}}))},Ao=function(){var e=c((function(e){return e(m.store).getReusableMessage(e(Ot).getReusableMessageId())}));return c((function(t){var n,i;if(t(Ot),!e)return!0;var a=t(Ot).getSelectedSocialProfiles()[0],o=a?null===(n=t(Ot).getSelectedTargetsInProfile(a))||void 0===n?void 0:n[0]:void 0,r=t(Ot).getTimeType(),l={profileId:a,targetName:o,text:t(Ot).getText(),postId:null===(i=t(Ot).getPost())||void 0===i?void 0:i.id,timeType:"exact"===r||"time-interval"===r?r:"exact",timeValue:t(Ot).getTimeValue(),image:t(Ot).hasExplicitImage()?t(Ot).getImageUrl():void 0,video:t(Ot).getVideoUrl()},s=(0,d.mapValues)(l,(function(t,n){return e[n]!==t}));return(0,d.some)((0,d.values)(s))}))},Oo=function(e){var t=e.disabled;return l.createElement("div",{className:"nelio-content-social-message-editor__quick-actions-wrapper"},l.createElement(va,{disabled:t}),l.createElement("div",{className:"nelio-content-social-message-editor__quick-actions"},l.createElement($a,{disabled:t}),l.createElement(Ga,{disabled:t}),l.createElement(Na,{disabled:t}),l.createElement(La,{disabled:t}),l.createElement(Ya,{disabled:t}),l.createElement(_a,{disabled:t})))},Vo=function(e){var t=e.disabled;return"exact"===Dt()[0].timeType?l.createElement(ro,{disabled:t}):l.createElement(co,{disabled:t})},Ro=function(){var e=Jt(),t=Wt(),n=(0,m.useIsSubscribed)(),i=nn(),a=(0,s.useDispatch)(Ot).close,o=l.createElement(Bo,null);return l.createElement(Nn.LoadingModal,{className:"nelio-content-social-message-editor",title:o,onClose:a,isLoading:e,loadingErrorMessage:"error"===i.type?(0,Rt.sprintf)(/* translators: a post ID */ /* translators: a post ID */
(0,Rt._x)("Post %d not found.","text","nelio-content"),i.postId):""},l.createElement(jn,null),l.createElement(aa,{disabled:t}),l.createElement(Wn,{disabled:t}),l.createElement(Oo,{disabled:t}),l.createElement(ia,null),l.createElement("div",{className:"nelio-content-social-message-editor__schedule-options"},l.createElement(Vo,{disabled:t||!n})),l.createElement(Lo,null))},Bo=function(){var e=c((function(e){return!e(Ot).getReusableMessageId()}));return l.createElement("div",{className:"nelio-content-social-message-editor__title"},l.createElement("div",{className:"nelio-content-social-message-editor__title-text"},e?(0,Rt._x)("Create Reusable Social Message","text","nelio-content"):(0,Rt._x)("Edit Reusable Social Message","text","nelio-content")))},Do=function(){var e=c((function(e){return e(Ot).isEditorVisible()})),t=(0,m.useSocialProfiles)(),n=c((function(e){return e(Ot).isFreePreview()})),i=c((function(e){return e(Ot).isImageUrlSelectorVisible()})),a=c((function(e){return e(Ot).getStatus()})),o=c((function(e){return e(Ot).isEditingReusableMessage()})),r=hn()[0],u=(0,s.useDispatch)(m.store).openPremiumDialog,d=(0,s.useDispatch)(Ot).close;return(0,l.useEffect)((function(){e&&n&&(d(),u("raw/free-previews"))}),[e,n]),e?t.length?"error"===a?l.createElement(ho,null):"publish"===a?l.createElement(wo,null):r?l.createElement(bo,null):i?l.createElement(kn,null):o?l.createElement(Ro,null):l.createElement(fo,null):l.createElement(xn,null):null}},3939:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,i=0;n<e.length;n++,i+=8)t[i>>>5]|=e[n]<<24-i%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],i=0;i<e.length;i+=3)for(var a=e[i]<<16|e[i+1]<<8|e[i+2],o=0;o<4;o++)8*i+6*o<=8*e.length?n.push(t.charAt(a>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],i=0,a=0;i<e.length;a=++i%4)0!=a&&n.push((t.indexOf(e.charAt(i-1))&Math.pow(2,-2*a+8)-1)<<2*a|t.indexOf(e.charAt(i))>>>6-2*a);return n}},e.exports=n},7206:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}}},n={};function i(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,n,a,o)=>{if(!n){var r=1/0;for(u=0;u<e.length;u++){for(var[n,a,o]=e[u],l=!0,s=0;s<n.length;s++)(!1&o||r>=o)&&Object.keys(i.O).every((e=>i.O[e](n[s])))?n.splice(s--,1):(l=!1,o<r&&(r=o));if(l){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,a,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={9826:0,2445:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[r,l,s]=n,c=0;if(r.some((t=>0!==e[t]))){for(a in l)i.o(l,a)&&(i.m[a]=l[a]);if(s)var u=s(i)}for(t&&t(n);c<r.length;c++)o=r[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(u)},n=globalThis.webpackChunkNelioContent=globalThis.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=i.O(void 0,[2445],(()=>i(3901)));a=i.O(a);var o=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var r in a)o[r]=a[r];a.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();