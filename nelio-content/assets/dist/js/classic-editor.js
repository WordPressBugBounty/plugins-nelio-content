(()=>{var e={4396:(e,t)=>{"use strict";function n(e){return e}t.L8=void 0,t.L8=function(e){return e?function(t){return e(t),t}:n}}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o),n.d(o,{initPage:()=>G});const e=window.ReactJSXRuntime,t=window.wp.components,i=window.wp.data;function s(e,t){return(0,i.subscribe)(e,t)}const r=window.wp.domReady,a=n.n(r)(),c=window.wp.element;function l(e,t){t&&(c.createRoot?(0,c.createRoot)(t).render(e):(0,c.render)(e,t))}const u=window.wp.url,d=window.NelioContent.components,m=window.NelioContent.editPost,p=window.NelioContent.socialMessageEditor,g=window.NelioContent.taskEditor,f=window.wp.apiFetch,v=n.n(f)(),y=window.lodash,h=window.NelioContent.data,w=window.NelioContent.utils;var E=n(4396);const b=(0,E.L8)(),I=e=>!!e&&"function"==typeof e&&"ajaxPrefilter"in e,S=e=>!!e&&"object"==typeof e&&"data"in e,A=e=>!!e&&"object"==typeof e&&"action"in e;var x=function(e,t,n,o){return new(n||(n=Promise))(function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,a)}c((o=o.apply(e,t||[])).next())})};function k(e){return x(this,void 0,void 0,function*(){const t=yield function(e){return x(this,void 0,void 0,function*(){return yield v({path:`/nelio-content/v1/post/${e}?aws`})})}(e.postId);var n;yield function(e){return x(this,void 0,void 0,function*(){const{loadPostItems:t,setPost:n}=(0,i.dispatch)(m.store);yield n(e),t()})}(Object.assign(Object.assign({},t),{date:"none"!==t.date&&t.date,followers:e.attributes.followers,statistics:{engagement:{},pageviews:void 0}})),function(e=!1,t=!1){const{setEditorToClassic:n,setEditorToElementor:o}=(0,i.dispatch)(m.store);n(e),o(t)}(e.settings.isClassicEditor,e.settings.isElementorEditor),window.NelioContentTinyMCE={createMessage:P,getLinks:w.getLinks,isEmpty:w.isEmpty},function(e){if((0,w.isEmpty)(e))return;const{setAutoShareEndModes:t}=(0,i.dispatch)(m.store);t(e)}(e.settings.autoShareEndModes),function(e){const{includeAuthorInFollowers:t}=(0,i.dispatch)(m.store);t(e)}(e.settings.shouldAuthorBeFollower),function({url:e,alt:t}){if(!e)return;const{setExternalFeaturedImage:n}=(0,i.dispatch)(m.store);n(e,t)}(e.attributes.externalFeatImage),function(e){const{receiveReferences:t,suggestReferences:n}=(0,i.dispatch)(m.store);t(e);const o=(0,y.filter)(e,{isSuggestion:!0});(0,w.isEmpty)(o)||n((0,y.map)(o,"url"))}(e.attributes.references),function(e){const{markQualityAnalysisAsFullyIntegrated:t}=(0,i.dispatch)(m.store);t(!!e.isFullyIntegrated)}(n=e.settings.qualityAnalysis),function({isYoastIntegrated:e}){if(e)return;const{removeQualityCheckType:t}=(0,i.dispatch)(m.store);t("nelio-content/yoast-content"),t("nelio-content/yoast-seo")}(n),function(e){const{supportsFeatImage:t,canImageBeAutoSet:n}=e;if(!t){const{removeQualityCheckType:e}=(0,i.dispatch)(m.store);return void e("nelio-content/featured-image")}const{updateQualityCheckSettings:o}=(0,i.dispatch)(m.store);o("nelio-content/featured-image",{canImageBeAutoSet:n})}(n),function(){const{isMultiAuthor:e}=(0,i.select)(h.store);if(e())return;const{removeQualityCheckType:t}=(0,i.dispatch)(m.store);t("nelio-content/author")}(),function({setCustomField:e,removeCustomField:t}){a(()=>{const n=window.jQuery;I(n)&&n.ajaxPrefilter((n,o)=>{if(!S(n)||"string"!=typeof n.data)return;if(!S(o)||!A(o))return;const i=new URLSearchParams(n.data);switch(o.action){case"add-meta":if(i.has("metavalue")){const t="#NONE#"===i.get("metakeyselect")?i.get("metakeyinput"):i.get("metakeyselect"),n=i.get("metavalue")||"";t&&e(b(t),n)}else{const t=Array.from(i.keys()).filter(e=>/meta\[\d+\]\[key\]/.test(e)).map(e=>i.get(e))[0],n=Array.from(i.keys()).filter(e=>/meta\[\d+\]\[value\]/.test(e)).map(e=>i.get(e))[0];t&&n&&e(b(t),n)}break;case"delete-meta":{const e=i.get("id"),n=e?document.getElementById(`meta-${e}-key`):null,o=null==n?void 0:n.getAttribute("value");o&&t(b(o));break}}})})}((0,i.dispatch)(m.store)),function(){let e,t;s(()=>{const{getDate:n,getStatus:o}=(0,i.select)(m.store),s=n(),r=o();if(s===e&&r===t)return;e=s,t=r;const{updateDatesInPostRelatedItems:a}=(0,i.dispatch)(m.store);a()})}()})}function C(t,n){const o=document.getElementById(t);if(!o)return;const i=o.querySelector(".inside");i&&l((0,e.jsx)(n,{}),i)}function P(e,t){if(e=(0,y.trim)(e),(0,w.isEmpty)(e))return;const n=function(e){if((0,w.isEmpty)(e))return!1;const{getSocialProfilesByNetwork:t}=(0,i.select)(h.store);if((0,w.isEmpty)(t("twitter")))return!1;const{getReferenceByUrl:n}=(0,i.select)(m.store);for(const t of e){const e=n(t);if(e&&e.twitter)return e.twitter}return!1}(t);n&&(e=`${e} /cc ${n}`),e+=" {permalink}";const{getPost:o}=(0,i.select)(m.store),{openNewSocialMessageEditor:s}=(0,i.dispatch)(p.store);s({text:e},{context:"post",post:o(),disabledProfileIds:(0,m.getDisabledProfiles)()})}const j=()=>(0,e.jsx)(m.QualityAnalysis,{isMetabox:!0}),B=window.NelioContent.date;const N=window.jQuery;var M=n.n(N);const _=window.wp.coreData,L=(0,y.debounce)((e,t)=>{const n=e.value;if(!n)return;const{getPermalinkTemplate:o}=(0,i.select)(m.store),s=o();t((0,E.L8)()(s.replace("%postname%",n)))},500),O=e=>T(e)||F(e)||[],T=e=>{const t=document.getElementById(`${e}checklist`);if(!t)return;const n=Array.from(t.querySelectorAll('input[type="checkbox"]:checked')).map(e=>e.id).map(t=>t.replace(`in-${e}-`,"")).map(e=>parseInt(e)).filter(Boolean),{getEntityRecord:o}=(0,i.select)(_.store);return n.map(t=>o("taxonomy",e,t)).filter(R).map(({id:e,name:t,slug:n})=>({id:e,name:t,slug:n}))},F=e=>{var t;const n=document.getElementById(e);if(n)return Array.from((null===(t=n.querySelector(".tagchecklist"))||void 0===t?void 0:t.children)||[]).map(e=>{const t=(0,y.filter)(Array.from(e.childNodes),{nodeType:Node.TEXT_NODE}).map(({textContent:e})=>e);return(0,y.startCase)((0,y.trim)(t.join("")))}).map((e,t)=>({id:(0,E.L8)()(t+1),name:e,slug:e.toLowerCase().replace(/\s+/g,"-")}))},R=e=>!!e&&"object"==typeof e&&"id"in e&&"name"in e&&"slug"in e,q=e=>{let t=[];const n=()=>{const n=Array.from(document.querySelectorAll('.categorydiv input[type="checkbox"]'));(0,y.isEqual)(t,n)||(t.forEach(t=>t.removeEventListener("change",e)),t=n,n.forEach(t=>t.addEventListener("change",e)),e())};n();const o=(0,y.debounce)(n,2e3),i=new MutationObserver(o);document.querySelectorAll(".categorydiv").forEach(e=>i.observe(e,{childList:!0,subtree:!0}))},Q=e=>{const t=new MutationObserver(e);document.querySelectorAll(".tagsdiv").forEach(e=>t.observe(e,{childList:!0,subtree:!0}))};function $(){const e=(0,i.dispatch)(m.store);!function({setFeaturedImage:e}){const{getEntityRecord:t}=(0,i.select)(_.store),{getExternalFeaturedImageUrl:n}=(0,i.select)(m.store);let o,r=0,a=!1;const c=(0,y.debounce)(()=>{var i;const s=n();if(s){if(0===r&&a===s)return;return r=0,a=s,void e(r,s,o)}const c=document.getElementById("_thumbnail_id"),l=Number.parseInt((null==c?void 0:c.value)||""),u=(0,w.seemsMediaId)(l)?l:0,d=u?t("root","media",u):void 0,m=null==d?void 0:d.source_url,p=!!(0,w.isUrl)(m)&&m,g=null!==(i=null==d?void 0:d.alt_text)&&void 0!==i?i:"";r===u&&a===p&&o===g||(r=u,a=p,o=g,e(u,p,g))},500);(()=>{const e=document.getElementById("postimagediv");e&&(new MutationObserver(c).observe(e,{childList:!0,subtree:!0}),s(c))})(),(()=>{let e;s(()=>{const t=n();t!==e&&(e=t,c())})})()}(e),function({setTitle:e}){const t=document.getElementById("title");t&&t.addEventListener("change",(0,y.debounce)(()=>{const n=t.value||"";e(n)},500))}(e),function({setDate:e}){const t=document.querySelector("a.save-timestamp");if(!t)return;const n={year:document.getElementById("aa"),month:document.getElementById("mm"),day:document.getElementById("jj"),hour:document.getElementById("hh"),minute:document.getElementById("mn")},o=(0,y.values)(n).filter(e=>!e);(0,w.isEmpty)(o)&&t.addEventListener("click",()=>function(e,t){var n,o,i,s,r,a;const c=`${null!==(o=null===(n=e.year)||void 0===n?void 0:n.value)&&void 0!==o?o:""}-${(0,y.padStart)(null===(i=e.month)||void 0===i?void 0:i.value,2,"0")}-${(0,y.padStart)(null===(s=e.day)||void 0===s?void 0:s.value,2,"0")}`,l=`${(0,y.padStart)(null===(r=e.hour)||void 0===r?void 0:r.value,2,"0")}:${(0,y.padStart)(null===(a=e.minute)||void 0===a?void 0:a.value,2,"0")}`;t((0,B.wpifyDateTime)("c",c,l))}(n,e))}(e),function({setContent:e}){M()(document).on("tinymce-editor-init",(t,n)=>{n&&"content"===n.id&&function(e,t){e.on("nodechange keyup",(0,y.debounce)(()=>t(e.getContent()),2500))}(n,e)})}(e),function({setExcerpt:e}){const t=document.getElementById("excerpt");t&&t.addEventListener("change",(0,y.debounce)(()=>{const n=t.value;n&&e(n)},500))}(e),function({setPermalink:e}){const t=document.getElementById("post_name");if(!t)return;t.addEventListener("change",()=>L(t,e));const n=document.getElementById("edit-slug-box");n&&n.addEventListener("click",n=>{const o=n.target;(null==o?void 0:o.closest("#edit-slug-buttons .save"))&&L(t,e)})}(e),function({setAuthor:e}){const t=document.getElementById("post_author_override");t&&t.addEventListener("change",()=>{var n,o;const i=Number.parseInt(t.value);if(!(0,w.seemsAuthorId)(i))return;const s=null!==(o=null===(n=(t.options||[])[t.selectedIndex])||void 0===n?void 0:n.text)&&void 0!==o?o:"";e(i,s)})}(e),function({setTerms:e}){const{getPostType:t}=(0,i.select)(m.store),{getEntityRecords:n}=(0,i.select)(_.store);let o="";const r=(0,y.debounce)(()=>{const i=n("root","taxonomy",{per_page:-1})||[],s=(0,y.filter)(i,e=>{var n;return e.visibility.public&&e.types.includes(null!==(n=t())&&void 0!==n?n:"")}).map(e=>e.slug),r=s.map(O),a=JSON.stringify(r);a!==o&&(o=a,s.forEach((t,n)=>{var o;return e(t,null!==(o=r[n])&&void 0!==o?o:[])}))},500);s(r),q(r),Q(r)}(e)}const D=window.wp.i18n;function U(){const e=document.getElementById("post_status");if(!e)return;const t=H(window)?window.wp.data.select(h.store).getPostStatuses().filter(e=>!["nelio-content-unscheduled","draft","pending","future","auto-draft","publish","private","trash"].includes(e.slug)).filter(e=>e.available):[];J(e,t),X(t)}const J=(e,t)=>{var n,o,i;t.forEach(t=>{const n=document.createElement("option");n.setAttribute("value",t.slug),n.append(t.name),e.append(n)});const s=function(){var e;if(H(window))return null===(e=window.wp.data.select(m.store).getPost())||void 0===e?void 0:e.status}(),r=t.find(e=>e.slug===s);r&&(null===(n=document.getElementById("post-status-select"))||void 0===n||n.setAttribute("value",r.slug),null===(o=document.getElementById("post-status-display"))||void 0===o||o.append(r.name),null===(i=document.querySelector(`#post_status option[value="${r.slug}"]`))||void 0===i||i.setAttribute("selected","selected"),Y(r))},X=e=>{[...document.querySelectorAll("a.save-post-status, #save-post")].map(t=>null==t?void 0:t.addEventListener("click",()=>setInterval(()=>{const t=document.querySelector("#post_status option:checked"),n=e.find(e=>e.slug===(null==t?void 0:t.value));n&&Y(n)},100)))},Y=e=>{var t,n;null===(t=document.getElementById("original_publish"))||void 0===t||t.setAttribute("value",(0,D._x)("Update","command","nelio-content")),null===(n=document.getElementById("save-post"))||void 0===n||n.setAttribute("value",(0,D.sprintf)(/* translators: %s: custom status name */ /* translators: %s: custom status name */
(0,D._x)("Save %s","command","nelio-content"),e.name))};function H(e){return!!e.wp.data}var z=function(e,t,n,o){return new(n||(n=Promise))(function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,a)}c((o=o.apply(e,t||[])).next())})};function G(e){return z(this,void 0,void 0,function*(){(function(e){const t=document.getElementById("post");if(!t)return;const n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name","nelio-content-edit-post-nonce"),n.setAttribute("value",e),t.appendChild(n);const o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","nelio-content-classic-values"),t.appendChild(o),function(){let e={};s(()=>{const{getAutoShareEndMode:t,getAutomationSources:n,getExternalFeaturedImageAlt:s,getExternalFeaturedImageUrl:r,getNetworkImageIds:a,getPost:c,getQueryArgs:l,getSeries:u,getSuggestedReferences:d,isAutoShareEnabled:p}=(0,i.select)(m.store),g=c(),{highlights:f}=(0,m.processHtml)(g.content),v={autoShareEndMode:t(),automationSources:n(),efiAlt:s(),efiUrl:r()||"",followers:g.followers,highlights:f,isAutoShareEnabled:p(),networkImageIds:a(),permalinkQueryArgs:l(),series:u(),suggestedReferences:d()};(0,y.isEqual)(v,e)||(e=>{o.setAttribute("value",JSON.stringify(e))})(v),e=v},m.store)}()})((e=Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{isClassicEditor:!0})})).settings.nonce),yield k(e),function(){const e="nc-auto-messages",t=document.location.href;if(!(0,u.hasQueryArg)(t,e))return;history.replaceState(null,"",(0,u.removeQueryArgs)(t,e));const{generateTimeline:n}=(0,i.dispatch)(m.store);n()}(),C("nelio-content-quality-analysis",j),C("nelio-content-editorial-comments",m.EditorialComments),C("nelio-content-series",(0,d.getPremiumComponent)("post-page/series","raw/series")),C("nelio-content-future-actions",(0,d.getPremiumComponent)("post-page/future-actions","raw/future-actions")),C("nelio-content-network-images",(0,d.getPremiumComponent)("post-page/network-images","raw/network-images")),C("nelio-content-editorial-tasks",m.EditorialTasks),C("nelio-content-featured-image",m.ExternalFeaturedImage),C("nelio-content-notifications",m.Notifications),C("nelio-content-links",m.References),C("nelio-content-social-media",m.SocialMediaMetabox),function(e){if(!e.isFullyIntegrated)return;if(!e.isYoastIntegrated)return;const t=e=>{e&&(e.style.display="none")};a(()=>{t(document.getElementById("content-score")),t(document.getElementById("keyword-score"))})}(e.settings.qualityAnalysis),a(K),a(U),$()})}function K(){const n=document.createElement("div");n.classList.add("nelio-content-editor-dialogs-wrapper"),document.body.appendChild(n);const o=(0,d.getPremiumComponent)("post-page/future-action-editor","null");l((0,e.jsx)(c.StrictMode,{children:(0,e.jsxs)(t.SlotFillProvider,{children:[(0,e.jsx)(m.ReferenceEditor,{}),(0,e.jsx)(p.SocialMessageEditor,{}),(0,e.jsx)(g.TaskEditor,{}),(0,e.jsx)(o,{}),(0,e.jsx)(d.PremiumDialog,{}),(0,e.jsx)(t.Popover.Slot,{})]})}),n)}})();var i=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var s in o)i[s]=o[s];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();