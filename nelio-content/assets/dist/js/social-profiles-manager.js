(()=>{var e,t={7378:(e,t,n)=>{"use strict";n.r(t),n.d(t,{socialProfilesManager:()=>l});var i={};n.r(i),n.d(i,{areThereProfilesBeingDeleted:()=>C,getConnectionDialog:()=>b,getEditingAlias:()=>j,getEditingEmail:()=>E,getEditingLinkShortenerSettings:()=>w,getEditingPermissions:()=>k,getEditingProfileId:()=>S,getEditingProfileSettings:()=>y,getEditingPublicationStatus:()=>N,getEditingQueryArgs:()=>I,getEditingTelegramSettings:()=>P,getKindDialog:()=>v,isProfileBeingDeleted:()=>D,isProfileListRefreshing:()=>A,isSavingProfileSettings:()=>O});var o={};n.r(o),n.d(o,{closeKindSelectorDialog:()=>L,closeProfileEditor:()=>B,markAsBeingDeleted:()=>V,markAsDeleted:()=>W,markAsRefreshtingProfiles:()=>Y,markAsSavingProfileSettings:()=>H,openKindSelectorDialog:()=>R,openProfileEditor:()=>G,setEditingAlias:()=>F,setEditingEmail:()=>$,setEditingLinkShortenerSettings:()=>Q,setEditingPermissions:()=>K,setEditingPublicationStatus:()=>U,setEditingQueryArgs:()=>q,setEditingTelegramSettings:()=>M});var s={};n.r(s),n.d(s,{closeConnectionDialog:()=>ne,closeConnectionDialogAndRefresh:()=>te,deleteProfile:()=>ge,openConnectionDialog:()=>Z,refreshProfile:()=>ee,refreshSocialProfiles:()=>fe,saveProfileSettings:()=>de});var l={};n.r(l),n.d(l,{SocialProfilesManager:()=>lt,store:()=>pe,walkthrough:()=>st});const r=window.ReactJSXRuntime,a=window.wp.components,c=window.wp.data;function d(e,t){return(0,c.useSelect)(e,t)}const u=window.wp.element,g=window.NelioContent.components,f=window.NelioContent.data,p={connectionDialog:void 0,kindDialog:void 0},h={profileId:void 0,isSaving:!1,settings:{alias:"",email:"",permalinkQueryArgs:[],publicationStatus:void 0,telegramSettings:void 0,linkShortenerSettings:void 0,permissions:"all-roles"}},m={deleting:[],refreshing:[],isRefreshing:!1},x=window.lodash,_=(0,c.combineReducers)({connection:function(e=p,t){var n;return null!==(n=function(e,t){switch(t.type){case"OPEN_KIND_DIALOG_FOR_NETWORK":return Object.assign(Object.assign({},e),{kindDialog:t.network});case"CLOSE_KIND_DIALOG":return Object.assign(Object.assign({},e),{kindDialog:void 0});case"OPEN_CONNECTION_DIALOG":return Object.assign(Object.assign({},e),{connectionDialog:t.dialog});case"CLOSE_CONNECTION_DIALOG":return Object.assign(Object.assign({},e),{connectionDialog:void 0})}}(e,t))&&void 0!==n?n:e},profileEditor:function(e=h,t){var n;return null!==(n=function(e,t){var n;switch(t.type){case"OPEN_PROFILE_EDITOR":return{profileId:t.profileId,isSaving:!1,settings:t.settings};case"CLOSE_PROFILE_EDITOR":return Object.assign(Object.assign({},e),{profileId:void 0});case"MARK_AS_SAVING_PROFILE_SETTINGS":return Object.assign(Object.assign({},e),{isSaving:t.saving});case"SET_EDITING_ALIAS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{alias:t.alias})});case"SET_EDITING_EMAIL":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{email:t.email})});case"SET_EDITING_PERMISSIONS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{permissions:null!==(n=t.permissions)&&void 0!==n?n:"all-roles"})});case"SET_EDITING_PUBLICATION_STATUS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{publicationStatus:t.status})});case"SET_EDITING_TELEGRAM_SETTINGS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),t.settings&&{telegramSettings:t.settings})});case"SET_EDITING_LINK_SHORTENER_SETTINGS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{linkShortenerSettings:t.settings})});case"SET_EDITING_QUERY_ARGS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{permalinkQueryArgs:t.args})})}}(e,t))&&void 0!==n?n:e},profileList:function(e=m,t){var n;return null!==(n=function(e,t){switch(t.type){case"MARK_AS_BEING_DELETED":return Object.assign(Object.assign({},e),{deleting:[...e.deleting,t.profileId]});case"MARK_AS_DELETED":return Object.assign(Object.assign({},e),{deleting:(0,x.without)(e.deleting,t.profileId)});case"MARK_AS_REFRESHING_PROFILES":return Object.assign(Object.assign({},e),{isRefreshing:t.isRefreshing})}}(e,t))&&void 0!==n?n:e}});function v(e){return e.connection.kindDialog}function b(e){return e.connection.connectionDialog}function S(e){return e.profileEditor.profileId}function y(e){return e.profileEditor.settings}function j(e){return e.profileEditor.settings.alias}function E(e){return e.profileEditor.settings.email}function k(e){return e.profileEditor.settings.permissions}function N(e){return e.profileEditor.settings.publicationStatus}function P(e){return e.profileEditor.settings.telegramSettings}function w(e){return e.profileEditor.settings.linkShortenerSettings}function I(e){return e.profileEditor.settings.permalinkQueryArgs}function O(e){return e.profileEditor.isSaving}const T=window.NelioContent.utils;function A(e){return!!e.profileList.isRefreshing}function C(e){return!(0,T.isEmpty)(e.profileList.deleting)}function D(e,t){return e.profileList.deleting.includes(t)}function R(e){return{type:"OPEN_KIND_DIALOG_FOR_NETWORK",network:e}}function L(){return{type:"CLOSE_KIND_DIALOG"}}function G(e,t){return{type:"OPEN_PROFILE_EDITOR",profileId:e,settings:t}}function B(){return{type:"CLOSE_PROFILE_EDITOR"}}function F(e){return{type:"SET_EDITING_ALIAS",alias:e}}function $(e){return{type:"SET_EDITING_EMAIL",email:e}}function K(e){return{type:"SET_EDITING_PERMISSIONS",permissions:e}}function U(e){return{type:"SET_EDITING_PUBLICATION_STATUS",status:e}}function M(e){return{type:"SET_EDITING_TELEGRAM_SETTINGS",settings:e}}function Q(e){return{type:"SET_EDITING_LINK_SHORTENER_SETTINGS",settings:e}}function q(e){return{type:"SET_EDITING_QUERY_ARGS",args:e}}function H(e){return{type:"MARK_AS_SAVING_PROFILE_SETTINGS",saving:e}}function V(e){return{type:"MARK_AS_BEING_DELETED",profileId:e}}function W(e){return{type:"MARK_AS_DELETED",profileId:e}}function Y(e){return{type:"MARK_AS_REFRESHING_PROFILES",isRefreshing:e}}const z=window.wp.url,X=window.NelioContent.networks;var J=function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function l(e){try{a(i.next(e))}catch(e){s(e)}}function r(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(l,r)}a((i=i.apply(e,t||[])).next())})};function Z(e,t){return J(this,void 0,void 0,function*(){if(yield le(),(0,c.select)(pe).getConnectionDialog())return;const n=(0,X.getDefaultPublicationValue)("buffer"===e||"hootsuite"===e?t:e),i=ie(e,t);return se((0,z.addQueryArgs)(i,{publicationFreq:n}))})}function ee(e){return J(this,void 0,void 0,function*(){if(yield le(),(0,c.select)(pe).getConnectionDialog())return;const t=(0,c.select)(f.store).getSocialProfile(e);if(!t)return;const{network:n,kind:i}=t,o=t.isBuffer||t.isHootsuite?ie(t.isBuffer?"buffer":"hootsuite",n):ie(n,i);return se((0,z.addQueryArgs)(o,{socialProfileId:e}))})}function te(){return J(this,void 0,void 0,function*(){yield le();const e=(0,c.select)(pe).getConnectionDialog();e&&(yield(0,c.dispatch)(pe).closeConnectionDialog(e),yield(0,c.dispatch)(pe).refreshSocialProfiles())})}function ne(e){return J(this,void 0,void 0,function*(){return yield le(),e.close||e.close(),{type:"CLOSE_CONNECTION_DIALOG"}})}function ie(e,t){const n=(0,c.select)(f.store).getSiteId(),i=(0,c.select)(f.store).getApiRoot(),o=(0,c.select)(f.store).getCurrentUserId(),s=(0,c.select)(f.store).getSiteLanguage();if("buffer"===e)return(0,z.addQueryArgs)(`${i}/connect/buffer`,{network:t,siteId:n,creatorId:o,lang:s});if("hootsuite"===e)return(0,z.addQueryArgs)(`${i}/connect/hootsuite`,{network:t,siteId:n,creatorId:o,lang:s});const{network:l,kind:r}=oe(e,t),a=r&&"single"!==r?`${l}/${r}`:l;return(0,z.addQueryArgs)(`${i}/connect/${a}`,{siteId:n,creatorId:o,lang:s})}const oe=(e,t)=>"instagram"===e?{network:"facebook",kind:"instagram"}:{network:e,kind:t};function se(e){var t,n,i,o,s,l,r,a;const d=e.includes("telegram")?750:520,u=null!==(n=null!==(t=window.screenLeft)&&void 0!==t?t:screen.left)&&void 0!==n?n:0,g=null!==(o=null!==(i=window.screenTop)&&void 0!==i?i:screen.top)&&void 0!==o?o:0,f=(null!==(l=null!==(s=window.innerWidth)&&void 0!==s?s:document.documentElement.clientWidth)&&void 0!==l?l:screen.width)/2-320+u,p=(null!==(a=null!==(r=window.innerHeight)&&void 0!==r?r:document.documentElement.clientHeight)&&void 0!==a?a:screen.height)/2-d/2+g,h=window.open(e,"",`scrollbars=yes,width=640,height=${d},top=${p},left=${f}${e.includes("connect/vk")?",noreferrer":""}`);if(!h)return void window.addEventListener("focus",()=>(0,c.dispatch)(pe).refreshSocialProfiles(),{once:!0});const m=setInterval(()=>{h.closed&&(clearInterval(m),(0,c.dispatch)(pe).closeConnectionDialogAndRefresh())},500);return{type:"OPEN_CONNECTION_DIALOG",dialog:h}}function le(){return new Promise(e=>e())}const re=window.wp.apiFetch,ae=n.n(re)();var ce=function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function l(e){try{a(i.next(e))}catch(e){s(e)}}function r(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(l,r)}a((i=i.apply(e,t||[])).next())})};function de(){return ce(this,void 0,void 0,function*(){const e=(0,c.select)(pe).getEditingProfileId();if(!e)return;const t=(0,c.select)(f.store).getSocialProfile(e);if(!t)return;if((0,c.select)(pe).isSavingProfileSettings())return;const{markAsSavingProfileSettings:n}=(0,c.dispatch)(pe);yield n(!0);try{const n=(0,c.select)(pe).getEditingProfileSettings(),i=(0,c.select)(f.store).getSiteId(),o=(0,c.select)(f.store).getApiRoot(),s=(0,c.select)(f.store).getAuthenticationToken();yield ae({url:`${o}/site/${i}/profile/${e}`,method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:`Bearer ${s}`},data:n}),yield(0,c.dispatch)(f.store).receiveSocialProfiles(Object.assign(Object.assign({},t),n))}catch(e){yield(0,T.showErrorNotice)(e)}yield n(!1)})}var ue=function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function l(e){try{a(i.next(e))}catch(e){s(e)}}function r(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(l,r)}a((i=i.apply(e,t||[])).next())})};function ge(e){return ue(this,void 0,void 0,function*(){try{yield(0,c.dispatch)(pe).markAsBeingDeleted(e);const t=(0,c.select)(f.store).getSiteId(),n=(0,c.select)(f.store).getApiRoot(),i=(0,c.select)(f.store).getAuthenticationToken();yield ae({url:`${n}/site/${t}/profile/${e}`,method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:`Bearer ${i}`}}),yield(0,c.dispatch)(f.store).removeSocialProfile(e);const o=(0,c.select)(f.store).getSocialProfiles();yield ae({path:"/nelio-content/v1/settings/update-profiles",method:"PUT",data:{profiles:!(0,T.isEmpty)(o)}}),yield(0,c.dispatch)(pe).markAsDeleted(e)}catch(e){yield(0,T.showErrorNotice)(e)}})}function fe(){return ue(this,void 0,void 0,function*(){yield(0,c.dispatch)(pe).markAsRefreshtingProfiles(!0);try{const e=(0,c.select)(f.store).getSiteId(),t=(0,c.select)(f.store).getApiRoot(),n=(0,c.select)(f.store).getAuthenticationToken(),i=yield ae({url:`${t}/site/${e}/profiles`,method:"GET",credentials:"omit",mode:"cors",headers:{Authorization:`Bearer ${n}`}});yield ae({path:"/nelio-content/v1/settings/update-profiles",method:"PUT",data:{profiles:!(0,T.isEmpty)(i)}}),yield(0,c.dispatch)(f.store).receiveSocialProfiles(i)}catch(e){yield(0,T.showErrorNotice)(e)}yield(0,c.dispatch)(pe).markAsRefreshtingProfiles(!1)})}const pe=(0,c.createReduxStore)("nelio-content/profile-settings",{reducer:_,controls:c.controls,actions:Object.assign(Object.assign({},o),s),selectors:i});!function(e){(0,c.register)(e)}(pe);const he=window.wp.i18n,me=()=>{const{count:e,total:t}=xe();return e?(0,r.jsxs)("div",{className:"nelio-content-profile-section-title",children:[(0,r.jsx)("h2",{children:(0,he._x)("Connected Profiles","text","nelio-content")}),!!t&&(0,r.jsxs)("span",{className:"nelio-content-profile-section-title__profile-count",children:[e,"/",t]})]}):(0,r.jsx)("div",{className:"nelio-content-profile-section-title",children:(0,r.jsx)("h2",{children:(0,he._x)("Add Profiles","text","nelio-content")})})},xe=()=>d(e=>{const{getSocialProfileCount:t,getPluginLimits:n}=e(f.store),{maxProfiles:i}=n()||{};return{count:t(),total:i===Number.POSITIVE_INFINITY?0:i}});function _e(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=_e(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}const ve=function(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=_e(e))&&(i&&(i+=" "),i+=t);return i},be=({disabled:e,isUserAllowed:t,onClick:n})=>(0,r.jsx)("div",{className:"nelio-content-profile__reauthenticate-action",children:t?(0,r.jsx)(a.Button,{variant:"secondary",disabled:e,onClick:n,children:(0,he._x)("Re-Authenticate","command","nelio-content")}):(0,r.jsx)(a.Tooltip,{placement:"bottom",text:(0,he._x)("Only the user who added this profile can re-authenticate it","user","nelio-content"),delay:0,children:(0,r.jsx)("span",{style:{opacity:.8},children:(0,he._x)("Re-Authenticate","command","nelio-content")})})}),Se=({profileId:e})=>{const t=je(e),n=Ee(e),i=ke(e),o=(0,f.useSocialProfile)(e),{deleteProfile:s,refreshProfile:l}=(0,c.useDispatch)(pe),{openProfileEditor:d}=(0,c.useDispatch)(pe),{isPublicationEnabled:u,isReshareEnabled:p}=Ne(e);if(!o)return null;const{alias:h,displayName:m,status:x}=o;return(0,r.jsxs)("div",{className:ve({"nelio-content-profile":!0,"nelio-content-profile--is-locked":i,"nelio-content-profile--is-invalid":"valid"!==x}),children:[(0,r.jsxs)("div",{className:"nelio-content-profile__name",children:[null!=h?h:m,u&&(0,r.jsx)(a.Tooltip,{placement:"bottom",text:(0,he._x)("This profile can automatically share new content when it’s published","text","nelio-content"),delay:0,children:(0,r.jsx)(a.Dashicon,{className:"nelio-content-profile__automation-icon",icon:"megaphone"})}),p&&(0,r.jsx)(a.Tooltip,{text:(0,he._x)("This profile might reshare old content daily","text","nelio-content"),placement:"bottom",delay:0,children:(0,r.jsx)(a.Dashicon,{className:"nelio-content-profile__automation-icon",icon:"share-alt"})})]}),(0,r.jsx)("div",{className:"nelio-content-profile__icon",children:(0,r.jsx)(g.SocialProfileIcon,{profileId:e})}),(0,r.jsxs)("div",{className:"nelio-content-profile__details",children:[!!o.isBuffer&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:(0,he._x)("Buffer Profile","text","nelio-content")}),(0,r.jsx)("span",{children:"|"})]}),!!o.isHootsuite&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:(0,he._x)("Hootsuite Profile","text","nelio-content")}),(0,r.jsx)("span",{children:"|"})]}),(0,r.jsx)(g.ProfileCreator,{profileId:e}),!!o.email&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:"|"}),(0,r.jsx)("span",{children:Pe(o.email)})]})]}),"renew"===x&&(0,r.jsx)(be,{isUserAllowed:t,disabled:i,onClick:()=>{l(e)}}),i?(0,r.jsx)("div",{className:"nelio-content-profile__feedback",children:n?(0,r.jsx)(g.DeleteButton,{isDeleting:n,onClick:()=>{}}):(0,r.jsx)("br",{})}):(0,r.jsxs)("div",{className:"nelio-content-profile__actions",children:["renew"!==x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ye,{profileId:e})," | ",(0,r.jsx)(a.Button,{variant:"link",onClick:()=>{var e,t,n,i;d(o.id,{alias:null!==(e=o.alias)&&void 0!==e?e:o.displayName,email:null!==(t=o.email)&&void 0!==t?t:"",permissions:null!==(n=o.permissions)&&void 0!==n?n:"all-roles",permalinkQueryArgs:null!==(i=o.permalinkQueryArgs)&&void 0!==i?i:[],publicationStatus:o.publicationStatus,telegramSettings:o.telegramSettings,linkShortenerSettings:o.linkShortenerSettings})},children:(0,he._x)("Settings","text","nelio-content")})," | "]}),(0,r.jsx)(g.DeleteButton,{onClick:()=>{s(e)},confirmationLabels:{title:(0,he._x)("Delete Social Profile and Templates","text","nelio-content"),text:(0,he._x)("Are you sure you want to delete this profile? If you do so, you’ll also delete any social templates you defined for this profile in the Automations tab. This operation cannot be undone.","user","nelio-content")}})]})]})},ye=({profileId:e})=>{const t=je(e),{refreshProfile:n}=(0,c.useDispatch)(pe);return t?(0,r.jsx)(a.Button,{variant:"link",onClick:()=>{n(e)},children:(0,he._x)("Refresh","command","nelio-content")}):(0,r.jsx)(a.Tooltip,{placement:"bottom",text:(0,he._x)("Only the user who added this profile can refresh it","user","nelio-content"),delay:0,children:(0,r.jsx)("span",{children:(0,he._x)("Refresh","command","nelio-content")})})},je=e=>d(t=>{const n=t(f.store).getCurrentUserId(),i=t(f.store).getSocialProfile(e);return(null==i?void 0:i.creatorId)===n}),Ee=e=>d(t=>t(pe).isProfileBeingDeleted(e)),ke=e=>d(t=>t(pe).isProfileBeingDeleted(e)),Ne=e=>d(t=>{const n=(0,x.map)(t(f.store).getAutomationGroups(),t(f.store).getAutomationGroup).filter(T.isDefined).filter(e=>!!e.priority).filter(t=>{var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.enabled)});return{isPublicationEnabled:n.some(t=>{var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.publication.enabled)}),isReshareEnabled:n.some(t=>{var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.reshare.enabled)})}}),Pe=e=>{const[t="",n=""]=e.split("@"),i={length:10,omission:"…"};return`${(0,x.truncate)(t,i)}@${(0,x.truncate)(n,i)}`},we=()=>{const e=(0,x.reverse)((0,x.sortBy)((0,f.useSocialProfiles)(),"creationDate"));return(0,T.isEmpty)(e)?(0,r.jsx)("p",{children:(0,he._x)("Connect your social media profiles to Nelio Content using the following buttons:","user","nelio-content")}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:(0,he._x)("The following profiles are accessible to users with the appropriate permissions:","user","nelio-content")}),(0,r.jsx)("div",{className:"nelio-content-profile-list",children:e.map(({id:e})=>(0,r.jsx)(Se,{profileId:e},`nelio-content-profile-${e}`))})]})},Ie=({network:e,disabled:t})=>{const{openConnectionDialog:n,openKindSelectorDialog:i}=(0,c.useDispatch)(pe),o=(0,f.useIsSubscribed)(),s=Oe(e),l=(0,X.getNetworkLabel)("add",e),d=(0,X.getNetworkKinds)(e).length?(0,X.getNetworkKinds)(e):[{id:"single",label:(0,X.getNetworkLabel)("name",e)}],u=Te(e)(()=>{1!==d.length||(0,X.doesNetworkSupport)("buffer-connection",e)||(0,X.doesNetworkSupport)("hootsuite-connection",e)?i(e):n(e,d[0].id)});return o&&!s?(0,r.jsx)(a.Tooltip,{placement:"bottom",text:(0,he._x)("You’ve reached the maximum number of allowed profiles","user","nelio-content"),children:(0,r.jsx)("div",{className:"nelio-content-profile-connectors__connect-button",children:(0,r.jsx)(g.SocialNetworkIcon,{network:e,disabled:!0})})}):t?(0,r.jsx)("div",{className:"nelio-content-profile-connectors__connect-button",children:(0,r.jsx)(g.SocialNetworkIcon,{network:e,disabled:!0})}):(0,r.jsx)(a.Tooltip,{placement:"bottom",text:l,children:(0,r.jsx)(a.Button,{className:ve({"nelio-content-profile-connectors__connect-button":!0,"nelio-content-profile-connectors__connect-button--is-blurred":!s}),variant:"link",onClick:u,children:(0,r.jsx)(g.SocialNetworkIcon,{network:e})})})},Oe=e=>"available"===Ae(e),Te=e=>{const t=Ae(e);return(0,f.useFeatureGuard)("network-locked"===t?"settings/more-profiles-in-network":"settings/more-profiles","available"!==t)},Ae=e=>d(t=>{const{getPluginLimits:n,getAllSocialProfiles:i}=t(f.store),{maxProfiles:o,maxProfilesPerNetwork:s}=n(),l=i();return l.length>=o?"all-networks-locked":(0,x.filter)(l,{network:e}).length>=s?"network-locked":"available"}),Ce=({disabled:e})=>(0,r.jsx)("div",{className:"nelio-content-profile-connectors",children:(0,X.getSupportedNetworks)().map(t=>(0,r.jsx)(Ie,{network:t,disabled:e},t))}),De=[{type:"buffer",support:"buffer-connection",label:"Buffer"},{type:"hootsuite",support:"hootsuite-connection",label:"Hootsuite"}],Re=({network:e})=>{const t=(0,X.getNetworkKinds)(e).length?(0,X.getNetworkKinds)(e):[{id:"single",label:(0,X.getNetworkLabel)("name",e)}],n=d(e=>e(f.store).isSubscribed()),{closeKindSelectorDialog:i,openConnectionDialog:o}=(0,c.useDispatch)(pe),s=i,l=De.filter(({support:t})=>(0,X.doesNetworkSupport)(t,e));return(0,r.jsxs)(a.Modal,{className:"nelio-content-kind-selector-dialog",title:(0,he._x)("Connect Profile","text","nelio-content"),isDismissible:!0,shouldCloseOnEsc:!0,shouldCloseOnClickOutside:!0,onRequestClose:s,children:[(0,r.jsx)("div",{className:"nelio-content-kind-selector-dialog__list",children:t.map(({id:t,label:s})=>(0,r.jsxs)(a.Button,{className:"nelio-content-kind-selector-dialog__connect-button",variant:"link",onClick:()=>{return n=t,i(),void o(e,n);var n},disabled:"twitter"===e&&!n,children:[(0,r.jsx)(g.SocialNetworkIcon,{className:"nelio-content-kind-selector-dialog__profile-icon",network:e,kind:t}),(0,r.jsx)("span",{children:s})]},`nc-${e}-kind-${t}`))}),!!l.length&&(0,r.jsx)("p",{className:"nelio-content-kind-selector-dialog__alternative",children:(0,u.createInterpolateElement)((0,he.sprintf)(/* translators: %s: Alternative connection method, like “Buffer”. */ /* translators: %s: Alternative connection method, like “Buffer”. */
(0,he._x)("Or connect via %s","user","nelio-content"),(0,T.listify)("or",l.map(({type:e,label:t})=>`<${e}>${t}</${e}>`))),(0,x.mapValues)((0,x.keyBy)(l,"type"),({type:t})=>(0,r.jsx)(a.Button,{variant:"link",onClick:()=>{return n=t,i(),void o(n,e);var n}})))}),"twitter"===e&&(0,r.jsx)(Le,{})]})},Le=()=>{const e=d(e=>e(f.store).isSubscribed());return(0,r.jsxs)("p",{className:"nelio-content-kind-selector-dialog__notice",children:[(0,r.jsx)("strong",{children:(0,he._x)("Notice:","text","nelio-content")})," ",e?(0,he._x)("Due to recent changes in X’s API, messages posted through a native connection may be restricted, as Nelio Content has a maximum limit of requests allowed for a specific time frame.","text","nelio-content"):(0,he._x)("Due to recent changes in X’s API, native connections of X profiles are only available to Nelio Content subscribers. If you want to connect a X profile, please use Buffer or Hootsuite instead.","text","nelio-content")]})},Ge=()=>{const e=d(e=>!!e(pe).getConnectionDialog()),t=d(e=>e(pe).isProfileListRefreshing()),n=d(e=>e(pe).getKindDialog()),i=!!n;return(0,u.useEffect)(()=>{document.body.style.overflow=t||e?"hidden":""},[t,e]),(0,r.jsxs)("div",{className:"nelio-content-connection-dialog",children:[e&&(0,r.jsx)("div",{className:"nelio-content-connection-dialog__overlay",children:(0,r.jsx)("div",{className:"nelio-content-connection-dialog__overlay-content",children:(0,he._x)("Please follow the instructions to authenticate the social profile…","user","nelio-content")})}),i&&(0,r.jsx)(Re,{network:n}),t&&(0,r.jsx)("div",{className:"nelio-content-connection-dialog__overlay",children:(0,r.jsx)("div",{className:"nelio-content-connection-dialog__overlay-content",children:(0,he._x)("Refreshing social profiles…","text","nelio-content")})})]})},Be=()=>{const[e,t]=Fe();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"nelio-content-profile-settings-dialog__title",children:(0,he._x)("Profile Alias","text","nelio-content")}),(0,r.jsx)(a.TextControl,{value:e,onChange:t,placeholder:(0,he._x)("Alias","text","nelio-content"),help:(0,he._x)("Custom profile name to easily identify and distinguish this profile from other connected profiles.","text","nelio-content")})]})},Fe=()=>{const e=d(e=>(0,x.trim)(e(pe).getEditingAlias())),{setEditingAlias:t}=(0,c.useDispatch)(pe);return[e,t]},$e=()=>{const[e,t]=Ke();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"nelio-content-profile-settings-dialog__title",children:(0,he._x)("Fallback Email","text","nelio-content")}),(0,r.jsx)(a.TextControl,{value:e,onChange:t,placeholder:(0,he._x)("Email","text","nelio-content"),help:(0,he._x)("Nelio Content will use this email to let the recipient know when a social message couldn’t be shared, thus offering them the opportunity to manually share it.","text","nelio-content")})]})},Ke=()=>{const e=d(e=>(0,x.trim)(e(pe).getEditingEmail()).replace(/^mailto:/i,"")),{setEditingEmail:t}=(0,c.useDispatch)(pe);return[e,t]},Ue=()=>{const[e="public",t]=Me();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"nelio-content-profile-settings-dialog__title",children:(0,he._x)("Publication Status","text","nelio-content")}),(0,r.jsx)(a.SelectControl,{value:e,options:[{label:(0,he._x)("Public","text","nelio-content"),value:"public"},{label:(0,he._x)("Draft","text","nelio-content"),value:"draft"},{label:(0,he._x)("Unlisted","text","nelio-content"),value:"unlisted"}],onChange:t,help:(0,he._x)("Nelio Content will use this status when publishing content to Medium.","text","nelio-content")})]})},Me=()=>{const e=d(e=>e(pe).getEditingPublicationStatus()),{setEditingPublicationStatus:t}=(0,c.useDispatch)(pe);return[e,t]},Qe=()=>{var e;const[t,n]=qe();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"nelio-content-profile-settings-dialog__title",children:(0,he._x)("Link Button in Published Messages","text","nelio-content")}),(0,r.jsx)(a.CheckboxControl,{checked:!!(null==t?void 0:t.isTelegramButtonEnabled),onChange:e=>n(Object.assign(Object.assign({},t),{isTelegramButtonEnabled:e})),label:(0,he._x)("Add link button after text message","text","nelio-content"),help:(0,he._x)("Enable to add a button after Telegram messages that share an URL.","user","nelio-content")}),(null==t?void 0:t.isTelegramButtonEnabled)&&(0,r.jsx)(a.TextControl,{label:(0,he._x)("Link Button Label","text","nelio-content"),value:null!==(e=null==t?void 0:t.telegramButtonLabel)&&void 0!==e?e:(0,he._x)("Read more","text","nelio-content"),onChange:e=>n(Object.assign(Object.assign({},t),{telegramButtonLabel:e})),help:(0,he._x)("This label will be displayed on the Telegram link button.","text","nelio-content")})]})},qe=()=>{const e=d(e=>e(pe).getEditingTelegramSettings()),{setEditingTelegramSettings:t}=(0,c.useDispatch)(pe);return[e,t]},He=()=>{const{items:e,add:t,replace:n}=We();return(0,r.jsxs)("div",{className:"nelio-content-profile-settings-args",children:[(0,r.jsxs)("div",{className:"nelio-content-profile-settings-args__name",children:[(0,r.jsx)("span",{children:(0,he._x)("URL Parameters","text","nelio-content")}),(0,r.jsx)(a.Button,{variant:"link",onClick:t,children:(0,he._x)("Add New","command (URL parameter)","nelio-content")})]}),(0,r.jsx)("div",{className:"nelio-content-profile-settings-args__list",children:e.map((e,t)=>(0,r.jsx)(Ve,{name:e[0],value:e[1],isOverwriteable:e[2],showLabel:!t,onNameChange:t=>n(e,e[2]?[t,e[1],!0]:[t,e[1]]),onValueChange:t=>n(e,e[2]?[e[0],t,!0]:[e[0],t]),onOverwriteChange:t=>n(e,t?[e[0],e[1],!0]:[e[0],e[1]])},t))}),(0,r.jsx)("div",{className:"nelio-content-profile-settings-args__help",children:(0,he.sprintf)(/* translators: %s: Placeholder name. */ /* translators: %s: Placeholder name. */
(0,he._x)("Add URL parameters to links inserted with the %s placeholder. To remove parameters, leave their names empty.","user","nelio-content"),"{permalink}")})]})},Ve=({name:e,value:t,showLabel:n,isOverwriteable:i,onNameChange:o,onValueChange:s,onOverwriteChange:l})=>(0,r.jsxs)("div",{className:"nelio-content-profile-settings-args__item",children:[(0,r.jsx)(a.TextControl,{label:n?(0,he._x)("Name","text","nelio-content"):void 0,placeholder:(0,he._x)("Name","text","nelio-content"),value:e,onChange:o}),(0,r.jsx)(a.TextControl,{label:n?(0,he._x)("Value (optional)","text","nelio-content"):void 0,placeholder:(0,he._x)("Value (optional)","text","nelio-content"),value:t,onChange:s}),n?(0,r.jsx)(a.BaseControl,{id:"nelio-content-profile-settings-args__first-query-arg",label:(0,he._x)("Fallback","text (query arg)","nelio-content"),children:(0,r.jsx)(a.ToggleControl,{label:"",checked:i,onChange:l})}):(0,r.jsx)(a.ToggleControl,{label:"",checked:i,onChange:l})]}),We=()=>{const e=d(e=>e(pe).getEditingQueryArgs()),{setEditingQueryArgs:t}=(0,c.useDispatch)(pe);return{items:e,add:()=>t([...e,["",""]]),replace:(n,i)=>t(e.map(e=>e===n?i:e))}},Ye=()=>{const e=d(e=>e(f.store).getRoles()),[t="all-roles",n]=ze(),i=e=>e.isAdmin,[o,s]=(0,u.useState)(e.filter(e=>"all-roles"===t||"creator-only"!==t&&t.includes(e.id)||i(e)).map(e=>e.id));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.SelectControl,{label:(0,he._x)("Who can use this profile?","label","nelio-content"),options:[{label:(0,he._x)("All users","text","nelio-content"),value:"all-roles"},{label:(0,he._x)("Only the user that created it","text","nelio-content"),value:"creator-only"},{label:(0,he._x)("A set of specific roles","text","nelio-content"),value:"specific-roles"}],value:"string"==typeof t?t:"specific-roles",onChange:e=>{["all-roles","creator-only"].includes(e)?n(e):n(o)}}),"string"!=typeof t&&(0,r.jsx)("ul",{className:"nelio-content-profile-settings-dialog__roles",children:e.map(e=>(0,r.jsx)(Xe,{id:e.id,isChecked:o.includes(e.id)||i(e),isDisabled:i(e),onChange:t=>{const i=t?[...o||[],e.id]:(o||[]).filter(t=>t!==e.id);s(i),n(i)}},`nelio-content-profile-settings-dialog__role-${e.id}`))})]})},ze=()=>{const e=d(e=>e(pe).getEditingPermissions()),{setEditingPermissions:t}=(0,c.useDispatch)(pe);return[e,t]},Xe=({id:e,isChecked:t,onChange:n,isDisabled:i})=>{const o=d(t=>t(f.store).getRole(e));if(!o)return null;const{name:s}=o;return(0,r.jsx)("li",{className:ve(`nelio-content-profile-settings-dialog__role nelio-content-profile-settings-dialog__role--${e}`,{"nelio-content-profile-settings-dialog__role--is-disabled":i}),children:(0,r.jsx)(a.CheckboxControl,{label:s,checked:t,disabled:i,onChange:n})})},Je=()=>{const[e,t]=Ze();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"nelio-content-link-shortener-section",children:(0,he._x)("Link Shortening","text","nelio-content")}),(0,r.jsx)(g.LinkShortenerControl,{linkShortenerSettings:e,setLinkShortenerSettings:t})]})},Ze=()=>{const e=d(e=>e(pe).getEditingLinkShortenerSettings()),{setEditingLinkShortenerSettings:t}=(0,c.useDispatch)(pe);return[e,t]},et=()=>{const e=nt(),t=it(),n=ot(),[i,o]=(0,u.useState)("general"),{saveProfileSettings:s,closeProfileEditor:l}=(0,c.useDispatch)(pe);if("closed"===t)return null;const d=(0,X.doesNetworkSupport)("link-shortener",n);return(0,r.jsxs)(a.Modal,{className:"nelio-content-profile-settings-dialog",title:(0,he._x)("Profile Settings","text","nelio-content"),isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:()=>{},children:[(0,r.jsx)(a.TabPanel,{className:"nelio-content-profile-settings-dialog__tab-panel",activeClass:"nelio-content-profile-settings-dialog__tab--is-active",orientation:"horizontal",initialTabName:i,tabs:tt,onSelect:e=>o(e),children:({name:e})=>(0,r.jsxs)(r.Fragment,{children:["general"===e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Be,{}),"medium"===n&&(0,r.jsx)(Ue,{}),"telegram"===n&&(0,r.jsx)(Qe,{}),(0,r.jsx)($e,{})]}),"url"===e&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(He,{}),d&&(0,r.jsx)(Je,{})]}),"permissions"===e&&(0,r.jsx)(Ye,{})]})}),(0,r.jsxs)("div",{className:"nelio-content-profile-settings-dialog__actions",children:[(0,r.jsx)(a.Button,{variant:"secondary",disabled:"saving"===t,onClick:()=>{o("general"),l()},children:"open-dirty"===t?(0,he._x)("Discard Changes","command","nelio-content"):(0,he._x)("Cancel","command","nelio-content")}),(0,r.jsx)(g.SaveButton,{error:e||void 0,variant:"primary",disabled:"open-clean"===t,isSaving:"saving"===t,onClick:()=>{s().then(()=>{o("general"),l()})}})]})]})},tt=[{name:"general",title:(0,he._x)("General","text","nelio-content"),className:"nelio-content-profile-settings-dialog__tab"},{name:"url",title:(0,he._x)("URL","text","nelio-content"),className:"nelio-content-profile-settings-dialog__tab"},{name:"permissions",title:(0,he._x)("Permissions","text","nelio-content"),className:"nelio-content-profile-settings-dialog__tab"}],nt=()=>d(e=>{const t=(0,x.trim)(e(pe).getEditingEmail()).replace(/^mailto:/i,"");if(t&&!(0,z.isEmail)(t))return(0,he._x)("Please write a valid email address","user","nelio-content");const n=e(pe).getEditingLinkShortenerSettings();return"bitly"!==(null==n?void 0:n.type)||n.accessToken?"tinyurl"!==(null==n?void 0:n.type)||n.accessToken?"yourls"!==(null==n?void 0:n.type)||n.apiUrl?"yourls"!==(null==n?void 0:n.type)||n.signatureToken?"rebrandly"!==(null==n?void 0:n.type)||n.apiKey?"shlink"!==(null==n?void 0:n.type)||n.apiUrl?"shlink"!==(null==n?void 0:n.type)||n.apiKey?"polr"!==(null==n?void 0:n.type)||n.apiUrl?"polr"!==(null==n?void 0:n.type)||n.apiKey?"shortio"!==(null==n?void 0:n.type)||n.apiKey?"shortio"!==(null==n?void 0:n.type)||n.domain?"tly"!==(null==n?void 0:n.type)||n.apiToken?void 0:(0,he._x)("Please provide a T.ly API token","user","nelio-content"):(0,he._x)("Please provide a Short.io domain","user","nelio-content"):(0,he._x)("Please provide a Short.io API key","user","nelio-content"):(0,he._x)("Please provide a Polr API key","user","nelio-content"):(0,he._x)("Please provide a Polr API URL","user","nelio-content"):(0,he._x)("Please provide a Shlink API key","user","nelio-content"):(0,he._x)("Please provide a Shlink API URL","user","nelio-content"):(0,he._x)("Please provide a Rebrandly API key","user","nelio-content"):(0,he._x)("Please provide a YOURLS signature token","user","nelio-content"):(0,he._x)("Please provide a YOURLS API URL","user","nelio-content"):(0,he._x)("Please provide a TinyURL access token","user","nelio-content"):(0,he._x)("Please provide a Bitly access token","user","nelio-content")}),it=()=>d(e=>{var t,n,i,o;e(f.store);const s=e(pe).getEditingProfileId();if(!s)return"closed";if(e(pe).isSavingProfileSettings())return"saving";const l=e(pe).getEditingProfileSettings(),r=e(f.store).getSocialProfile(s),a={alias:null!==(t=null==r?void 0:r.alias)&&void 0!==t?t:"",email:null!==(n=null==r?void 0:r.email)&&void 0!==n?n:"",permalinkQueryArgs:null!==(i=null==r?void 0:r.permalinkQueryArgs)&&void 0!==i?i:[],publicationStatus:null==r?void 0:r.publicationStatus,telegramSettings:null==r?void 0:r.telegramSettings,linkShortenerSettings:null==r?void 0:r.linkShortenerSettings,permissions:null!==(o=null==r?void 0:r.permissions)&&void 0!==o?o:"all-roles"};return(0,x.isEqual)(a,l)?"open-clean":"open-dirty"}),ot=()=>d(e=>{e(f.store);const t=e(pe).getEditingProfileId();if(!t)return;const n=e(f.store).getSocialProfile(t);return null==n?void 0:n.network}),st=[{title:(0,he._x)("Settings - Social Profiles","text","nelio-content"),intro:(0,he._x)("Welcome to the Social Profiles Settings Screen. Here you can manage the social accounts you connected to Nelio Content and customize its auto-publication limits.","user","nelio-content")},{title:(0,he._x)("Available Networks","text","nelio-content"),intro:(0,he._x)("To connect new profiles, click on its social network and follow the on-screen instructions.","user","nelio-content"),element:()=>document.querySelector(".nelio-content-profile-connectors")},{title:(0,he._x)("Social Profiles","text","nelio-content"),intro:(0,he._x)("Here you can find all your connected profiles. Hover on each profile to reveal additional actions like, for example, re-authenticating or deleting a profile.","user","nelio-content"),active:()=>!!document.querySelector(".nelio-content-profile-list .nelio-content-profile"),element:()=>document.querySelector(".nelio-content-profile-list")},{title:(0,he._x)("Social Profiles","text","nelio-content"),intro:(0,he._x)("You can also add a fallback email address for each profile. Nelio Content will use it to let the recipient know when a social message couldn’t be automatically shared, thus offering them the opportunity to manually share it.","user","nelio-content"),active:()=>!!document.querySelector(".nelio-content-profile-list .nelio-content-profile"),element:()=>document.querySelector(".nelio-content-profile-list")},{title:(0,he._x)("Social Automations","text","nelio-content"),intro:(0,he._x)("In the Automations tab you’ll find all the options you need to customize how Nelio Content should share your WordPress content on social media, including how many social messages should be generated to do so.","user","nelio-content"),active:()=>!!document.querySelector("#nelio-content-automations"),element:()=>document.querySelector("#nelio-content-automations")}],lt=()=>{const e=d(e=>!e(f.store).hasFinishedResolution("getSocialProfiles")),t=d(e=>e(pe).areThereProfilesBeingDeleted());return e?(0,r.jsx)("div",{className:"nelio-content-social-profiles-layout",children:(0,r.jsx)(g.LoadingAnimation,{})}):(0,r.jsx)(u.StrictMode,{children:(0,r.jsx)(a.SlotFillProvider,{children:(0,r.jsxs)("div",{className:"nelio-content-social-profiles-layout",children:[(0,r.jsx)("div",{className:"nelio-content-social-profiles-layout__title-wrapper",children:(0,r.jsx)(me,{})}),(0,r.jsx)(we,{}),(0,r.jsx)(Ce,{disabled:t}),(0,r.jsx)(Ge,{}),(0,r.jsx)(et,{}),(0,r.jsx)(g.PremiumDialog,{}),(0,r.jsx)(a.Popover.Slot,{})]})})})}}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,i),s.exports}i.m=t,e=[],i.O=(t,n,o,s)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,o,s]=e[d],r=!0,a=0;a<n.length;a++)(!1&s||l>=s)&&Object.keys(i.O).every(e=>i.O[e](n[a]))?n.splice(a--,1):(r=!1,s<l&&(l=s));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,o,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={6799:0,5132:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,s,[l,r,a]=n,c=0;if(l.some(t=>0!==e[t])){for(o in r)i.o(r,o)&&(i.m[o]=r[o]);if(a)var d=a(i)}for(t&&t(n);c<l.length;c++)s=l[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},n=globalThis.webpackChunkNelioContent=globalThis.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=i.O(void 0,[5132],()=>i(7378));o=i.O(o);var s=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var l in o)s[l]=o[l];o.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();