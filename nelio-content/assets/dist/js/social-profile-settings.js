(()=>{var e,t={3437:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initPage:()=>Ye});var i={};n.r(i),n.d(i,{areThereProfilesBeingDeleted:()=>P,getConnectionDialog:()=>v,getEditingAlias:()=>y,getEditingEmail:()=>S,getEditingProfileId:()=>b,getEditingProfileSettings:()=>j,getEditingPublicationStatus:()=>E,getEditingQueryArgs:()=>N,getEditingTelegramSettings:()=>w,getKindDialog:()=>_,isProfileBeingDeleted:()=>C,isProfileListRefreshing:()=>O,isSavingProfileSettings:()=>k});var o={};n.r(o),n.d(o,{closeKindSelectorDialog:()=>D,closeProfileEditor:()=>R,markAsBeingDeleted:()=>M,markAsDeleted:()=>Q,markAsRefreshtingProfiles:()=>U,markAsSavingProfileSettings:()=>K,openKindSelectorDialog:()=>A,openProfileEditor:()=>T,setEditingAlias:()=>L,setEditingEmail:()=>B,setEditingPublicationStatus:()=>G,setEditingQueryArgs:()=>$,setEditingTelegramSettings:()=>F});var s={};n.r(s),n.d(s,{closeConnectionDialog:()=>J,closeConnectionDialogAndRefresh:()=>Y,deleteProfile:()=>ae,openConnectionDialog:()=>W,refreshProfile:()=>X,refreshSocialProfiles:()=>ce,saveProfileSettings:()=>le});const l=window.ReactJSXRuntime,r=window.wp.element;function a(e,t){t&&(r.createRoot?(0,r.createRoot)(t).render(e):(0,r.render)(e,t))}const c=window.wp.i18n,d=window.NelioContent.components,u=window.wp.data;function g(e,t){return(0,u.useSelect)(e,t)}const f={connectionDialog:void 0,kindDialog:void 0},p={profileId:void 0,isSaving:!1,settings:{alias:"",email:"",permalinkQueryArgs:[],publicationStatus:void 0,telegramSettings:void 0}},h={deleting:[],refreshing:[],isRefreshing:!1},m=window.lodash,x=(0,u.combineReducers)({connection:function(e=f,t){var n;return null!==(n=function(e,t){switch(t.type){case"OPEN_KIND_DIALOG_FOR_NETWORK":return Object.assign(Object.assign({},e),{kindDialog:t.network});case"CLOSE_KIND_DIALOG":return Object.assign(Object.assign({},e),{kindDialog:void 0});case"OPEN_CONNECTION_DIALOG":return Object.assign(Object.assign({},e),{connectionDialog:t.dialog});case"CLOSE_CONNECTION_DIALOG":return Object.assign(Object.assign({},e),{connectionDialog:void 0})}}(e,t))&&void 0!==n?n:e},profileEditor:function(e=p,t){var n;return null!==(n=function(e,t){switch(t.type){case"OPEN_PROFILE_EDITOR":return{profileId:t.profileId,isSaving:!1,settings:t.settings};case"CLOSE_PROFILE_EDITOR":return Object.assign(Object.assign({},e),{profileId:void 0});case"MARK_AS_SAVING_PROFILE_SETTINGS":return Object.assign(Object.assign({},e),{isSaving:t.saving});case"SET_EDITING_ALIAS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{alias:t.alias})});case"SET_EDITING_EMAIL":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{email:t.email})});case"SET_EDITING_PUBLICATION_STATUS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{publicationStatus:t.status})});case"SET_EDITING_TELEGRAM_SETTINGS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),t.settings&&{telegramSettings:t.settings})});case"SET_EDITING_QUERY_ARGS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{permalinkQueryArgs:t.args})})}}(e,t))&&void 0!==n?n:e},profileList:function(e=h,t){var n;return null!==(n=function(e,t){switch(t.type){case"MARK_AS_BEING_DELETED":return Object.assign(Object.assign({},e),{deleting:[...e.deleting,t.profileId]});case"MARK_AS_DELETED":return Object.assign(Object.assign({},e),{deleting:(0,m.without)(e.deleting,t.profileId)});case"MARK_AS_REFRESHING_PROFILES":return Object.assign(Object.assign({},e),{isRefreshing:t.isRefreshing})}}(e,t))&&void 0!==n?n:e}});function _(e){return e.connection.kindDialog}function v(e){return e.connection.connectionDialog}function b(e){return e.profileEditor.profileId}function j(e){return e.profileEditor.settings}function y(e){return e.profileEditor.settings.alias}function S(e){return e.profileEditor.settings.email}function E(e){return e.profileEditor.settings.publicationStatus}function w(e){return e.profileEditor.settings.telegramSettings}function N(e){return e.profileEditor.settings.permalinkQueryArgs}function k(e){return e.profileEditor.isSaving}const I=window.NelioContent.utils;function O(e){return!!e.profileList.isRefreshing}function P(e){return!(0,I.isEmpty)(e.profileList.deleting)}function C(e,t){return e.profileList.deleting.includes(t)}function A(e){return{type:"OPEN_KIND_DIALOG_FOR_NETWORK",network:e}}function D(){return{type:"CLOSE_KIND_DIALOG"}}function T(e,t){return{type:"OPEN_PROFILE_EDITOR",profileId:e,settings:t}}function R(){return{type:"CLOSE_PROFILE_EDITOR"}}function L(e){return{type:"SET_EDITING_ALIAS",alias:e}}function B(e){return{type:"SET_EDITING_EMAIL",email:e}}function G(e){return{type:"SET_EDITING_PUBLICATION_STATUS",status:e}}function F(e){return{type:"SET_EDITING_TELEGRAM_SETTINGS",settings:e}}function $(e){return{type:"SET_EDITING_QUERY_ARGS",args:e}}function K(e){return{type:"MARK_AS_SAVING_PROFILE_SETTINGS",saving:e}}function M(e){return{type:"MARK_AS_BEING_DELETED",profileId:e}}function Q(e){return{type:"MARK_AS_DELETED",profileId:e}}function U(e){return{type:"MARK_AS_REFRESHING_PROFILES",isRefreshing:e}}const q=window.wp.url,H=window.NelioContent.data,V=window.NelioContent.networks;var z=function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function l(e){try{a(i.next(e))}catch(e){s(e)}}function r(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(l,r)}a((i=i.apply(e,t||[])).next())})};function W(e,t){return z(this,void 0,void 0,function*(){if(yield ne(),(0,u.select)(de).getConnectionDialog())return;const n=(0,V.getDefaultPublicationValue)("buffer"===e||"hootsuite"===e?t:e),i=Z(e,t);return te((0,q.addQueryArgs)(i,{publicationFreq:n}))})}function X(e){return z(this,void 0,void 0,function*(){if(yield ne(),(0,u.select)(de).getConnectionDialog())return;const t=(0,u.select)(H.store).getSocialProfile(e);if(!t)return;const{network:n,kind:i}=t,o=t.isBuffer||t.isHootsuite?Z(t.isBuffer?"buffer":"hootsuite",n):Z(n,i);return te((0,q.addQueryArgs)(o,{socialProfileId:e}))})}function Y(){return z(this,void 0,void 0,function*(){yield ne();const e=(0,u.select)(de).getConnectionDialog();e&&(yield(0,u.dispatch)(de).closeConnectionDialog(e),yield(0,u.dispatch)(de).refreshSocialProfiles())})}function J(e){return z(this,void 0,void 0,function*(){return yield ne(),e.close||e.close(),{type:"CLOSE_CONNECTION_DIALOG"}})}function Z(e,t){const n=(0,u.select)(H.store).getSiteId(),i=(0,u.select)(H.store).getApiRoot(),o=(0,u.select)(H.store).getCurrentUserId(),s=(0,u.select)(H.store).getSiteLanguage();if("buffer"===e)return(0,q.addQueryArgs)(`${i}/connect/buffer`,{network:t,siteId:n,creatorId:o,lang:s});if("hootsuite"===e)return(0,q.addQueryArgs)(`${i}/connect/hootsuite`,{network:t,siteId:n,creatorId:o,lang:s});const{network:l,kind:r}=ee(e,t),a=r&&"single"!==r?`${l}/${r}`:l;return(0,q.addQueryArgs)(`${i}/connect/${a}`,{siteId:n,creatorId:o,lang:s})}const ee=(e,t)=>"instagram"===e?{network:"facebook",kind:"instagram"}:{network:e,kind:t};function te(e){const t=e.includes("telegram")?750:520,n=window.open(e,"",`width=640,height=${t}${e.includes("connect/vk")?",noreferrer":""}`);if(!n)return void window.addEventListener("focus",()=>(0,u.dispatch)(de).refreshSocialProfiles(),{once:!0});const i=setInterval(()=>{n.closed&&(clearInterval(i),(0,u.dispatch)(de).closeConnectionDialogAndRefresh())},500);return{type:"OPEN_CONNECTION_DIALOG",dialog:n}}function ne(){return new Promise(e=>e())}const ie=window.wp.apiFetch,oe=n.n(ie)();var se=function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function l(e){try{a(i.next(e))}catch(e){s(e)}}function r(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(l,r)}a((i=i.apply(e,t||[])).next())})};function le(){return se(this,void 0,void 0,function*(){const e=(0,u.select)(de).getEditingProfileId();if(!e)return;const t=(0,u.select)(H.store).getSocialProfile(e);if(!t)return;if((0,u.select)(de).isSavingProfileSettings())return;const{markAsSavingProfileSettings:n}=(0,u.dispatch)(de);yield n(!0);try{const n=(0,u.select)(de).getEditingProfileSettings(),i=(0,u.select)(H.store).getSiteId(),o=(0,u.select)(H.store).getApiRoot(),s=(0,u.select)(H.store).getAuthenticationToken();yield oe({url:`${o}/site/${i}/profile/${e}`,method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:`Bearer ${s}`},data:n}),yield(0,u.dispatch)(H.store).receiveSocialProfiles(Object.assign(Object.assign({},t),n))}catch(e){yield(0,I.showErrorNotice)(e)}yield n(!1)})}var re=function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function l(e){try{a(i.next(e))}catch(e){s(e)}}function r(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(l,r)}a((i=i.apply(e,t||[])).next())})};function ae(e){return re(this,void 0,void 0,function*(){try{yield(0,u.dispatch)(de).markAsBeingDeleted(e);const t=(0,u.select)(H.store).getSiteId(),n=(0,u.select)(H.store).getApiRoot(),i=(0,u.select)(H.store).getAuthenticationToken();yield oe({url:`${n}/site/${t}/profile/${e}`,method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:`Bearer ${i}`}}),yield(0,u.dispatch)(H.store).removeSocialProfile(e);const o=(0,u.select)(H.store).getSocialProfiles();yield oe({path:"/nelio-content/v1/settings/update-profiles",method:"PUT",data:{profiles:!(0,I.isEmpty)(o)}}),yield(0,u.dispatch)(de).markAsDeleted(e)}catch(e){yield(0,I.showErrorNotice)(e)}})}function ce(){return re(this,void 0,void 0,function*(){yield(0,u.dispatch)(de).markAsRefreshtingProfiles(!0);try{const e=(0,u.select)(H.store).getSiteId(),t=(0,u.select)(H.store).getApiRoot(),n=(0,u.select)(H.store).getAuthenticationToken(),i=yield oe({url:`${t}/site/${e}/profiles`,method:"GET",credentials:"omit",mode:"cors",headers:{Authorization:`Bearer ${n}`}});yield oe({path:"/nelio-content/v1/settings/update-profiles",method:"PUT",data:{profiles:!(0,I.isEmpty)(i)}}),yield(0,u.dispatch)(H.store).receiveSocialProfiles(i)}catch(e){yield(0,I.showErrorNotice)(e)}yield(0,u.dispatch)(de).markAsRefreshtingProfiles(!1)})}const de=(0,u.createReduxStore)("nelio-content/profile-settings",{reducer:x,controls:u.controls,actions:Object.assign(Object.assign({},o),s),selectors:i});!function(e){(0,u.register)(e)}(de);const ue=[{title:(0,c._x)("Settings - Social Profiles","text","nelio-content"),intro:(0,c._x)("Welcome to the Social Profiles Settings Screen. Here you can manage the social accounts you connected to Nelio Content and customize its auto-publication limits.","user","nelio-content")},{title:(0,c._x)("Available Networks","text","nelio-content"),intro:(0,c._x)("To connect new profiles, click on its social network and follow the on-screen instructions.","user","nelio-content"),element:()=>document.querySelector(".nelio-content-profile-connectors")},{title:(0,c._x)("Social Profiles","text","nelio-content"),intro:(0,c._x)("Here you can find all your connected profiles. Hover on each profile to reveal additional actions like, for example, re-authenticating or deleting a profile.","user","nelio-content"),active:()=>!!document.querySelector(".nelio-content-profile-list .nelio-content-profile"),element:()=>document.querySelector(".nelio-content-profile-list")},{title:(0,c._x)("Social Profiles","text","nelio-content"),intro:(0,c._x)("You can also add a fallback email address for each profile. Nelio Content will use it to let the recipient know when a social message couldn’t be automatically shared, thus offering them the opportunity to manually share it.","user","nelio-content"),active:()=>!!document.querySelector(".nelio-content-profile-list .nelio-content-profile"),element:()=>document.querySelector(".nelio-content-profile-list")},{title:(0,c._x)("Social Automations","text","nelio-content"),intro:(0,c._x)("In the Automations tab you’ll find all the options you need to customize how Nelio Content should share your WordPress content on social media, including how many social messages should be generated to do so.","user","nelio-content"),active:()=>!!document.querySelector("#nelio-content-automations"),element:()=>document.querySelector("#nelio-content-automations")}],ge=window.wp.components,fe=()=>{const{count:e,total:t}=pe();return e?(0,l.jsxs)("div",{className:"nelio-content-profile-section-title",children:[(0,l.jsx)("h2",{children:(0,c._x)("Connected Profiles","text","nelio-content")}),!!t&&(0,l.jsxs)("span",{className:"nelio-content-profile-section-title__profile-count",children:[e,"/",t]})]}):(0,l.jsx)("div",{className:"nelio-content-profile-section-title",children:(0,l.jsx)("h2",{children:(0,c._x)("Add Profiles","text","nelio-content")})})},pe=()=>g(e=>{const{getSocialProfileCount:t,getPluginLimits:n}=e(H.store),{maxProfiles:i}=n()||{};return{count:t(),total:i===Number.POSITIVE_INFINITY?0:i}});function he(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=he(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}const me=function(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=he(e))&&(i&&(i+=" "),i+=t);return i},xe=({disabled:e,isUserAllowed:t,onClick:n})=>(0,l.jsx)("div",{className:"nelio-content-profile__reauthenticate-action",children:t?(0,l.jsx)(ge.Button,{variant:"secondary",disabled:e,onClick:n,children:(0,c._x)("Re-Authenticate","command","nelio-content")}):(0,l.jsx)(ge.Tooltip,{placement:"bottom",text:(0,c._x)("Only the user who added this profile can re-authenticate it","user","nelio-content"),delay:0,children:(0,l.jsx)("span",{style:{opacity:.8},children:(0,c._x)("Re-Authenticate","command","nelio-content")})})}),_e=({profileId:e})=>{const t=be(e),n=je(e),i=ye(e),o=(0,H.useSocialProfile)(e),{deleteProfile:s,refreshProfile:r}=(0,u.useDispatch)(de),{openProfileEditor:a}=(0,u.useDispatch)(de),{isPublicationEnabled:g,isReshareEnabled:f}=Se(e);if(!o)return null;const{alias:p,displayName:h,status:m}=o;return(0,l.jsxs)("div",{className:me({"nelio-content-profile":!0,"nelio-content-profile--is-locked":i,"nelio-content-profile--is-invalid":"valid"!==m}),children:[(0,l.jsxs)("div",{className:"nelio-content-profile__name",children:[null!=p?p:h,g&&(0,l.jsx)(ge.Tooltip,{placement:"bottom",text:(0,c._x)("This profile can automatically share new content when it’s published","text","nelio-content"),delay:0,children:(0,l.jsx)(ge.Dashicon,{className:"nelio-content-profile__automation-icon",icon:"megaphone"})}),f&&(0,l.jsx)(ge.Tooltip,{text:(0,c._x)("This profile might reshare old content daily","text","nelio-content"),placement:"bottom",delay:0,children:(0,l.jsx)(ge.Dashicon,{className:"nelio-content-profile__automation-icon",icon:"share-alt"})})]}),(0,l.jsx)("div",{className:"nelio-content-profile__icon",children:(0,l.jsx)(d.SocialProfileIcon,{profileId:e})}),(0,l.jsxs)("div",{className:"nelio-content-profile__details",children:[!!o.isBuffer&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:(0,c._x)("Buffer Profile","text","nelio-content")}),(0,l.jsx)("span",{children:"|"})]}),!!o.isHootsuite&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:(0,c._x)("Hootsuite Profile","text","nelio-content")}),(0,l.jsx)("span",{children:"|"})]}),(0,l.jsx)(d.ProfileCreator,{profileId:e}),!!o.email&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{children:"|"}),(0,l.jsx)("span",{children:Ee(o.email)})]})]}),"renew"===m&&(0,l.jsx)(xe,{isUserAllowed:t,disabled:i,onClick:()=>{r(e)}}),i?(0,l.jsx)("div",{className:"nelio-content-profile__feedback",children:n?(0,l.jsx)(d.DeleteButton,{isDeleting:n,onClick:()=>{}}):(0,l.jsx)("br",{})}):(0,l.jsxs)("div",{className:"nelio-content-profile__actions",children:["renew"!==m&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ve,{profileId:e})," | ",(0,l.jsx)(ge.Button,{variant:"link",onClick:()=>{var e,t,n;a(o.id,{alias:null!==(e=o.alias)&&void 0!==e?e:o.displayName,email:null!==(t=o.email)&&void 0!==t?t:"",permalinkQueryArgs:null!==(n=o.permalinkQueryArgs)&&void 0!==n?n:[],publicationStatus:o.publicationStatus,telegramSettings:o.telegramSettings})},children:(0,c._x)("Settings","text","nelio-content")})," | "]}),(0,l.jsx)(d.DeleteButton,{onClick:()=>{s(e)},confirmationLabels:{title:(0,c._x)("Delete Social Profile and Templates","text","nelio-content"),text:(0,c._x)("Are you sure you want to delete this profile? If you do so, you’ll also delete any social templates you defined for this profile in the Automations tab. This operation cannot be undone.","user","nelio-content")}})]})]})},ve=({profileId:e})=>{const t=be(e),{refreshProfile:n}=(0,u.useDispatch)(de);return t?(0,l.jsx)(ge.Button,{variant:"link",onClick:()=>{n(e)},children:(0,c._x)("Refresh","command","nelio-content")}):(0,l.jsx)(ge.Tooltip,{placement:"bottom",text:(0,c._x)("Only the user who added this profile can refresh it","user","nelio-content"),delay:0,children:(0,l.jsx)("span",{children:(0,c._x)("Refresh","command","nelio-content")})})},be=e=>g(t=>{const n=t(H.store).getCurrentUserId(),i=t(H.store).getSocialProfile(e);return(null==i?void 0:i.creatorId)===n}),je=e=>g(t=>t(de).isProfileBeingDeleted(e)),ye=e=>g(t=>t(de).isProfileBeingDeleted(e)),Se=e=>g(t=>{const n=(0,m.map)(t(H.store).getAutomationGroups(),t(H.store).getAutomationGroup).filter(I.isDefined).filter(e=>!!e.priority).filter(t=>{var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.enabled)});return{isPublicationEnabled:n.some(t=>{var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.publication.enabled)}),isReshareEnabled:n.some(t=>{var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.reshare.enabled)})}}),Ee=e=>{const[t="",n=""]=e.split("@"),i={length:10,omission:"…"};return`${(0,m.truncate)(t,i)}@${(0,m.truncate)(n,i)}`},we=()=>{const e=(0,m.reverse)((0,m.sortBy)((0,H.useSocialProfiles)(),"creationDate"));return(0,I.isEmpty)(e)?(0,l.jsx)("p",{children:(0,c._x)("Connect your social media profiles to Nelio Content using the following buttons:","user","nelio-content")}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("p",{children:(0,c._x)("The following profiles can be managed by any author in your team:","user","nelio-content")}),(0,l.jsx)("div",{className:"nelio-content-profile-list",children:e.map(({id:e})=>(0,l.jsx)(_e,{profileId:e},`nelio-content-profile-${e}`))})]})},Ne=({network:e,disabled:t})=>{const{openConnectionDialog:n,openKindSelectorDialog:i}=(0,u.useDispatch)(de),o=(0,H.useIsSubscribed)(),s=ke(e),r=(0,V.getNetworkLabel)("add",e),a=(0,V.getNetworkKinds)(e).length?(0,V.getNetworkKinds)(e):[{id:"single",label:(0,V.getNetworkLabel)("name",e)}],g=Ie(e)(()=>{1!==a.length||(0,V.doesNetworkSupport)("buffer-connection",e)||(0,V.doesNetworkSupport)("hootsuite-connection",e)?i(e):n(e,a[0].id)});return o&&!s?(0,l.jsx)(ge.Tooltip,{placement:"bottom",text:(0,c._x)("You’ve reached the maximum number of allowed profiles","user","nelio-content"),children:(0,l.jsx)("div",{className:"nelio-content-profile-connectors__connect-button",children:(0,l.jsx)(d.SocialNetworkIcon,{network:e,disabled:!0})})}):t?(0,l.jsx)("div",{className:"nelio-content-profile-connectors__connect-button",children:(0,l.jsx)(d.SocialNetworkIcon,{network:e,disabled:!0})}):(0,l.jsx)(ge.Tooltip,{position:"bottom center",text:r,children:(0,l.jsx)(ge.Button,{className:me({"nelio-content-profile-connectors__connect-button":!0,"nelio-content-profile-connectors__connect-button--is-blurred":!s}),variant:"link",onClick:g,children:(0,l.jsx)(d.SocialNetworkIcon,{network:e})})})},ke=e=>"available"===Oe(e),Ie=e=>{const t=Oe(e);return(0,H.useFeatureGuard)("network-locked"===t?"settings/more-profiles-in-network":"settings/more-profiles","available"!==t)},Oe=e=>g(t=>{const{getPluginLimits:n,getSocialProfiles:i}=t(H.store),{maxProfiles:o,maxProfilesPerNetwork:s}=n(),l=i();return l.length>=o?"all-networks-locked":(0,m.filter)(l,{network:e}).length>=s?"network-locked":"available"}),Pe=({disabled:e})=>(0,l.jsx)("div",{className:"nelio-content-profile-connectors",children:(0,V.getSupportedNetworks)().map(t=>(0,l.jsx)(Ne,{network:t,disabled:e},t))}),Ce=[{type:"buffer",support:"buffer-connection",label:"Buffer"},{type:"hootsuite",support:"hootsuite-connection",label:"Hootsuite"}],Ae=({network:e})=>{const t=(0,V.getNetworkKinds)(e).length?(0,V.getNetworkKinds)(e):[{id:"single",label:(0,V.getNetworkLabel)("name",e)}],n=g(e=>e(H.store).isSubscribed()),{closeKindSelectorDialog:i,openConnectionDialog:o}=(0,u.useDispatch)(de),s=i,a=Ce.filter(({support:t})=>(0,V.doesNetworkSupport)(t,e));return(0,l.jsxs)(ge.Modal,{className:"nelio-content-kind-selector-dialog",title:(0,c._x)("Connect Profile","text","nelio-content"),isDismissible:!0,shouldCloseOnEsc:!0,shouldCloseOnClickOutside:!0,onRequestClose:s,children:[(0,l.jsx)("div",{className:"nelio-content-kind-selector-dialog__list",children:t.map(({id:t,label:s})=>(0,l.jsxs)(ge.Button,{className:"nelio-content-kind-selector-dialog__connect-button",variant:"link",onClick:()=>{return n=t,i(),void o(e,n);var n},disabled:"twitter"===e&&!n,children:[(0,l.jsx)(d.SocialNetworkIcon,{className:"nelio-content-kind-selector-dialog__profile-icon",network:e,kind:t}),(0,l.jsx)("span",{children:s})]},`nc-${e}-kind-${t}`))}),!!a.length&&(0,l.jsx)("p",{className:"nelio-content-kind-selector-dialog__alternative",children:(0,r.createInterpolateElement)((0,c.sprintf)(/* translators: %s: Alternative connection method, like “Buffer”. */ /* translators: %s: Alternative connection method, like “Buffer”. */
(0,c._x)("Or connect via %s","user","nelio-content"),(0,I.listify)("or",a.map(({type:e,label:t})=>`<${e}>${t}</${e}>`))),(0,m.mapValues)((0,m.keyBy)(a,"type"),({type:t})=>(0,l.jsx)(ge.Button,{variant:"link",onClick:()=>{return n=t,i(),void o(n,e);var n}})))}),"twitter"===e&&(0,l.jsx)(De,{})]})},De=()=>{const e=g(e=>e(H.store).isSubscribed());return(0,l.jsxs)("p",{className:"nelio-content-kind-selector-dialog__notice",children:[(0,l.jsx)("strong",{children:(0,c._x)("Notice:","text","nelio-content")})," ",e?(0,c._x)("Due to recent changes in X’s API, messages posted through a native connection may be restricted, as Nelio Content has a maximum limit of requests allowed for a specific time frame.","text","nelio-content"):(0,c._x)("Due to recent changes in X’s API, native connections of X profiles are only available to Nelio Content subscribers. If you want to connect a X profile, please use Buffer or Hootsuite instead.","text","nelio-content")]})},Te=()=>{const e=g(e=>!!e(de).getConnectionDialog()),t=g(e=>e(de).isProfileListRefreshing()),n=g(e=>e(de).getKindDialog()),i=!!n;return(0,r.useEffect)(()=>{document.body.style.overflow=t||e?"hidden":""},[t,e]),(0,l.jsxs)("div",{className:"nelio-content-connection-dialog",children:[e&&(0,l.jsx)("div",{className:"nelio-content-connection-dialog__overlay",children:(0,l.jsx)("div",{className:"nelio-content-connection-dialog__overlay-content",children:(0,c._x)("Please follow the instructions to authenticate the social profile…","user","nelio-content")})}),i&&(0,l.jsx)(Ae,{network:n}),t&&(0,l.jsx)("div",{className:"nelio-content-connection-dialog__overlay",children:(0,l.jsx)("div",{className:"nelio-content-connection-dialog__overlay-content",children:(0,c._x)("Refreshing social profiles…","text","nelio-content")})})]})},Re=()=>{const[e,t]=Le();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"nelio-content-profile-settings-dialog__title",children:(0,c._x)("Profile Alias","text","nelio-content")}),(0,l.jsx)(ge.TextControl,{value:e,onChange:t,placeholder:(0,c._x)("Alias","text","nelio-content"),help:(0,c._x)("Custom profile name to easily identify and distinguish this profile from other connected profiles.","text","nelio-content")})]})},Le=()=>{const e=g(e=>(0,m.trim)(e(de).getEditingAlias())),{setEditingAlias:t}=(0,u.useDispatch)(de);return[e,t]},Be=()=>{const[e,t]=Ge();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"nelio-content-profile-settings-dialog__title",children:(0,c._x)("Fallback Email","text","nelio-content")}),(0,l.jsx)(ge.TextControl,{value:e,onChange:t,placeholder:(0,c._x)("Email","text","nelio-content"),help:(0,c._x)("Nelio Content will use this email to let the recipient know when a social message couldn’t be shared, thus offering them the opportunity to manually share it.","text","nelio-content")})]})},Ge=()=>{const e=g(e=>(0,m.trim)(e(de).getEditingEmail()).replace(/^mailto:/i,"")),{setEditingEmail:t}=(0,u.useDispatch)(de);return[e,t]},Fe=()=>{const[e="public",t]=$e();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"nelio-content-profile-settings-dialog__title",children:(0,c._x)("Publication Status","text","nelio-content")}),(0,l.jsx)(ge.SelectControl,{value:e,options:[{label:(0,c._x)("Public","text","nelio-content"),value:"public"},{label:(0,c._x)("Draft","text","nelio-content"),value:"draft"},{label:(0,c._x)("Unlisted","text","nelio-content"),value:"unlisted"}],onChange:t,help:(0,c._x)("Nelio Content will use this status when publishing content to Medium.","text","nelio-content")})]})},$e=()=>{const e=g(e=>e(de).getEditingPublicationStatus()),{setEditingPublicationStatus:t}=(0,u.useDispatch)(de);return[e,t]},Ke=()=>{var e;const[t,n]=Me();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"nelio-content-profile-settings-dialog__title",children:(0,c._x)("Link Button in Published Messages","text","nelio-content")}),(0,l.jsx)(ge.CheckboxControl,{checked:!!(null==t?void 0:t.isTelegramButtonEnabled),onChange:e=>n(Object.assign(Object.assign({},t),{isTelegramButtonEnabled:e})),label:(0,c._x)("Add link button after text message","text","nelio-content"),help:(0,c._x)("Enable to add a button after Telegram messages that share an URL.","user","nelio-content")}),(null==t?void 0:t.isTelegramButtonEnabled)&&(0,l.jsx)(ge.TextControl,{label:(0,c._x)("Link Button Label","text","nelio-content"),value:null!==(e=null==t?void 0:t.telegramButtonLabel)&&void 0!==e?e:(0,c._x)("Read more","text","nelio-content"),onChange:e=>n(Object.assign(Object.assign({},t),{telegramButtonLabel:e})),help:(0,c._x)("This label will be displayed on the Telegram link button.","text","nelio-content")})]})},Me=()=>{const e=g(e=>e(de).getEditingTelegramSettings()),{setEditingTelegramSettings:t}=(0,u.useDispatch)(de);return[e,t]},Qe=()=>{const{items:e,add:t,replace:n}=qe();return(0,l.jsxs)("div",{className:"nelio-content-profile-settings-args",children:[(0,l.jsxs)("div",{className:"nelio-content-profile-settings-args__name",children:[(0,l.jsx)("span",{children:(0,c._x)("URL Parameters","text","nelio-content")}),(0,l.jsx)(ge.Button,{variant:"link",onClick:t,children:(0,c._x)("Add New","command (URL parameter)","nelio-content")})]}),(0,l.jsx)("div",{className:"nelio-content-profile-settings-args__list",children:e.map((e,t)=>(0,l.jsx)(Ue,{name:e[0],value:e[1],isOverwriteable:e[2],showLabel:!t,onNameChange:t=>n(e,e[2]?[t,e[1],!0]:[t,e[1]]),onValueChange:t=>n(e,e[2]?[e[0],t,!0]:[e[0],t]),onOverwriteChange:t=>n(e,t?[e[0],e[1],!0]:[e[0],e[1]])},t))}),(0,l.jsx)("div",{className:"nelio-content-profile-settings-args__help",children:(0,c.sprintf)(/* translators: %s: Placeholder name. */ /* translators: %s: Placeholder name. */
(0,c._x)("Add URL parameters to links inserted with the %s placeholder. To remove parameters, leave their names empty.","user","nelio-content"),"{permalink}")})]})},Ue=({name:e,value:t,showLabel:n,isOverwriteable:i,onNameChange:o,onValueChange:s,onOverwriteChange:r})=>(0,l.jsxs)("div",{className:"nelio-content-profile-settings-args__item",children:[(0,l.jsx)(ge.TextControl,{label:n?(0,c._x)("Name","text","nelio-content"):void 0,placeholder:(0,c._x)("Name","text","nelio-content"),value:e,onChange:o}),(0,l.jsx)(ge.TextControl,{label:n?(0,c._x)("Value (optional)","text","nelio-content"):void 0,placeholder:(0,c._x)("Value (optional)","text","nelio-content"),value:t,onChange:s}),n?(0,l.jsx)(ge.BaseControl,{id:"nelio-content-profile-settings-args__first-query-arg",label:(0,c._x)("Fallback","text (query arg)","nelio-content"),children:(0,l.jsx)(ge.ToggleControl,{label:"",checked:i,onChange:r})}):(0,l.jsx)(ge.ToggleControl,{label:"",checked:i,onChange:r})]}),qe=()=>{const e=g(e=>e(de).getEditingQueryArgs()),{setEditingQueryArgs:t}=(0,u.useDispatch)(de);return{items:e,add:()=>t([...e,["",""]]),replace:(n,i)=>t(e.map(e=>e===n?i:e))}},He=()=>{const e=Ve(),t=ze(),n=We(),{saveProfileSettings:i,closeProfileEditor:o}=(0,u.useDispatch)(de);return"closed"===t?null:(0,l.jsxs)(ge.Modal,{className:"nelio-content-profile-settings-dialog",title:(0,c._x)("Profile Settings","text","nelio-content"),isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:()=>{},children:[(0,l.jsx)(Re,{}),"medium"===n&&(0,l.jsx)(Fe,{}),"telegram"===n&&(0,l.jsx)(Ke,{}),(0,l.jsx)(Be,{}),(0,l.jsx)(Qe,{}),(0,l.jsxs)("div",{className:"nelio-content-profile-settings-dialog__actions",children:[(0,l.jsx)(ge.Button,{variant:"secondary",disabled:"saving"===t,onClick:o,children:"open-dirty"===t?(0,c._x)("Discard Changes","command","nelio-content"):(0,c._x)("Cancel","command","nelio-content")}),(0,l.jsx)(d.SaveButton,{error:e||void 0,variant:"primary",disabled:"open-clean"===t,isSaving:"saving"===t,onClick:()=>{i().then(o)}})]})]})},Ve=()=>g(e=>{const t=(0,m.trim)(e(de).getEditingEmail()).replace(/^mailto:/i,"");if(t&&!(0,q.isEmail)(t))return(0,c._x)("Please write a valid email address","user","nelio-content")}),ze=()=>g(e=>{var t,n,i;e(H.store);const o=e(de).getEditingProfileId();if(!o)return"closed";if(e(de).isSavingProfileSettings())return"saving";const s=e(de).getEditingProfileSettings(),l=e(H.store).getSocialProfile(o),r={alias:null!==(t=null==l?void 0:l.alias)&&void 0!==t?t:"",email:null!==(n=null==l?void 0:l.email)&&void 0!==n?n:"",permalinkQueryArgs:null!==(i=null==l?void 0:l.permalinkQueryArgs)&&void 0!==i?i:[],publicationStatus:null==l?void 0:l.publicationStatus,telegramSettings:null==l?void 0:l.telegramSettings};return(0,m.isEqual)(r,s)?"open-clean":"open-dirty"}),We=()=>g(e=>{e(H.store);const t=e(de).getEditingProfileId();if(!t)return;const n=e(H.store).getSocialProfile(t);return null==n?void 0:n.network}),Xe=()=>{const e=g(e=>!e(H.store).hasFinishedResolution("getSocialProfiles")),t=g(e=>e(de).areThereProfilesBeingDeleted());return e?(0,l.jsx)("div",{className:"nelio-content-social-profiles-layout",children:(0,l.jsx)(d.LoadingAnimation,{})}):(0,l.jsx)(r.StrictMode,{children:(0,l.jsx)(ge.SlotFillProvider,{children:(0,l.jsxs)("div",{className:"nelio-content-social-profiles-layout",children:[(0,l.jsx)("div",{className:"nelio-content-social-profiles-layout__title-wrapper",children:(0,l.jsx)(fe,{})}),(0,l.jsx)(we,{}),(0,l.jsx)(Pe,{disabled:t}),(0,l.jsx)(Te,{}),(0,l.jsx)(He,{}),(0,l.jsx)(d.PremiumDialog,{}),(0,l.jsx)(ge.Popover.Slot,{})]})})})};function Ye(e){const t=document.getElementById(e);a((0,l.jsx)(Xe,{}),t);const n=document.getElementById("nelio-content-settings-title");n&&a((0,l.jsx)(d.ContextualHelp,{context:"social-profiles",walkthrough:ue,autostart:!0,component:Je}),n)}const Je=({className:e,runWalkthrough:t})=>(0,l.jsx)("button",{className:`${e}  page-title-action`,onClick:t,children:(0,c._x)("Help","text","nelio-content")})}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var s=n[e]={exports:{}};return t[e](s,s.exports,i),s.exports}i.m=t,e=[],i.O=(t,n,o,s)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,o,s]=e[d],r=!0,a=0;a<n.length;a++)(!1&s||l>=s)&&Object.keys(i.O).every(e=>i.O[e](n[a]))?n.splice(a--,1):(r=!1,s<l&&(l=s));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[n,o,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={9268:0,3183:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,s,[l,r,a]=n,c=0;if(l.some(t=>0!==e[t])){for(o in r)i.o(r,o)&&(i.m[o]=r[o]);if(a)var d=a(i)}for(t&&t(n);c<l.length;c++)s=l[c],i.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return i.O(d)},n=globalThis.webpackChunkNelioContent=globalThis.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=i.O(void 0,[3183],()=>i(3437));o=i.O(o);var s=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var l in o)s[l]=o[l];o.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();