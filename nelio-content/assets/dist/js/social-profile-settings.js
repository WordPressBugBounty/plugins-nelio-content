(()=>{var e,t={8351:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initPage:()=>Ve});var i={};n.r(i),n.d(i,{areThereProfilesBeingDeleted:()=>I,getConnectionDialog:()=>_,getEditingAlias:()=>j,getEditingEmail:()=>S,getEditingProfileId:()=>b,getEditingProfileSettings:()=>y,getEditingPublicationStatus:()=>E,getEditingQueryArgs:()=>w,getKindDialog:()=>v,isProfileBeingDeleted:()=>O,isProfileListRefreshing:()=>P,isSavingProfileSettings:()=>N});var o={};n.r(o),n.d(o,{closeKindSelectorDialog:()=>A,closeProfileEditor:()=>T,markAsBeingDeleted:()=>$,markAsDeleted:()=>K,markAsRefreshtingProfiles:()=>M,markAsSavingProfileSettings:()=>F,openKindSelectorDialog:()=>C,openProfileEditor:()=>D,setEditingAlias:()=>R,setEditingEmail:()=>L,setEditingPublicationStatus:()=>B,setEditingQueryArgs:()=>G});var l={};n.r(l),n.d(l,{closeConnectionDialog:()=>X,closeConnectionDialogAndRefresh:()=>W,deleteProfile:()=>se,openConnectionDialog:()=>V,refreshProfile:()=>z,refreshSocialProfiles:()=>re,saveProfileSettings:()=>oe});const s=window.ReactJSXRuntime,r=window.wp.element;function a(e,t){t&&(r.createRoot?(0,r.createRoot)(t).render(e):(0,r.render)(e,t))}const c=window.wp.i18n,d=window.NelioContent.components,u=window.wp.data;function f(e,t){return(0,u.useSelect)(e,t)}const g={connectionDialog:void 0,kindDialog:void 0},p={profileId:void 0,isSaving:!1,settings:{alias:"",email:"",permalinkQueryArgs:[],publicationStatus:void 0}},h={deleting:[],refreshing:[],isRefreshing:!1},m=window.lodash,x=(0,u.combineReducers)({connection:function(e=g,t){var n;return null!==(n=function(e,t){switch(t.type){case"OPEN_KIND_DIALOG_FOR_NETWORK":return Object.assign(Object.assign({},e),{kindDialog:t.network});case"CLOSE_KIND_DIALOG":return Object.assign(Object.assign({},e),{kindDialog:void 0});case"OPEN_CONNECTION_DIALOG":return Object.assign(Object.assign({},e),{connectionDialog:t.dialog});case"CLOSE_CONNECTION_DIALOG":return Object.assign(Object.assign({},e),{connectionDialog:void 0})}}(e,t))&&void 0!==n?n:e},profileEditor:function(e=p,t){var n;return null!==(n=function(e,t){switch(t.type){case"OPEN_PROFILE_EDITOR":return{profileId:t.profileId,isSaving:!1,settings:t.settings};case"CLOSE_PROFILE_EDITOR":return Object.assign(Object.assign({},e),{profileId:void 0});case"MARK_AS_SAVING_PROFILE_SETTINGS":return Object.assign(Object.assign({},e),{isSaving:t.saving});case"SET_EDITING_ALIAS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{alias:t.alias})});case"SET_EDITING_EMAIL":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{email:t.email})});case"SET_EDITING_PUBLICATION_STATUS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{publicationStatus:t.status})});case"SET_EDITING_QUERY_ARGS":return Object.assign(Object.assign({},e),{settings:Object.assign(Object.assign({},e.settings),{permalinkQueryArgs:t.args})})}}(e,t))&&void 0!==n?n:e},profileList:function(e=h,t){var n;return null!==(n=function(e,t){switch(t.type){case"MARK_AS_BEING_DELETED":return Object.assign(Object.assign({},e),{deleting:[...e.deleting,t.profileId]});case"MARK_AS_DELETED":return Object.assign(Object.assign({},e),{deleting:(0,m.without)(e.deleting,t.profileId)});case"MARK_AS_REFRESHING_PROFILES":return Object.assign(Object.assign({},e),{isRefreshing:t.isRefreshing})}}(e,t))&&void 0!==n?n:e}});function v(e){return e.connection.kindDialog}function _(e){return e.connection.connectionDialog}function b(e){return e.profileEditor.profileId}function y(e){return e.profileEditor.settings}function j(e){return e.profileEditor.settings.alias}function S(e){return e.profileEditor.settings.email}function E(e){return e.profileEditor.settings.publicationStatus}function w(e){return e.profileEditor.settings.permalinkQueryArgs}function N(e){return e.profileEditor.isSaving}const k=window.NelioContent.utils;function P(e){return!!e.profileList.isRefreshing}function I(e){return!(0,k.isEmpty)(e.profileList.deleting)}function O(e,t){return e.profileList.deleting.includes(t)}function C(e){return{type:"OPEN_KIND_DIALOG_FOR_NETWORK",network:e}}function A(){return{type:"CLOSE_KIND_DIALOG"}}function D(e,t){return{type:"OPEN_PROFILE_EDITOR",profileId:e,settings:t}}function T(){return{type:"CLOSE_PROFILE_EDITOR"}}function R(e){return{type:"SET_EDITING_ALIAS",alias:e}}function L(e){return{type:"SET_EDITING_EMAIL",email:e}}function B(e){return{type:"SET_EDITING_PUBLICATION_STATUS",status:e}}function G(e){return{type:"SET_EDITING_QUERY_ARGS",args:e}}function F(e){return{type:"MARK_AS_SAVING_PROFILE_SETTINGS",saving:e}}function $(e){return{type:"MARK_AS_BEING_DELETED",profileId:e}}function K(e){return{type:"MARK_AS_DELETED",profileId:e}}function M(e){return{type:"MARK_AS_REFRESHING_PROFILES",isRefreshing:e}}const Q=window.wp.url,U=window.NelioContent.data,q=window.NelioContent.networks;var H=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{a(i.next(e))}catch(e){l(e)}}function r(e){try{a(i.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function V(e,t){return H(this,void 0,void 0,(function*(){if(yield ee(),(0,u.select)(ae).getConnectionDialog())return;const n=(0,q.getDefaultPublicationValue)("buffer"===e||"hootsuite"===e?t:e),i=Y(e,t);return Z((0,Q.addQueryArgs)(i,{publicationFreq:n}))}))}function z(e){return H(this,void 0,void 0,(function*(){if(yield ee(),(0,u.select)(ae).getConnectionDialog())return;const t=(0,u.select)(U.store).getSocialProfile(e);if(!t)return;const{network:n,kind:i}=t,o=t.isBuffer||t.isHootsuite?Y(t.isBuffer?"buffer":"hootsuite",n):Y(n,i);return Z((0,Q.addQueryArgs)(o,{socialProfileId:e}))}))}function W(){return H(this,void 0,void 0,(function*(){yield ee();const e=(0,u.select)(ae).getConnectionDialog();e&&(yield(0,u.dispatch)(ae).closeConnectionDialog(e),yield(0,u.dispatch)(ae).refreshSocialProfiles())}))}function X(e){return H(this,void 0,void 0,(function*(){return yield ee(),e.close||e.close(),{type:"CLOSE_CONNECTION_DIALOG"}}))}function Y(e,t){const n=(0,u.select)(U.store).getSiteId(),i=(0,u.select)(U.store).getApiRoot(),o=(0,u.select)(U.store).getCurrentUserId(),l=(0,u.select)(U.store).getSiteLanguage();if("buffer"===e)return(0,Q.addQueryArgs)(`${i}/connect/buffer`,{network:t,siteId:n,creatorId:o,lang:l});if("hootsuite"===e)return(0,Q.addQueryArgs)(`${i}/connect/hootsuite`,{network:t,siteId:n,creatorId:o,lang:l});const{network:s,kind:r}=J(e,t),a=r&&"single"!==r?`${s}/${r}`:s;return(0,Q.addQueryArgs)(`${i}/connect/${a}`,{siteId:n,creatorId:o,lang:l})}const J=(e,t)=>"instagram"===e?{network:"facebook",kind:"instagram"}:{network:e,kind:t};function Z(e){const t=e.includes("telegram")?750:520,n=window.open(e,"",`width=640,height=${t}`);if(!n)return;const i=setInterval((()=>{n.closed&&(clearInterval(i),(0,u.dispatch)(ae).closeConnectionDialogAndRefresh())}),500);return{type:"OPEN_CONNECTION_DIALOG",dialog:n}}function ee(){return new Promise((e=>e()))}const te=window.wp.apiFetch,ne=n.n(te)();var ie=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{a(i.next(e))}catch(e){l(e)}}function r(e){try{a(i.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function oe(){return ie(this,void 0,void 0,(function*(){const e=(0,u.select)(ae).getEditingProfileId();if(!e)return;const t=(0,u.select)(U.store).getSocialProfile(e);if(!t)return;if((0,u.select)(ae).isSavingProfileSettings())return;const{markAsSavingProfileSettings:n}=(0,u.dispatch)(ae);yield n(!0);try{const n=(0,u.select)(ae).getEditingProfileSettings(),i=(0,u.select)(U.store).getSiteId(),o=(0,u.select)(U.store).getApiRoot(),l=(0,u.select)(U.store).getAuthenticationToken();yield ne({url:`${o}/site/${i}/profile/${e}`,method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:`Bearer ${l}`},data:n}),yield(0,u.dispatch)(U.store).receiveSocialProfiles(Object.assign(Object.assign({},t),n))}catch(e){yield(0,k.showErrorNotice)(e)}yield n(!1)}))}var le=function(e,t,n,i){return new(n||(n=Promise))((function(o,l){function s(e){try{a(i.next(e))}catch(e){l(e)}}function r(e){try{a(i.throw(e))}catch(e){l(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}a((i=i.apply(e,t||[])).next())}))};function se(e){return le(this,void 0,void 0,(function*(){try{yield(0,u.dispatch)(ae).markAsBeingDeleted(e);const t=(0,u.select)(U.store).getSiteId(),n=(0,u.select)(U.store).getApiRoot(),i=(0,u.select)(U.store).getAuthenticationToken();yield ne({url:`${n}/site/${t}/profile/${e}`,method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:`Bearer ${i}`}}),yield(0,u.dispatch)(U.store).removeSocialProfile(e);const o=(0,u.select)(U.store).getSocialProfiles();yield ne({path:"/nelio-content/v1/settings/update-profiles",method:"PUT",data:{profiles:!(0,k.isEmpty)(o)}}),yield(0,u.dispatch)(ae).markAsDeleted(e)}catch(e){yield(0,k.showErrorNotice)(e)}}))}function re(){return le(this,void 0,void 0,(function*(){yield(0,u.dispatch)(ae).markAsRefreshtingProfiles(!0);try{const e=(0,u.select)(U.store).getSiteId(),t=(0,u.select)(U.store).getApiRoot(),n=(0,u.select)(U.store).getAuthenticationToken(),i=yield ne({url:`${t}/site/${e}/profiles`,method:"GET",credentials:"omit",mode:"cors",headers:{Authorization:`Bearer ${n}`}});yield ne({path:"/nelio-content/v1/settings/update-profiles",method:"PUT",data:{profiles:!(0,k.isEmpty)(i)}}),yield(0,u.dispatch)(U.store).receiveSocialProfiles(i)}catch(e){yield(0,k.showErrorNotice)(e)}yield(0,u.dispatch)(ae).markAsRefreshtingProfiles(!1)}))}const ae=(0,u.createReduxStore)("nelio-content/profile-settings",{reducer:x,controls:u.controls,actions:Object.assign(Object.assign({},o),l),selectors:i});!function(e){(0,u.register)(e)}(ae);const ce=[{title:(0,c._x)("Settings - Social Profiles","text","nelio-content"),intro:(0,c._x)("Welcome to the Social Profiles Settings Screen. Here you can manage the social accounts you connected to Nelio Content and customize its auto-publication limits.","user","nelio-content")},{title:(0,c._x)("Available Networks","text","nelio-content"),intro:(0,c._x)("To connect new profiles, click on its social network and follow the on-screen instructions.","user","nelio-content"),element:()=>document.querySelector(".nelio-content-profile-connectors")},{title:(0,c._x)("Social Profiles","text","nelio-content"),intro:(0,c._x)("Here you can find all your connected profiles. Hover on each profile to reveal additional actions like, for example, re-authenticating or deleting a profile.","user","nelio-content"),active:()=>!!document.querySelector(".nelio-content-profile-list .nelio-content-profile"),element:()=>document.querySelector(".nelio-content-profile-list")},{title:(0,c._x)("Social Profiles","text","nelio-content"),intro:(0,c._x)("You can also add a fallback email address for each profile. Nelio Content will use it to let the recipient know when a social message couldn’t be automatically shared, thus offering them the opportunity to manually share it.","user","nelio-content"),active:()=>!!document.querySelector(".nelio-content-profile-list .nelio-content-profile"),element:()=>document.querySelector(".nelio-content-profile-list")},{title:(0,c._x)("Social Automations","text","nelio-content"),intro:(0,c._x)("In the Automations tab you’ll find all the options you need to customize how Nelio Content should share your WordPress content on social media, including how many social messages should be generated to do so.","user","nelio-content"),active:()=>!!document.querySelector("#nelio-content-automations"),element:()=>document.querySelector("#nelio-content-automations")}],de=window.wp.components,ue=()=>{const{count:e,total:t}=fe();return e?(0,s.jsxs)("div",{className:"nelio-content-profile-section-title",children:[(0,s.jsx)("h2",{children:(0,c._x)("Connected Profiles","text","nelio-content")}),!!t&&(0,s.jsxs)("span",{className:"nelio-content-profile-section-title__profile-count",children:[e,"/",t]})]}):(0,s.jsx)("div",{className:"nelio-content-profile-section-title",children:(0,s.jsx)("h2",{children:(0,c._x)("Add Profiles","text","nelio-content")})})},fe=()=>f((e=>{const{getSocialProfileCount:t,getPluginLimits:n}=e(U.store),{maxProfiles:i}=n()||{};return{count:t(),total:i===Number.POSITIVE_INFINITY?0:i}}));function ge(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=ge(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}const pe=function(){for(var e,t,n=0,i="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=ge(e))&&(i&&(i+=" "),i+=t);return i},he=({disabled:e,isUserAllowed:t,onClick:n})=>(0,s.jsx)("div",{className:"nelio-content-profile__reauthenticate-action",children:t?(0,s.jsx)(de.Button,{variant:"secondary",disabled:e,onClick:n,children:(0,c._x)("Re-Authenticate","command","nelio-content")}):(0,s.jsx)(de.Tooltip,{placement:"bottom",text:(0,c._x)("Only the user who added this profile can re-authenticate it","user","nelio-content"),delay:0,children:(0,s.jsx)("span",{style:{opacity:.8},children:(0,c._x)("Re-Authenticate","command","nelio-content")})})}),me=({profileId:e})=>{const t=ve(e),n=_e(e),i=be(e),o=(0,U.useSocialProfile)(e),{deleteProfile:l,refreshProfile:r}=(0,u.useDispatch)(ae),{openProfileEditor:a}=(0,u.useDispatch)(ae),{isPublicationEnabled:f,isReshareEnabled:g}=ye(e);if(!o)return null;const{alias:p,displayName:h,status:m}=o;return(0,s.jsxs)("div",{className:pe({"nelio-content-profile":!0,"nelio-content-profile--is-locked":i,"nelio-content-profile--is-invalid":"valid"!==m}),children:[(0,s.jsxs)("div",{className:"nelio-content-profile__name",children:[null!=p?p:h,f&&(0,s.jsx)(de.Tooltip,{placement:"bottom",text:(0,c._x)("This profile can automatically share new content when it’s published","text","nelio-content"),delay:0,children:(0,s.jsx)(de.Dashicon,{className:"nelio-content-profile__automation-icon",icon:"megaphone"})}),g&&(0,s.jsx)(de.Tooltip,{text:(0,c._x)("This profile might reshare old content daily","text","nelio-content"),placement:"bottom",delay:0,children:(0,s.jsx)(de.Dashicon,{className:"nelio-content-profile__automation-icon",icon:"share-alt"})})]}),(0,s.jsx)("div",{className:"nelio-content-profile__icon",children:(0,s.jsx)(d.SocialProfileIcon,{profileId:e})}),(0,s.jsxs)("div",{className:"nelio-content-profile__details",children:[!!o.isBuffer&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:(0,c._x)("Buffer Profile","text","nelio-content")}),(0,s.jsx)("span",{children:"|"})]}),!!o.isHootsuite&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:(0,c._x)("Hootsuite Profile","text","nelio-content")}),(0,s.jsx)("span",{children:"|"})]}),(0,s.jsx)(d.ProfileCreator,{profileId:e}),!!o.email&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"|"}),(0,s.jsx)("span",{children:je(o.email)})]})]}),"renew"===m&&(0,s.jsx)(he,{isUserAllowed:t,disabled:i,onClick:()=>{r(e)}}),i?(0,s.jsx)("div",{className:"nelio-content-profile__feedback",children:n?(0,s.jsx)(d.DeleteButton,{isDeleting:n,onClick:()=>{}}):(0,s.jsx)("br",{})}):(0,s.jsxs)("div",{className:"nelio-content-profile__actions",children:["renew"!==m&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(xe,{profileId:e})," | ",(0,s.jsx)(de.Button,{variant:"link",onClick:()=>{var e,t,n;a(o.id,{alias:null!==(e=o.alias)&&void 0!==e?e:o.displayName,email:null!==(t=o.email)&&void 0!==t?t:"",permalinkQueryArgs:null!==(n=o.permalinkQueryArgs)&&void 0!==n?n:[],publicationStatus:o.publicationStatus})},children:(0,c._x)("Settings","text","nelio-content")})," | "]}),(0,s.jsx)(d.DeleteButton,{onClick:()=>{l(e)},confirmationLabels:{title:(0,c._x)("Delete Social Profile and Templates","text","nelio-content"),text:(0,c._x)("Are you sure you want to delete this profile? If you do so, you’ll also delete any social templates you defined for this profile in the Automations tab. This operation cannot be undone.","user","nelio-content")}})]})]})},xe=({profileId:e})=>{const t=ve(e),{refreshProfile:n}=(0,u.useDispatch)(ae);return t?(0,s.jsx)(de.Button,{variant:"link",onClick:()=>{n(e)},children:(0,c._x)("Refresh","command","nelio-content")}):(0,s.jsx)(de.Tooltip,{placement:"bottom",text:(0,c._x)("Only the user who added this profile can refresh it","user","nelio-content"),delay:0,children:(0,s.jsx)("span",{children:(0,c._x)("Refresh","command","nelio-content")})})},ve=e=>f((t=>{const n=t(U.store).getCurrentUserId(),i=t(U.store).getSocialProfile(e);return(null==i?void 0:i.creatorId)===n})),_e=e=>f((t=>t(ae).isProfileBeingDeleted(e))),be=e=>f((t=>t(ae).isProfileBeingDeleted(e))),ye=e=>f((t=>{const n=(0,m.map)(t(U.store).getAutomationGroups(),t(U.store).getAutomationGroup).filter(k.isDefined).filter((e=>!!e.priority)).filter((t=>{var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.enabled)}));return{isPublicationEnabled:n.some((t=>{var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.publication.enabled)})),isReshareEnabled:n.some((t=>{var n;return!!(null===(n=t.profileSettings[e])||void 0===n?void 0:n.reshare.enabled)}))}})),je=e=>{const[t="",n=""]=e.split("@"),i={length:10,omission:"…"};return`${(0,m.truncate)(t,i)}@${(0,m.truncate)(n,i)}`},Se=()=>{const e=(0,m.reverse)((0,m.sortBy)((0,U.useSocialProfiles)(),"creationDate"));return(0,k.isEmpty)(e)?(0,s.jsx)("p",{children:(0,c._x)("Connect your social media profiles to Nelio Content using the following buttons:","user","nelio-content")}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{children:(0,c._x)("The following profiles can be managed by any author in your team:","user","nelio-content")}),(0,s.jsx)("div",{className:"nelio-content-profile-list",children:e.map((({id:e})=>(0,s.jsx)(me,{profileId:e},`nelio-content-profile-${e}`)))})]})},Ee=({network:e,disabled:t})=>{const{openConnectionDialog:n,openKindSelectorDialog:i}=(0,u.useDispatch)(ae),o=(0,U.useIsSubscribed)(),l=we(e),r=(0,q.getNetworkLabel)("add",e),a=(0,q.getNetworkKinds)(e).length?(0,q.getNetworkKinds)(e):[{id:"single",label:(0,q.getNetworkLabel)("name",e)}],f=Ne(e)((()=>{1!==a.length||(0,q.doesNetworkSupport)("buffer-connection",e)||(0,q.doesNetworkSupport)("hootsuite-connection",e)?i(e):n(e,a[0].id)}));return o&&!l?(0,s.jsx)(de.Tooltip,{placement:"bottom",text:(0,c._x)("You’ve reached the maximum number of allowed profiles","user","nelio-content"),children:(0,s.jsx)("div",{className:"nelio-content-profile-connectors__connect-button",children:(0,s.jsx)(d.SocialNetworkIcon,{network:e,disabled:!0})})}):t?(0,s.jsx)("div",{className:"nelio-content-profile-connectors__connect-button",children:(0,s.jsx)(d.SocialNetworkIcon,{network:e,disabled:!0})}):(0,s.jsx)(de.Tooltip,{position:"bottom center",text:r,children:(0,s.jsx)(de.Button,{className:pe({"nelio-content-profile-connectors__connect-button":!0,"nelio-content-profile-connectors__connect-button--is-blurred":!l}),variant:"link",onClick:f,children:(0,s.jsx)(d.SocialNetworkIcon,{network:e})})})},we=e=>"available"===ke(e),Ne=e=>{const t=ke(e);return(0,U.useFeatureGuard)("network-locked"===t?"settings/more-profiles-in-network":"settings/more-profiles","available"!==t)},ke=e=>f((t=>{const{getPluginLimits:n,getSocialProfiles:i}=t(U.store),{maxProfiles:o,maxProfilesPerNetwork:l}=n(),s=i();return s.length>=o?"all-networks-locked":(0,m.filter)(s,{network:e}).length>=l?"network-locked":"available"})),Pe=({disabled:e})=>(0,s.jsx)("div",{className:"nelio-content-profile-connectors",children:(0,q.getSupportedNetworks)().map((t=>(0,s.jsx)(Ee,{network:t,disabled:e},t)))}),Ie=[{type:"buffer",support:"buffer-connection",label:"Buffer"},{type:"hootsuite",support:"hootsuite-connection",label:"Hootsuite"}],Oe=({network:e})=>{const t=(0,q.getNetworkKinds)(e).length?(0,q.getNetworkKinds)(e):[{id:"single",label:(0,q.getNetworkLabel)("name",e)}],n=f((e=>e(U.store).isSubscribed())),{closeKindSelectorDialog:i,openConnectionDialog:o}=(0,u.useDispatch)(ae),l=i,a=Ie.filter((({support:t})=>(0,q.doesNetworkSupport)(t,e)));return(0,s.jsxs)(de.Modal,{className:"nelio-content-kind-selector-dialog",title:(0,c._x)("Connect Profile","text","nelio-content"),isDismissible:!0,shouldCloseOnEsc:!0,shouldCloseOnClickOutside:!0,onRequestClose:l,children:[(0,s.jsx)("div",{className:"nelio-content-kind-selector-dialog__list",children:t.map((({id:t,label:l})=>(0,s.jsxs)(de.Button,{className:"nelio-content-kind-selector-dialog__connect-button",variant:"link",onClick:()=>{return n=t,i(),void o(e,n);var n},disabled:"twitter"===e&&!n,children:[(0,s.jsx)(d.SocialNetworkIcon,{className:"nelio-content-kind-selector-dialog__profile-icon",network:e,kind:t}),(0,s.jsx)("span",{children:l})]},`nc-${e}-kind-${t}`)))}),!!a.length&&(0,s.jsx)("p",{className:"nelio-content-kind-selector-dialog__alternative",children:(0,r.createInterpolateElement)((0,c.sprintf)(/* translators: an alternative connection method, like “Buffer” */ /* translators: an alternative connection method, like “Buffer” */
(0,c._x)("Or connect via %s","user","nelio-content"),(0,k.listify)("or",a.map((({type:e,label:t})=>`<${e}>${t}</${e}>`)))),(0,m.mapValues)((0,m.keyBy)(a,"type"),(({type:t})=>(0,s.jsx)(de.Button,{variant:"link",onClick:()=>{return n=t,i(),void o(n,e);var n}}))))}),"twitter"===e&&(0,s.jsx)(Ce,{})]})},Ce=()=>{const e=f((e=>e(U.store).isSubscribed()));return(0,s.jsxs)("p",{className:"nelio-content-kind-selector-dialog__notice",children:[(0,s.jsx)("strong",{children:(0,c._x)("Notice:","text","nelio-content")})," ",e?(0,c._x)("Due to recent changes in X’s API, messages posted through a native connection may be restricted, as Nelio Content has a maximum limit of requests allowed for a specific time frame.","text","nelio-content"):(0,c._x)("Due to recent changes in X’s API, native connections of X profiles are only available to Nelio Content subscribers. If you want to connect a X profile, please use Buffer or Hootsuite instead.","text","nelio-content")]})},Ae=()=>{const e=f((e=>!!e(ae).getConnectionDialog())),t=f((e=>e(ae).isProfileListRefreshing())),n=f((e=>e(ae).getKindDialog())),i=!!n;return(0,r.useEffect)((()=>{document.body.style.overflow=t||e?"hidden":""}),[t,e]),(0,s.jsxs)("div",{className:"nelio-content-connection-dialog",children:[e&&(0,s.jsx)("div",{className:"nelio-content-connection-dialog__overlay",children:(0,s.jsx)("div",{className:"nelio-content-connection-dialog__overlay-content",children:(0,c._x)("Please follow the instructions to authenticate the social profile…","user","nelio-content")})}),i&&(0,s.jsx)(Oe,{network:n}),t&&(0,s.jsx)("div",{className:"nelio-content-connection-dialog__overlay",children:(0,s.jsx)("div",{className:"nelio-content-connection-dialog__overlay-content",children:(0,c._x)("Refreshing social profiles…","text","nelio-content")})})]})},De=()=>{const[e,t]=Te();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"nelio-content-profile-settings-dialog__title",children:(0,c._x)("Profile Alias","text","nelio-content")}),(0,s.jsx)(de.TextControl,{value:e,onChange:t,placeholder:(0,c._x)("Alias","text","nelio-content"),help:(0,c._x)("Custom profile name to easily identify and distinguish this profile from other connected profiles.","text","nelio-content")})]})},Te=()=>{const e=f((e=>(0,m.trim)(e(ae).getEditingAlias()))),{setEditingAlias:t}=(0,u.useDispatch)(ae);return[e,t]},Re=()=>{const[e,t]=Le();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"nelio-content-profile-settings-dialog__title",children:(0,c._x)("Fallback Email","text","nelio-content")}),(0,s.jsx)(de.TextControl,{value:e,onChange:t,placeholder:(0,c._x)("Email","text","nelio-content"),help:(0,c._x)("Nelio Content will use this email to let the recipient know when a social message couldn’t be shared, thus offering them the opportunity to manually share it.","text","nelio-content")})]})},Le=()=>{const e=f((e=>(0,m.trim)(e(ae).getEditingEmail()).replace(/^mailto:/i,""))),{setEditingEmail:t}=(0,u.useDispatch)(ae);return[e,t]},Be=()=>{const[e="public",t]=Ge();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"nelio-content-profile-settings-dialog__title",children:(0,c._x)("Publication Status","text","nelio-content")}),(0,s.jsx)(de.SelectControl,{value:e,options:[{label:(0,c._x)("Public","text","nelio-content"),value:"public"},{label:(0,c._x)("Draft","text","nelio-content"),value:"draft"},{label:(0,c._x)("Unlisted","text","nelio-content"),value:"unlisted"}],onChange:t,help:(0,c._x)("Nelio Content will use this status when publishing content to Medium.","text","nelio-content")})]})},Ge=()=>{const e=f((e=>e(ae).getEditingPublicationStatus())),{setEditingPublicationStatus:t}=(0,u.useDispatch)(ae);return[e,t]},Fe=()=>{const{items:e,add:t,replace:n}=Ke();return(0,s.jsxs)("div",{className:"nelio-content-profile-settings-args",children:[(0,s.jsxs)("div",{className:"nelio-content-profile-settings-args__name",children:[(0,s.jsx)("span",{children:(0,c._x)("URL Parameters","text","nelio-content")}),(0,s.jsx)(de.Button,{variant:"link",onClick:t,children:(0,c._x)("Add New","command (URL parameter)","nelio-content")})]}),(0,s.jsx)("div",{className:"nelio-content-profile-settings-args__list",children:e.map(((e,t)=>(0,s.jsx)($e,{name:e[0],value:e[1],isOverwriteable:e[2],showLabel:!t,onNameChange:t=>n(e,e[2]?[t,e[1],!0]:[t,e[1]]),onValueChange:t=>n(e,e[2]?[e[0],t,!0]:[e[0],t]),onOverwriteChange:t=>n(e,t?[e[0],e[1],!0]:[e[0],e[1]])},t)))}),(0,s.jsx)("div",{className:"nelio-content-profile-settings-args__help",children:(0,c.sprintf)(/* translators: a placeholder name */ /* translators: a placeholder name */
(0,c._x)("Add URL parameters to links inserted with the %s placeholder. To remove parameters, leave their names empty.","user","nelio-content"),"{permalink}")})]})},$e=({name:e,value:t,showLabel:n,isOverwriteable:i,onNameChange:o,onValueChange:l,onOverwriteChange:r})=>(0,s.jsxs)("div",{className:"nelio-content-profile-settings-args__item",children:[(0,s.jsx)(de.TextControl,{label:n?(0,c._x)("Name","text","nelio-content"):void 0,placeholder:(0,c._x)("Name","text","nelio-content"),value:e,onChange:o}),(0,s.jsx)(de.TextControl,{label:n?(0,c._x)("Value (optional)","text","nelio-content"):void 0,placeholder:(0,c._x)("Value (optional)","text","nelio-content"),value:t,onChange:l}),n?(0,s.jsx)(de.BaseControl,{id:"nelio-content-profile-settings-args__first-query-arg",label:(0,c._x)("Fallback","text (query arg)","nelio-content"),children:(0,s.jsx)(de.ToggleControl,{label:"",checked:i,onChange:r})}):(0,s.jsx)(de.ToggleControl,{label:"",checked:i,onChange:r})]}),Ke=()=>{const e=f((e=>e(ae).getEditingQueryArgs())),{setEditingQueryArgs:t}=(0,u.useDispatch)(ae);return{items:e,add:()=>t([...e,["",""]]),replace:(n,i)=>t(e.map((e=>e===n?i:e)))}},Me=()=>{const e=Qe(),t=Ue(),n=qe(),{saveProfileSettings:i,closeProfileEditor:o}=(0,u.useDispatch)(ae);return"closed"===t?null:(0,s.jsxs)(de.Modal,{className:"nelio-content-profile-settings-dialog",title:(0,c._x)("Profile Settings","text","nelio-content"),isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:()=>{},children:[(0,s.jsx)(De,{}),"medium"===n&&(0,s.jsx)(Be,{}),(0,s.jsx)(Re,{}),(0,s.jsx)(Fe,{}),(0,s.jsxs)("div",{className:"nelio-content-profile-settings-dialog__actions",children:[(0,s.jsx)(de.Button,{variant:"secondary",disabled:"saving"===t,onClick:o,children:"open-dirty"===t?(0,c._x)("Discard Changes","command","nelio-content"):(0,c._x)("Cancel","command","nelio-content")}),(0,s.jsx)(d.SaveButton,{error:e||void 0,variant:"primary",disabled:"open-clean"===t,isSaving:"saving"===t,onClick:()=>{i().then(o)}})]})]})},Qe=()=>f((e=>{const t=(0,m.trim)(e(ae).getEditingEmail()).replace(/^mailto:/i,"");if(t&&!(0,Q.isEmail)(t))return(0,c._x)("Please write a valid email address","user","nelio-content")})),Ue=()=>f((e=>{var t,n,i;e(U.store);const o=e(ae).getEditingProfileId();if(!o)return"closed";if(e(ae).isSavingProfileSettings())return"saving";const l=e(ae).getEditingProfileSettings(),s=e(U.store).getSocialProfile(o),r={alias:null!==(t=null==s?void 0:s.alias)&&void 0!==t?t:"",email:null!==(n=null==s?void 0:s.email)&&void 0!==n?n:"",permalinkQueryArgs:null!==(i=null==s?void 0:s.permalinkQueryArgs)&&void 0!==i?i:[],publicationStatus:null==s?void 0:s.publicationStatus};return(0,m.isEqual)(r,l)?"open-clean":"open-dirty"})),qe=()=>f((e=>{e(U.store);const t=e(ae).getEditingProfileId();if(!t)return;const n=e(U.store).getSocialProfile(t);return null==n?void 0:n.network})),He=()=>{const e=f((e=>!e(U.store).hasFinishedResolution("getSocialProfiles"))),t=f((e=>e(ae).areThereProfilesBeingDeleted()));return e?(0,s.jsx)("div",{className:"nelio-content-social-profiles-layout",children:(0,s.jsx)(d.LoadingAnimation,{})}):(0,s.jsx)(r.StrictMode,{children:(0,s.jsx)(de.SlotFillProvider,{children:(0,s.jsxs)("div",{className:"nelio-content-social-profiles-layout",children:[(0,s.jsx)("div",{className:"nelio-content-social-profiles-layout__title-wrapper",children:(0,s.jsx)(ue,{})}),(0,s.jsx)(Se,{}),(0,s.jsx)(Pe,{disabled:t}),(0,s.jsx)(Ae,{}),(0,s.jsx)(Me,{}),(0,s.jsx)(d.PremiumDialog,{}),(0,s.jsx)(de.Popover.Slot,{})]})})})};function Ve(e){const t=document.getElementById(e);a((0,s.jsx)(He,{}),t);const n=document.getElementById("nelio-content-settings-title");n&&a((0,s.jsx)(d.ContextualHelp,{context:"social-profiles",walkthrough:ce,autostart:!0,component:ze}),n)}const ze=({className:e,runWalkthrough:t})=>(0,s.jsx)("button",{className:`${e}  page-title-action`,onClick:t,children:(0,c._x)("Help","text","nelio-content")})}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,i),l.exports}i.m=t,e=[],i.O=(t,n,o,l)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,o,l]=e[d],r=!0,a=0;a<n.length;a++)(!1&l||s>=l)&&Object.keys(i.O).every((e=>i.O[e](n[a])))?n.splice(a--,1):(r=!1,l<s&&(s=l));if(r){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[n,o,l]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={9268:0,3183:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,l,[s,r,a]=n,c=0;if(s.some((t=>0!==e[t]))){for(o in r)i.o(r,o)&&(i.m[o]=r[o]);if(a)var d=a(i)}for(t&&t(n);c<s.length;c++)l=s[c],i.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return i.O(d)},n=globalThis.webpackChunkNelioContent=globalThis.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=i.O(void 0,[3183],(()=>i(8351)));o=i.O(o);var l=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var s in o)l[s]=o[s];o.__esModule&&Object.defineProperty(l,"__esModule",{value:!0})})();