(()=>{var e,t={2608:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initPage:()=>E});const i=window.ReactJSXRuntime,o=window.wp.domReady,a=n.n(o)(),s=window.wp.element;function l(e,t){t&&(s.createRoot?(0,s.createRoot)(t).render(e):(0,s.render)(e,t))}const c=window.wp.components,r=window.wp.apiFetch,d=n.n(r)(),u=window.wp.i18n,m=window.wp.url,p=window.lodash,v=window.NelioContent.components,b=window.NelioContent.data,x=window.wp.data;function g(e,t){return(0,x.useSelect)(e,t)}const h=e=>{const t=C(e);return e.isDisabled?(0,i.jsx)("div",{className:"nelio-content-deactivation",children:(0,i.jsx)("span",{children:(0,u._x)("Deactivate","command","nelio-content")})}):(0,i.jsxs)("div",{className:"nelio-content-deactivation",children:[(0,i.jsx)(c.Button,{className:"nelio-content-deactivation__button",variant:"link",onClick:t.openModal,children:(0,u._x)("Deactivate","command","nelio-content")}),(0,i.jsx)(j,{state:t})]})},j=({state:e})=>{if(!e.isModalOpen)return null;let t;switch(e.reason.value){case"temporary-deactivation":t=w;break;case"plugin-doesnt-work":t=_;break;default:t=f}return(0,i.jsx)(c.Modal,{className:"nelio-content-deactivation__modal",title:(0,u._x)("Nelio Content Deactivation","text","nelio-content"),isDismissible:!e.isLocked,shouldCloseOnEsc:!e.isLocked,shouldCloseOnClickOutside:!e.isLocked,onRequestClose:e.closeModal,children:(0,i.jsx)(t,Object.assign({},e))})},w=({deactivate:e,isDeactivating:t,mainActionLabel:n,reason:o,setReason:a})=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.RadioControl,{selected:o.value,options:N,onChange:e=>a({value:e,details:""}),disabled:t}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{className:"nelio-content-deactivation__actions",children:[(0,i.jsx)("span",{}),(0,i.jsx)(c.Button,{variant:"primary",disabled:t||"clean-stuff"===o.value,onClick:()=>e(),children:n})]})]}),_=({closeModal:e,lock:t,setReason:n})=>{const[o,a]=(0,s.useState)(S),{isTicketSubmitting:l,description:r,email:v,submissionError:x}=o,h=(0,p.trim)(r).length&&(0,m.isEmail)(v),j=e=>a(Object.assign(Object.assign({},o),e)),{siteId:w,homeUrl:_,isSubscribed:f,apiUrl:C}=g(e=>({siteId:e(b.store).getSiteId(),homeUrl:e(b.store).getHomeUrl(),isSubscribed:e(b.store).isSubscribed(),apiUrl:e(b.store).getApiRoot()}));return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.TextareaControl,{label:(0,u._x)("The Problem:","text","nelio-content"),disabled:l,placeholder:(0,u._x)("Tell us what’s going on","user","nelio-content"),value:r,onChange:e=>j({description:e})}),(0,i.jsx)(c.TextControl,{label:(0,u._x)("Your Email:","text","nelio-content"),disabled:l,value:v,onChange:e=>j({email:e})}),x&&(0,i.jsxs)("p",{className:"nelio-content-deactivation__warning",children:[(0,i.jsx)(c.Dashicon,{icon:"warning"}),(0,i.jsx)("span",{children:(0,u.sprintf)(/* translators: email address */ /* translators: email address */
(0,u._x)("Something went wrong and we couldn’t receive your support request. Please try again later or send us an email to %s.","user","nelio-content"),"support@neliosoftware.com")})]}),(0,i.jsx)("br",{}),(0,i.jsxs)("div",{className:"nelio-content-deactivation__actions",children:[(0,i.jsx)(c.Button,{variant:"link",onClick:()=>n({value:"other",details:""}),children:(0,u._x)("Back","command","nelio-content")}),(0,i.jsx)(c.Button,{variant:"primary",disabled:!h||l,isBusy:l,onClick:()=>{t(),j({isTicketSubmitting:!0}),d({url:`${C}/ticket`,credentials:"omit",method:"POST",mode:"cors",data:{email:v,description:P(r,w,_,f),subject:"I can’t get the plugin to work and need help"}}).then(e).catch(()=>{j({submissionError:!0,isTicketSubmitting:!1}),t(!1)})},children:l?(0,u._x)("Submitting…","text","nelio-content"):(0,u._x)("Submit and Keep Plugin","command","nelio-content")})]})]})},f=({isLocked:e,isSubscribed:t,mainActionLabel:n,cleanAndDeactivate:o,reason:a,setReason:s})=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("p",{children:(0,u._x)("If you have a moment, please share why you are deactivating Nelio Content:","user","nelio-content")}),(0,i.jsx)(v.RadioControl,{className:"nelio-content-deactivation__options",selected:a.value,options:D,onChange:e=>s({value:e,details:""}),extraValue:a.details,onExtraChange:e=>s(Object.assign(Object.assign({},a),{details:e})),disabled:e}),t&&(0,i.jsxs)("p",{className:"nelio-content-deactivation__warning",children:[(0,i.jsx)(c.Dashicon,{icon:"warning"}),(0,i.jsx)("span",{children:(0,u._x)("Please keep in mind your subscription to Nelio Content will remain active after removing the plugin from this site. If you want to unsubscribe from our service, you can do so from the plugin’s Account page before you deactivate the plugin.","user","nelio-content")})]}),(0,i.jsxs)("div",{className:"nelio-content-deactivation__actions",children:[e?(0,i.jsx)("span",{}):(0,i.jsx)(c.Button,{variant:"link",disabled:e,onClick:()=>o(),children:(0,u._x)("Just Delete Data","command","nelio-content")}),(0,i.jsx)(c.Button,{variant:"primary",disabled:e||"clean-stuff"===a.value,onClick:()=>o(a.details?`${a.value}: ${a.details}`:a.value),children:n})]})]}),C=({cleanNonce:e,deactivationUrl:t,isSubscribed:n})=>{const[i,o]=(0,s.useState)(y),a=()=>{window.location.href=t},l=()=>o(Object.assign(Object.assign({},y),{isModalOpen:!1})),c="temporary-deactivation"===i.reason.value?O(i.isDeactivating):k(i.isDeactivating);return{isModalOpen:i.isModalOpen,openModal:()=>o(Object.assign(Object.assign({},y),{isModalOpen:!0})),closeModal:l,isDeactivating:i.isDeactivating,isSubscribed:n,mainActionLabel:c,deactivate:()=>{o(Object.assign(Object.assign({},i),{reason:y.reason,isDeactivating:!0,isLocked:!0})),a()},cleanAndDeactivate:t=>{o(Object.assign(Object.assign({},i),{isDeactivating:!0})),d({path:"/nelio-content/v1/plugin/clean",method:"POST",data:{reason:t,nabnonce:e}}).then(a,l)},isLocked:i.isLocked,lock:(e=!0)=>o(Object.assign(Object.assign({},i),{isLocked:e})),reason:i.reason,setReason:e=>o(Object.assign(Object.assign({},i),{reason:e}))}},O=e=>e?(0,u._x)("Deactivating…","text","nelio-content"):(0,u._x)("Deactivate","command","nelio-content"),k=e=>e?(0,u._x)("Deleting Data…","text","nelio-content"):(0,u._x)("Submit and Delete Data","command","nelio-content"),y={isModalOpen:!1,isDeactivating:!1,isLocked:!1,reason:{value:"temporary-deactivation",details:""}},S={isTicketSubmitting:!1,email:"",description:"",submissionError:!1},N=[{value:"temporary-deactivation",label:(0,u._x)("It’s a temporary deactivation","text","nelio-content")},{value:"clean-stuff",label:(0,u._x)("Delete Nelio Content’s data and deactivate plugin","text","nelio-content")}],D=[{value:"plugin-no-longer-needed",label:(0,u._x)("I no longer need the plugin","text","nelio-content")},{value:"plugin-doesnt-work",label:(0,u._x)("I couldn’t get the plugin to work","text","nelio-content")},{value:"better-plugin-found",label:(0,u._x)("I found a better plugin","text","nelio-content"),extra:(0,u._x)("What’s the plugin’s name?","text","nelio-content")},{value:"other",label:(0,u._x)("Other","text","nelio-content"),extra:(0,u._x)("Please share the reason…","user","nelio-content")}];function P(e,t,n,i){const o=document.createElement("div"),a=()=>document.createElement("br"),s=document.createElement("strong");s.textContent="Additional Information";const l=document.createElement("ul"),c=document.createElement("li");c.textContent=`Site ID: ${t}`;const r=document.createElement("li");r.textContent=`Site URL: ${n}`;const d=document.createElement("li");return d.textContent="Subscribed: "+(i?"yes":"no"),l.appendChild(c),l.appendChild(r),l.appendChild(d),(0,p.trim)(e).split(/\n+/).forEach(e=>{const t=document.createTextNode(e);o.appendChild(t),o.appendChild(a()),o.appendChild(a())}),o.appendChild(s),o.appendChild(a()),o.appendChild(l),o.innerHTML}const M=()=>{const e=g(e=>"uninstalled"!==e(b.store).getPremiumStatus()),{installPremium:t}=(0,x.useDispatch)(b.store),[n,o]=(0,s.useState)(!1),a=e?(0,u._x)("Activate Nelio Content Premium","command","nelio-content"):(0,u._x)("Install Nelio Content Premium","command","nelio-content"),l=e?(0,u._x)("Activating Nelio Content Premium…","text","nelio-content"):(0,u._x)("Installing Nelio Content Premium…","text","nelio-content");return(0,i.jsx)(c.Button,{variant:"secondary",className:"nelio-content-install-premium-plugin",onClick:()=>{o(!0),t(()=>window.location.reload())},disabled:n,isBusy:n,children:n?l:a})};function E(e){a(()=>{!function(e){const{isPremiumActive:t,isSubscribed:n,cleanNonce:o,deactivationUrl:a}=e,s=document.querySelector(".nelio-content-deactivate-link");s&&l((0,i.jsxs)(c.SlotFillProvider,{children:[(0,i.jsx)(h,{isSubscribed:n,isDisabled:t,deactivationUrl:a,cleanNonce:o}),(0,i.jsx)(c.Popover.Slot,{})]}),s)}(e),function(){const e=document.querySelector(".nelio-content-install-premium-action");e&&l((0,i.jsx)(M,{}),e)}()})}}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,i),a.exports}i.m=t,e=[],i.O=(t,n,o,a)=>{if(!n){var s=1/0;for(d=0;d<e.length;d++){for(var[n,o,a]=e[d],l=!0,c=0;c<n.length;c++)(!1&a||s>=a)&&Object.keys(i.O).every(e=>i.O[e](n[c]))?n.splice(c--,1):(l=!1,a<s&&(s=a));if(l){e.splice(d--,1);var r=o();void 0!==r&&(t=r)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={6269:0,6376:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[s,l,c]=n,r=0;if(s.some(t=>0!==e[t])){for(o in l)i.o(l,o)&&(i.m[o]=l[o]);if(c)var d=c(i)}for(t&&t(n);r<s.length;r++)a=s[r],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(d)},n=globalThis.webpackChunkNelioContent=globalThis.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=i.O(void 0,[6376],()=>i(2608));o=i.O(o);var a=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var s in o)a[s]=o[s];o.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();