(()=>{var e,t={9145:(e,t,n)=>{"use strict";n.r(t),n.d(t,{initPage:()=>I});const o=window.wp.element;function i(e,t){t&&(o.createRoot?(0,o.createRoot)(t).render(e):(0,o.render)(e,t))}const a=window.wp.domReady,l=n.n(a)(),r=window.wp.components,c=window.wp.apiFetch,s=n.n(c)(),u=window.wp.i18n,d=window.wp.url,m=window.lodash,v=window.NelioContent.components,p=window.NelioContent.data,f=window.wp.data;function b(e,t){return(0,f.useSelect)(e,t)}var g=function(){return g=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},g.apply(this,arguments)},h=function(e){var t=C(e);return e.isDisabled?o.createElement("div",{className:"nelio-content-deactivation"},o.createElement("span",null,(0,u._x)("Deactivate","command","nelio-content"))):o.createElement("div",{className:"nelio-content-deactivation"},o.createElement(r.Button,{className:"nelio-content-deactivation__button",variant:"link",onClick:t.openModal},(0,u._x)("Deactivate","command","nelio-content")),o.createElement(x,{state:t}))},x=function(e){var t,n=e.state;if(!n.isModalOpen)return null;switch(n.reason.value){case"temporary-deactivation":t=E;break;case"plugin-doesnt-work":t=_;break;default:t=w}return o.createElement(r.Modal,{className:"nelio-content-deactivation__modal",title:(0,u._x)("Nelio Content Deactivation","text","nelio-content"),isDismissible:!n.isLocked,shouldCloseOnEsc:!n.isLocked,shouldCloseOnClickOutside:!n.isLocked,onRequestClose:n.closeModal},o.createElement(t,g({},n)))},E=function(e){var t=e.deactivate,n=e.isDeactivating,i=e.mainActionLabel,a=e.reason,l=e.setReason;return o.createElement(o.Fragment,null,o.createElement(v.RadioControl,{selected:a.value,options:D,onChange:function(e){return l({value:e,details:""})},disabled:n}),o.createElement("br",null),o.createElement("div",{className:"nelio-content-deactivation__actions"},o.createElement("span",null),o.createElement(r.Button,{variant:"primary",disabled:n||"clean-stuff"===a.value,onClick:function(){return t()}},i)))},_=function(e){var t=e.closeModal,n=e.lock,i=e.setReason,a=(0,o.useState)(N),l=a[0],c=a[1],v=l.isTicketSubmitting,f=l.description,h=l.email,x=l.submissionError,E=(0,m.trim)(f).length&&(0,d.isEmail)(h),_=function(e){return c(g(g({},l),e))},w=b((function(e){return{siteId:e(p.store).getSiteId(),homeUrl:e(p.store).getHomeUrl(),isSubscribed:e(p.store).isSubscribed(),apiUrl:e(p.store).getApiRoot()}})),C=w.siteId,k=w.homeUrl,y=w.isSubscribed,S=w.apiUrl;return o.createElement(o.Fragment,null,o.createElement(r.TextareaControl,{label:(0,u._x)("The Problem:","text","nelio-content"),disabled:v,placeholder:(0,u._x)("Tell us what’s going on","user","nelio-content"),value:f,onChange:function(e){return _({description:e})}}),o.createElement(r.TextControl,{label:(0,u._x)("Your Email:","text","nelio-content"),disabled:v,value:h,onChange:function(e){return _({email:e})}}),x&&o.createElement("p",{className:"nelio-content-deactivation__warning"},o.createElement(r.Dashicon,{icon:"warning"}),o.createElement("span",null,(0,u.sprintf)(/* translators: email address */ /* translators: email address */
(0,u._x)("Something went wrong and we couldn’t receive your support request. Please try again later or send us an email to %s.","user","nelio-content"),"support@neliosoftware.com"))),o.createElement("br",null),o.createElement("div",{className:"nelio-content-deactivation__actions"},o.createElement(r.Button,{variant:"link",onClick:function(){return i({value:"other",details:""})}},(0,u._x)("Back","command","nelio-content")),o.createElement(r.Button,{variant:"primary",disabled:!E||v,isBusy:v,onClick:function(){n(),_({isTicketSubmitting:!0}),s({url:"".concat(S,"/ticket"),credentials:"omit",method:"POST",mode:"cors",data:{email:h,description:P(f,C,k,y),subject:"I can’t get the plugin to work and need help"}}).then(t).catch((function(){_({submissionError:!0,isTicketSubmitting:!1}),n(!1)}))}},v?(0,u._x)("Submitting…","text","nelio-content"):(0,u._x)("Submit and Keep Plugin","command","nelio-content"))))},w=function(e){var t=e.isLocked,n=e.isSubscribed,i=e.mainActionLabel,a=e.cleanAndDeactivate,l=e.reason,c=e.setReason;return o.createElement(o.Fragment,null,o.createElement("p",null,(0,u._x)("If you have a moment, please share why you are deactivating Nelio Content:","user","nelio-content")),o.createElement(v.RadioControl,{className:"nelio-content-deactivation__options",selected:l.value,options:O,onChange:function(e){return c({value:e,details:""})},extraValue:l.details,onExtraChange:function(e){return c(g(g({},l),{details:e}))},disabled:t}),n&&o.createElement("p",{className:"nelio-content-deactivation__warning"},o.createElement(r.Dashicon,{icon:"warning"}),o.createElement("span",null,(0,u._x)("Please keep in mind your subscription to Nelio Content will remain active after removing the plugin from this site. If you want to unsubscribe from our service, you can do so from the plugin’s Account page before you deactivate the plugin.","user","nelio-content"))),o.createElement("div",{className:"nelio-content-deactivation__actions"},t?o.createElement("span",null):o.createElement(r.Button,{variant:"link",disabled:t,onClick:function(){return a()}},(0,u._x)("Just Delete Data","command","nelio-content")),o.createElement(r.Button,{variant:"primary",disabled:t||"clean-stuff"===l.value,onClick:function(){return a(l.details?"".concat(l.value,": ").concat(l.details):l.value)}},i)))},C=function(e){var t=e.cleanNonce,n=e.deactivationUrl,i=e.isSubscribed,a=(0,o.useState)(S),l=a[0],r=a[1],c=function(){window.location.href=n},u=function(){return r(g(g({},S),{isModalOpen:!1}))},d="temporary-deactivation"===l.reason.value?k(l.isDeactivating):y(l.isDeactivating);return{isModalOpen:l.isModalOpen,openModal:function(){return r(g(g({},S),{isModalOpen:!0}))},closeModal:u,isDeactivating:l.isDeactivating,isSubscribed:i,mainActionLabel:d,deactivate:function(){r(g(g({},l),{reason:S.reason,isDeactivating:!0,isLocked:!0})),c()},cleanAndDeactivate:function(e){r(g(g({},l),{isDeactivating:!0})),s({path:"/nab/v1/plugin/clean",method:"POST",data:{reason:e,nabnonce:t}}).then(c,u)},isLocked:l.isLocked,lock:function(e){return void 0===e&&(e=!0),r(g(g({},l),{isLocked:e}))},reason:l.reason,setReason:function(e){return r(g(g({},l),{reason:e}))}}},k=function(e){return e?(0,u._x)("Deactivating…","text","nelio-content"):(0,u._x)("Deactivate","command","nelio-content")},y=function(e){return e?(0,u._x)("Deleting Data…","text","nelio-content"):(0,u._x)("Submit and Delete Data","command","nelio-content")},S={isModalOpen:!1,isDeactivating:!1,isLocked:!1,reason:{value:"temporary-deactivation",details:""}},N={isTicketSubmitting:!1,email:"",description:"",submissionError:!1},D=[{value:"temporary-deactivation",label:(0,u._x)("It’s a temporary deactivation","text","nelio-content")},{value:"clean-stuff",label:(0,u._x)("Delete Nelio Content’s data and deactivate plugin","text","nelio-content")}],O=[{value:"plugin-no-longer-needed",label:(0,u._x)("I no longer need the plugin","text","nelio-content")},{value:"plugin-doesnt-work",label:(0,u._x)("I couldn’t get the plugin to work","text","nelio-content")},{value:"better-plugin-found",label:(0,u._x)("I found a better plugin","text","nelio-content"),extra:(0,u._x)("What’s the plugin’s name?","text","nelio-content")},{value:"other",label:(0,u._x)("Other","text","nelio-content"),extra:(0,u._x)("Please share the reason…","user","nelio-content")}];function P(e,t,n,o){var i=document.createElement("div"),a=function(){return document.createElement("br")},l=document.createElement("strong");l.textContent="Additional Information";var r=document.createElement("ul"),c=document.createElement("li");c.textContent="Site ID: ".concat(t);var s=document.createElement("li");s.textContent="Site URL: ".concat(n);var u=document.createElement("li");return u.textContent="Subscribed: ".concat(o?"yes":"no"),r.appendChild(c),r.appendChild(s),r.appendChild(u),(0,m.trim)(e).split(/\n+/).forEach((function(e){var t=document.createTextNode(e);i.appendChild(t),i.appendChild(a()),i.appendChild(a())})),i.appendChild(l),i.appendChild(a()),i.appendChild(r),i.innerHTML}var M=function(){var e=b((function(e){return"uninstalled"!==e(p.store).getPremiumStatus()})),t=(0,f.useDispatch)(p.store).installPremium,n=(0,o.useState)(!1),i=n[0],a=n[1],l=e?(0,u._x)("Activate Nelio Content Premium","command","nelio-content"):(0,u._x)("Install Nelio Content Premium","command","nelio-content"),c=e?(0,u._x)("Activating Nelio Content Premium…","text","nelio-content"):(0,u._x)("Installing Nelio Content Premium…","text","nelio-content");return o.createElement(r.Button,{variant:"secondary",className:"nelio-content-install-premium-plugin",onClick:function(){a(!0),t((function(){return window.location.reload()}))},disabled:i,isBusy:i},i?c:l)};function I(e){l((function(){var t;!function(e){var t=e.isPremiumActive,n=e.isSubscribed,a=e.cleanNonce,l=e.deactivationUrl,c=document.querySelector(".nelio-content-deactivate-link");c&&i(o.createElement(r.SlotFillProvider,null,o.createElement(h,{isSubscribed:n,isDisabled:t,deactivationUrl:l,cleanNonce:a}),o.createElement(r.Popover.Slot,null)),c)}(e),(t=document.querySelector(".nelio-content-install-premium-action"))&&i(o.createElement(M,null),t)}))}}},n={};function o(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,n,i,a)=>{if(!n){var l=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],a=e[u][2];for(var r=!0,c=0;c<n.length;c++)(!1&a||l>=a)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(r=!1,a<l&&(l=a));if(r){e.splice(u--,1);var s=i();void 0!==s&&(t=s)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,i,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={6269:0,6376:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var i,a,l=n[0],r=n[1],c=n[2],s=0;if(l.some((t=>0!==e[t]))){for(i in r)o.o(r,i)&&(o.m[i]=r[i]);if(c)var u=c(o)}for(t&&t(n);s<l.length;s++)a=l[s],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},n=self.webpackChunkNelioContent=self.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[6376],(()=>o(9145)));i=o.O(i);var a=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var l in i)a[l]=i[l];i.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();