(()=>{var e,n={2501:(e,n,t)=>{"use strict";t.r(n),t.d(n,{initPage:()=>Qe});var i={};t.r(i),t.d(i,{getAccount:()=>f,getEditingLicense:()=>v,getInvoices:()=>b,getProducts:()=>j,getSiteId:()=>h,getSites:()=>y,isAgencySummary:()=>N,isDialogOpen:()=>_,isLocked:()=>g});var o={};t.r(o),t.d(o,{closeDialog:()=>I,enableAgencyFullView:()=>P,lock:()=>k,openDialog:()=>D,receiveAccount:()=>w,receiveInvoices:()=>E,receiveProducts:()=>S,receiveSites:()=>O,removeSite:()=>C,setEditingLicense:()=>L,unlock:()=>A});var c={};t.r(c),t.d(c,{applyLicense:()=>U,cancelSubscription:()=>$,createFreeSite:()=>B,reactivateSubscription:()=>G,removeLicense:()=>V,upgradeSubscription:()=>M});var s={};t.r(s),t.d(s,{getAccount:()=>H,getInvoices:()=>W,getProducts:()=>z,getSites:()=>q});const a=window.ReactJSXRuntime,l=window.wp.components,r=window.wp.element,d=window.wp.data;function u(e,n){return(0,d.useSelect)(e,n)}const p=window.lodash,m={info:{plan:"free",siteId:(0,t(4396).L8)()(""),limits:{maxAutomationGroups:0,maxProfiles:0,maxProfilesPerNetwork:0}},invoices:[],products:[],sites:[],meta:{dialog:void 0,editingLicense:"",lockReason:void 0,isAgencySummary:!1}},x=window.NelioContent.utils;function h(e){return e.info.siteId}function _(e,n){return e.meta.dialog===n}function g(e,n){return(0,x.isEmpty)(n)?!(0,x.isEmpty)(e.meta.lockReason):n===e.meta.lockReason}function v(e){return e.meta.editingLicense}function f(e){return e.info}function b(e){return e.invoices}function j(e){return e.products}function y(e){return e.sites||[]}function N(e){return e.meta.isAgencySummary}function w(e){return{type:"RECEIVE_ACCOUNT",account:e}}function O(e){return{type:"RECEIVE_SITES",sites:(0,p.castArray)(e)}}function C(e){return{type:"REMOVE_SITE",siteId:e}}function E(e){return{type:"RECEIVE_INVOICES",invoices:(0,p.castArray)(e)}}function S(e){return{type:"RECEIVE_PRODUCTS",products:(0,p.castArray)(e)}}function D(e){return{type:"OPEN_DIALOG",dialogName:e}}function I(){return{type:"CLOSE_DIALOG"}}function k(e="no-reason"){return{type:"LOCK_PAGE",reason:e}}function A(){return{type:"UNLOCK_PAGE"}}function L(e){return{type:"SET_EDITING_LICENSE",license:e}}function P(){return{type:"ENABLE_AGENCY_FULL_VIEW"}}const R=window.wp.apiFetch,T=t.n(R)();var F=function(e,n,t,i){return new(t||(t=Promise))((function(o,c){function s(e){try{l(i.next(e))}catch(e){c(e)}}function a(e){try{l(i.throw(e))}catch(e){c(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}l((i=i.apply(e,n||[])).next())}))};function B(){return F(this,void 0,void 0,(function*(){try{yield T({path:"/nelio-content/v1/site/free",method:"POST"})}catch(e){yield(0,x.showErrorNotice)(e)}}))}function U(e){return F(this,void 0,void 0,(function*(){try{(0,d.dispatch)(Q).lock("apply-license"),yield T({path:"/nelio-content/v1/site/use-license",method:"POST",data:{license:e}}),window.location.reload()}catch(e){yield(0,x.showErrorNotice)(e),yield(0,d.dispatch)(Q).unlock(),yield(0,d.dispatch)(Q).closeDialog()}}))}function V(e){return F(this,void 0,void 0,(function*(){try{if(yield(0,d.dispatch)(Q).lock("remove-license"),yield T({path:"/nelio-content/v1/site/remove-license",method:"POST",data:{siteId:e}}),(0,d.select)(Q).getSiteId()===e)return void window.location.reload();yield(0,d.dispatch)(Q).removeSite(e)}catch(e){yield(0,x.showErrorNotice)(e),yield(0,d.dispatch)(Q).unlock(),yield(0,d.dispatch)(Q).closeDialog()}}))}function $(){return F(this,void 0,void 0,(function*(){try{yield(0,d.dispatch)(Q).lock("cancel-subscription"),yield T({path:"/nelio-content/v1/subscription",method:"DELETE"}),window.location.reload()}catch(e){yield(0,x.showErrorNotice)(e),yield(0,d.dispatch)(Q).unlock(),yield(0,d.dispatch)(Q).closeDialog()}}))}function G(){return F(this,void 0,void 0,(function*(){try{yield(0,d.dispatch)(Q).lock("reactivate-subscription"),yield T({path:"/nelio-content/v1/subscription/uncancel",method:"POST"}),window.location.reload()}catch(e){yield(0,x.showErrorNotice)(e),yield(0,d.dispatch)(Q).unlock(),yield(0,d.dispatch)(Q).closeDialog()}}))}function M(e){return F(this,void 0,void 0,(function*(){try{yield(0,d.dispatch)(Q).lock("upgrade-subscription"),yield T({path:"/nelio-content/v1/subscription/upgrade",method:"PUT",data:{product:e}}),window.location.reload()}catch(e){yield(0,d.dispatch)(Q).unlock(),yield(0,x.showErrorNotice)(e)}}))}const Y=window.wp.i18n;var K=function(e,n,t,i){return new(t||(t=Promise))((function(o,c){function s(e){try{l(i.next(e))}catch(e){c(e)}}function a(e){try{l(i.throw(e))}catch(e){c(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(s,a)}l((i=i.apply(e,n||[])).next())}))};function H(){return K(this,void 0,void 0,(function*(){const e=yield T({path:"/nelio-content/v1/site"});yield(0,d.dispatch)(Q).receiveAccount(e)}))}function W(){return K(this,void 0,void 0,(function*(){try{const e=yield T({path:"/nelio-content/v1/subscription/invoices"});yield(0,d.dispatch)(Q).receiveInvoices(e)}catch(e){yield(0,x.showErrorNotice)(e,(0,Y._x)("Error while retrieving invoices","text","nelio-content")),yield(0,d.dispatch)(Q).receiveInvoices([])}}))}function q(){return K(this,void 0,void 0,(function*(){try{const e=yield T({path:"/nelio-content/v1/subscription/sites"});yield(0,d.dispatch)(Q).receiveSites(e)}catch(e){yield(0,x.showErrorNotice)(e,(0,Y._x)("Error while retrieving sites","text","nelio-content")),yield(0,d.dispatch)(Q).receiveSites([])}}))}function z(){return K(this,void 0,void 0,(function*(){try{const e=yield T({path:"/nelio-content/v1/products"});yield(0,d.dispatch)(Q).receiveProducts(e)}catch(e){yield(0,x.showErrorNotice)(e,(0,Y._x)("Error while retrieving plans","text","nelio-content")),yield(0,d.dispatch)(Q).receiveProducts([])}}))}const J=Object.assign(Object.assign({},o),c),Q=(0,d.createReduxStore)("nelio-content/account",{reducer:function(e=m,n){var t;return null!==(t=function(e,n){switch(n.type){case"RECEIVE_ACCOUNT":return Object.assign(Object.assign({},e),{info:n.account,meta:Object.assign(Object.assign({},e.meta),{isAgencySummary:"free"!==n.account.plan&&!!n.account.isAgency})});case"RECEIVE_PRODUCTS":return Object.assign(Object.assign({},e),{products:n.products});case"RECEIVE_SITES":return Object.assign(Object.assign({},e),{sites:n.sites});case"REMOVE_SITE":return Object.assign(Object.assign({},e),{sites:(0,p.reject)(e.sites,{id:n.siteId})});case"RECEIVE_INVOICES":return Object.assign(Object.assign({},e),{invoices:n.invoices});case"OPEN_DIALOG":return Object.assign(Object.assign({},e),{meta:Object.assign(Object.assign({},e.meta),{dialog:n.dialogName})});case"CLOSE_DIALOG":return Object.assign(Object.assign({},e),{meta:Object.assign(Object.assign({},e.meta),{dialog:void 0})});case"ENABLE_AGENCY_FULL_VIEW":return Object.assign(Object.assign({},e),{meta:Object.assign(Object.assign({},e.meta),{isAgencySummary:!1})});case"LOCK_PAGE":return Object.assign(Object.assign({},e),{meta:Object.assign(Object.assign({},e.meta),{lockReason:n.reason})});case"UNLOCK_PAGE":return Object.assign(Object.assign({},e),{meta:Object.assign(Object.assign({},e.meta),{lockReason:void 0})});case"SET_EDITING_LICENSE":return Object.assign(Object.assign({},e),{meta:Object.assign(Object.assign({},e.meta),{editingLicense:n.license})})}}(e,n))&&void 0!==t?t:e},controls:d.controls,actions:J,selectors:i,resolvers:s});!function(e){(0,d.register)(e)}(Q);const X=window.wp.notices,Z=window.NelioContent.components,ee=({children:e})=>{const n=ne(),{notices:t,removeNotice:i}=te();return n?(0,a.jsx)(Z.LoadingAnimation,{text:(0,Y._x)("Loading…","text","nelio-content")}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.NoticeList,{notices:t,className:"components-editor-notices__pinned",onRemove:i}),e]})},ne=()=>u((e=>(e(Q).getAccount(),!e(Q).hasFinishedResolution("getAccount")))),te=()=>{const e=u((e=>e(X.store).getNotices())),{removeNotice:n}=(0,d.useDispatch)(X.store);return{notices:e,removeNotice:n}};function ie(e){var n,t,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(n=0;n<o;n++)e[n]&&(t=ie(e[n]))&&(i&&(i+=" "),i+=t)}else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}const oe=function(){for(var e,n,t=0,i="",o=arguments.length;t<o;t++)(e=arguments[t])&&(n=ie(e))&&(i&&(i+=" "),i+=n);return i},ce=window.NelioContent.date,se=(0,Y._x)("Y-m-d","text (date)","nelio-content"),ae=()=>{const e=u((e=>e(Q).getAccount()));if("free"===e.plan)return null;const{mode:n,deactivationDate:t,nextChargeDate:i,nextChargeTotal:o,state:c}=e;return"invitation"===n?(0,a.jsx)("div",{className:"nelio-content-plan__renewal",children:(0,Y._x)("You’re currently using a Free Pass to Nelio Content’s Premium Features. Enjoy the plugin and, please, help us improve it with your feedback!","text","nelio-content")}):"canceled"===c?(0,a.jsx)("div",{className:"nelio-content-plan__renewal",children:(0,r.createInterpolateElement)((0,Y.sprintf)(/* translators: a date */ /* translators: a date */
(0,Y._x)("Your subscription will end on %s.","text","nelio-content"),`<date>${(0,ce.dateI18n)(se,t)}</date>`),{date:(0,a.jsx)("span",{className:"nelio-content-plan__renewal-date"})})}):(0,a.jsx)("div",{className:"nelio-content-plan__renewal",children:(0,r.createInterpolateElement)((0,Y.sprintf)(/* translators: 1 -> price and currency; 2 -> date */ /* translators: 1 -> price and currency; 2 -> date */
(0,Y._x)("Next charge will be %1$s on %2$s.","text","nelio-content"),`<money>${o}</money>`,`<date>${(0,ce.dateI18n)(se,i)}</date>`),{date:(0,a.jsx)("span",{className:"nelio-content-plan__renewal-date"}),money:(0,a.jsx)("span",{className:"nelio-content-plan__renewal-amount"})})})},le=({plan:e,period:n,isCanceled:t,isInvitation:i})=>{var o;return(0,a.jsxs)("h3",{className:"nelio-content-plan__title",children:[null!==(o=re(e))&&void 0!==o?o:re("basic"),(0,a.jsxs)("span",{className:"nelio-content-plan__period",children:[i&&(0,Y._x)("Invitation","text","nelio-content"),!i&&"month"===n&&(0,Y._x)("Monthly","text","nelio-content"),!i&&"year"===n&&(0,Y._x)("Yearly","text","nelio-content")]}),t&&(0,a.jsx)("span",{className:"nelio-content-plan__state-canceled",children:(0,Y._x)("Canceled","text (account state)","nelio-content")})]})};function re(e){switch(e){case"free":return(0,Y._x)("Nelio Content (Free)","text","nelio-content");case"plus":return(0,Y._x)("Nelio Content Plus","text","nelio-content");case"standard":return(0,Y._x)("Nelio Content Standard","text","nelio-content");case"basic":return(0,Y._x)("Nelio Content Basic","text","nelio-content")}}const de=e=>{const n=u((n=>n(Q).isDialogOpen(e))),{openDialog:t,closeDialog:i}=(0,d.useDispatch)(Q);return[n,n=>n?t(e):i()]},ue=e=>u((n=>n(Q).isLocked(e))),pe=()=>u((e=>{const{getAccount:n}=e(Q),t=n();if("free"===t.plan)return[];const{getProducts:i}=e(Q);return(0,p.filter)(i(),(({upgradeableFrom:e})=>e.includes(t.productId)))})),me=({isOpen:e,onFocusOutside:n,placement:t})=>{const[i,o]=xe(),c=ue(),s=ue("apply-license"),{applyLicense:r}=(0,d.useDispatch)(Q);return e?(0,a.jsx)(l.Popover,{placement:t,onFocusOutside:!c&&n?n:void 0,children:(0,a.jsxs)("div",{className:"nelio-content-license-form",children:[(0,a.jsx)(l.TextControl,{value:i,placeholder:(0,Y._x)("Type your license here","user","nelio-content"),maxLength:Math.max(21,26),className:"nelio-content-license-form__text-control",disabled:c,onChange:o}),(0,a.jsx)(l.Button,{variant:"primary",isBusy:s,className:"nelio-content-license-form__button",disabled:c||21!==i.length&&26!==i.length,onClick:()=>r(i),children:s?(0,Y._x)("Applying…","text","nelio-content"):(0,Y._x)("Apply","command","nelio-content")})]})}):null},xe=()=>{const e=u((e=>e(Q).getEditingLicense())),{setEditingLicense:n}=(0,d.useDispatch)(Q);return[e,n]};const he=e=>{var{label:n}=e,t=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(t[i[o]]=e[i[o]])}return t}(e,["label"]);const[i,o]=de("license-popover"),c=ue();return(0,a.jsxs)("span",{children:[(0,a.jsx)(l.Button,Object.assign({disabled:c,onClick:()=>o(!0)},t,{children:n})),(0,a.jsx)(me,{placement:"bottom",onFocusOutside:()=>o(!1),isOpen:i})]})},_e=(0,Y._x)("Y-m-d","text (date)","nelio-content"),ge=()=>{const[e,n]=de("cancel-subscription"),t=ue("cancel-subscription"),i=ue(),o=u((e=>{const n=e(Q).getAccount();return"free"===n.plan?"":n.nextChargeDate})),{cancelSubscription:c}=(0,d.useDispatch)(Q);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Button,{variant:"tertiary",isDestructive:!0,onClick:()=>n(!0),disabled:i,children:(0,Y._x)("Cancel Subscription","command","nelio-content")}),(0,a.jsx)(Z.ConfirmationDialog,{title:(0,Y._x)("Cancel Subscription?","text","nelio-content"),text:(0,Y.sprintf)(/* translators: a date */ /* translators: a date */
(0,Y._x)("Canceling your subscription will cause it not to renew. If you cancel your subscrition, it will continue until %s. Then, the subscription will expire and will not be invoiced again. Do you want to cancel your subscription?","user","nelio-content"),(0,ce.dateI18n)(_e,o)),confirmLabel:t?(0,Y._x)("Canceling…","text","nelio-content"):(0,Y._x)("Cancel Subscription","command","nelio-content"),cancelLabel:(0,Y._x)("Back","command","nelio-content"),isDestructive:!0,onCancel:()=>n(!1),onConfirm:c,isConfirmEnabled:!i,isCancelEnabled:!i,isOpen:e,isConfirmBusy:t})]})},ve=(0,Y._x)("Y-m-d","text (date)","nelio-content"),fe=()=>{const e=u((e=>e(Q).isLocked())),n=u((e=>e(Q).isDialogOpen("reactivate-subscription"))),t=u((e=>e(Q).isLocked("reactivate-subscription"))),i=u((e=>{const n=e(Q).getAccount();return"free"===n.plan?"":n.nextChargeDate})),{reactivateSubscription:o,openDialog:c,closeDialog:s}=(0,d.useDispatch)(Q);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Button,{variant:"primary",onClick:()=>c("reactivate-subscription"),disabled:e,children:(0,Y._x)("Reactivate Subscription","command","nelio-content")}),(0,a.jsx)(Z.ConfirmationDialog,{title:(0,Y._x)("Reactivate Subscription?","text","nelio-content"),text:(0,Y.sprintf)(/* translators: a date */ /* translators: a date */
(0,Y._x)("Reactivating your subscription will cause it to renew on %s. Do you want to reactivate your subscription?","user","nelio-content"),(0,ce.dateI18n)(ve,i)),confirmLabel:t?(0,Y._x)("Reactivating…","text","nelio-content"):(0,Y._x)("Reactivate Subscription","command","nelio-content"),cancelLabel:(0,Y._x)("Back","command","nelio-content"),onCancel:s,onConfirm:o,isConfirmEnabled:!e,isCancelEnabled:!e,isOpen:n,isConfirmBusy:t})]})},be=({isOpen:e,placement:n,onUpgrade:t,onFocusOutside:i})=>{const[o,c]=(0,r.useState)(),s=pe(),u=Ne(),{upgradeSubscription:p}=(0,d.useDispatch)(Q);return e?u?(0,a.jsx)(l.Popover,{className:"nelio-content-upgrade-form--loading",noArrow:!1,placement:n,onFocusOutside:i,children:(0,a.jsx)(l.Spinner,{})}):(0,a.jsxs)(l.Popover,{className:"nelio-content-upgrade-form",noArrow:!1,placement:n,onFocusOutside:i,children:[(0,a.jsx)(l.RadioControl,{className:"nelio-content-upgrade-form__product-container",label:(0,Y._x)("Subscription Plans","text","nelio-content"),selected:o,options:s.map((e=>({label:(0,a.jsx)(je,Object.assign({},e)),value:e.id}))),onChange:c}),(0,a.jsx)("div",{className:"nelio-content-upgrade-form__button-container",children:(0,a.jsx)(l.Button,{variant:"primary",className:"nelio-content-upgrade-form__button",disabled:!o,onClick:()=>{o&&(t(),p(o))},children:(0,Y._x)("Upgrade","command","nelio-content")})})]}):null},je=({displayName:e,price:n,description:t})=>{const i=ye();return(0,a.jsxs)("div",{className:"nelio-content-upgrade-form__product",children:[(0,a.jsx)("strong",{className:"nelio-content-upgrade-form__product-name",children:Oe(e)}),(0,a.jsx)("span",{className:"nelio-content-upgrade-form__product-price",title:i,children:we(n[i],i)}),(0,a.jsx)("span",{className:"nelio-content-upgrade-form__product-description",children:Oe(t)})]})},ye=()=>u((e=>{const n=e(Q).getAccount();return"free"===n.plan?"USD":n.currency||"USD"})),Ne=()=>u((e=>!e(Q).hasFinishedResolution("getProducts"))),we=(e,n)=>"EUR"===n?`${null!=e?e:"—"}€`:`$${null!=e?e:"—"}`,Oe=e=>e[(0,x.getShortLocale)()]||e.en,Ce=()=>{const[e,n]=(0,r.useState)(!1),t=ue(),i=ue("upgrade-subscription");return pe().length?(0,a.jsxs)("div",{children:[(0,a.jsx)(l.Button,{variant:"primary",isBusy:i,onClick:()=>n(!0),disabled:t,children:i?(0,Y._x)("Upgrading…","text","nelio-content"):(0,Y._x)("Upgrade Subscription","command","nelio-content")}),(0,a.jsx)(be,{isOpen:e,placement:"bottom",onFocusOutside:()=>n(!1),onUpgrade:()=>n(!1)})]}):null};const Ee=e=>{var{label:n}=e,t=function(e,n){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(t[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(t[i[o]]=e[i[o]])}return t}(e,["label"]);const[i,o]=de("remove-license"),c=u((e=>e(Q).getSiteId())),s=ue("remove-license"),r=ue(),{removeLicense:p}=(0,d.useDispatch)(Q);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Button,Object.assign({onClick:()=>o(!0),disabled:r},t,{children:n})),(0,a.jsx)(Z.ConfirmationDialog,{title:(0,Y._x)("Downgrade to Free Version?","text","nelio-content"),text:(0,Y._x)("This action will remove the license from this site so that you can use it somewhere else. Nelio Content will remain active on this site, but you will be using the free version instead. This might result in some scheduled social messages being lost. Do you want to continue?","user","nelio-content"),confirmLabel:s?(0,Y._x)("Downgrading…","text (remove license)","nelio-content"):(0,Y._x)("Downgrade","command (remove license)","nelio-content"),cancelLabel:(0,Y._x)("Back","command","nelio-content"),isDestructive:!0,onCancel:()=>o(!1),onConfirm:()=>{p(c)},isConfirmEnabled:!r,isCancelEnabled:!r,isOpen:i,isConfirmBusy:s})]})},Se=(window.NelioContent.data,window.wp.url),De=()=>(0,a.jsx)(l.ExternalLink,{className:"components-button is-primary",href:(0,Se.addQueryArgs)("https://twitter.com/intent/tweet",{text:(0,Y._x)("Nelio Content is an awesome #EditorialCalendar for #WordPress by @NelioSoft!","text","nelio-content")}),children:(0,Y._x)("Tweet About Nelio Content","command","nelio-content")}),Ie=()=>{const e=u((e=>e(Q).getAccount()));if("free"===e.plan)return null;const{mode:n,state:t,plan:i,period:o}=e;return(0,a.jsxs)("div",{className:"nelio-content-account-container__box nelio-content-plan",children:[(0,a.jsxs)("div",{className:"nelio-content-plan__content",children:[(0,a.jsx)(le,{isCanceled:"canceled"===t,isInvitation:"invitation"===n,plan:i,period:o}),(0,a.jsx)(ae,{})]}),(0,a.jsxs)("div",{className:"nelio-content-plan__actions",children:["invitation"===n&&(0,a.jsx)(De,{}),"invitation"!==n&&"active"===t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ge,{}),(0,a.jsx)(Ce,{})]}),"invitation"!==n&&"canceled"===t&&(0,a.jsx)(fe,{})]})]})},ke=()=>{const e=u((e=>e(Q).getAccount()));if("free"===e.plan)return null;const{plan:n,period:t,state:i,mode:o}=e;return(0,a.jsxs)("div",{className:"nelio-content-account-container__box nelio-content-plan",children:[(0,a.jsxs)("div",{className:"nelio-content-plan__content",children:[(0,a.jsx)(le,{isCanceled:"canceled"===i,isInvitation:"invitation"===o,plan:n,period:t}),(0,a.jsx)("div",{className:"nelio-content-plan__renewal",children:(0,Y._x)("You’re currently using an agency subscription plan.","user","nelio-content")})]}),(0,a.jsxs)("div",{className:"nelio-content-plan__actions",children:[(0,a.jsx)(Ae,{}),(0,a.jsx)(Le,{})]})]})},Ae=()=>{const e=Pe(),[n,t]=(0,r.useState)(!1),{removeLicense:i}=(0,d.useDispatch)(Q),o=Re(),c=()=>t(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Button,{isDestructive:!0,className:"nelio-content-plan__action",onClick:()=>t(!0),disabled:o,children:(0,Y._x)("Downgrade to Free Version","command","nelio-content")}),(0,a.jsx)(Z.ConfirmationDialog,{title:(0,Y._x)("Downgrade to Free version?","text","nelio-content"),text:(0,Y._x)("This will remove the subscription license from the site and you’ll be using Nelio Content’s free version.","text","nelio-content"),confirmLabel:(0,Y._x)("Downgrade","command","nelio-content"),isOpen:n,onCancel:c,onConfirm:()=>{c(),i(e)}})]})},Le=()=>{const e=u((e=>e(Q).getAccount())),n=Re(),[t,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(""),{enableAgencyFullView:s}=(0,d.useDispatch)(Q);if("free"===e.plan)return null;const p=()=>i(!1);return(0,a.jsxs)("div",{children:[(0,a.jsx)(l.Button,{variant:"secondary",className:"nelio-content-plan__action",onClick:()=>i(!0),disabled:n,children:(0,Y._x)("View Details","command","nelio-content")}),t&&(0,a.jsx)(l.Popover,{noArrow:!1,placement:"bottom-start",onFocusOutside:p,children:(0,a.jsxs)("div",{className:"nelio-content-license-form",children:[(0,a.jsx)(l.TextControl,{value:o,placeholder:(0,Y._x)("Type your license here","user","nelio-content"),className:"nelio-content-license-form__text-control",onChange:c}),(0,a.jsx)(l.Button,{variant:"primary",className:"nelio-content-license-form__button",onClick:()=>{e.license&&o===e.license?(s(),p()):c("")},disabled:o.length!==e.license.length,children:(0,Y._x)("Validate","command","nelio-content")})]})})]})},Pe=()=>u((e=>e(Q).getSiteId())),Re=()=>u((e=>e(Q).isLocked())),Te=(0,Y._x)("Y-m-d","text (date)","nelio-content"),Fe=()=>{const e=u((e=>e(Q).getAccount()));if("free"===e.plan)return null;const{creationDate:n,firstname:t,lastname:i,license:o,email:c,photo:s}=e,d=(0,Y.sprintf)(/* translators: 1 -> first name, 2 -> lastname */ /* translators: 1 -> first name, 2 -> lastname */
(0,Y._x)("%1$s %2$s","text (full name)","nelio-content"),t,i),p=(0,x.getFirstLatinizedLetter)(d)||"a";return(0,a.jsxs)("div",{className:"nelio-content-account-container__box nelio-content-info",children:[(0,a.jsx)("h3",{className:"nelio-content-info__title",children:(0,Y._x)("Account Information","title (account)","nelio-content")}),(0,a.jsxs)("div",{className:"nelio-content-info__container",children:[(0,a.jsx)("div",{className:"nelio-content-info__profile",children:(0,a.jsx)("div",{className:`nelio-content-info__picture nelio-content-first-letter-${p}`,children:(0,a.jsx)("div",{className:"nelio-content-info__actual-picture",style:{backgroundImage:`url(${s})`}})})}),(0,a.jsxs)("div",{className:"nelio-content-info__details",children:[(0,a.jsx)("p",{className:"nelio-content-info__name",children:d}),(0,a.jsxs)("p",{className:"nelio-content-info__email",children:[(0,a.jsx)(l.Dashicon,{icon:"email",className:"nelio-content-info__icon"}),c]}),(0,a.jsxs)("p",{className:"nelio-content-info__creation-date",children:[(0,a.jsx)(l.Dashicon,{icon:"calendar",className:"nelio-content-info__icon"}),(0,r.createInterpolateElement)((0,Y.sprintf)(/* translators: a date */ /* translators: a date */
(0,Y._x)("Member since %s.","text","nelio-content"),`<date>${(0,ce.dateI18n)(Te,n)}</date>`),{date:(0,a.jsx)("strong",{})})]}),(0,a.jsxs)("div",{className:"nelio-content-info__license",children:[(0,a.jsx)(l.Dashicon,{icon:"admin-network",className:"nelio-content-info__icon"}),(0,a.jsx)("code",{title:(0,Y._x)("License Key","text","nelio-content"),children:o}),(0,a.jsx)("div",{className:"nelio-content-info__change-license",children:(0,a.jsx)(he,{variant:"link",label:(0,Y._x)("Change","command","nelio-content")})}),(0,a.jsx)("div",{className:"nelio-content-info__remove-license",children:(0,a.jsx)(Ee,{variant:"link",isDestructive:!0,label:(0,Y._x)("Remove","command","nelio-content")})})]})]})]})]})},Be=({invoiceUrl:e,reference:n,chargeDate:t,isRefunded:i,subtotalDisplay:o})=>(0,a.jsxs)("tr",{className:"nelio-content-invoice",children:[(0,a.jsx)("td",{className:"nelio-content-invoice__reference",children:(0,a.jsx)("a",{href:e,className:"nelio-content-invoice__link",target:"_blank",rel:"noopener noreferrer",children:n})}),(0,a.jsx)("td",{className:"nelio-content-invoice__date",children:t}),(0,a.jsxs)("td",{className:"nelio-content-invoice__total",children:[i&&(0,a.jsx)("span",{className:"nelio-content-invoice__label",children:(0,Y._x)("(Refunded)","text (invoice)","nelio-content")}),(0,a.jsx)("span",{className:oe({"nelio-content-invoice__total-value":!0,"nelio-content-invoice__total-value--refunded":i}),children:o})]})]}),Ue=()=>{const e=Ve(),n=$e(),t=Ge(),i=Me();return t?n?(0,a.jsx)("div",{className:"nelio-content-account-container__box nelio-content-billing",children:(0,a.jsxs)("h3",{className:"nelio-content-billing__title",children:[(0,Y._x)("Billing History","text","nelio-content"),n&&(0,a.jsx)(l.Spinner,{})]})}):(0,a.jsxs)("div",{className:"nelio-content-account-container__box nelio-content-billing",children:[(0,a.jsx)("h3",{className:"nelio-content-billing__title",children:(0,Y._x)("Billing History","text","nelio-content")}),!!i&&(0,a.jsx)(l.ExternalLink,{className:"nelio-content-billing__action",href:i,children:(0,Y._x)("Manage Payments","command","nelio-content")}),(0,a.jsxs)("table",{className:"nelio-content-billing__container",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"nelio-content-billing__reference",children:(0,Y._x)("Invoice Reference","text (account, billing table title)","nelio-content")}),(0,a.jsx)("th",{className:"nelio-content-billing__date",children:(0,Y._x)("Date","text (account, billing table title)","nelio-content")}),(0,a.jsx)("th",{className:"nelio-content-billing__total",children:(0,Y._x)("Total","text (account, billing table title)","nelio-content")})]})}),(0,a.jsx)("tbody",{className:"invoice-list",children:e.map((e=>(0,a.jsx)(Be,Object.assign({},e),e.reference)))})]})]}):null},Ve=()=>u((e=>e(Q).getInvoices()||[])),$e=()=>u((e=>!e(Q).hasFinishedResolution("getInvoices"))),Ge=()=>u((e=>{const n=e(Q).getAccount();return"free"!==n.plan&&"regular"===n.mode})),Me=()=>u((e=>{const n=e(Q).getAccount();return"free"===n.plan?"":n.urlToManagePayments})),Ye=({site:e})=>{const[n,t]=(0,r.useState)(!1),{removeLicense:i}=(0,d.useDispatch)(Q),o=u((e=>e(Q).isLocked())),{isCurrentSite:c,url:s,actualUrl:p}=e;return(0,a.jsx)("li",{className:"nelio-content-site",children:c?(0,a.jsxs)("span",{className:"nelio-content-site__url",children:[(0,a.jsxs)("span",{className:"nelio-content-site__current-site",children:[p,!!p&&s!==p&&(0,a.jsx)(Z.HelpIcon,{className:"nelio-content-site__current-site-help",type:"info",text:(0,Y.sprintf)(/* translators: site URL */ /* translators: site URL */
(0,Y._x)("Activation URL is “%s”","text","nelio-content"),s)})]}),(0,a.jsx)("span",{className:"nelio-content-site__label",children:(0,Y._x)("This site","text","nelio-content")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"nelio-content-site__url",children:(0,a.jsx)("a",{href:s,className:oe("nelio-content-site__link",{"nelio-content-site__link--current":c}),target:"_blank",rel:"noopener noreferrer",children:s})}),(0,a.jsx)(l.Button,{isDestructive:!0,variant:"tertiary",className:"nelio-content-site__unlink-button",onClick:()=>t(!0),disabled:o,children:(0,Y._x)("Unlink Site","command","nelio-content")}),(0,a.jsx)(Z.ConfirmationDialog,{title:(0,Y._x)("Unlink Site?","text","nelio-content"),text:(0,Y._x)("This will remove the subscription license from the site.","text","nelio-content"),confirmLabel:(0,Y._x)("Unlink","command","nelio-content"),isOpen:n,onCancel:()=>t(!1),onConfirm:()=>{t(!1),i(e.id)}})]})})},Ke=()=>{const e=He(),n=qe(),t=We(),i=t.length;return n<=1?null:(0,a.jsxs)("div",{className:"nelio-content-account-container__box nelio-content-sites",children:[(0,a.jsxs)("h3",{className:"nelio-content-sites__title",children:[(0,Y._x)("Sites","text","nelio-content"),e&&(0,a.jsx)(l.Spinner,{}),(0,a.jsx)("span",{className:"nelio-content-sites__availability",children:!e&&`${i} / ${n}`})]}),(0,a.jsx)("ul",{className:"nelio-content-sites__list",children:!e&&t.map((e=>(0,a.jsx)(Ye,{site:e},e.id)))})]})},He=()=>u((e=>!e(Q).hasFinishedResolution("getSites"))),We=()=>u((e=>e(Q).getSites()||[])),qe=()=>u((e=>{const n=e(Q).getAccount();return"free"===n.plan?1:n.sitesAllowed})),ze=()=>{const e=u((e=>e(Q).getAccount())),n=u((e=>e(Q).hasFinishedResolution("getAccount"))),t=u((e=>e(Q).isAgencySummary()));if(!n)return null;if("free"===e.plan)return(0,a.jsx)("div",{className:"nelio-content-account-container nelio-content-account-container--free-user",children:(0,a.jsx)(Z.SubscriptionRequiredPage,{page:"account"})});if(t)return(0,a.jsx)("div",{className:"nelio-content-account-container nelio-content-account-container--is-agency-summary",children:(0,a.jsx)(ke,{})});const i="invitation"===e.mode,o=1<e.sitesAllowed;return(0,a.jsxs)("div",{className:oe("nelio-content-account-container",{"nelio-content-account-container--is-invitation":i,"nelio-content-account-container--is-subscribed":!i,"nelio-content-account-container--is-multi-site":o}),children:[(0,a.jsx)(Ie,{}),(0,a.jsx)(Fe,{}),(0,a.jsx)(Ke,{}),(0,a.jsx)(Ue,{})]})},Je=({isSubscribed:e,siteId:n})=>{var t;const[i,o]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const e=setTimeout((()=>o(!1)),1500);return()=>clearTimeout(e)}),[i]),(0,a.jsxs)("h1",{className:"wp-heading-inline nelio-content-page-title",children:[(0,a.jsx)("span",{children:e?(0,Y._x)("Account Details","text","nelio-content"):(0,Y._x)("Upgrade to Premium","user","nelio-content")}),(0,a.jsxs)("span",{className:"nelio-content-page-title__support-key",children:[(0,a.jsx)("strong",{children:(0,Y._x)("Support Key:","text","nelio-content")}),(0,a.jsx)("code",{children:n}),!!(null===(t=navigator.clipboard)||void 0===t?void 0:t.writeText)&&(0,a.jsx)(l.Button,{icon:"admin-page",onClick:()=>!i&&void navigator.clipboard.writeText(n).then((()=>o(!0)))})]}),i&&(0,a.jsx)(l.Snackbar,{className:"nelio-content-page-title__support-key-copied",children:(0,Y._x)("Copied!","text (support key)","nelio-content")})]})};function Qe(e,n){const{siteId:t,isSubscribed:i}=n,o=document.getElementById(e);var c,s;c=(0,a.jsxs)(l.SlotFillProvider,{children:[(0,a.jsx)(Je,{isSubscribed:i,siteId:t}),(0,a.jsx)(ee,{children:(0,a.jsx)(ze,{})}),(0,a.jsx)(l.Popover.Slot,{})]}),(s=o)&&(r.createRoot?(0,r.createRoot)(s).render(c):(0,r.render)(c,s))}},4396:(e,n)=>{"use strict";function t(e){return e}n.L8=void 0,n.L8=function(e){return e?function(n){return e(n),n}:t}}},t={};function i(e){var o=t[e];if(void 0!==o)return o.exports;var c=t[e]={exports:{}};return n[e](c,c.exports,i),c.exports}i.m=n,e=[],i.O=(n,t,o,c)=>{if(!t){var s=1/0;for(d=0;d<e.length;d++){for(var[t,o,c]=e[d],a=!0,l=0;l<t.length;l++)(!1&c||s>=c)&&Object.keys(i.O).every((e=>i.O[e](t[l])))?t.splice(l--,1):(a=!1,c<s&&(s=c));if(a){e.splice(d--,1);var r=o();void 0!==r&&(n=r)}}return n}c=c||0;for(var d=e.length;d>0&&e[d-1][2]>c;d--)e[d]=e[d-1];e[d]=[t,o,c]},i.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return i.d(n,{a:n}),n},i.d=(e,n)=>{for(var t in n)i.o(n,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},i.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={4808:0,4501:0};i.O.j=n=>0===e[n];var n=(n,t)=>{var o,c,[s,a,l]=t,r=0;if(s.some((n=>0!==e[n]))){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);if(l)var d=l(i)}for(n&&n(t);r<s.length;r++)c=s[r],i.o(e,c)&&e[c]&&e[c][0](),e[c]=0;return i.O(d)},t=globalThis.webpackChunkNelioContent=globalThis.webpackChunkNelioContent||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var o=i.O(void 0,[4501],(()=>i(2501)));o=i.O(o);var c=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var s in o)c[s]=o[s];o.__esModule&&Object.defineProperty(c,"__esModule",{value:!0})})();