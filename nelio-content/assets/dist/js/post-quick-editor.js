(()=>{var e,t={6615:(e,t,n)=>{"use strict";n.r(t),n.d(t,{postQuickEditor:()=>s});var r={};n.r(r),n.d(r,{arePremiumItemsDirty:()=>F,areReferencesDirty:()=>J,areSeriesDirty:()=>W,areTasksDirty:()=>H,getAllAttributes:()=>I,getAuthorId:()=>V,getDateValue:()=>j,getExtraInfoTab:()=>te,getId:()=>O,getNewComments:()=>z,getPostStatus:()=>R,getPostTerms:()=>D,getPostTermsByTaxonomy:()=>A,getPostType:()=>q,getPremiumItems:()=>U,getReferenceInput:()=>K,getReferences:()=>Y,getSeries:()=>L,getTaskPresetSelection:()=>Q,getTasks:()=>B,getTimeValue:()=>M,getTitle:()=>N,getValidationError:()=>ne,isNewPost:()=>X,isPublished:()=>Z,isRewrite:()=>C,isSaving:()=>ee,isTaskPresetLoaderOpen:()=>G,isVisible:()=>$});var o={};n.r(o),n.d(o,{close:()=>Te,markAsSaving:()=>xe,openNewPostEditor:()=>Ee,openPostEditor:()=>_e,openTaskPresetLoader:()=>he,selectTaskPresets:()=>ge,setAuthorId:()=>ae,setDateValue:()=>ue,setExtraInfoTab:()=>be,setNewComments:()=>ve,setPostStatus:()=>ie,setPostTerms:()=>se,setPostType:()=>oe,setPremiumItems:()=>le,setReferenceInput:()=>me,setReferences:()=>pe,setSeries:()=>de,setTasks:()=>fe,setTimeValue:()=>ce,setTitle:()=>re,setValidationError:()=>ke});var i={};n.r(i),n.d(i,{saveAndClose:()=>Re});var s={};n.r(s),n.d(s,{PostQuickEditor:()=>Tn,onSavePremiumItems:()=>En,store:()=>Ue});const a=window.wp.element,u=window.wp.components,c=window.wp.data;function l(e,t){return(0,c.useSelect)(e,t)}function d(e){return(0,c.resolveSelect)(e)}const f=window.wp.i18n,m=window.lodash,p=window.NelioContent.data,v=window.NelioContent.components,h=window.NelioContent.utils,g=window.NelioContent.date;var y={error:"",extraInfoTab:"none",isPublished:!1,isSaving:!1,isVisible:!1},E={isOpen:!1,selection:[]},_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)},T={title:"",type:void 0,taxonomies:{},authorId:void 0,isRewrite:!1,status:void 0,dateValue:"",timeValue:"",referenceInput:"",references:[],tasks:[],newComments:[],series:[],premiumItemsByType:{}},b=function(e){return!("id"in e)||!e.id};function k(e){return void 0===e?"":"".concat(e)}var x=function(e){var t="";if("exact"===e.dateType)t+="0:"+e.dateValue;else{var n=Math.abs(Number.parseInt(e.dateValue)||0);t+="positive-days"===e.dateType||0===n?"2:"+(0,m.padStart)("".concat(n),5,"0"):"1:"+(0,m.padStart)("".concat(Math.abs(9999-n)),5,"0"),t+=":",t+=e.task}return t+=":".concat(e.task,":").concat(e.id),_(_({},e),{_sort:t})},S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},S.apply(this,arguments)},P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},P.apply(this,arguments)};const w=(0,c.combineReducers)({attributes:function(e,t){var n;return void 0===e&&(e=T),null!==(n=function(e,t){var n,r,o,i,s,a,u;switch(t.type){case"OPEN_EDITOR":return _(_({},T),{id:b(t.post)?void 0:t.post.id,title:null!==(o=t.post.title)&&void 0!==o?o:T.title,type:null!==(i=t.post.type)&&void 0!==i?i:T.type,taxonomies:b(t.post)?T.taxonomies:t.post.taxonomies,authorId:null!==(s=t.post.author)&&void 0!==s?s:T.authorId,isRewrite:!b(t.post)&&t.post.isRewrite,series:null!==(a=t.post.series)&&void 0!==a?a:T.series,status:b(t.post)?T.status:t.post.status,dateValue:!b(t.post)&&t.post.date?(0,g.date)("Y-m-d",t.post.date):k(b(t.post)?t.post.dateValue:""),timeValue:!b(t.post)&&t.post.date?(0,g.date)("H:i",t.post.date):k(b(t.post)?t.post.timeValue:"")});case"SET_TITLE":return _(_({},e),{title:t.title});case"SET_POST_TYPE":return _(_({},e),{type:t.postType});case"SET_POST_STATUS":return _(_({},e),{status:t.postStatus});case"SET_POST_TERMS":return _(_({},e),{taxonomies:_(_({},e.taxonomies),(n={},n[t.taxonomy]=t.terms,n))});case"SET_AUTHOR":return _(_({},e),{authorId:t.authorId});case"SET_DATE":return _(_({},e),{dateValue:k(t.dateValue)});case"SET_TIME":return _(_({},e),{timeValue:k(t.timeValue)});case"SET_PREMIUM_ITEMS":return _(_({},e),{premiumItemsByType:_(_({},e.premiumItemsByType),(r={},r[t.typeName]=t.items,r))});case"SET_TASKS":return _(_({},e),{tasks:(u=t.tasks,(0,m.orderBy)(u.map(x),"_sort"))});case"SET_REFERENCE_INPUT":return _(_({},e),{referenceInput:t.url});case"SET_REFERENCES":return _(_({},e),{references:t.references});case"SET_NEW_COMMENTS":return _(_({},e),{newComments:t.comments});case"SET_SERIES":return _(_({},e),{series:t.series})}}(e,t))&&void 0!==n?n:e},presetLoader:function(e,t){var n;return void 0===e&&(e=E),null!==(n=function(e,t){switch(t.type){case"OPEN_TASK_PRESET_LOADER":return S(S({},E),{isOpen:t.isOpen});case"SELECT_TASK_PRESETS":return e.isOpen?S(S({},e),{selection:t.selection}):e}}(e,t))&&void 0!==n?n:e},status:function(e,t){var n;return void 0===e&&(e=y),null!==(n=function(e,t){switch(t.type){case"OPEN_EDITOR":return P(P({},y),{isPublished:"status"in t.post&&"publish"===t.post.status,isVisible:!0});case"CLOSE_EDITOR":return y;case"SET_EXTRA_INFO_TAB":return P(P({},e),{extraInfoTab:t.tab});case"SET_VALIDATION_ERROR":return P(P({},e),{error:t.error});case"MARK_AS_SAVING":return P(P({},e),{isSaving:!!t.isSaving})}}(e,t))&&void 0!==n?n:e}});function I(e){return e.attributes}function O(e){return e.attributes.id}function N(e){return e.attributes.title||""}function C(e){return!!e.attributes.isRewrite}function q(e){return e.attributes.type}function R(e){return e.attributes.status}function D(e,t){var n;return null!==(n=e.attributes.taxonomies[t])&&void 0!==n?n:[]}function A(e){return e.attributes.taxonomies}function V(e){return e.attributes.authorId}function j(e){return e.attributes.dateValue}function L(e){return e.attributes.series}function M(e){return e.attributes.timeValue}function B(e){return e.attributes.tasks}var U=function(e,t){var n;return null!==(n=e.attributes.premiumItemsByType[t])&&void 0!==n?n:[]},F=function(e,t,n){var r=U(e,t);return r.length!==n.length||(0,m.some)(r,(function(e){var t=(0,m.find)(n,{id:e.id});return!t||!(0,m.isEqual)((0,m.pick)(e,(0,m.keys)(t)),t)}))};function H(e,t){var n=e.attributes.tasks;return t=t.map((function(e){return(0,m.pick)(e,["id","task","dateType","dateValue","color","assigneeId"])})),n.length!==t.length||(0,m.some)(n,(function(e){var n=(0,m.find)(t,{id:e.id});return!n||!(0,m.isEqual)((0,m.pick)(e,(0,m.keys)(n)),n)}))}function K(e){return e.attributes.referenceInput}function Y(e){return e.attributes.references}function z(e){return e.attributes.newComments}function J(e,t){var n=t.map((function(e){return e.url})),r=e.attributes.references;return n.length!==r.length||(0,m.some)(r,(function(e){return!n.includes(e.url)}))}function W(e,t){var n=e.attributes.series;return t.length!==n.length||(0,m.some)(n,(function(e){return!t.find((function(t){return t.id===e.id&&t.part===e.part}))}))}function G(e){return e.presetLoader.isOpen}function Q(e){return e.presetLoader.selection}function X(e){return!e.attributes.id}function Z(e){return!!e.status.isPublished}function $(e){return!!e.status.isVisible}function ee(e){return!!e.status.isSaving}function te(e){return e.status.extraInfoTab||"none"}function ne(e){return e.status.error}function re(e){return{type:"SET_TITLE",title:e}}function oe(e){return{type:"SET_POST_TYPE",postType:e}}function ie(e){return{type:"SET_POST_STATUS",postStatus:e}}function se(e,t){return{type:"SET_POST_TERMS",taxonomy:e,terms:t}}function ae(e){return{type:"SET_AUTHOR",authorId:e}}function ue(e){return{type:"SET_DATE",dateValue:e}}function ce(e){return{type:"SET_TIME",timeValue:e}}function le(e,t){return{type:"SET_PREMIUM_ITEMS",typeName:e,items:t}}function de(e){return{type:"SET_SERIES",series:e}}function fe(e){return{type:"SET_TASKS",tasks:e}}function me(e){return{type:"SET_REFERENCE_INPUT",url:e}}function pe(e){return{type:"SET_REFERENCES",references:e}}function ve(e){return{type:"SET_NEW_COMMENTS",comments:e}}function he(e){return{type:"OPEN_TASK_PRESET_LOADER",isOpen:e}}function ge(e){return{type:"SELECT_TASK_PRESETS",selection:e}}var ye=function(){return ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ye.apply(this,arguments)};function Ee(e,t){return void 0===t&&(t={}),{type:"OPEN_EDITOR",post:ye(ye({},(0,h.createPost)(e)),(0,m.omitBy)(t,m.isNil))}}function _e(e){return{type:"OPEN_EDITOR",post:e}}function Te(){return{type:"CLOSE_EDITOR"}}function be(e){return{type:"SET_EXTRA_INFO_TAB",tab:e}}function ke(e){return{type:"SET_VALIDATION_ERROR",error:e}}function xe(e){return{type:"MARK_AS_SAVING",isSaving:e}}const Se=window.wp.apiFetch,Pe=n.n(Se)(),we=window.wp.hooks;var Ie=function(){return Ie=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ie.apply(this,arguments)},Oe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},Ne=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Ce=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},qe=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};function Re(){return Oe(this,void 0,Promise,(function(){var e,t,n,r,o,i,s,a,u;return Ne(this,(function(l){switch(l.label){case 0:return(0,c.select)(Ue).isSaving()?[2]:[4,(0,c.dispatch)(Ue).markAsSaving(!0)];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,10,,11]),e=(0,c.select)(Ue).getAllAttributes(),t=e.tasks,n=e.premiumItemsByType,r=e.newComments,[4,De(o=Ce(e,["tasks","premiumItemsByType","newComments"]))];case 3:return i=l.sent(),s=i.post,a=i.references,[4,Ve(!o.id,s,t)];case 4:return l.sent(),[4,je(!o.id,s,n)];case 5:return l.sent(),[4,Me(s,r)];case 6:return l.sent(),[4,(0,c.dispatch)(p.store).receivePosts(s)];case 7:return l.sent(),[4,(0,c.dispatch)(p.store).receiveSuggestedReferences(s.id,a)];case 8:return l.sent(),[4,(0,c.dispatch)(p.store).reloadPostRelatedItems(s.id)];case 9:return l.sent(),[3,11];case 10:return u=l.sent(),(0,h.logError)(u),[3,11];case 11:return[4,(0,c.dispatch)(Ue).markAsSaving(!1)];case 12:return l.sent(),[4,(0,c.dispatch)(Ue).close()];case 13:return l.sent(),[2]}}))}))}function De(e){return Oe(this,void 0,Promise,(function(){var t,n,r;return Ne(this,(function(o){switch(o.label){case 0:return t=e.id?"PUT":"POST",n=e.id?"/nelio-content/v1/post/".concat(e.id):"/nelio-content/v1/post",r=Pe({path:n,method:t,data:Ie(Ie({},(0,m.omitBy)(e,h.isEmpty)),{references:e.references.map((function(e){return e.url}))})}),[4,Ae(e)];case 1:return o.sent(),[2,r]}}))}))}function Ae(e){return Oe(this,arguments,void 0,(function(e){var t=e.timeValue;return Ne(this,(function(e){switch(e.label){case 0:return t?[4,(0,c.dispatch)(p.store).setDefaultTime("post",t)]:[2];case 1:return e.sent(),(0,h.setValue)("defaultPostTime",t),[2]}}))}))}function Ve(e,t,n){return Oe(this,void 0,Promise,(function(){var r,o,i,s,a,u;return Ne(this,(function(l){switch(l.label){case 0:return e?[3,2]:[4,d(p.store).getTasksRelatedToPost(t.id)];case 1:return o=l.sent(),[3,3];case 2:o=[],l.label=3;case 3:if(r=o,!(0,c.select)(Ue).areTasksDirty(r))return[2];l.label=4;case 4:return l.trys.push([4,6,,7]),i=(0,c.select)(p.store).getSiteId(),s=(0,c.select)(p.store).getApiRoot(),a=(0,c.select)(p.store).getAuthenticationToken(),[4,Pe({url:"".concat(s,"/site/").concat(i,"/task"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(a)},data:{mode:"replace",postId:t.id,tasks:n.map((function(e){return Ie(Ie({},e),{baseDatetime:t.date||"none",assigneeId:e.assigneeId||t.author,postId:t.id,postType:t.type,postAuthor:t.author})}))}})];case 5:return l.sent(),[3,7];case 6:return u=l.sent(),(0,h.logError)(u),[3,7];case 7:return r.forEach((function(e){var t=e.id;return(0,c.dispatch)(p.store).removeTask(t)})),[2]}}))}))}function je(e,t,n){return Oe(this,void 0,Promise,(function(){var r,o,i,s,a,u,l,f,v=this;return Ne(this,(function(g){switch(g.label){case 0:return e?[3,2]:[4,d(p.store).getAllPremiumItemsRelatedToPost(t.id)];case 1:return o=g.sent(),[3,3];case 2:o={},g.label=3;case 3:return r=o,y=(0,m.uniq)(qe(qe([],Object.keys(n),!0),Object.keys(r),!0)).reduce((function(e,t){var o,i,s;return Ie(Ie({},e),((o={})[t]={old:null!==(i=r[t])&&void 0!==i?i:[],new:null!==(s=n[t])&&void 0!==s?s:[]},o))}),{}),i=(0,m.toPairs)(y).map((function(e){var t=e[0],n=e[1];return n?[t,n]:void 0})).filter(h.isDefined),s=i.filter((function(e){var t=e[0],n=e[1].old;return(0,c.select)(Ue).arePremiumItemsDirty(t,n)})),[4,Promise.all(s.map((function(e){return Oe(v,[e],Promise,(function(e){var n,r,o=e[0],i=e[1];return Ne(this,(function(e){switch(e.label){case 0:return n=[o],r={old:i.old},[4,Le(o,i.new,t.id)];case 1:return[2,n.concat([(r.new=e.sent(),r)])]}}))}))})))];case 4:return a=g.sent(),u=(0,c.dispatch)(p.store),l=u.receivePremiumItems,f=u.removePremiumItem,a.forEach((function(e){var t=e[0],n=e[1];n.old.forEach((function(e){return f(t,e.id)})),l(t,n.new)})),[2]}var y}))}))}function Le(e,t,n){return(0,we.applyFilters)("nelio-content_post-quick-editor_onSavePremiumItems",new Promise((function(e){return e([])})),e,t,n)}function Me(e,t){return Oe(this,void 0,void 0,(function(){var n,r,o,i;return Ne(this,(function(s){switch(s.label){case 0:if(!(t=t.map((function(t){return Ie(Ie({},t),{postId:e.id,postType:e.type,postAuthor:e.author})}))).length)return[2];s.label=1;case 1:return s.trys.push([1,3,,4]),n=(0,c.select)(p.store).getSiteId(),r=(0,c.select)(p.store).getApiRoot(),o=(0,c.select)(p.store).getAuthenticationToken(),[4,Pe({url:"".concat(r,"/site/").concat(n,"/comment"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(o)},data:t})];case 2:return s.sent(),[3,4];case 3:return i=s.sent(),(0,h.logError)(i),[3,4];case 4:return[2]}}))}))}var Be=function(){return Be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Be.apply(this,arguments)},Ue=(0,c.createReduxStore)("nelio-content/post-quick-editor",{reducer:w,controls:c.controls,actions:Be(Be({},o),i),selectors:r});!function(e){(0,c.register)(e)}(Ue);var Fe=[{title:(0,f._x)("Post Editor","text","nelio-content"),intro:(0,f._x)("Welcome to the post editor. This simple modal lets you quickly and efficiently create new posts or edit existing ones.","user","nelio-content")},{title:(0,f._x)("Title","text","nelio-content"),intro:(0,f._x)("Here you can set or change the post’s title.","user","nelio-content"),element:function(){return document.querySelector(".nelio-content-post-quick-editor__title")}},{title:(0,f._x)("Post Type","text","nelio-content"),intro:(0,f._x)("Use this selector to set its type to one of the post types enabled in Nelio Content’s advanced settings.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__type")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__type")}},{title:(0,f._x)("Status","text","nelio-content"),intro:(0,f._x)("Use this selector to set the post’s status.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__status")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__status")}},{title:(0,f._x)("Status","text","nelio-content"),intro:(0,f._x)("In multiauthor sites, you can select the author of any given post here.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__author")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__author")}},{title:(0,f._x)("Date","text","nelio-content"),intro:(0,f._x)("You can also set the date in which the post is supposed to be published. If you don’t set a specific date, the post will show up in the “Unscheduled” section.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__date")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__date")}},{title:(0,f._x)("Time","text","nelio-content"),intro:(0,f._x)("You can also set the publication time.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__time")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__time")}},{title:(0,f._x)("More Options","text","nelio-content"),intro:(0,f._x)("Finally, you can click on this link to show some additional settings. For example, if you’re creating or editing a blog post, this will reveal a couple of settings to tweak its categories and tags.","user","nelio-content"),active:function(){return!!document.querySelector(".nelio-content-post-quick-editor__extra-action")},element:function(){return document.querySelector(".nelio-content-post-quick-editor__extra-action")}}],He=function(){var e=Ke(),t=e.authorId,n=e.dateValue,r=e.reference,o=e.timeValue,i=e.title,s=Ye(),u=s.setError,c=s.clearErrors;return(0,a.useEffect)(ze((function(){return(0,h.isEmpty)((0,m.trim)(i))?u((0,f._x)("Please set post’s title","user","nelio-content")):(0,h.isEmpty)(t)?u((0,f._x)("Please set a post author","user","nelio-content")):(0,h.isEmpty)(n)&&!(0,h.isEmpty)(o)?u((0,f._x)("Please specify a valid date","user","nelio-content")):!(0,h.isEmpty)(n)&&(0,h.isEmpty)(o)?u((0,f._x)("Please specify a valid time","user","nelio-content")):r&&!(0,h.isUrl)(r)?u((0,f._x)("Please type in a valid reference URL","user","nelio-content")):c()})),[t,n,r,o,i]),null},Ke=function(){return l((function(e){var t=e(Ue),n=t.getAuthorId,r=t.getDateValue,o=t.getReferenceInput,i=t.getTimeValue,s=t.getTitle;return{authorId:n(),dateValue:r(),reference:o(),timeValue:i(),title:s()}}))},Ye=function(){var e=(0,c.useDispatch)(Ue).setValidationError;return{setError:e,clearErrors:function(){return e("")}}},ze=function(e){return function(){e()}};const Je=window.wp.coreData;var We=function(){var e=Qe(),t=Ze();return e||!t},Ge=function(){return l((function(e){return e(Ue).isPublished()}))},Qe=function(){return l((function(e){return e(Ue).isSaving()}))},Xe=function(){return l((function(e){return e(Ue).isNewPost()}))},Ze=function(){return l((function(e){var t=e(p.store),n=t.getPost,r=t.canCurrentUserEditPost,o=e(Ue),i=o.getId,s=o.isNewPost,a=i(),u=!!a&&n(a),c=!!u&&r(u);return s()||c}))},$e=function(){return!!et().length},et=function(){var e=l((function(e){return e(Ue).getPostType()})),t=rt();return(0,m.filter)(t,(function(t){return!e||t.types.includes(e)}))},tt=function(e){return l((function(t){var n=t(Ue).getPostType();return t(p.store).getPostTypes(e).some((function(e){return e.name===n}))}))},nt=function(){return[$e(),tt("future-actions"),tt("series"),tt("tasks"),tt("comments"),tt("references")].some((function(e){return e}))},rt=function(){var e=(0,m.filter)(l((function(e){return e(Je.store).getEntityRecords("root","taxonomy",{per_page:-1})||[]})),(function(e){return e.visibility.public}));return(0,we.applyFilters)("nelio-content_post-quick-editor_allTaxonomies",e)},ot=function(){var e=Ze(),t=it();return e?null:a.createElement("div",{className:"nelio-content-post-quick-editor__edit-warning"},a.createElement(u.Dashicon,{icon:"warning"}),t)},it=function(){return l((function(e){switch((0,e(Ue).getPostType)()){case"page":return(0,f._x)("You’re not allowed to edit this page.","user","nelio-content");case"post":return(0,f._x)("You’re not allowed to edit this post.","user","nelio-content");default:return(0,f._x)("You’re not allowed to edit this content.","user","nelio-content")}}))},st=function(){var e=(0,c.useDispatch)(Ue).setExtraInfoTab,t=at(),n=nt(),r=We(),o=$e();return!n||t?null:a.createElement("div",{className:"nelio-content-post-quick-editor__extra-actions"},a.createElement(u.Button,{className:"nelio-content-post-quick-editor__extra-action",variant:"link",disabled:r,onClick:function(){return e(o?"taxonomies":"tasks")}},(0,f._x)("View Details","command","nelio-content")))},at=function(){return l((function(e){return"none"!==e(Ue).getExtraInfoTab()}))},ut=function(){var e=(0,c.useDispatch)(Ue),t=e.close,n=e.saveAndClose,r=We(),o=ct(),i=Xe(),s=Qe();return a.createElement("div",{className:"nelio-content-post-quick-editor__actions"},a.createElement(st,null),a.createElement(u.Button,{variant:"secondary",disabled:r,onClick:t},(0,f._x)("Cancel","command","nelio-content")),a.createElement(v.SaveButton,{variant:"primary",error:o,isSaving:s,isUpdate:!i,onClick:n}))},ct=function(){return l((function(e){return e(Ue).getValidationError()}))},lt=function(){var e=(0,c.useDispatch)(Ue).close,t=dt(),n=t.primary,r=t.secondary;return a.createElement("div",{className:"nelio-content-post-quick-editor__actions"},a.createElement(st,null),a.createElement(u.Button,{variant:"secondary",onClick:e},(0,f._x)("Cancel","command","nelio-content")),!!r&&a.createElement(u.ExternalLink,{className:"components-button is-secondary",href:r.url,onClick:e},r.label),!!n&&a.createElement(u.ExternalLink,{className:"components-button is-primary",href:n.url,onClick:e},n.label))},dt=function(){var e=ft(),t=Ze();if(!e)return{};var n=e.status,r=e.editLink,o="publish"===n,i={url:e.viewLink,label:o?(0,f._x)("View","command","nelio-content"):(0,f._x)("Preview","command","nelio-content")},s={url:r,label:(0,f._x)("Edit","command","nelio-content")};return t?{primary:o?i:s,secondary:o?s:i}:{secondary:i}},ft=function(){return l((function(e){return(0,e(p.store).getPost)((0,e(Ue).getId)())}))},mt=function(){return mt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mt.apply(this,arguments)},pt=function(){var e=Ze(),t=vt();return e&&t?a.createElement(ut,null):a.createElement(lt,null)},vt=function(){return l((function(e){var t,n,r,o;if(e(p.store),e(Ue),(0,e(Ue).isNewPost)())return!0;if((0,e(Ue).isSaving)())return!0;var i=e(Ue).getId(),s=e(p.store).getPost(i);if(!s)return!0;var a=e(p.store).getTasksRelatedToPost(i);if(e(Ue).areTasksDirty(a))return!0;var u=e(Ue).arePremiumItemsDirty,c=(0,m.toPairs)(e(p.store).getAllPremiumItemsRelatedToPost(i)).map((function(e){var t=e[0],n=e[1];return n?[t,n]:void 0})).filter(h.isDefined).map((function(e){var t=e[0],n=e[1];return u(t,n)})).some((function(e){return e}));if(c)return!0;var l=e(p.store).getSuggestedReferences(i);if(e(Ue).areReferencesDirty(l))return!0;if(e(Ue).getNewComments().length)return!0;var d=s.series;if(e(Ue).areSeriesDirty(d))return!0;var f=e(Ue),v=f.getTitle,g=f.getAuthorId,y=f.getDateValue,E=f.getTimeValue,_=f.getPostStatus,T=f.getPostTermsByTaxonomy,b=function(e){return JSON.stringify((0,m.mapValues)(e,(function(e){return(0,m.orderBy)(e,"id")})))},k={title:v(),status:_(),author:g(),dateValue:null!==(t=y())&&void 0!==t?t:"",timeValue:null!==(n=E())&&void 0!==n?n:"",taxonomies:b(T())},x=(0,h.extractDateTimeValues)(s.date),S=mt(mt({},(0,m.pick)(s,(0,m.keys)(k))),{taxonomies:b(s.taxonomies),dateValue:null!==(r=null==x?void 0:x.dateValue)&&void 0!==r?r:"",timeValue:null!==(o=null==x?void 0:x.timeValue)&&void 0!==o?o:""});return!(0,m.isEqual)(k,S)}))},ht=function(){var e=gt(),t=e[0],n=e[1],r=yt(),o=We();return r?a.createElement("div",{className:"nelio-content-post-quick-editor__author"},a.createElement(v.AuthorSearcher,{value:t,onChange:function(e){e&&n(e)},placeholder:(0,f._x)("Author…","text","nelio-content"),disabled:o})):null},gt=function(){return[l((function(e){return e(Ue).getAuthorId()})),(0,c.useDispatch)(Ue).setAuthorId]},yt=function(){return l((function(e){return e(p.store).isMultiAuthor()}))},Et=function(){var e=_t(),t=e[0],n=e[1],r=Tt(),o=We(),i=Ge();return a.createElement("div",{className:"nelio-content-post-quick-editor__date"},a.createElement(v.DateInput,{disabled:o||i,value:t,onChange:function(e){return n(null!=e?e:"")},min:r}))},_t=function(){return[l((function(e){return e(Ue).getDateValue()})),(0,c.useDispatch)(Ue).setDateValue]},Tt=function(){return l((function(e){var t=e(p.store),n=t.getToday,r=t.getPost,o=e(Ue),i=o.getId,s=o.isNewPost,a=n(),u=r(i()),c=(0,h.extractDateTimeValues)(null==u?void 0:u.date);return s()?a:bt(a,null==c?void 0:c.dateValue)}))},bt=function(e,t){return!t||e<t?e:t},kt=n(6942),xt=n.n(kt),St=function(){return St=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},St.apply(this,arguments)},Pt=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},wt=function(){return a.createElement(It,null)},It=(0,p.withSubscriptionCheck)("raw/editorial-comments",(function(){return a.createElement("div",{className:"nelio-content-pqe-extra__comments"},a.createElement(Ot,null),a.createElement(Nt,null))})),Ot=function(){var e=(0,a.useRef)(null),t=qt(),n=t.comments,r=t.newComments,o=Rt(),i=r.length,s=(0,a.useState)(-1),u=s[0],c=s[1];return(0,a.useEffect)((function(){var t;u!==i&&(u<i&&(null===(t=e.current)||void 0===t||t.scrollTo({top:999999,behavior:-1===u?void 0:"smooth"})),c(i))}),[u,i,c]),a.createElement("ul",{ref:e,className:"nelio-content-pqe-extra__comment-list"},n.map((function(e){return a.createElement(Ct,{key:"nelio-content-comment-".concat(e.id),comment:e})})),r.map((function(e){return a.createElement(Ct,{key:"nelio-content-comment-".concat(e.id),comment:e,onDelete:function(){return o(e.id)}})})))},Nt=function(){var e=(0,a.useState)(""),t=e[0],n=e[1],r=Qe(),o=Dt();return a.createElement("div",{className:"nelio-content-pqe-extra__comment-form"},a.createElement(u.TextareaControl,{placeholder:(0,f._x)("Write a comment and press enter to send…","user","nelio-content"),value:t,disabled:r,onChange:n,onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),o(t),n(""))}}))},Ct=function(e){var t=e.comment,n=e.onDelete,r=Qe(),o=At(null==t?void 0:t.authorId),i=(0,p.useAuthorName)(null==t?void 0:t.authorId);return a.createElement("li",{className:xt()("nelio-content-pqe-extra__comment",{"nelio-content-pqe-extra__comment--is-mine":o})},a.createElement("div",null,a.createElement("div",{className:xt()({"nelio-content-pqe-extra__comment-bubble":!0,"nelio-content-pqe-extra__comment-bubble--is-mine":o})},(null==t?void 0:t.comment)||""),n?a.createElement("div",{className:"nelio-content-pqe-extra__comment-actions"},a.createElement("span",null,r?(0,f._x)("Saving…","text","nelio-content"):(0,f._x)("New","text (editorial comment)","nelio-content"))," • ",a.createElement(v.DeleteButton,{disabled:r,onClick:n})):a.createElement("div",{className:xt()({"nelio-content-pqe-extra__comment-extra":!0,"nelio-content-pqe-extra__comment-extra--is-mine":o})},!o&&a.createElement("div",{className:"nelio-content-pqe-extra__comment-author"},i),a.createElement("div",{className:"nelio-content-pqe-extra__comment-date"},(0,g.dateI18n)((0,g.getSettings)().formats.datetime,null==t?void 0:t.date)))))},qt=function(){return l((function(e){var t=e(Ue).getId();return{comments:e(p.store).getCommentsRelatedToPost(t),newComments:e(Ue).getNewComments()}}))},Rt=function(){var e=(0,c.useDispatch)(Ue).setNewComments;return l((function(t){var n=t(Ue).getNewComments();return function(t){e(n.filter((function(e){return e.id!==t})))}}))},Dt=function(){var e=(0,c.useDispatch)(Ue).setNewComments;return l((function(t){var n=t(Ue).getNewComments();return function(t){(t=(0,m.trim)(t))&&e(Pt(Pt([],n,!0),[St(St({},(0,h.createComment)(0,"post")),{comment:t})],!1))}}))},At=function(e){return l((function(t){return t(p.store).getCurrentUserId()===e}))},Vt=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},jt=function(){var e=l((function(e){return{referenceInput:e(Ue).getReferenceInput(),references:e(Ue).getReferences()}})),t=e.references,n=e.referenceInput,r=Qe(),o=(0,c.useDispatch)(Ue),i=o.setReferenceInput,s=o.setReferences,d=(0,m.trim)(n),p=(0,h.isUrl)(d)&&!t.some((function(e){return e.url===d}));return a.createElement("div",{className:"nelio-content-pqe-extra__references"},a.createElement("ul",{className:"nelio-content-pqe-extra__reference-list"},t.map((function(e,t){return a.createElement("li",{key:"nelio-content-reference-".concat(t)},a.createElement(u.ExternalLink,{href:e.url},e.title||e.url))}))),a.createElement("div",{className:"nelio-content-pqe-extra__new-reference"},a.createElement(u.TextControl,{autoComplete:"off",placeholder:(0,f._x)("Suggest reference…","user","nelio-content"),disabled:r,value:n,onChange:i}),a.createElement(u.Button,{variant:"secondary",onClick:function(){(0,h.isUrl)(d)&&(s(Vt(Vt([],t,!0),[{url:d,title:""}],!1)),i(""))},disabled:!p||r},(0,f._x)("Add","command","nelio-content"))))};const Lt=window.NelioContent.taskEditor;var Mt=function(){return Mt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mt.apply(this,arguments)},Bt=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Ut=function(){var e=Kt(),t=l((function(e){return!!e(Ue).getTasks().length})),n=(0,c.useDispatch)(Ue),r=n.openTaskPresetLoader,o=n.setTasks,i=l((function(e){return e(Ue).getTasks()})),s=Ht(i),u=Ft(),d=u[0],f=u[1];return a.createElement(v.TaskPresetLoader,{state:e,actions:t?"replace-or-merge":"add",selection:d,onUpdate:f,onCancel:function(){return r(!1)},onMerge:function(e){o(Bt(Bt([],i,!0),e.map(s("merge")).filter(h.isDefined),!0)),r(!1)},onReplace:function(e){o(e.map(s("replace")).filter(h.isDefined)),r(!1)}})},Ft=function(){return[l((function(e){return e(Ue).getTaskPresetSelection()})),(0,c.useDispatch)(Ue).selectTaskPresets]},Ht=function(e){var t=l((function(e){return{postAuthor:e(Ue).getAuthorId(),postId:e(Ue).getId(),postType:e(Ue).getPostType(),postDate:e(Ue).getDateValue()}})),n=t.postAuthor,r=t.postId,o=t.postType,i=t.postDate;return function(t){return function(s){var a,u,c=Mt(Mt({},(0,h.createTask)()),{assigneeId:null!==(u=null!==(a=s.assigneeId)&&void 0!==a?a:n)&&void 0!==u?u:0,task:s.task,color:s.color,dateType:s.dateType,dateValue:s.dateValue,postId:r,postType:o,dateDue:(0,h.getTaskDateDue)({baseDatetime:i||"now",dateType:s.dateType,dateValue:s.dateValue}),postAuthor:n}),l=(0,m.pick)(c,["assigneeId","task","dateType","dateValue"]);return"merge"===t&&(0,m.some)(e,(function(e){return(0,m.isEqual)(l,(0,m.pick)(e,(0,m.keys)(l)))}))?void 0:c}}},Kt=function(){return l((function(e){return e(Ue).isTaskPresetLoaderOpen()?"selection":void 0}))},Yt=function(){return Yt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yt.apply(this,arguments)},zt=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},Jt=function(){return a.createElement(Wt,null)},Wt=(0,p.withSubscriptionCheck)("raw/editorial-tasks",(function(){return a.createElement("div",{className:"nelio-content-pqe-extra__tasks"},a.createElement(Gt,null),a.createElement(Qt,null),a.createElement(Ut,null),a.createElement(Lt.TaskEditor,null))})),Gt=function(){var e=l((function(e){return e(Ue).getTasks()}));return a.createElement("ul",{className:"nelio-content-pqe-extra__task-list"},e.map((function(e){return a.createElement(Xt,{key:"nelio-content-task-".concat(e.id),task:e})})))},Qt=function(){var e=Zt(),t=(0,c.useDispatch)(Ue).openTaskPresetLoader,n=(0,c.useDispatch)(Lt.store).openNewTaskEditor,r=$t().addTask,o=l((function(e){return{canEditSettings:e(p.store).canCurrentUserManagePlugin(),hasTaskPresets:!!e(p.store).getTaskPresets().length,settingsUrl:e(p.store).getAdminUrl("/admin.php?page=nelio-content-settings&subpage=tools--task-presets")}})),i=o.canEditSettings,s=o.hasTaskPresets,d=o.settingsUrl,m=Qe();return a.createElement(a.Fragment,null,a.createElement("div",{className:"nelio-content-pqe-extra__task-list-actions"},s&&a.createElement(u.Button,{size:"small",variant:"secondary",disabled:m,onClick:function(){return t(!0)}},(0,f._x)("Load Tasks","command","nelio-content")),a.createElement(u.Button,{size:"small",variant:"secondary",disabled:m,onClick:function(){return n(Yt(Yt({},(0,h.createTask)()),{dateType:"predefined-offset",dateValue:"0"}),{context:"post",post:e,onSave:r})}},(0,f._x)("Add Task","command","nelio-content"))),!m&&!s&&i&&a.createElement("div",{className:"nelio-content-pqe-extra__configure-task-presets"},a.createElement(u.ExternalLink,{href:d},(0,f._x)("Create reusable task presets now","user","nelio-content"))))},Xt=function(e){var t,n=e.task,r=(0,p.useAuthorName)(n.assigneeId,(0,f._x)("Unknown Assignee","text","nelio-content")),o=(0,h.getHumanDateDue)(void 0,n.dateType,n.dateValue),i=Zt(),s=Qe(),l=$t(),d=l.editTask,m=l.deleteTask,g=(0,c.useDispatch)(Lt.store).openExistingTaskEditor;return a.createElement("li",{className:xt()("nelio-content-pqe-extra__task",(t={"nelio-content-pqe-extra__task--completed":!!n.completed},t["nelio-content-pqe-extra__task--is-".concat(n.color)]=!!n.color,t))},a.createElement("div",{className:xt()("nelio-content-pqe-extra__task-desc",{"nelio-content-pqe-extra__task-desc--completed":!!n.completed})},n.task),a.createElement("div",{className:"nelio-content-pqe-extra__task-details"},"".concat(r," • ").concat(o)),a.createElement("div",{className:"nelio-content-pqe-extra__task-actions"},a.createElement(u.Button,{size:"small",variant:"link",disabled:s,onClick:function(){return g(n,{post:i,context:"post",onSave:d})}},(0,f._x)("Edit","command","nelio-content")),a.createElement(v.DeleteButton,{size:"small",disabled:s,onClick:function(){return m(n)}})))},Zt=function(){return l((function(e){return{id:0,title:e(Ue).getTitle(),type:e(Ue).getPostType()||"post",author:e(Ue).getAuthorId()||0,date:e(Ue).getDateValue(),status:e(Ue).getPostStatus()||e(Ue).getPostStatus()||"draft",viewLink:""}}))},$t=function(){var e=l((function(e){return e(Ue).getTasks()})),t=(0,c.useDispatch)(Ue).setTasks;return{addTask:function(n){return t(zt(zt([],e,!0),[n],!1))},editTask:function(n){return t((0,m.values)((0,m.keyBy)(zt(zt([],e,!0),[n],!1),"id")))},deleteTask:function(n){return t((0,m.without)(e,n))}}},en=function(e){var t=e.showLabels,n=Qe(),r=et(),o=tn(),i=o[0],s=o[1];return a.createElement(a.Fragment,null,r.map((function(e){var r=e.slug,o=e.labels;return a.createElement(v.ItemSelectControl,{key:r,disabled:n,label:t?o.name:void 0,placeholder:o.search_items,kind:"taxonomy",name:r,value:(0,m.map)(i[r],"id"),onChange:s(r)})})))},tn=function(){var e=et().map((function(e){return e.slug})),t=l((function(t){var n=t(Ue).getPostTerms;return(0,m.zipObject)(e,e.map(n))})),n=(0,c.useDispatch)(Ue).setPostTerms,r=(0,c.select)(Je.store).getEntityRecord;return[t,function(e){return function(t){return n(e,(0,m.map)(t,(o=e,function(e){var t,n;return{id:e,name:(null===(t=r("taxonomy",o,e))||void 0===t?void 0:t.name)||"Term ".concat(e),slug:(null===(n=r("taxonomy",o,e))||void 0===n?void 0:n.slug)||"term-".concat(e)}})));var o}}]},nn=function(){var e=sn();return nt()?"none"===e?null:a.createElement(rn,{tab:e}):null},rn=function(e){var t=e.tab,n=on(t),r=an(),o=(0,c.useDispatch)(Ue).setExtraInfoTab,i=Qe();return a.createElement("div",{className:"nelio-content-pqe-extra"},a.createElement("div",{className:"nelio-content-pqe-extra__tabs"},r.map((function(e){var n=e.name,r=e.title;return a.createElement("button",{key:n,title:r,className:xt()("nelio-content-pqe-extra__tab",{"nelio-content-pqe-extra__tab--active":t===n}),disabled:i,onClick:function(){return!i&&o(n)}},r)}))),a.createElement("div",{className:"nelio-content-pqe-extra__content"},a.createElement(n,null)))},on=function(e){switch(e){case"tasks":return Jt;case"future-actions":return(0,v.getPremiumComponent)("pqe/future-actions","raw/future-actions");case"comments":return wt;case"references":return jt;case"series":return(0,v.getPremiumComponent)("pqe/series","raw/series");case"taxonomies":return function(){return a.createElement(en,{showLabels:!0})}}},sn=function(){return l((function(e){return e(Ue).getExtraInfoTab()}))},an=function(){return[$e()&&{name:"taxonomies",title:(0,f._x)("Taxonomies","text","nelio-content")},tt("tasks")&&{name:"tasks",title:(0,f._x)("Tasks","text","nelio-content")},tt("series")&&{name:"series",title:(0,f._x)("Series","text","nelio-content")},tt("future-actions")&&{name:"future-actions",title:(0,f._x)("Future Actions","text","nelio-content")},tt("comments")&&{name:"comments",title:(0,f._x)("Comments","text","nelio-content")},tt("references")&&{name:"references",title:(0,f._x)("References","text","nelio-content")}].filter((function(e){return!!e}))},un=function(){var e=cn(),t=e[0],n=e[1],r=We();return a.createElement("div",{className:"nelio-content-post-quick-editor__title"},a.createElement(u.TextControl,{disabled:r,value:t,onChange:function(e){return n(e)},placeholder:(0,f._x)("Title…","text","nelio-content")}))},cn=function(){return[l((function(e){return e(Ue).getTitle()})),(0,c.useDispatch)(Ue).setTitle]},ln=function(){var e=dn(),t=e[0],n=e[1],r=We(),o=Ge();return a.createElement("div",{className:"nelio-content-post-quick-editor__time"},a.createElement(v.TimeInput,{disabled:r||o,value:t,onChange:function(e){return n(null!=e?e:"")}}))},dn=function(){return[l((function(e){return e(Ue).getTimeValue()})),(0,c.useDispatch)(Ue).setTimeValue]},fn=function(e){var t=e.contexts,n=mn(),r=n[0],o=n[1],i=pn(t),s=We();return!Xe()||i.length<2?null:a.createElement("div",{className:"nelio-content-post-quick-editor__type"},a.createElement(u.SelectControl,{disabled:s,value:r,onChange:o,options:i}))},mn=function(){return[l((function(e){return e(Ue).getPostType()})),(0,c.useDispatch)(Ue).setPostType]},pn=function(e){return l((function(t){var n=e.flatMap((function(e){return t(p.store).getPostTypes(e,"create")}));return(0,m.uniq)(n).map((function(e){var t=e.name;return{label:e.labels.singular,value:t}}))}))},vn=function(){var e=hn(),t=e[0],n=e[1],r=gn(),o=We(),i=yn();return a.createElement("div",{className:"nelio-content-post-quick-editor__status"},a.createElement(u.SelectControl,{disabled:o||i,value:t,onChange:n,options:r}))},hn=function(){var e=(0,m.map)(gn(),"value"),t=l((function(e){return e(Ue).getPostStatus()})),n=(0,c.useDispatch)(Ue).setPostStatus;return(0,a.useEffect)((function(){(0,h.hasHead)(e)&&(t&&e.includes(t)||n(e[0]))}),[e.join(","),t]),[t,n]},gn=function(){var e,t=yn(),n=l((function(e){var t=e(p.store),n=t.canCurrentUserPublishPost,r=t.getPost,o=t.getPostStatuses,i=e(Ue),s=i.getId,a=(0,i.getPostType)(),u=(0,m.filter)(a?o(a):[],(function(e){return"nelio-content-unscheduled"!==e.slug})),c=r(s());return(0,m.map)(u,(function(e){var t=e.slug,r=e.name,o=e.available,i=e.flags;return{value:t,label:r,disabled:!o||(void 0===i?[]:i).includes("disabled-in-editor")||"future"===t&&!n(c)}}))}));return t?[null!==(e=(0,m.find)(n,{value:h.PUBLISHED}))&&void 0!==e?e:{value:h.PUBLISHED,label:(0,f._x)("Published","text","nelio-content"),disabled:!0}]:(0,m.filter)(n,(function(e){var t=e.value;return"publish"!==t&&"trash"!==t}))},yn=function(){return l((function(e){var t=(0,e(p.store).getPost)((0,e(Ue).getId)());return"publish"===(null==t?void 0:t.status)}))};function En(e,t){(0,we.addFilter)("nelio-content_post-quick-editor_onSavePremiumItems","save".concat((0,h.pascalCase)(e),"s"),(function(n,r,o,i){return e===r?t(o,i):n}))}var Tn=function(e){var t=e.className,n=void 0===t?"":t,r=e.context,o=kn(),i=Sn(),s=On(),c=a.createElement(bn,null),l=(0,m.isArray)(r)?r:[r];return o?i?a.createElement(u.Modal,{className:"nelio-content-post-quick-editor ".concat(n),title:(0,f._x)("Loading…","text","nelio-content"),isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:function(){}},a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.createElement(u.Spinner,null))):a.createElement(u.Modal,{className:"nelio-content-post-quick-editor ".concat(n),title:c,isDismissible:!1,shouldCloseOnEsc:!1,shouldCloseOnClickOutside:!1,onRequestClose:function(){}},a.createElement("div",{className:"nelio-content-post-quick-editor__title-type-and-status"},a.createElement(un,null),a.createElement(fn,{contexts:l}),a.createElement(vn,null)),a.createElement("div",{className:"nelio-content-post-quick-editor__author-and-datetime"},a.createElement(ht,null),a.createElement(Et,null),a.createElement(ln,null)),!!s&&a.createElement("p",{className:"nelio-content-post-quick-editor__rewritten-message"},(0,f._x)("This is a rewritten copy of a published post.","text","nelio-content")),a.createElement(nn,null),a.createElement(He,null),a.createElement(ot,null),a.createElement(pt,null)):null},bn=function(){var e=xn();return a.createElement("div",{className:"nelio-content-post-quick-editor__header"},a.createElement("div",{className:"nelio-content-post-quick-editor__header-text"},e),a.createElement("div",{className:"nelio-content-post-quick-editor__header-help"},a.createElement(v.ContextualHelp,{context:"post-quick-editor",walkthrough:Fe,autostart:!0})))},kn=function(){return l((function(e){return e(Ue).isVisible()}))},xn=function(){return l((function(e){e(p.store),e(Ue);var t=e(Ue).isNewPost(),n=e(Ue).getPostType(),r=n&&e(p.store).getPostType(n);return r?t?r.labels.new:r.labels.edit:t?(0,f._x)("New post","text","nelio-content"):(0,f._x)("Edit post","text","nelio-content")}))},Sn=function(){var e=l((function(e){return e(Ue).isNewPost()})),t=wn(),n=In(),r=Pn();return!e&&(t||n||r)},Pn=function(){var e=(0,c.useDispatch)(Ue).setReferences,t=l((function(e){var t=e(Ue).getId();return{references:e(p.store).getSuggestedReferences(t),isLoading:!e(p.store).hasFinishedResolution("getSuggestedReferences",[t])&&!e(p.store).hasResolutionFailed("getSuggestedReferences",[t]),isVisible:e(Ue).isVisible()}})),n=t.references,r=t.isLoading,o=t.isVisible;return(0,a.useEffect)((function(){o&&!r&&e(n)}),[o,e,JSON.stringify(n),r]),r},wn=function(){var e=(0,c.useDispatch)(Ue).setTasks,t=l((function(e){var t=e(Ue).getId();return{tasks:e(p.store).getTasksRelatedToPost(t),isLoading:!e(p.store).hasFinishedResolution("getTasksRelatedToPost",[t])&&!e(p.store).hasResolutionFailed("getTasksRelatedToPost",[t]),isVisible:e(Ue).isVisible()}})),n=t.tasks,r=t.isLoading,o=t.isVisible;return(0,a.useEffect)((function(){o&&!r&&e(n)}),[o,e,JSON.stringify(n),r]),r},In=function(){var e=(0,c.useDispatch)(Ue).setPremiumItems,t=l((function(e){var t=e(Ue).getId();return{premiumItems:e(p.store).getAllPremiumItemsRelatedToPost(t),isLoading:!e(p.store).hasFinishedResolution("getAllPremiumItemsRelatedToPost",[t])&&!e(p.store).hasResolutionFailed("getAllPremiumItemsRelatedToPost",[t]),isVisible:e(Ue).isVisible()}})),n=t.premiumItems,r=t.isLoading,o=t.isVisible;return(0,a.useEffect)((function(){o&&!r&&(0,m.toPairs)(n).map((function(e){var t=e[0],n=e[1];return n?[t,n]:void 0})).filter(h.isDefined).forEach((function(t){var n=t[0],r=t[1];return e(n,r)}))}),[o,e,JSON.stringify(n),r]),r},On=function(){return l((function(e){return e(Ue).isRewrite()}))}},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,i(n)))}return e}function i(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,n));return t}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,n,o,i)=>{if(!n){var s=1/0;for(l=0;l<e.length;l++){n=e[l][0],o=e[l][1],i=e[l][2];for(var a=!0,u=0;u<n.length;u++)(!1&i||s>=i)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(a=!1,i<s&&(s=i));if(a){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={9303:0,7760:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,s=n[0],a=n[1],u=n[2],c=0;if(s.some((t=>0!==e[t]))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(u)var l=u(r)}for(t&&t(n);c<s.length;c++)i=s[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(l)},n=self.webpackChunkNelioContent=self.webpackChunkNelioContent||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var o=r.O(void 0,[7760],(()=>r(6615)));o=r.O(o);var i=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var s in o)i[s]=o[s];o.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();