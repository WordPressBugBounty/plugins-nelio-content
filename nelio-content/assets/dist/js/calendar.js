(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{calendar:()=>s});var n={};e.r(n),e.d(n,{areAutomaticMessagesVisible:()=>Pe,areFailedMessagesVisible:()=>Ae,areSocialMessagesCollapsedInDay:()=>Se,areTasksVisible:()=>Ee,areThereActiveExternalEventFilters:()=>de,areThereActiveFilters:()=>oe,areThereActivePostFilters:()=>ue,areThereActiveSocialFilters:()=>ce,areThereActiveTaskFilters:()=>le,areThereUnscheduledPostsToLoad:()=>j,formatCalendarTime:()=>ze,getActiveTabInFilterPane:()=>ie,getAdminSidebarWidth:()=>ut,getCalendarMode:()=>et,getCalendarWidth:()=>ot,getDisabledExternalCalendars:()=>he,getDisabledInternalEventTypes:()=>pe,getDisabledPostTypes:()=>ye,getDisabledSocialProfilesByNetwork:()=>ve,getDisabledStatuses:()=>ge,getDraggingItem:()=>je,getEditingExternalCalendarName:()=>$,getEditingExternalCalendarUrl:()=>Z,getExternalCalendar:()=>z,getExternalCalendarEditorMode:()=>q,getExternalCalendars:()=>X,getFilters:()=>se,getFirstDay:()=>nt,getFocusDay:()=>tt,getHoverItem:()=>Ve,getIcsLink:()=>$e,getLastDay:()=>rt,getLastLoadedPageInUnscheduled:()=>H,getLoaderTimeout:()=>Le,getMinimumRowHeight:()=>it,getNumberOfNonCollapsableMessages:()=>st,getNumberOfVisibleDays:()=>at,getPostAuthorFilter:()=>me,getPremiumFilter:()=>Te,getRecurringAction:()=>x,getSettings:()=>We,getSidePane:()=>Je,getTaskAssigneeFilter:()=>be,getTaskIdInTaskViewer:()=>M,getUnscheduledPostsSearchQuery:()=>G,getUnscheduledPostsSearchTimeout:()=>F,isAddingAnExternalCalendar:()=>J,isCalendarSynching:()=>Re,isDeletingAnExternalCalendar:()=>te,isDeletingExternalCalendar:()=>ne,isDragging:()=>Fe,isErrorPaneOpen:()=>qe,isExportDialogOpen:()=>C,isFilterPaneOpen:()=>Ke,isHighlighted:()=>Ge,isIcsEnabled:()=>Ze,isItemVisible:()=>fe,isLoadingUnscheduledPosts:()=>B,isManagingExternalCalendars:()=>K,isPeriodReady:()=>Ne,isReusableMessageViewOpen:()=>Qe,isSavingAnExternalCalendar:()=>ee,isSynching:()=>ke,isTaskViewerDialogOpen:()=>U,isUnscheduledViewOpen:()=>Ye,useEditorialCalendarOnly:()=>Xe});var r={};e.r(r),e.d(r,{_setCalendarMode:()=>qt,clearFilters:()=>_t,closeExternalCalendarEditor:()=>Tt,closeRecurringDialog:()=>pt,collapseSocialMessagesInDay:()=>Vt,dragEnd:()=>Wt,dragStart:()=>Bt,initCalendarSettings:()=>Qt,loadPreviousFilters:()=>jt,manageExternalCalendars:()=>mt,markAsDeleting:()=>wt,markAsSaving:()=>Pt,markAsUpdated:()=>en,markAsUpdating:()=>Jt,markPeriodAsLoaded:()=>$t,markPeriodAsLoading:()=>Zt,openExportDialog:()=>ct,openExternalCalendarEditor:()=>bt,openTaskViewerDialog:()=>lt,receiveExternalCalendars:()=>Dt,removeExternalCalendar:()=>Et,requestRecurringRescheduleMode:()=>dt,requestRecurringTrashMode:()=>ft,setActiveTabInFilterPane:()=>It,setCalendarDimensions:()=>zt,setDisabledExternalCalendars:()=>Rt,setDisabledInternalEventTypes:()=>Ot,setDisabledPostTypeTerms:()=>Lt,setDisabledPostTypes:()=>Nt,setDisabledSocialProfilesInNetwork:()=>Ct,setDisabledStatuses:()=>kt,setEditingExternalCalendarName:()=>At,setEditingExternalCalendarUrl:()=>St,setFocusDay:()=>Xt,setHoverItem:()=>Yt,setIsLoadingUnscheduledPosts:()=>yt,setLoaderTimeout:()=>tn,setPostAuthorFilter:()=>Mt,setPremiumFilter:()=>Ht,setTaskAssigneeFilter:()=>Ut,setUnscheduledPostsQuery:()=>gt,setUnscheduledPostsSearchTimeout:()=>vt,showAutomaticMessages:()=>Ft,showFailedMessages:()=>Gt,toggleSidePane:()=>Kt,toggleTasksVisibility:()=>xt,updateUnscheduledPostsPagination:()=>ht});var a={};e.r(a),e.d(a,{addExternalCalendar:()=>er,deleteExternalCalendar:()=>nr,deleteSocialMessage:()=>kn,deleteTask:()=>bn,loadItemsIn:()=>fr,loadItemsNow:()=>dr,loadUnscheduledPosts:()=>yn,nextPeriod:()=>ir,previousPeriod:()=>or,reschedulePost:()=>Bn,rescheduleSocialMessage:()=>Nn,rescheduleTask:()=>En,saveExternalCalendar:()=>tr,setCalendarMode:()=>ur,showToday:()=>sr,toggleTaskCompletion:()=>Tn,trashPost:()=>Yn,unschedulePost:()=>Wn});var s={};e.r(s),e.d(s,{store:()=>mr,useCanCreateMessages:()=>Wr,useCanCreatePosts:()=>Br,useCanCreateTasks:()=>Yr,useCollapsableItemCount:()=>Ur,useDayCollapser:()=>xr,useDayType:()=>Mr,useDefaultTime:()=>Cr,useDraggingItem:()=>Nr,useFirstDay:()=>$r,useHoverItem:()=>kr,useItem:()=>Lr,useItemDragTriggers:()=>Fr,useItemDropper:()=>zr,useItemHoverListeners:()=>Gr,useMessageCreator:()=>Kr,useMinRowHeight:()=>Zr,useNewPostLabel:()=>Hr,useNonCollapsedDayItems:()=>Vr,useNumberOfVisibleDays:()=>Jr,usePostCreator:()=>Qr,usePostStatus:()=>jr,useSidePane:()=>ea,useTaskCreator:()=>qr,useToday:()=>Xr});const i=window.wp.data;function o(e,t){return(0,i.useSelect)(e,t)}function u(e){return(0,i.resolveSelect)(e)}var c={isExportDialogOpen:!1,recurringAction:void 0,taskIdInTaskViewer:void 0},l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)},d={unscheduledPosts:{byQueryPagination:{},defaultPagination:{lastPageLoaded:0,maxPages:1,isLoading:!1},query:"",searchTimeout:0}},f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},f.apply(this,arguments)},p={lastPageLoaded:0,maxPages:1,isLoading:!1};const h=window.lodash;var y={isManaging:!1,byUrl:{},deleting:[],editor:void 0},g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},g.apply(this,arguments)},v=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},m={activeTab:"post",areAllMessagesVisibleInDay:{},disabledInternalEventTypes:[],disabledExternalCalendars:[],disabledPostTypes:[],disabledPostTypeTerms:{},disabledPostAuthors:[],disabledSocialProfilesByNetwork:{},disabledStatuses:[],areTasksVisible:!0,taskAssignee:void 0,postAuthor:void 0,areFailedMessagesVisible:!0,areAutomaticMessagesVisible:!0,premium:{}},E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},E.apply(this,arguments)},b={drag:void 0,hover:void 0},T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},T.apply(this,arguments)},S={adminSidebarWidth:0,calendarMode:"two-weeks",calendarWidth:0,focusDay:"",icsLinks:void 0,minRowHeight:0,numberOfNonCollapsableMessages:0,sidePane:"unscheduled-posts",useEditorialCalendarOnly:!1,calendarTimeFormat:"H:ia",simplifyCalendarTime:!0},A=function(){return A=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},A.apply(this,arguments)};const P=window.moment;var w=e.n(P);const D=window.NelioContent.date;var I={loadedDays:{},loaderTimeout:0,updating:[]},_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},_.apply(this,arguments)},O=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};function R(e,t){return(0,h.find)(e,{type:t.type,id:t.id})?e:O(O([],e,!0),[t],!1)}function L(e,t){var n=(0,h.find)(e,(function(e){return e.type===t.type&&e.id===t.id}));return n?(0,h.without)(e,n):e}function N(e,t,n){var r,a,s=w()(t);do{a=(0,D.date)("Y-m-d",s),e=_(_({},e),((r={})[a]=!0,r)),s.add(1,"day")}while(a<=n);return e}const k=(0,i.combineReducers)({dialogs:function(e,t){var n;return void 0===e&&(e=c),null!==(n=function(e,t){switch(t.type){case"OPEN_EXPORT_DIALOG":return l(l({},e),{isExportDialogOpen:t.isOpen});case"OPEN_TASK_VIEWER_DIALOG":return l(l({},e),{taskIdInTaskViewer:t.taskId});case"REQUEST_RECURRING_RESCHEDULE_MODE":return l(l({},e),{recurringAction:{type:"reschedule",props:t.props}});case"REQUEST_RECURRING_TRASH_MODE":return l(l({},e),{recurringAction:{type:"trash",props:t.props}});case"CLOSE_RECURRING_DIALOG":return l(l({},e),{recurringAction:void 0})}}(e,t))&&void 0!==n?n:e},entities:function(e,t){var n;return void 0===e&&(e=d),null!==(n=function(e,t){var n,r;switch(t.type){case"SET_UNSCHEDULED_POSTS_QUERY":return f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{query:t.query})});case"SET_UNSCHEDULED_POSTS_SEARCH_TIMEOUT":return f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{searchTimeout:t.timeout})});case"UPDATE_UNSCHEDULED_POSTS_PAGINATION":return t.query?f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{byQueryPagination:f(f({},e.unscheduledPosts.byQueryPagination),(n={},n[t.query]=f(f(f({},p),e.unscheduledPosts.byQueryPagination[t.query]),{lastPageLoaded:t.lastPageLoaded,maxPages:t.maxPages}),n))})}):f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{defaultPagination:f(f({},e.unscheduledPosts.defaultPagination),{lastPageLoaded:t.lastPageLoaded,maxPages:t.maxPages})})});case"IS_LOADING_UNSCHEDULED_POSTS":return t.query?f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{byQueryPagination:f(f({},e.unscheduledPosts.byQueryPagination),(r={},r[t.query]=f(f(f({},p),e.unscheduledPosts.byQueryPagination[t.query]),{isLoading:t.isLoading}),r))})}):f(f({},e),{unscheduledPosts:f(f({},e.unscheduledPosts),{defaultPagination:f(f({},e.unscheduledPosts.defaultPagination),{isLoading:t.isLoading})})})}}(e,t))&&void 0!==n?n:e},externalCalendars:function(e,t){var n;return void 0===e&&(e=y),null!==(n=function(e,t){switch(t.type){case"MANAGE_EXTERNAL_CALENDARS":return g(g({},e),{isManaging:t.isActive});case"RECEIVE_EXTERNAL_CALENDARS":return g(g({},e),{byUrl:g(g({},e.byUrl),(0,h.keyBy)(t.externalCalendars,"url"))});case"REMOVE_EXTERNAL_CALENDAR":return g(g({},e),{byUrl:(0,h.omit)(e.byUrl,t.url)});case"OPEN_EXTERNAL_EDITOR_CALENDAR":return g(g({},e),{editor:{isNew:!t.url,isSaving:!1,url:t.url,name:t.name}});case"CLOSE_EXTERNAL_CALENDAR_EDITOR":return g(g({},e),{editor:void 0});case"SET_EDITING_EXTERNAL_CALENDAR_URL":return e.editor&&e.editor.isNew?g(g({},e),{editor:g(g({},e.editor),{url:t.url})}):e;case"SET_EDITING_EXTERNAL_CALENDAR_NAME":return e.editor?g(g({},e),{editor:g(g({},e.editor),{name:t.name})}):e;case"MARK_AS_SAVING":return e.editor?g(g({},e),{editor:g(g({},e.editor),{isSaving:t.isSaving})}):e;case"MARK_AS_DELETING":return g(g({},e),{deleting:t.isDeleting?(0,h.uniq)(v(v([],e.deleting,!0),[t.url],!1)):(0,h.without)(e.deleting,t.url)})}}(e,t))&&void 0!==n?n:e},filters:function(e,t){var n;return void 0===e&&(e=m),null!==(n=function(e,t){var n,r,a,s,i;switch(t.type){case"CLEAR_FILTERS":return m;case"SET_ACTIVE_TAB_IN_FILTER_PANE":return E(E({},e),{activeTab:t.tabName});case"SET_DISABLED_POST_TYPE_TERMS":return E(E({},e),{disabledPostTypeTerms:E(E({},e.disabledPostTypeTerms),(n={},n[t.postType]=E(E({},e.disabledPostTypeTerms[t.postType]),(r={},r[t.taxonomy]=t.terms,r)),n))});case"SET_DISABLED_STATUSES":return E(E({},e),{disabledStatuses:t.statuses});case"SET_DISABLED_INTERNAL_EVENT_TYPES":return E(E({},e),{disabledInternalEventTypes:t.internalEventTypes});case"SET_DISABLED_EXTERNAL_CALENDARS":return E(E({},e),{disabledExternalCalendars:t.externalCalendars});case"SET_DISABLED_POST_TYPES":return E(E({},e),{disabledPostTypes:t.postTypes});case"SET_POST_AUTHOR_FILTER":return E(E({},e),{postAuthor:t.authorId});case"SET_DISABLED_PROFILES_IN_NETWORK":return E(E({},e),{disabledSocialProfilesByNetwork:E(E({},e.disabledSocialProfilesByNetwork),(a={},a[t.network]=t.disabledProfiles,a))});case"TOGGLE_TASKS_VISIBILITY":return E(E({},e),{areTasksVisible:!e.areTasksVisible});case"SET_TASK_ASSIGNEE_FILTER":return E(E({},e),{taskAssignee:t.assigneeId});case"COLLAPSE_MESSAGES_IN_DAY":return E(E({},e),{areAllMessagesVisibleInDay:E(E({},e.areAllMessagesVisibleInDay),(s={},s[t.day]=!t.areMessagesCollapsed,s))});case"SHOW_FAILED_MESSAGES":return E(E({},e),{areFailedMessagesVisible:!!t.areFailedMessagesVisible});case"SHOW_AUTOMATIC_MESSAGES":return E(E({},e),{areAutomaticMessagesVisible:!!t.areAutomaticMessagesVisible});case"LOAD_PREVIOUS_FILTERS":return E(E({},e),t.filters);case"SET_PREMIUM_FILTER":return E(E({},e),{premium:E(E({},e.premium),(i={},i[t.filterName]=t.value,i))})}}(e,t))&&void 0!==n?n:e},interaction:function(e,t){var n;return void 0===e&&(e=b),null!==(n=function(e,t){switch(t.type){case"DRAG_START":return T(T({},e),{drag:t.item,hover:void 0});case"DRAG_END":return T(T({},e),{drag:void 0});case"HOVER_ITEM":return T(T({},e),{hover:t.item});case"HOVER_END":return T(T({},e),{hover:void 0})}}(e,t))&&void 0!==n?n:e},settings:function(e,t){var n;return void 0===e&&(e=S),null!==(n=function(e,t){switch(t.type){case"SET_CALENDAR_DIMENSIONS":return A(A({},e),{adminSidebarWidth:t.adminSidebarWidth,calendarWidth:t.calendarWidth,minRowHeight:t.minRowHeight});case"TOGGLE_SIDE_PANE":return A(A({},e),{sidePane:e.sidePane===t.pane?"none":t.pane});case"SET_CALENDAR_MODE":return A(A({},e),{calendarMode:t.mode||"two-weeks"});case"SET_FOCUS_DAY":return A(A({},e),{focusDay:t.focusDay});case"INIT_CALENDAR_SETTINGS":return A(A(A({},S),t.settings),{sidePane:t.settings.sidePane||"none"})}}(e,t))&&void 0!==n?n:e},status:function(e,t){var n;return void 0===e&&(e=I),null!==(n=function(e,t){switch(t.type){case"MARK_AS_UPDATING":return _(_({},e),{updating:R(e.updating,t.item)});case"MARK_AS_UPDATED":return _(_({},e),{updating:L(e.updating,t.item)});case"MARK_PERIOD_AS_LOADING":return _(_({},e),{updating:R(e.updating,t.period)});case"MARK_PERIOD_AS_LOADED":return _(_({},e),{loadedDays:N(e.loadedDays,t.period.firstDay,t.period.lastDay),updating:L(e.updating,t.period)});case"SET_LOADER_TIMEOUT":return _(_({},e),{loaderTimeout:t.timeout})}}(e,t))&&void 0!==n?n:e}});function C(e){return e.dialogs.isExportDialogOpen}function M(e){return e.dialogs.taskIdInTaskViewer||void 0}function x(e){return e.dialogs.recurringAction}function U(e){return!!e.dialogs.taskIdInTaskViewer}var V=function(){return V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},V.apply(this,arguments)};function G(e){return e.entities.unscheduledPosts.query||""}function F(e){return e.entities.unscheduledPosts.searchTimeout}function j(e,t){var n=Y(e,"");if(n.lastPageLoaded>=n.maxPages)return!1;var r=Y(e,t);return r.lastPageLoaded<r.maxPages}function H(e,t){return Y(e,t).lastPageLoaded}function B(e,t){return!!j(e,"")&&Y(e,t).isLoading}var W={lastPageLoaded:0,maxPages:1,isLoading:!1};function Y(e,t){return(t=(0,h.trim)(t))?V(V({},W),e.entities.unscheduledPosts.byQueryPagination[t]):e.entities.unscheduledPosts.defaultPagination}const Q=window.NelioContent.utils;function K(e){return e.externalCalendars.isManaging}function q(e){return e.externalCalendars.editor?e.externalCalendars.editor.isNew?"create":"edit":"none"}function X(e){return(0,h.values)(e.externalCalendars.byUrl)}function z(e,t){return e.externalCalendars.byUrl[t]}function Z(e){var t,n=e.externalCalendars.editor;return null!==(t=null==n?void 0:n.url)&&void 0!==t?t:""}function $(e){var t,n=e.externalCalendars.editor;return null!==(t=null==n?void 0:n.name)&&void 0!==t?t:""}function J(e){var t=e.externalCalendars.editor;return!!(null==t?void 0:t.isNew)&&!!(null==t?void 0:t.isSaving)}function ee(e){var t=e.externalCalendars.editor;return!!(null==t?void 0:t.isSaving)}function te(e){return!(0,Q.isEmpty)(e.externalCalendars.deleting)}function ne(e,t){return e.externalCalendars.deleting.includes(t)}const re=window.NelioContent.data,ae=window.NelioContent.premiumHooksForPages;function se(e){return e.filters}function ie(e){return e.filters.activeTab}function oe(e){return ue(e)||ce(e)||le(e)||de(e)}function ue(e){return!(0,Q.isEmpty)(ye(e))||!(0,Q.isEmpty)(ge(e))||!(0,Q.isEmpty)(me(e))}function ce(e){var t=ve(e),n=(0,h.flatten)((0,h.values)(t)),r=(0,i.select)(re.store).getSocialProfile;return!(0,Q.isEmpty)((0,h.filter)((0,h.map)(n,r)))}function le(e){return!Ee(e)||!!be(e)}function de(e){var t=(0,h.keys)(e.externalCalendars.byUrl);return!!he(e).filter((function(e){return t.includes(e)})).length}function fe(e,t,n){switch(t){case"post":return we(n)&&function(e,t){var n=me(e);return(!n||n===t.author)&&(!ye(e).includes(t.type)&&!ge(e).includes(t.status))}(e,n);case"social":return De(n)&&function(e,t){return!("error"!==t.status||!Ae(e))||!(t.auto&&!Pe(e))&&!(ve(e)[t.network]||[]).includes(t.profileId)}(e,n);case"task":return Ie(n)&&function(e,t){if(!Ee(e))return!1;var n=be(e);return!n||n===t.assigneeId}(e,n);case"external-event":return _e(n)&&function(e,t){return!he(e).includes(t.calendar)}(e,n);case"internal-event":return Oe(n)&&function(e,t){return!pe(e).includes(t.type)}(e,n);default:return(0,ae.isPremiumItemVisible)(t,n)}}function pe(e){return e.filters.disabledInternalEventTypes}function he(e){return e.filters.disabledExternalCalendars}function ye(e){return e.filters.disabledPostTypes}function ge(e){return e.filters.disabledStatuses}function ve(e){return e.filters.disabledSocialProfilesByNetwork}function me(e){return e.filters.postAuthor||void 0}function Ee(e){return e.filters.areTasksVisible}function be(e){return e.filters.taskAssignee||void 0}function Te(e,t){if("_"!==t)return e.filters.premium[t]}function Se(e,t){return!e.filters.areAllMessagesVisibleInDay[t]}function Ae(e){return e.filters.areFailedMessagesVisible}function Pe(e){return e.filters.areAutomaticMessagesVisible}var we=function(e){return"number"==typeof e.id},De=function(e){return!we(e)&&"network"in e},Ie=function(e){return!we(e)&&"task"in e},_e=function(e){return!we(e)&&"calendar"in e},Oe=function(e){return!we(e)};function Re(e){return!(0,Q.isEmpty)(e.status.updating)}function Le(e){return e.status.loaderTimeout||0}function Ne(e,t,n){var r,a=w()(t);do{if(r=(0,D.date)("Y-m-d",a),!e.status.loadedDays[r])return!1;a.add(1,"day")}while(r<=n);return!0}function ke(e,t,n){if("post"===t)return!!(0,h.find)(e.status.updating,{relatedPost:n});if((0,h.find)(e.status.updating,{type:t,id:n}))return!0;var r=(0,(0,i.select)(re.store).getItem)(t,n);return Ce(e,r)||xe(e,r)}var Ce=function(e,t){return Me(t)&&!!(0,h.find)(e.status.updating,{type:"post",id:t.postId})},Me=function(e){return!!e&&"object"==typeof e&&!!e.postId},xe=function(e,t){return Ue(t)&&!!(0,h.find)(e.status.updating,{type:"social",recurrenceGroup:t.recurrenceGroup})},Ue=function(e){return!!e&&"object"==typeof e&&!!e.recurrenceGroup};function Ve(e){return e.interaction.hover}function Ge(e,t,n){var r=e.interaction.hover;if(!r)return!1;if("external-event"===r.type)return!1;if("internal-event"===r.type)return!1;if(ke(e,t,n))return!1;if(r.type===t&&r.id===n)return!0;var a=(0,(0,i.select)(re.store).getItem)(t,n);return!!a&&("post"===t?r.relatedPostId===a.id:!(!He(a)||a.postId!==r.relatedPostId)||!(!Be(a)||!Be(r)||a.recurrenceGroup!==r.recurrenceGroup))}function Fe(e,t,n){return!!e.interaction.drag&&e.interaction.drag.type===t&&e.interaction.drag.id===n}function je(e){return e.interaction.drag}var He=function(e){return!!e&&"object"==typeof e&&!!e.postId},Be=function(e){return!!e&&"object"==typeof e&&!!e.recurrenceGroup};function We(e){return e.settings}function Ye(e){return"unscheduled-posts"===e.settings.sidePane}function Qe(e){return"reusable-messages"===e.settings.sidePane}function Ke(e){return"filters"===e.settings.sidePane}function qe(e){return"errors"===e.settings.sidePane}function Xe(e){return e.settings.useEditorialCalendarOnly}function ze(e,t){var n=(0,D.dateI18n)(e.settings.calendarTimeFormat,t);return e.settings.simplifyCalendarTime?n.replace(":00","").replace(/m$/i,"").replace(/\s/g,""):n}function Ze(e){return!!e.settings.icsLinks}function $e(e,t){var n;return null===(n=e.settings.icsLinks)||void 0===n?void 0:n[t]}function Je(e){return e.settings.sidePane}function et(e){return e.settings.calendarMode}function tt(e){return e.settings.focusDay}function nt(e,t){var n=tt(e),r=et(e);if("agenda"===r)return n;var a=w()((0,D.wpifyDateTime)("c",n,"12:00"));return"month"===r&&a.date(1),a.day()===t?(0,D.date)("Y-m-d",a):(0,D.date)("Y-m-d",a.isoWeekday(t))}function rt(e,t){var n=nt(e,t);if(!n)return"";var r=at(e);return(0,D.date)("Y-m-d",w()(n).add(r,"days"))}function at(e){switch(et(e)){case"agenda":return 4;case"week":return 7;case"month":return 42;default:return 14}}function st(e){return e.settings.numberOfNonCollapsableMessages}function it(e){return e.settings.minRowHeight}function ot(e){return e.settings.calendarWidth}function ut(e){return e.settings.adminSidebarWidth}function ct(e){return void 0===e&&(e=!0),{type:"OPEN_EXPORT_DIALOG",isOpen:e}}function lt(e){return{type:"OPEN_TASK_VIEWER_DIALOG",taskId:e}}function dt(e){return{type:"REQUEST_RECURRING_RESCHEDULE_MODE",props:e}}function ft(e){return{type:"REQUEST_RECURRING_TRASH_MODE",props:e}}function pt(){return{type:"CLOSE_RECURRING_DIALOG"}}function ht(e,t,n){return{type:"UPDATE_UNSCHEDULED_POSTS_PAGINATION",query:e,lastPageLoaded:t,maxPages:n}}function yt(e,t){return{type:"IS_LOADING_UNSCHEDULED_POSTS",query:e,isLoading:t}}function gt(e){return{type:"SET_UNSCHEDULED_POSTS_QUERY",query:e}}function vt(e){return{type:"SET_UNSCHEDULED_POSTS_SEARCH_TIMEOUT",timeout:e}}function mt(e){return{type:"MANAGE_EXTERNAL_CALENDARS",isActive:e}}function Et(e){return{type:"REMOVE_EXTERNAL_CALENDAR",url:e}}function bt(e){var t,n;return{type:"OPEN_EXTERNAL_EDITOR_CALENDAR",url:null!==(t=null==e?void 0:e.url)&&void 0!==t?t:"",name:null!==(n=null==e?void 0:e.name)&&void 0!==n?n:""}}function Tt(){return{type:"CLOSE_EXTERNAL_CALENDAR_EDITOR"}}function St(e){return{type:"SET_EDITING_EXTERNAL_CALENDAR_URL",url:e}}function At(e){return{type:"SET_EDITING_EXTERNAL_CALENDAR_NAME",name:e}}function Pt(e){return{type:"MARK_AS_SAVING",isSaving:e}}function wt(e,t){return{type:"MARK_AS_DELETING",url:e,isDeleting:t}}function Dt(e){return{type:"RECEIVE_EXTERNAL_CALENDARS",externalCalendars:(0,h.castArray)(e)}}function It(e){return{type:"SET_ACTIVE_TAB_IN_FILTER_PANE",tabName:e}}function _t(){return{type:"CLEAR_FILTERS"}}function Ot(e){return{type:"SET_DISABLED_INTERNAL_EVENT_TYPES",internalEventTypes:e}}function Rt(e){return{type:"SET_DISABLED_EXTERNAL_CALENDARS",externalCalendars:e}}function Lt(e,t,n){return{type:"SET_DISABLED_POST_TYPE_TERMS",postType:e,taxonomy:t,terms:n}}function Nt(e){return{type:"SET_DISABLED_POST_TYPES",postTypes:e}}function kt(e){return{type:"SET_DISABLED_STATUSES",statuses:e}}function Ct(e,t){return{type:"SET_DISABLED_PROFILES_IN_NETWORK",network:e,disabledProfiles:t}}function Mt(e){return{type:"SET_POST_AUTHOR_FILTER",authorId:e}}function xt(){return{type:"TOGGLE_TASKS_VISIBILITY"}}function Ut(e){return{type:"SET_TASK_ASSIGNEE_FILTER",assigneeId:e}}function Vt(e,t){return{type:"COLLAPSE_MESSAGES_IN_DAY",day:t,areMessagesCollapsed:e}}function Gt(e){return{type:"SHOW_FAILED_MESSAGES",areFailedMessagesVisible:e}}function Ft(e){return{type:"SHOW_AUTOMATIC_MESSAGES",areAutomaticMessagesVisible:e}}function jt(e){if("object"==typeof e)return{type:"LOAD_PREVIOUS_FILTERS",filters:e}}function Ht(e,t){return{type:"SET_PREMIUM_FILTER",filterName:e,value:t}}function Bt(e){return{type:"DRAG_START",item:e}}function Wt(){return{type:"DRAG_END"}}function Yt(e){return e?{type:"HOVER_ITEM",item:e}:{type:"HOVER_END"}}function Qt(e){return{type:"INIT_CALENDAR_SETTINGS",settings:e}}function Kt(e){return{type:"TOGGLE_SIDE_PANE",pane:e}}function qt(e){return{type:"SET_CALENDAR_MODE",mode:e}}function Xt(e){return{type:"SET_FOCUS_DAY",focusDay:e}}function zt(e){return{type:"SET_CALENDAR_DIMENSIONS",adminSidebarWidth:e.adminSidebarWidth,calendarWidth:e.calendarWidth,minRowHeight:e.minRowHeight}}function Zt(e,t){return{type:"MARK_PERIOD_AS_LOADING",period:{type:"period",id:"".concat(e,"::").concat(t),firstDay:e,lastDay:t}}}function $t(e,t){return{type:"MARK_PERIOD_AS_LOADED",period:{type:"period",id:"".concat(e,"::").concat(t),firstDay:e,lastDay:t}}}function Jt(e){return{type:"MARK_AS_UPDATING",item:e}}function en(e){return{type:"MARK_AS_UPDATED",item:e}}function tn(e){return{type:"SET_LOADER_TIMEOUT",timeout:e}}const nn=window.wp.apiFetch,rn=e.n(nn)(),an=window.wp.url,sn=window.wp.notices;var on=function(){return on=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},on.apply(this,arguments)},un=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}u((r=r.apply(e,t||[])).next())}))},cn=function(e,t){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function ln(e,t){return un(this,void 0,Promise,(function(){return cn(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(sn.store).createErrorNotice((0,Q.getErrorMessage)(e,t))];case 1:return n.sent(),[2]}}))}))}function dn(e,t){var n,r=fn({dateType:t.dateType,dateValue:t.dateValue,newLocalDay:e,utcDate:null!==(n=t.schedule)&&void 0!==n?n:""}),a=r.utcDate,s=r.dateType,i=r.dateValue;return on(on({},t),{dateType:s,dateValue:i,schedule:a})}function fn(e){var t=e.utcDate,n=e.dateType,r=e.dateValue,a=e.newLocalDay;if("exact"===n){var s=(0,D.date)("H:i",t);return{utcDate:(0,D.wpifyDateTime)("c",a,s),dateType:n,dateValue:a}}var i=(0,D.date)("Y-m-d",t),o=w()("".concat(i,"T12:00:00.000Z")),u=w()("".concat(a,"T12:00:00.000Z")).diff(o,"days"),c=("negative-days"===n?-Number.parseInt(r):Number.parseInt(r))+u;return c<0?{utcDate:w()(t).add(u,"days").toISOString(),dateType:"negative-days",dateValue:"".concat(Math.abs(c))}:{utcDate:w()(t).add(u,"days").toISOString(),dateType:"positive-days",dateValue:"".concat(c)}}var pn=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}u((r=r.apply(e,t||[])).next())}))},hn=function(e,t){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function yn(){return pn(this,arguments,Promise,(function(e){var t,n,r,a;return void 0===e&&(e=""),hn(this,(function(s){switch(s.label){case 0:return e=(0,h.trim)(e),[4,(0,i.dispatch)(mr).setUnscheduledPostsSearchTimeout(0)];case 1:if(s.sent(),!(0,i.select)(mr).areThereUnscheduledPostsToLoad(e))return[2];if((0,i.select)(mr).isLoadingUnscheduledPosts(e))return[2];s.label=2;case 2:return s.trys.push([2,8,,10]),[4,(0,i.dispatch)(mr).setIsLoadingUnscheduledPosts(e,!0)];case 3:return s.sent(),t=(0,i.select)(mr).getLastLoadedPageInUnscheduled(e),n=(0,h.map)((0,i.select)(re.store).getPostTypes("calendar"),"name"),[4,rn({path:(0,an.addQueryArgs)("/nelio-content/v1/post/search",{page:t+1,per_page:15,query:e,status:"nc_unscheduled",type:n.join(",")}),method:"GET"})];case 4:return r=s.sent(),a=r.results,[4,(0,i.dispatch)(re.store).receivePosts(a)];case 5:return s.sent(),[4,(0,i.dispatch)(mr).updateUnscheduledPostsPagination(e,t+1,r.pagination.pages)];case 6:return s.sent(),[4,(0,i.dispatch)(mr).setIsLoadingUnscheduledPosts(e,!1)];case 7:return s.sent(),[3,10];case 8:return[4,ln(s.sent())];case 9:return s.sent(),[3,10];case 10:return[2]}}))}))}var gn=function(){return gn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},gn.apply(this,arguments)},vn=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}u((r=r.apply(e,t||[])).next())}))},mn=function(e,t){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function En(e,t){return vn(this,void 0,Promise,(function(){var n,r,a,s,o,u;return mn(this,(function(c){switch(c.label){case 0:if(!(n=(0,i.select)(re.store).getTask(e)))return[2];if((0,D.date)("Y-m-d",n.dateDue)===t)return[2];c.label=1;case 1:return c.trys.push([1,5,,7]),r=function(e,t){var n=fn({dateType:t.dateType,dateValue:t.dateValue,newLocalDay:e,utcDate:t.dateDue}),r=n.utcDate,a=n.dateType,s=n.dateValue;return on(on({},t),{dateType:a,dateValue:s,dateDue:r})}(t,n),[4,Sn(r)];case 2:return c.sent(),a=(0,i.select)(re.store).getSiteId(),s=(0,i.select)(re.store).getApiRoot(),o=(0,i.select)(re.store).getAuthenticationToken(),[4,rn({url:"".concat(s,"/site/").concat(a,"/task/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(o)},data:gn(gn({},r),{baseDatetime:"reschedule"})})];case 3:return[4,An(c.sent())];case 4:return c.sent(),[3,7];case 5:return u=c.sent(),[4,Dn(n,u)];case 6:return c.sent(),[3,7];case 7:return[2]}}))}))}function bn(e){return vn(this,void 0,Promise,(function(){var t,n,r,a,s;return mn(this,(function(o){switch(o.label){case 0:if(!(t=(0,i.select)(re.store).getTask(e)))return[2];o.label=1;case 1:return o.trys.push([1,5,,7]),[4,Pn(t)];case 2:return o.sent(),n=(0,i.select)(re.store).getSiteId(),r=(0,i.select)(re.store).getApiRoot(),a=(0,i.select)(re.store).getAuthenticationToken(),[4,rn({url:"".concat(r,"/site/").concat(n,"/task/").concat(e),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(a)}})];case 3:return o.sent(),[4,wn(t)];case 4:return o.sent(),[3,7];case 5:return s=o.sent(),[4,Dn(t,s)];case 6:return o.sent(),[3,7];case 7:return[2]}}))}))}function Tn(e){return vn(this,void 0,Promise,(function(){var t,n,r,a,s,o,u;return mn(this,(function(c){switch(c.label){case 0:if(!(t=(0,i.select)(re.store).getTask(e)))return[2];c.label=1;case 1:return c.trys.push([1,9,,11]),[4,Sn(n=gn(gn({},t),{completed:!t.completed}))];case 2:return c.sent(),r=(0,i.select)(re.store).getSiteId(),a=(0,i.select)(re.store).getApiRoot(),s=(0,i.select)(re.store).getAuthenticationToken(),[4,rn({url:"".concat(a,"/site/").concat(r,"/task/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(s)},data:n})];case 3:if(!(o=c.sent()).completed)return[3,7];c.label=4;case 4:return c.trys.push([4,6,,7]),[4,rn({path:"/nelio-content/v1/notifications/task",method:"POST",data:gn({isNewTask:!1},o)})];case 5:case 6:return c.sent(),[3,7];case 7:return[4,An(gn(gn({},t),o))];case 8:return c.sent(),[3,11];case 9:return u=c.sent(),[4,Dn(t,u)];case 10:return c.sent(),[3,11];case 11:return[2]}}))}))}function Sn(e){return vn(this,void 0,void 0,(function(){return mn(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(mr).markAsUpdating(In(e))];case 1:return t.sent(),[4,(0,i.dispatch)(re.store).receiveTasks(e)];case 2:return t.sent(),[2]}}))}))}function An(e){return vn(this,void 0,void 0,(function(){return mn(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(re.store).receiveTasks(e)];case 1:return t.sent(),[4,(0,i.dispatch)(mr).markAsUpdated(In(e))];case 2:return t.sent(),[2]}}))}))}function Pn(e){return vn(this,void 0,void 0,(function(){return mn(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(mr).markAsUpdating(In(e))];case 1:return t.sent(),[4,(0,i.dispatch)(re.store).removeTask(e.id)];case 2:return t.sent(),[2]}}))}))}function wn(e){return vn(this,void 0,void 0,(function(){return mn(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(mr).markAsUpdated(In(e))];case 1:return t.sent(),[2]}}))}))}function Dn(e,t){return vn(this,void 0,void 0,(function(){return mn(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(re.store).receiveTasks(e)];case 1:return n.sent(),[4,(0,i.dispatch)(mr).markAsUpdated(In(e))];case 2:return n.sent(),[4,ln(t)];case 3:return n.sent(),[2]}}))}))}function In(e){return{type:"task",id:e.id,relatedPostId:e.postId}}var On=function(){return On=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},On.apply(this,arguments)},Rn=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}u((r=r.apply(e,t||[])).next())}))},Ln=function(e,t){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Nn(e,t,n,r){return Rn(this,void 0,Promise,(function(){var a,s,o,u,c,l,d,f,p,h,y,g;return Ln(this,(function(v){switch(v.label){case 0:if(!(a=(0,i.select)(re.store).getSocialMessage(e)))return[2];if(s=null!==(g=(0,Q.extractDateTimeValues)(a.schedule))&&void 0!==g?g:{},o=s.dateValue,u=s.timeValue,o===t&&(!n||u===n))return[2];if(c=n?function(e,t,n){var r,a=(null!==(r=(0,Q.extractDateTimeValues)(n.schedule))&&void 0!==r?r:{}).dateValue;return dn(e,n=on(on({},n),{timeType:"exact",timeValue:t,schedule:(0,D.wpifyDateTime)("c",null!=a?a:"",t)}))}(t,n,a):dn(t,a),"negative-days"===(l=On(On({},c),{recurrenceSettings:r?void 0:c.recurrenceSettings})).dateType)return[2];v.label=1;case 1:return v.trys.push([1,5,,7]),[4,Cn(l)];case 2:return v.sent(),d=(0,i.select)(re.store).getSiteId(),f=(0,i.select)(re.store).getApiRoot(),p=(0,i.select)(re.store).getAuthenticationToken(),[4,rn({url:"".concat(f,"/site/").concat(d,"/social/").concat(e),method:"PUT",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(p)},data:On(On({},l),{baseDatetime:"reschedule"})})];case 3:return h=v.sent(),[4,Mn(a,h)];case 4:return v.sent(),[3,7];case 5:return y=v.sent(),[4,Vn(a,y)];case 6:return v.sent(),[3,7];case 7:return[2]}}))}))}function kn(e,t){return Rn(this,void 0,Promise,(function(){var n,r,a,s,o,u;return Ln(this,(function(c){switch(c.label){case 0:if(!(n=(0,i.select)(re.store).getSocialMessage(e)))return[2];c.label=1;case 1:return c.trys.push([1,5,,7]),[4,xn(n)];case 2:return c.sent(),r=(0,i.select)(re.store).getSiteId(),a=(0,i.select)(re.store).getApiRoot(),s=(0,i.select)(re.store).getAuthenticationToken(),[4,rn({url:"".concat(a,"/site/").concat(r,"/social/").concat(e).concat(t?"/following":""),method:"DELETE",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(s)}})];case 3:return o=c.sent(),[4,Un(n,o)];case 4:return c.sent(),[3,7];case 5:return u=c.sent(),[4,Vn(n,u)];case 6:return c.sent(),[3,7];case 7:return[2]}}))}))}function Cn(e){return Rn(this,void 0,void 0,(function(){return Ln(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(mr).markAsUpdating(Gn(e))];case 1:return t.sent(),[4,(0,i.dispatch)(re.store).receiveSocialMessages(e)];case 2:return t.sent(),[2]}}))}))}function Mn(e,t){return Rn(this,void 0,void 0,(function(){return Ln(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(re.store).removeRecurringMessages(e.recurrenceGroup)];case 1:return n.sent(),[4,(0,i.dispatch)(re.store).receiveSocialMessages(t)];case 2:return n.sent(),(0,h.castArray)(t).map(Gn).filter((function(e){var t=e.type,n=e.id;return(0,i.select)(mr).isSynching(t,n)})).forEach((0,i.dispatch)(mr).markAsUpdated),[2]}}))}))}function xn(e){return Rn(this,void 0,void 0,(function(){return Ln(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(mr).markAsUpdating(Gn(e))];case 1:return t.sent(),[4,(0,i.dispatch)(re.store).removeSocialMessage(e.id)];case 2:return t.sent(),[2]}}))}))}function Un(e,t){return Rn(this,void 0,void 0,(function(){return Ln(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(re.store).removeSocialMessage(e.id)];case 1:return n.sent(),[4,(0,i.dispatch)(re.store).removeRecurringMessages(e.recurrenceGroup)];case 2:return n.sent(),[4,(0,i.dispatch)(re.store).receiveSocialMessages(t)];case 3:return n.sent(),[4,(0,i.dispatch)(mr).markAsUpdated(Gn(e))];case 4:return n.sent(),[2]}}))}))}function Vn(e,t){return Rn(this,void 0,void 0,(function(){return Ln(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(re.store).receiveSocialMessages(e)];case 1:return n.sent(),[4,(0,i.dispatch)(mr).markAsUpdated(Gn(e))];case 2:return n.sent(),[4,ln(t)];case 3:return n.sent(),[2]}}))}))}function Gn(e){return{type:"social",id:e.id,relatedPostId:e.postId,recurrenceGroup:e.recurrenceGroup}}var Fn=function(){return Fn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Fn.apply(this,arguments)},jn=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}u((r=r.apply(e,t||[])).next())}))},Hn=function(e,t){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function Bn(e,t,n){return jn(this,void 0,Promise,(function(){var r,a,s,o,c;return Hn(this,(function(l){switch(l.label){case 0:return[4,u(re.store).getPost(e)];case 1:if(!(r=l.sent()))return[2];if(a=(0,i.select)(re.store).getDefaultTime("post"),(s=function(e,t,n){return on(on({},n),{date:(0,D.wpifyDateTime)("c",e,t)})}(t,n||a,r)).date===r.date)return[2];l.label=2;case 2:return l.trys.push([2,7,,9]),[4,Qn(s)];case 3:return l.sent(),[4,rn({path:(0,an.addQueryArgs)("/nelio-content/v1/post/".concat(e,"/reschedule"),{day:t,hour:n,defaultHour:a}),method:"PUT"})];case 4:return o=l.sent(),[4,(0,i.dispatch)(re.store).reloadPostRelatedItems(o.id)];case 5:return l.sent(),[4,Kn(o)];case 6:return l.sent(),[3,9];case 7:return c=l.sent(),[4,zn(r,c)];case 8:return l.sent(),[3,9];case 9:return[2]}}))}))}function Wn(e){return jn(this,void 0,Promise,(function(){var t,n,r;return Hn(this,(function(a){switch(a.label){case 0:return[4,u(re.store).getPost(e)];case 1:if(!(t=a.sent()))return[2];a.label=2;case 2:return a.trys.push([2,7,,9]),[4,Qn(Fn(Fn({},t),{status:"future"===t.status?"draft":t.status,date:!1}))];case 3:return a.sent(),[4,rn({path:"/nelio-content/v1/post/".concat(e,"/unschedule"),method:"PUT"})];case 4:return n=a.sent(),[4,(0,i.dispatch)(re.store).reloadPostRelatedItems(n.id)];case 5:return a.sent(),[4,Kn(n)];case 6:return a.sent(),[3,9];case 7:return r=a.sent(),[4,zn(t,r)];case 8:return a.sent(),[3,9];case 9:return[2]}}))}))}function Yn(e){return jn(this,void 0,Promise,(function(){var t,n;return Hn(this,(function(r){switch(r.label){case 0:return[4,u(re.store).getPost(e)];case 1:if(!(t=r.sent()))return[2];r.label=2;case 2:return r.trys.push([2,7,,9]),[4,qn(t)];case 3:return r.sent(),[4,rn({path:"/nelio-content/v1/post/".concat(e,"/trash"),method:"PUT"})];case 4:return r.sent(),[4,(0,i.dispatch)(re.store).reloadPostRelatedItems(t.id)];case 5:return r.sent(),[4,Xn(t)];case 6:return r.sent(),[3,9];case 7:return n=r.sent(),[4,zn(t,n)];case 8:return r.sent(),[3,9];case 9:return[2]}}))}))}function Qn(e){return jn(this,void 0,void 0,(function(){return Hn(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(mr).markAsUpdating(Zn(e))];case 1:return t.sent(),[4,(0,i.dispatch)(re.store).receivePosts(e)];case 2:return t.sent(),[2]}}))}))}function Kn(e){return jn(this,void 0,void 0,(function(){return Hn(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(re.store).receivePosts(e)];case 1:return t.sent(),[4,(0,i.dispatch)(mr).markAsUpdated(Zn(e))];case 2:return t.sent(),[2]}}))}))}function qn(e){return jn(this,void 0,void 0,(function(){return Hn(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(mr).markAsUpdating(Zn(e))];case 1:return t.sent(),[4,(0,i.dispatch)(re.store).removePost(e.id)];case 2:return t.sent(),[2]}}))}))}function Xn(e){return jn(this,void 0,void 0,(function(){return Hn(this,(function(t){switch(t.label){case 0:return[4,(0,i.dispatch)(mr).markAsUpdated(Zn(e))];case 1:return t.sent(),[2]}}))}))}function zn(e,t){return jn(this,void 0,void 0,(function(){return Hn(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(mr).markAsUpdated(Zn(e))];case 1:return n.sent(),[4,(0,i.dispatch)(re.store).receivePosts(e)];case 2:return n.sent(),[4,ln(t)];case 3:return n.sent(),[2]}}))}))}function Zn(e){return{type:"post",id:e.id,relatedPostId:e.id}}var $n=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}u((r=r.apply(e,t||[])).next())}))},Jn=function(e,t){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function er(e){return $n(this,void 0,Promise,(function(){var t;return Jn(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(mr).markAsSaving(!0)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,7,,9]),[4,rn({path:"/nelio-content/v1/external-calendars/",method:"POST",data:{url:e}})];case 3:return t=n.sent(),[4,(0,i.dispatch)(mr).receiveExternalCalendars(t)];case 4:return n.sent(),[4,u(re.store).getExternalEvents(t.url)];case 5:return n.sent(),[4,(0,i.dispatch)(mr).closeExternalCalendarEditor()];case 6:return n.sent(),[3,9];case 7:return[4,ln(n.sent())];case 8:return n.sent(),[3,9];case 9:return[4,(0,i.dispatch)(mr).markAsSaving(!1)];case 10:return n.sent(),[2]}}))}))}function tr(e){return $n(this,arguments,Promise,(function(e){var t,n=e.url,r=e.name;return Jn(this,(function(e){switch(e.label){case 0:return[4,(0,i.dispatch)(mr).markAsSaving(!0)];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,5,,7]),[4,rn({path:"/nelio-content/v1/external-calendars/",method:"PUT",data:{url:n,name:r}})];case 3:return t=e.sent(),[4,(0,i.dispatch)(mr).receiveExternalCalendars(t)];case 4:return e.sent(),[3,7];case 5:return[4,ln(e.sent())];case 6:return e.sent(),[3,7];case 7:return[4,(0,i.dispatch)(mr).closeExternalCalendarEditor()];case 8:return e.sent(),[4,(0,i.dispatch)(mr).markAsSaving(!1)];case 9:return e.sent(),[2]}}))}))}function nr(e){return $n(this,void 0,Promise,(function(){var t;return Jn(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(mr).markAsDeleting(e,!0)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,8,,10]),[4,rn({path:(0,an.addQueryArgs)("/nelio-content/v1/external-calendars/",{url:e}),method:"DELETE"})];case 3:return n.sent(),[4,(0,i.dispatch)(mr).removeExternalCalendar(e)];case 4:return n.sent(),[4,u(re.store).getExternalEvents(e)];case 5:return t=n.sent(),[4,(0,i.dispatch)(re.store).invalidateResolution("getExternalEvents",[e])];case 6:return n.sent(),[4,(0,i.dispatch)(re.store).removeExternalEvents(t.map((function(e){return e.id})))];case 7:return n.sent(),[3,10];case 8:return[4,ln(n.sent())];case 9:return n.sent(),[3,10];case 10:return[4,(0,i.dispatch)(mr).markAsDeleting(e,!1)];case 11:return n.sent(),[2]}}))}))}var rr=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}u((r=r.apply(e,t||[])).next())}))},ar=function(e,t){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function sr(){return rr(this,arguments,Promise,(function(e){var t;return void 0===e&&(e=500),ar(this,(function(n){switch(n.label){case 0:return t=(0,i.select)(re.store).getToday(),[4,(0,i.dispatch)(mr).setFocusDay(t)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,4,,6]),[4,(0,i.dispatch)(mr).loadItemsIn(e)];case 3:return n.sent(),[3,6];case 4:return[4,ln(n.sent())];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))}function ir(){return rr(this,arguments,Promise,(function(e){var t,n,r,a,s;return void 0===e&&(e=500),ar(this,(function(o){switch(o.label){case 0:return t=(0,i.select)(mr).getCalendarMode(),n=(0,i.select)(mr).getFocusDay(),r=w()((0,D.wpifyDateTime)("c",n,"12:00")),a=r.clone(),"month"===t?a.date(1).add(1,"month"):(s=(0,i.select)(mr).getNumberOfVisibleDays(),a.add(s,"days")),[4,(0,i.dispatch)(mr).setFocusDay((0,D.date)("Y-m-d",a))];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,4,,6]),[4,(0,i.dispatch)(mr).loadItemsIn(e)];case 3:return o.sent(),[3,6];case 4:return[4,ln(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function or(){return rr(this,arguments,Promise,(function(e){var t,n,r,a,s;return void 0===e&&(e=500),ar(this,(function(o){switch(o.label){case 0:return t=(0,i.select)(mr).getCalendarMode(),n=(0,i.select)(mr).getFocusDay(),r=w()((0,D.wpifyDateTime)("c",n,"12:00")),a=r.clone(),"month"===t?a.date(1).subtract(1,"month"):(s=(0,i.select)(mr).getNumberOfVisibleDays(),a.subtract(s,"days")),[4,(0,i.dispatch)(mr).setFocusDay((0,D.date)("Y-m-d",a))];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,4,,6]),[4,(0,i.dispatch)(mr).loadItemsIn(e)];case 3:return o.sent(),[3,6];case 4:return[4,ln(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ur(e){return rr(this,arguments,Promise,(function(e,t){return void 0===t&&(t=500),ar(this,(function(n){switch(n.label){case 0:return[4,(0,i.dispatch)(mr)._setCalendarMode(e)];case 1:n.sent(),n.label=2;case 2:return n.trys.push([2,4,,6]),[4,(0,i.dispatch)(mr).loadItemsIn(t)];case 3:return n.sent(),[3,6];case 4:return[4,ln(n.sent())];case 5:return n.sent(),[3,6];case 6:return[2]}}))}))}var cr=function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function i(e){try{u(r.next(e))}catch(e){s(e)}}function o(e){try{u(r.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,o)}u((r=r.apply(e,t||[])).next())}))},lr=function(e,t){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};function dr(){return cr(this,void 0,Promise,(function(){return lr(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,4]),[4,fr(0)];case 1:case 3:return e.sent(),[3,4];case 2:return[4,ln(e.sent())];case 4:return[2]}}))}))}function fr(e){return cr(this,void 0,Promise,(function(){var t,n;return lr(this,(function(r){switch(r.label){case 0:if((t=(0,i.select)(mr).getLoaderTimeout())&&clearTimeout(t),e)return[3,6];r.label=1;case 1:return r.trys.push([1,3,,5]),[4,pr()];case 2:return r.sent(),[3,5];case 3:return[4,ln(r.sent())];case 4:return r.sent(),[3,5];case 5:return[2];case 6:return n=setTimeout((function(){(0,i.dispatch)(mr).loadItemsNow()}),e),[4,(0,i.dispatch)(mr).setLoaderTimeout(n)];case 7:return r.sent(),[2]}}))}))}function pr(){return cr(this,void 0,void 0,(function(){var e,t,n,r,a,s;return lr(this,(function(o){switch(o.label){case 0:return[4,(0,i.dispatch)(mr).setLoaderTimeout(0)];case 1:return o.sent(),e=(0,i.select)(re.store).getFirstDayOfWeek(),t=(0,i.select)(mr).getFirstDay(e),n=(0,i.select)(mr).getLastDay(e),[4,(0,i.dispatch)(mr).markPeriodAsLoading(t,n)];case 2:return o.sent(),(0,i.select)(mr).isPeriodReady(t,n)?[4,(0,i.dispatch)(mr).markPeriodAsLoaded(t,n)]:[3,4];case 3:return o.sent(),[2];case 4:r=(0,D.date)("Y-m-d",w()(t).add(-2,"days")),a=(0,D.date)("Y-m-d",w()(n).add(2,"days")),o.label=5;case 5:return o.trys.push([5,8,,10]),[4,Promise.all([hr(r,a),yr(r,a),gr(r,a)])];case 6:return o.sent(),[4,(0,i.dispatch)(mr).markPeriodAsLoaded(t,n)];case 7:return o.sent(),[3,10];case 8:return s=o.sent(),[4,(0,i.dispatch)(mr).markPeriodAsLoaded(t,n)];case 9:throw o.sent(),s;case 10:return[2]}}))}))}function hr(e,t){return cr(this,void 0,void 0,(function(){var n,r;return lr(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n=(0,i.select)(re.store).getPostTypes("calendar").map((function(e){return e.name})),[4,rn({path:(0,an.addQueryArgs)("/nelio-content/v1/calendar/posts",{from:e,to:t,type:n.join(",")}),method:"GET"})];case 1:return(r=a.sent()).forEach(ae.doCalendarPostLoaded),[4,(0,i.dispatch)(re.store).receivePosts(r)];case 2:return a.sent(),[3,4];case 3:throw a.sent();case 4:return[2]}}))}))}function yr(e,t,n){return cr(this,void 0,void 0,(function(){var r,a,s,o;return lr(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),r=(0,i.select)(re.store).getSiteId(),a=(0,i.select)(re.store).getApiRoot(),s=(0,i.select)(re.store).getAuthenticationToken(),[4,rn({url:(0,an.addQueryArgs)("".concat(a,"/site/").concat(r,"/calendar/messages"),{from:e,to:t,page:n}),method:"GET",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(s)}})];case 1:return o=u.sent(),(0,Q.isEmpty)(o.messages)?[2]:[4,(0,i.dispatch)(re.store).receiveSocialMessages(o.messages)];case 2:return u.sent(),[4,(0,i.dispatch)(re.store).markSocialPublicationAsPaused(o.isMessagePublicationPaused)];case 3:return u.sent(),o.page?[4,yr(e,t,o.page)]:[3,5];case 4:u.sent(),u.label=5;case 5:return[3,7];case 6:throw u.sent();case 7:return[2]}}))}))}function gr(e,t,n){return cr(this,void 0,void 0,(function(){var r,a,s,o;return lr(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),r=(0,i.select)(re.store).getSiteId(),a=(0,i.select)(re.store).getApiRoot(),s=(0,i.select)(re.store).getAuthenticationToken(),[4,rn({url:(0,an.addQueryArgs)("".concat(a,"/site/").concat(r,"/calendar/tasks"),{from:e,to:t,page:n}),method:"GET",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(s)}})];case 1:return o=u.sent(),(0,Q.isEmpty)(o.tasks)?[2]:[4,(0,i.dispatch)(re.store).receiveTasks(o.tasks)];case 2:return u.sent(),o.page?[4,gr(e,t,o.page)]:[3,4];case 3:u.sent(),u.label=4;case 4:return[3,6];case 5:throw u.sent();case 6:return[2]}}))}))}var vr=function(){return vr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},vr.apply(this,arguments)},mr=(0,i.createReduxStore)("nelio-content/calendar",{reducer:k,controls:i.controls,actions:vr(vr({},r),a),selectors:n});!function(e){(0,i.register)(e)}(mr);const Er=window.wp.i18n,br={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var Tr,Sr=new Uint8Array(16);function Ar(){if(!Tr&&!(Tr="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tr(Sr)}for(var Pr=[],wr=0;wr<256;++wr)Pr.push((wr+256).toString(16).slice(1));const Dr=function(e,t,n){if(br.randomUUID&&!t&&!e)return br.randomUUID();var r=(e=e||{}).random||(e.rng||Ar)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return function(e,t=0){return(Pr[e[t+0]]+Pr[e[t+1]]+Pr[e[t+2]]+Pr[e[t+3]]+"-"+Pr[e[t+4]]+Pr[e[t+5]]+"-"+Pr[e[t+6]]+Pr[e[t+7]]+"-"+Pr[e[t+8]]+Pr[e[t+9]]+"-"+Pr[e[t+10]]+Pr[e[t+11]]+Pr[e[t+12]]+Pr[e[t+13]]+Pr[e[t+14]]+Pr[e[t+15]]).toLowerCase()}(r)},Ir=window.NelioContent.postQuickEditor,_r=window.NelioContent.socialMessageEditor,Or=window.NelioContent.taskEditor;var Rr=function(){return Rr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Rr.apply(this,arguments)},Lr=function(e,t){return o((function(n){switch(e){case"post":return n(re.store).getPost(t);case"social":return n(re.store).getSocialMessage(t);case"task":return n(re.store).getTask(t);case"external-event":case"internal-event":return;default:return n(re.store).getPremiumItem(e,t)}}))},Nr=function(){return o((function(e){return e(mr).getDraggingItem()}))},kr=function(){return o((function(e){return e(mr).getHoverItem()}))},Cr=function(e){return o((function(t){return t(re.store).getDefaultTime(e)}))},Mr=function(e){return o((function(t){var n=t(re.store).getToday();return e<n?"past-day":e===n?"today":"future-day"}))},xr=function(e){var t=o((function(t){return t(mr).areSocialMessagesCollapsedInDay(e)})),n=(0,i.useDispatch)(mr).collapseSocialMessagesInDay;return[t,function(t){return n(t,e)}]},Ur=function(e){var t=ra(e);return o((function(e){var n=e(mr).getNumberOfNonCollapsableMessages,r=(0,h.filter)(t,{type:"social"}),a=n();return Math.max(0,r.length-a)}))},Vr=function(e){var t=ra(e),n=Mr(e),r=Ur(e);return o((function(a){if(!(0,a(mr).areSocialMessagesCollapsedInDay)(e))return t;var s=(0,h.filter)(t,aa),i=s.length-r;if(!r)return t;var o=a(re.store).getSocialMessage,u=(0,h.filter)(s,(function(e){var t,r=e.id;return"past-day"!==n||!!(null===(t=o(r))||void 0===t?void 0:t.sent)})),c=(0,h.map)((0,h.drop)(u,i),"id");return(0,h.filter)(t,(function(e){var t=e.id;return"social"!==e.type||!c.includes(t)}))}))},Gr=function(e,t){var n=Lr(e,t);if(!n)return ta;if("post"===e&&!sa(n))return ta;var r=(0,Q.isFreeItemType)(e)?(0,Q.createItemSummary)(e,n):(0,Q.createPremiumItemSummary)(e,n);return r?{onMouseEnter:function(){return na(r)},onMouseLeave:function(){return na()}}:ta},Fr=function(e){var t=(0,i.useDispatch)(mr),n=t.dragEnd,r=t.dragStart;return e?{onDragStart:function(){r(e)},onDragEnd:function(){n()}}:ia},jr=function(e,t){return o((function(n){if(n(re.store),e&&t){var r=n(re.store).getPostStatuses(e);return(0,h.find)(r,{slug:t})}}))},Hr=function(){return o((function(e){var t=(0,Er._x)("Add New Post","command","nelio-content"),n=(0,e(re.store).getPostTypes)("calendar");return 1===n.length&&n[0]&&n[0].labels.new||t}))},Br=function(){return o((function(e){return e(re.store).canCurrentUserCreatePosts()}))},Wr=function(){return o((function(e){return e(re.store).canCurrentUserCreateMessagesAlways()}))},Yr=function(){return o((function(e){return e(re.store).canCurrentUserCreateTasksAlways()}))},Qr=function(e,t){var n=(0,i.useDispatch)(Ir.store).openNewPostEditor;return function(){return n("calendar",{dateValue:e,timeValue:t})}},Kr=function(e,t){var n=e===Xr(),r=Wr(),a=(0,re.useFeatureGuard)("calendar/create-messages",r),s=(0,i.useDispatch)(_r.store).openNewSocialMessageEditor;return a((function(){return s({dateType:n?"predefined-offset":"exact",dateValue:n?"0":e,timeType:n?"predefined-offset":"exact",timeValue:n?"0":t},{context:"calendar"})}))},qr=function(e){var t=Yr(),n=(0,re.useFeatureGuard)("calendar/create-tasks",t),r=(0,i.useDispatch)(Or.store).openNewTaskEditor;return n((function(){return r({dateType:"exact",dateValue:e},{post:void 0,context:"calendar"})}))},Xr=function(){return o((function(e){return e(re.store).getToday()}))},zr=function(e,t){var n=(0,i.useDispatch)(mr),r=n.dragEnd,a=n.reschedulePost,s=n.rescheduleSocialMessage,o=n.requestRecurringRescheduleMode,u=n.rescheduleTask,c=(0,re.useFeatureGuard)("calendar/schedule-reusable-messages"),l=function(n){if("reusable-message"===n.type)return c((function(){return function(e,t,n){return r=this,a=void 0,o=function(){var r,a,s,o,u,c,l,d,f,p;return function(e,t){var n,r,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(h){switch(h.label){case 0:return(r=(0,i.select)(re.store).getReusableMessage(e))?(a={dateType:"exact",dateValue:t,timeType:"exact",timeValue:"exact"===r.timeType?r.timeValue:oa(r.timeValue,n)},s=Rr(Rr(Rr(Rr({},(0,Q.createSocialMessage)()),r),a),{id:Dr(),schedule:(0,Q.getSocialMessageSchedule)(Rr({baseDatetime:"now"},a))}),o=(0,Q.createItemSummary)("social",s),[4,(0,i.dispatch)(re.store).receiveSocialMessages(s)]):[2];case 1:return h.sent(),[4,(0,i.dispatch)(mr).markAsUpdating(o)];case 2:h.sent(),h.label=3;case 3:return h.trys.push([3,6,,8]),u=(0,i.select)(re.store).getSiteId(),c=(0,i.select)(re.store).getApiRoot(),l=(0,i.select)(re.store).getAuthenticationToken(),d=(0,i.select)(re.store).getSiteTimezone(),[4,rn({url:"".concat(c,"/site/").concat(u,"/social"),method:"POST",credentials:"omit",mode:"cors",headers:{Authorization:"Bearer ".concat(l)},data:Rr(Rr({},s),{baseDatetime:"now",timezone:d,slots:[{id:s.id,profileId:s.profileId,targetName:null!==(p=s.targetName)&&void 0!==p?p:"default",network:s.network,type:s.type}]})})];case 4:return f=h.sent(),[4,(0,i.dispatch)(re.store).receiveSocialMessages(f)];case 5:return h.sent(),[3,8];case 6:return h.sent(),[4,(0,i.dispatch)(re.store).removeSocialMessage(s.id)];case 7:return h.sent(),[3,8];case 8:return[4,(0,i.dispatch)(mr).markAsUpdated(o)];case 9:return h.sent(),[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{u(o.next(e))}catch(e){t(e)}}function i(e){try{u(o.throw(e))}catch(e){t(e)}}function u(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(n,i)}u((o=o.apply(r,a||[])).next())}));var r,a,s,o}(n.id,e,t)}))();var r=n.id,l=n.type,d=(0,i.select)(re.store).getItem(l,r);if(d){var f=t?function(e,t,n){if("task"===e)return"";var r=(0,Q.extractDateTimeValues)("post"===e?t.date:t.schedule);if(!r)return"";var a=r.timeValue,s=Number.parseInt(a.substring(0,2)),i=Number.parseInt(a.substring(3,5)),o=s%4+n;return(0,h.padStart)("".concat(o),2,"0")+":"+(0,h.padStart)("".concat(i),2,"0")}(l,d,t):void 0;switch(l){case"post":return a(r,e,f);case"social":var p=(0,i.select)(re.store).getSocialMessage(r);return(0,Q.isRecurringMessage)(p)&&!(0,Q.isRecurringSource)(p)?o({id:r,day:e,hour:f}):s(r,e,f);case"task":return u(r,e)}}};return function(e){return r(),l(e),e}},Zr=function(){return o((function(e){return e(mr).getMinimumRowHeight()}))},$r=function(){return o((function(e){var t=e(re.store).getFirstDayOfWeek();return e(mr).getFirstDay(t)}))},Jr=function(){return o((function(e){return e(mr).getNumberOfVisibleDays()}))},ea=function(){var e=ua();return o((function(t){var n=t(mr),r=n.getDraggingItem,a=n.getSidePane,s=r(),i=a();if("none"!==i)switch(null==s?void 0:s.type){case"post":return"unscheduled-posts";case"reusable-message":return"reusable-messages"}return"none"===i&&e?"subscribe-banner":i}))},ta={onMouseEnter:function(){},onMouseLeave:function(){}},na=(0,h.debounce)((0,i.dispatch)(mr).setHoverItem,200),ra=function(e){return o((function(t){var n=t(re.store),r=n.getItem,a=n.getItemsInDay,s=t(mr).isItemVisible;return(0,h.filter)(a(e),(function(e){var t=e.id,n=e.type,a=r(n,t);return!!a&&s(n,a)}))}))},aa=function(e){return"social"===e.type},sa=function(e){return!!e.date},ia={onDragStart:function(){},onDragEnd:function(){}};function oa(e,t){var n=function(e){return e<10?"0".concat(e):e},r=n(Math.floor(60*Math.random()));if(t)return"".concat(n(t),":").concat(r);switch(t=Math.floor(4*Math.random()),e){case"morning":return"".concat(n(t+8),":").concat(r);case"noon":return"".concat(n(t+12),":").concat(r);case"afternoon":return"".concat(n(t+16),":").concat(r);case"night":return"".concat(n(t+20),":").concat(r);default:return"10:".concat(r)}}var ua=function(){return o((function(e){return!e(re.store).isSubscribed()&&1200<=e(mr).getCalendarWidth()}))}})();var n=NelioContent="undefined"==typeof NelioContent?{}:NelioContent;for(var r in t)n[r]=t[r];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();